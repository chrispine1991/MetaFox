"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-core-blocks-ListView-ListViewBlock"],{33187:function(e,t,l){l.r(t),l.d(t,{default:function(){return h}});var n=l(85597),r=l(21241),a=l(30030),o=l(71682),i=l(1469),s=l.n(i),c=l(96026),u=l.n(c),d=l(27361),m=l.n(d),g=l(67294),p=l(86706),v=l(60408),f=l(18377);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}var h=(0,n.h6e)(function({title:e,itemView:t,itemProps:l={},gridItemProps:i={},gridContainerProps:c={spacing:2},displayLimit:d=4,pagingId:h,canLoadMore:P,buttonMessageLoadmore:k="view_more",collapsible:w,messagePagination:b,handleUpdateLastRead:_,canLoadSmooth:y,loadMore:Z,numberOfItemsPerPage:x,emptyPage:O="core.block.no_content",emptyPageProps:S,isLoadMoreScroll:C,isLoadMoreButton:N,isLoadMorePagination:A,errorPage:I,hasSort:j=!1,titleBackend:U=!1,moduleName:L,resourceName:V,actionSortName:B}){var D,M,Q,W,$,q,z;let{jsxBackend:F,usePageParams:G,i18n:H,useWidthBreakpoint:J}=(0,n.OgA)(),K=G(),{page:R}=K,T=F.get(t),X=F.get(`${t}.skeleton`),Y=A?parseInt(R||1,10):1,[ee,et]=(0,n.lWA)(!0),el=J(),{limit:en=10,as:er}=w||{},ea=F.get(er),[eo,ei]=g.useState(!0),es=12/parseInt(m()(i,el)||12,10)*2,[ec,eu]=g.useState(Y),ed=(0,p.v9)(e=>(0,n.Drc)(e,h))||(0,n.rjd)(),em=g.useCallback(()=>{C&&eu(e=>e+1)},[C]);(0,n.QP1)(em);let eg=g.useCallback(()=>{Z(),eu(e=>e+1)},[h]);g.useEffect(()=>{et&&et()},[null==ed?void 0:ed.page,et]),g.useEffect(()=>{!C||(null==ed?void 0:ed.ended)||(null==ed?void 0:ed.loading)||ee||(null==ed?void 0:ed.dirty)||eg()},[null==ed?void 0:ed.loading,null==ed?void 0:ed.page,C,null==ed?void 0:ed.ended,null==ed?void 0:ed.dirty,ee,eg]);let ep=x||20,ev=A?ep:es;!P&&d&&(ev=d);let{loading:ef,refreshing:eE,error:eh,ended:eP,initialized:ek,pagesOffset:ew,dirty:eb}=null!=ed?ed:{},e_=P?ed.ids.slice(0,ec*ep):ed.ids.slice(0,d||ed.ids.length);A&&(e_=(null===($=ed.pages[ec])||void 0===$?void 0:$.ids)||[]);let ey=!P&&w&&ed.ids.length>en;if(ey&&(e_=ey&&eo?ed.ids.slice(0,en):ed.ids),g.useEffect(()=>{_&&_()},[ec]),g.useEffect(()=>{if(!A)return;let e=parseInt((null==K?void 0:K.page)||(null==ew?void 0:ew.current_page),10);eu(e),Z()},[A,null==K?void 0:K.page,null==ew?void 0:ew.current_page]),g.useEffect(()=>{eE&&!eb&&Z()},[ek,eE]),!T)return null;if(i.xs||(i.xs=12),eh){if("hide"===I)return null;let eZ=m()(eh,"response.data.error")||m()(eh,"response.data.message"),ex=403===m()(eh,"response.status")?"core.block.error403":"core.block.error404",eO=F.get(ex);return g.createElement(eO,{title:eZ})}let eS=g.createElement(f.Z,{sx:{display:"block"}},g.createElement(f.Z,{component:"h2",mt:0,mb:.5},null==ew?void 0:ew.title),g.createElement(f.Z,{color:"text.secondary"},null==ew?void 0:ew.description));if(!e_.length&&eP||eh){if("hide"===O)return null;let eC=F.get(O),{noBlock:eN,contentStyle:eA}=S||{};return eN?g.createElement(eC,{...S}):g.createElement(r.gO,null,U?g.createElement(r.ti,{children:eS}):g.createElement(r.ti,{title:e}),g.createElement(r.sU,E({},eA),A?g.createElement(v.tl,{currentPage:ec,from:null===(q=ed.pages[ec])||void 0===q?void 0:q.from,to:null===(z=ed.pages[ec])||void 0===z?void 0:z.to,total:(null==ew?void 0:ew.total_item)||(null==ew?void 0:ew.total),itemsPerPage:ep,message:b,hasSort:j,moduleName:L,resourceName:V,actionName:B}):null,g.createElement(eC,{...S})))}return ek?g.createElement(r.gO,null,U?g.createElement(r.ti,{children:eS}):g.createElement(r.ti,{title:e}),g.createElement(r.sU,null,A?g.createElement(v.tl,{currentPage:ec,from:null===(D=ed.pages[ec])||void 0===D?void 0:D.from,to:null===(M=ed.pages[ec])||void 0===M?void 0:M.to,total:(null==ew?void 0:ew.total_item)||(null==ew?void 0:ew.total),itemsPerPage:ep,message:b,hasSort:j,moduleName:L,resourceName:V,actionName:B}):null,g.createElement(a.ZP,E({container:!0},c),s()(e_)&&e_.map(e=>g.createElement(T,{identity:e,itemProps:l,key:e.toString(),wrapAs:a.ZP,wrapProps:i,pagingId:h})),y&&(C&&!eP||A&&ef||N&&ef)&&X?u()(0,A&&e_.length?1:ev).map(e=>g.createElement(X,{wrapAs:a.ZP,wrapProps:i,itemProps:l,key:e.toString()})):null),A?g.createElement(v.tl,{currentPage:ec,from:null===(Q=ed.pages[ec])||void 0===Q?void 0:Q.from,to:null===(W=ed.pages[ec])||void 0===W?void 0:W.to,total:(null==ew?void 0:ew.total_item)||(null==ew?void 0:ew.total),itemsPerPage:ep,message:b}):null,N&&(!eP&&!ef||ec<(null==ed?void 0:ed.page))?g.createElement(v.l7,{handleClick:eg,message:k}):null,ey&&ea?g.createElement(ea,{setCollapsed:ei,collapsed:eo}):null)):X?g.createElement(r.gO,null,U?g.createElement(r.ti,null,g.createElement(o.Z,{height:24,width:160})):g.createElement(r.ti,{title:e}),g.createElement(r.sU,null,g.createElement(a.ZP,E({container:!0},c),u()(0,ev).map(e=>g.createElement(X,{wrapAs:a.ZP,wrapProps:i,itemProps:l,key:e.toString()}))))):g.createElement("div",null,H.formatMessage({id:"loading_dots"}))})}}]);