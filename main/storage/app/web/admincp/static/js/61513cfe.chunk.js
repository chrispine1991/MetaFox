"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["dialogs"],{86980:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var n=a(85597),i=a(21822),r=a(29620),o=a(72962),l=a(24498),s=a(77745),c=a(22949),d=a(28583),m=a.n(d),u=a(67294);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function g({title:e,message:t,label:a,value:d,helperText:g,positiveButton:h,negativeButton:f}){let{i18n:v,useDialog:b}=(0,n.OgA)(),{setDialogValue:y,disableBackdropClick:x,dialogProps:E}=b(),w=()=>{y(!1)};u.useEffect(()=>{x(!0)},[]);let{label:C,...k}=m()({label:v.formatMessage({id:"cancel"}),color:"primary"},f),{label:S,...Z}=m()({label:v.formatMessage({id:"ok"}),color:"primary"},h);e=null!=e?e:v.formatMessage({id:"prompt"});let[P,M]=u.useState(null!=d?d:""),_=()=>{y(P)};return u.createElement(r.Z,p({},E,{fullScreen:!1,"data-testid":"popupConfirm",maxWidth:"xs",role:"alertdialog",fullWidth:!0,"aria-modal":!0,variant:"alert"}),u.createElement(s.Z,{id:"dialogTitle","data-testid":"popupTitle"},null!=e?e:"Prompt"),u.createElement(l.Z,{dividers:!1},u.createElement(c.Z,{onChange:e=>M(e.currentTarget.value),autoFocus:!0,defaultValue:d,fullWidth:!0,required:!0,placeholder:a,InputLabelProps:{shrink:!1},variant:"outlined",helperText:g})),u.createElement(o.Z,null,u.createElement(i.Z,p({},Z,{role:"button","data-testid":"buttonCancel",tabIndex:0,variant:"contained",size:"medium",color:"primary",disabled:!P.trim().length,onClick:_,sx:{minWidth:120}}),S),u.createElement(i.Z,p({},k,{role:"button","data-testid":"buttonSubmit",tabIndex:1,variant:"outlined",size:"medium",color:"primary",sx:{minWidth:120},onClick:w}),C)))}},25391:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var n=a(85597),i=a(16473),r=a(27274),o=a(29620),l=a(72962),s=a(24498),c=a(77745),d=a(21822),m=a(22949),u=a(12902),p=a(67294),g=a(22410),h=a(73327),f=(0,g.Z)(e=>(0,h.Z)({root:{},actionWrapper:{marginBottom:e.spacing(2),paddingRight:e.spacing(2),"& .MuiButton-root":{marginLeft:e.spacing(1.5)}},suggestionsWrapper:{position:"fixed",zIndex:1,backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(2),borderRadius:"4px",boxShadow:e.shadows[2]},userWrapper:{margin:e.spacing(1,0),minWidth:"385px"},userOuter:{display:"inline-flex",alignItems:"center",padding:e.spacing(.5),color:e.palette.primary.main,border:e.mixins.border("primary"),marginRight:e.spacing(.5),marginBottom:e.spacing(.5),"&:hover":{background:e.palette.primary.main,color:"#fff","& $removeBtn":{color:"#fff"}}},removeBtn:{color:e.palette.primary.main,fontSize:11,margin:e.spacing(0,.5,0,1),cursor:"pointer"},name:{fontSize:e.mixins.pxToRem(13)}}),{name:"DialogCreateCustomListPrivacy"});function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let b=(0,g.Z)(e=>(0,h.Z)({root:{},mentionSuggestionsWrapper:{position:"absolute",backgroundColor:e.mixins.backgroundColor("paper"),borderRadius:4},mentionOptionWrapper:{display:"flex",alignItems:"center",padding:e.spacing(.5,0),cursor:"pointer"},avatar:{width:32,height:32,borderRadius:"50%"},name:{marginLeft:e.spacing(1),color:e.palette.text.primary,fontSize:e.mixins.pxToRem(13)}}));function y({user:e,...t}){let a=b();return p.createElement("div",v({className:a.root},t),p.createElement("div",{className:a.mentionOptionWrapper},p.createElement("img",{src:e.avatar,alt:e.name,className:a.avatar}),p.createElement("span",{className:a.name},e.name)))}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function E(e){let{customList:t}=e,a=f(),{useDialog:g,i18n:h,apiClient:v}=(0,n.OgA)(),{dialogProps:b,closeDialog:E,setDialogValue:w}=g(),[C,k]=p.useState(""),[S,Z]=p.useState([]),[P,M]=p.useState([]),[_,O]=p.useState({listName:!1,friends:!1}),[R,z]=p.useState(!1),[I,W]=p.useState([]),N=p.useRef(),T=p.useCallback(({value:e})=>{v.request({method:"get",url:"/friend",params:{q:e,limit:6}}).then(e=>{var t,a,n;return(null===(t=e.data)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.length)?null===(n=e.data)||void 0===n?void 0:n.data:[]}).then(e=>{return e.map(e=>({avatar:(0,r.Q4)(e.avatar,"240"),name:e.full_name,link:`/${e.resource_name}/${e.id}`}))}).then(e=>W(e))},[v]),A=()=>{let e=!1;(L(C)||""===C)&&(O(e=>({...e,listName:!0})),e=!0),0===P.length&&(O(e=>({...e,friends:!0})),e=!0),e||(E(),w(C))},j=e=>{O(e=>({...e,listName:!1}));let t=e.target.value;k(t),L(t)&&O(e=>({...e,listName:!0}))},$=e=>{O(e=>({...e,friends:!1}));let t=e.target.value;Z(t),T({value:t}),z(!0)},L=e=>{return t.includes(e)},B=e=>{if(M(t=>[...t,e]),Z([]),z(!1),N){var t;null==N||null===(t=N.current)||void 0===t||t.focus()}O(e=>({...e,friends:!1}))},D=e=>{M((0,u.ZP)(P,t=>{t.splice(e,1)})),0===P.length&&O(e=>({...e,friends:!0}))};return p.createElement(o.Z,x({},b),p.createElement(c.Z,null,h.formatMessage({id:"create_friends_list"})),p.createElement(s.Z,null,p.createElement(m.Z,{error:_.listName,placeholder:h.formatMessage({id:"list_name"}),label:h.formatMessage({id:"list_name"}),variant:"outlined",fullWidth:!0,margin:"normal",size:"small",value:C,onChange:e=>j(e),autoFocus:!0}),P&&0<P.length?p.createElement("div",{className:a.userWrapper},P.map((e,t)=>p.createElement("div",{key:t.toString(),className:a.userOuter},p.createElement("span",{className:a.name},e.name),p.createElement(i.zb,{icon:"ico-close",className:a.removeBtn,onClick:()=>D(t)})))):null,p.createElement(m.Z,{error:_.friends,placeholder:h.formatMessage({id:"add_friend"}),label:h.formatMessage({id:"add_friend"}),variant:"outlined",fullWidth:!0,margin:"normal",size:"small",multiline:!0,value:S,onChange:e=>$(e),inputRef:N}),R&&p.createElement("div",{className:a.suggestionsWrapper},I?I.map((e,t)=>p.createElement(y,{key:t.toString(),user:e,onClick:()=>B(e)})):null)),p.createElement(l.Z,null,p.createElement("div",{className:a.actionWrapper},p.createElement(d.Z,{variant:"outlined",onClick:E,size:"small"},h.formatMessage({id:"back"})),p.createElement(d.Z,{variant:"contained",onClick:A,size:"small",color:"primary"},h.formatMessage({id:"create"})))))}},11437:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var n=a(85597),i=a(92114),r=a(17171),o=a(39628),l=a(1469),s=a.n(l),c=a(41609),d=a.n(c),m=a(96026),u=a.n(m),p=a(21822),g=a(49960),h=a(18037),f=a(52922),v=a(91647),b=a(67294),y=a(12902),x=a(22410),E=a(73327),w=(0,x.Z)(e=>(0,E.Z)({root:{},shareWith:{fontSize:e.mixins.pxToRem(15),color:e.palette.text.primary,fontWeight:e.typography.fontWeightBold,marginBottom:e.spacing(1)},linkContainer:{marginTop:e.spacing(1),display:"flex",alignItems:"center"}}),{name:"DialogCustomListPrivacy"}),C=a(71682),k=(0,x.Z)(e=>(0,E.Z)({root:{height:e.spacing(5),display:"flex",alignItems:"center"},checkbox:{marginRight:e.spacing(1)}}),{name:"DialogCustomListPrivacy"});function S(){let e=k();return b.createElement("div",{className:e.root},b.createElement("div",{className:e.checkbox},b.createElement(C.Z,{variant:"rectangular",width:16,height:16})),b.createElement(C.Z,{variant:"text",width:"50%",height:24}))}var Z=a(21241),P=a(27274);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let _=e=>{let t=[];return e.forEach(e=>{(null==e?void 0:e.is_selected)&&t.push(null==e?void 0:e.id)}),t};function O({value:e,feed:t}){let a=w(),{useDialog:l,i18n:c,useFetchItems:m,dispatch:x,getAcl:E}=(0,n.OgA)(),{dialogProps:C,setDialogValue:k,closeDialog:O}=l(),R=(0,n.oHF)("core","privacy","getCustomPrivacyOptions"),z=E("friend.friend_list.create"),[I,W]=m({dataSource:{apiUrl:R.apiUrl,apiParams:(0,P.aZ)(R.apiParams,t)},normalize:!1}),[N,T]=b.useState(I),[A,j]=b.useState(Array.isArray(e)?e:[]);b.useEffect(()=>{T(I),d()(I)||s()(e)||j(_(I))},[I,e]);let $=()=>{O(),k(A)},L=e=>{j(t=>{return t.find(t=>t==e)?t.filter(t=>t!=e):[...t,e]})},B=b.useCallback(()=>{x({type:"friend/addNewList",meta:{onSuccess:e=>{j(t=>(0,y.ZP)(t,t=>{t.push(e.id)})),T(t=>(0,y.ZP)(t,t=>{t.push(e)}))}}})},[]);return b.createElement(i.Vq,M({},C,{maxWidth:"xs",fullWidth:!0}),b.createElement(i.$N,null,c.formatMessage({id:"custom_privacy"})),b.createElement(i.cZ,null,b.createElement("div",{className:a.shareWith},c.formatMessage({id:"share_with"})),b.createElement(Z.l$,{autoHide:!0,autoHeight:!0,autoHeightMax:200},W?u()(1,5).map(e=>b.createElement(S,{key:e.toString()})):b.createElement(f.Z,null,(null==N?void 0:N.length)===0?b.createElement(v.Z,{paragraph:!0,variant:"body1",margin:"0",color:"textSecondary"},c.formatMessage({id:"there_are_no_friend_list"})):null==N?void 0:N.map((e,t)=>b.createElement(h.Z,{checked:-1<A.indexOf(e.id),key:t.toString(),value:e.id,label:e.title,onChange:()=>L(e.id),control:b.createElement(g.Z,{value:e,icon:b.createElement(o.Z,{fontSize:"small"}),checkedIcon:b.createElement(r.Z,{fontSize:"small"}),color:"primary"})})))),b.createElement("div",{className:a.linkContainer},z&&b.createElement(b.Fragment,null,b.createElement(p.Z,{variant:"link",size:"small",color:"primary",onClick:B},c.formatMessage({id:"create_new_custom_list"})),"\xa0",b.createElement("span",null," ",c.formatMessage({id:"or"})," "),"\xa0"),b.createElement(p.Z,{variant:"link",size:"small",href:"/friend",color:"primary"},c.formatMessage({id:"manage_lists"})))),b.createElement(i.kX,null,b.createElement(p.Z,{variant:"outlined",onClick:O,size:"small"},c.formatMessage({id:"cancel"})),b.createElement(p.Z,{variant:"contained",onClick:$,size:"small",color:"primary",disabled:0===A.length},c.formatMessage({id:"save"}))))}},24615:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var n=a(85597),i=a(92114),r=a(27274),o=a(39348),l=a(30120),s=a(22949),c=a(81719),d=a(67294),m=a(21822),u=a(44373),p=a(71682),g=a(91647);function h({item:{title:e,keywords:t,description:a,previewImage:i,name:r},onItemSelected:o,onKeyWorkClicked:s}){let{i18n:c}=(0,n.OgA)();return d.createElement(d.Fragment,null,d.createElement(l.Z,{component:"div",flexDirection:"row",display:"flex"},d.createElement(l.Z,{component:"div",mr:"16px"},d.createElement(p.Z,{component:"div",variant:"rectangular",width:"120px",height:"80px",animation:!1})),d.createElement(l.Z,{sx:{flex:1}},d.createElement(g.Z,{variant:"h4"},null!=e?e:r),d.createElement(g.Z,{variant:"body1"},t),d.createElement(g.Z,{variant:"body1"},a)),d.createElement(l.Z,{sx:{mt:1.5}},d.createElement(m.Z,{onClick:()=>o(r)},c.formatMessage({id:"create_layout_block"})))),d.createElement(u.Z,{style:{margin:"12px 0"}}))}var f=a(44908),v=a.n(f);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let y=(0,c.ZP)(l.Z,{name:"Editor",slot:"Tag"})(({theme:e})=>({display:"inline-block",color:e.palette.primary.main,cursor:"pointer",fontSize:e.typography.body1.fontSize,background:"#2682d511",margin:"2px",padding:"0 4px",borderRadius:"4px"}));function x(e){let{parentBlockId:t,slotName:a,pageName:c,pageSize:m}=e,{useDialog:u,layoutBackend:p,dispatch:g,i18n:f}=(0,n.OgA)(),{dialogProps:x,closeDialog:E}=u(),[w,C]=d.useState(""),k=p.getAllBlockView(),S=d.useMemo(()=>{let e=[];return Object.values(k).filter(e=>!e.experiment).filter(e=>e.admincp).forEach(({keywords:t})=>{t&&t.split(",").map(e=>e.trim().toLowerCase()).forEach(t=>e.push(t))}),v()(e).filter(Boolean).sort()},[]),Z=e=>{(0,r._v)(150).then(()=>{let n=(0,r.kb)(),i={blockId:n,parentBlockId:t,pageName:c,slotName:a,blockName:e,pageSize:m};p.addBlock(i),g({type:"@layout/editBlock",payload:i})}),E()},P=d.useMemo(()=>Object.values(k).map(e=>({...e})).filter(e=>!e.experiment).filter(e=>e.admincp).filter(Boolean),[]),M=d.useMemo(()=>{if(!w)return P;let e=RegExp((0,r.hr)(w),"i");return P.filter(t=>{return e.test(t.keywords)||e.test(t.title)||e.test(t.description)})},[P,w]);return d.createElement(i.Vq,b({},x,{maxWidth:"md",fullWidth:!0}),d.createElement(i.$N,{id:"alert-dialog-title"},f.formatMessage({id:"create_layout_block"})),d.createElement(i.cZ,{sx:{height:"50vh"}},d.createElement(l.Z,{sx:{display:"flex",flexDirection:"row"}},d.createElement(l.Z,{sx:{width:220,mr:2}},d.createElement(o.Z,{sx:{mb:2},freeSolo:!0,options:S,getOptionLabel:e=>e,onChange:(e,t)=>{C(t)},value:w,renderInput:e=>d.createElement(s.Z,b({},e,{hiddenLabel:!0,autoFocus:!0,fullWidth:!0,size:"small",variant:"outlined",placeholder:f.formatMessage({id:"search"})}))}),S.map(e=>{return d.createElement(y,{key:e,onClick:()=>C(e)},e)})),d.createElement(l.Z,{sx:{flex:1}},M.map((e,t)=>d.createElement(h,{key:t.toString(),item:e,onItemSelected:Z,onKeyWorkClicked:C}))))))}},59740:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var n=a(85597),i=a(84635),r=a(29620),o=a(67294),l=a(43581);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(){let{useDialog:e,i18n:t}=(0,n.OgA)(),{closeDialog:a,dialogProps:c}=e(),d=t.formatMessage({id:"add_new_template"}),m=(0,l.Hy)(d);m.elements.content.elements.name={component:"Text",name:"name",variant:"outlined",margin:"normal",required:!0,defaultValue:"",label:"Template Name",fullWidth:!0},m.elements.footer.elements={cancel:{component:"Button",label:"Cancel",color:"primary",type:"cancel",onClick:a},submit:{component:"Button",label:"Submit",color:"primary",type:"cancel",onClick:a}};let u=()=>{};return o.createElement(r.Z,s({},c),o.createElement(i.qu,{dialog:!0,initialValues:{},formSchema:m,onSubmit:u}))}},50789:function(e,t,a){a.r(t),a.d(t,{ItemView:function(){return f},default:function(){return b}});var n=a(92114),i=a(85597),r=a(21822),o=a(44373),l=a(30030),s=a(30120),c=a(81719),d=a(22410),m=a(73327),u=a(67294);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let g=(0,c.ZP)(s.Z,{name:"ThemeItem",slot:"Root"})(({theme:e,selected:t})=>({borderRadius:8,overflow:"hidden",border:`2px solid ${t?e.palette.primary.main:"rgba(0,0,0,0.1)"}}`})),h=(0,c.ZP)(s.Z,{name:"ThemeItem",slot:"Content"})(({theme:e})=>({borderRadius:8,display:"block",paddingBottom:"60%",backgroundColor:"rgba(0,0,0,0.1)",backgroundSize:"cover"}));function f({title:e,id:t,image:a,selected:n,onChange:i}){return u.createElement(g,{selected:n},u.createElement(h,{title:e,onClick:()=>i(t),style:{backgroundImage:`url(${a})`}}))}let v=(0,d.Z)(e=>(0,m.Z)({content:{display:"flex",flexWrap:"nowrap",flexDirection:"row"},divider:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},dialogActions:{margin:e.spacing(1),"& button":{width:94,height:40}}}),{name:"ChooseThemeDialog"});function b(){let{useDialog:e,getSetting:t,i18n:a,usePreference:s,preferenceBackend:c}=(0,i.OgA)(),{themeId:d=i.t04}=s(),{dialogProps:m,closeDialog:g,setDialogValue:h}=e(),[b,y]=u.useState(d),x=v(),E=t("layout.variants",[]),w=u.useCallback(()=>{c.setTheme(b),h(b)},[c,h,b]),C=u.useCallback(e=>{y(e)},[]);return u.createElement(n.Vq,p({},m,{maxWidth:"sm","data-testid":"dialogThemePicker"}),u.createElement(n.$N,null,a.formatMessage({id:"choose_your_preferred_theme"})),u.createElement(n.cZ,null,u.createElement("div",{className:x.content},u.createElement(l.ZP,{container:!0,columnSpacing:1,rowSpacing:2},E.map(e=>{var t;return u.createElement(l.ZP,{item:!0,key:null===(t=e.id)||void 0===t?void 0:t.toString(),xs:12},u.createElement(f,p({},e,{image:e.image,selected:e.id===b,onChange:C})))})))),u.createElement(o.Z,{className:x.divider}),u.createElement(n.kX,{className:x.dialogActions},u.createElement(r.Z,{onClick:w,variant:"contained",color:"primary",disabled:!b,"data-testid":"buttonSubmit"},a.formatMessage({id:"apply"})),u.createElement(r.Z,{onClick:g,type:"button",variant:"outlined",color:"primary","data-testid":"buttonCancel"},a.formatMessage({id:"cancel"}))))}},43841:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=a(85597),i=a(92114),r=a(21822),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s(){let{i18n:e,theme:t,useDialog:a}=(0,n.OgA)(),{closeDialog:s,dialogProps:c}=a();return o.createElement(i.Vq,l({},c,{maxWidth:"sm",fullWidth:!0}),o.createElement(i.$N,{id:"alert-dialog-title"},e.formatMessage({id:"layout_inspect_theme"})),o.createElement(i.cZ,null,o.createElement("pre",null,JSON.stringify(t,null,"  "))),o.createElement(i.kX,null,o.createElement(r.Z,{onClick:s,color:"primary",autoFocus:!0,children:e.formatMessage({id:"ok"})})))}},46060:function(e,t,a){a.d(t,{sU:function(){return n.Z},zp:function(){return i.Z}}),a(26830),a(36611);var n=a(83273),i=a(43115)},15890:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=a(85597),i=a(29620),r=a(67294),o=a(84635);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s({config:e}){let{action_name:t,onSubmit:a}=e||{},{useDialog:s,dispatch:c}=(0,n.OgA)(),{setDialogResolveValue:d,setDialogValue:m,dialogProps:u,forceClose:p}=s(),g=(0,n.oHF)("captcha","captcha","getVerifyForm"),h=(e,t)=>{d(e),c({type:"@waitingCaptchaImage/start",payload:{form:t,forceClose:p}})},f=()=>{m(null)};return r.createElement(i.Z,l({},u,{fullScreen:!1,"data-testid":"dialogCaptchaImage",maxWidth:"xs",fullWidth:!0,"aria-modal":!0}),r.createElement(o.AO,{dataSource:g,onSubmit:a||h,onCancel:f,pageParams:{action_name:t,auto_focus:!0},navigationConfirmWhenDirty:!1,dialog:!0}))}},67430:function(e,t,a){a.r(t),a.d(t,{default:function(){return H},initState:function(){return D}});var n,i=a(85597),r=a(16473),o=a(27274),l=a(21822),s=a(35705),c=a(29620),d=a(77745),m=a(50130),u=a(763),p=a(62097),g=a(61225),h=a(23560),f=a.n(h),v=a(67294);let b=e=>new Promise((t,a)=>{let n=new Image;n.addEventListener("load",()=>t(n)),n.addEventListener("error",e=>a(e)),n.setAttribute("crossOrigin","anonymous"),n.src=e});async function y(e,t,a,n=0,i=!1,r=!1){try{let o=await b(e),l=document.createElement("canvas"),s=l.getContext("2d"),c=Math.max(o.width,o.height),d=2*(c/2*Math.sqrt(2));l.width=d,l.height=d,s.translate(d/2,d/2),s.rotate(n*Math.PI/180),s.scale(i?-1:1,r?-1:1),s.translate(-d/2,-d/2),s.drawImage(o,d/2-.5*o.width,d/2-.5*o.height);let m=s.getImageData(0,0,d,d);if(l.width=t.width,l.height=t.height,s.putImageData(m,Math.round(0-d/2+.5*o.width-t.x),Math.round(0-d/2+.5*o.height-t.y)),"base64"===a)return l.toDataURL("image/jpeg");return new Promise(e=>{l.toBlob(t=>{e(URL.createObjectURL(t))},"image/jpeg")})}catch(u){throw Error(u)}}var x=a(52796),E=a.n(x);function w(e,t,a,n,i=0){let{width:r,height:o}=O(t.width,t.height,i);return{x:C(e.x,r,a.width,n),y:C(e.y,o,a.height,n)}}function C(e,t,a,n){let i=t*n/2-a/2;return Math.min(i,Math.max(e,-i))}function k(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function S(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function Z(e,t){return Math.min(e,Math.max(0,t))}function P(e,t){return t}function M(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function _(e,t,a,n,i){let r=Math.cos,o=Math.sin,l=i*Math.PI/180,s=(e-a)*r(l)-(t-n)*o(l)+a,c=(e-a)*o(l)+(t-n)*r(l)+n;return[s,c]}function O(e,t,a){let n=e/2,i=t/2,r=[_(0,0,n,i,a),_(e,0,n,i,a),_(e,t,n,i,a),_(0,t,n,i,a)],o=Math.min(...r.map(e=>e[0])),l=Math.max(...r.map(e=>e[0])),s=Math.min(...r.map(e=>e[1])),c=Math.max(...r.map(e=>e[1]));return{width:l-o,height:c-s}}function R(...e){return e.filter(e=>{return"string"==typeof e&&0<e.length}).join(" ").trim()}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class I extends(n=v.Component){componentDidMount(){window.addEventListener("resize",this.computeSizes),this.containerRef&&(this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.preventZoomSafari),this.containerRef.addEventListener("gesturechange",this.preventZoomSafari)),this.imageRef&&this.imageRef.complete&&this.onMediaLoad()}componentWillUnmount(){window.removeEventListener("resize",this.computeSizes),this.containerRef&&(this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.containerRef.removeEventListener("gesturechange",this.preventZoomSafari)),this.styleRef&&this.styleRef.remove(),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent()}componentDidUpdate(e){var t,a,n,i,r,o,l,s;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(a=this.props.cropSize)||void 0===a?void 0:a.height)||(null===(n=e.cropSize)||void 0===n?void 0:n.width)!==(null===(i=this.props.cropSize)||void 0===i?void 0:i.width)?this.computeSizes():((null===(r=e.crop)||void 0===r?void 0:r.x)!==(null===(o=this.props.crop)||void 0===o?void 0:o.x)||(null===(l=e.crop)||void 0===l?void 0:l.y)!==(null===(s=this.props.crop)||void 0===s?void 0:s.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent())}getAspect(){let{cropSize:e,aspect:t}=this.props;return e?e.width/e.height:t}onPinchStart(e){let t=I.getTouchPoint(e.touches[0]),a=I.getTouchPoint(e.touches[1]);this.lastPinchDistance=k(t,a),this.lastPinchRotation=S(t,a),this.onDragStart(M(t,a))}onPinchMove(e){let t=I.getTouchPoint(e.touches[0]),a=I.getTouchPoint(e.touches[1]),n=M(t,a);this.onDrag(n),this.rafPinchTimeout&&window.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=window.requestAnimationFrame(()=>{let e=k(t,a),i=this.props.zoom*(e/this.lastPinchDistance);this.setNewZoom(i,n),this.lastPinchDistance=e;let r=S(t,a),o=this.props.rotation+(r-this.lastPinchRotation);this.props.onRotationChange&&this.props.onRotationChange(o),this.lastPinchRotation=r})}render(){let{image:e,video:t,mediaProps:a,transform:n,crop:{x:i,y:r},rotation:o,zoom:l,flipHorizontal:s=!1,flipVertical:c=!1,cropShape:d,showGrid:m,style:{containerStyle:u,cropAreaStyle:p,mediaStyle:g},classes:{containerClassName:h,cropAreaClassName:f,mediaClassName:b}}=this.props,y=c?-1:1,x=s?-1:1;return v.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:e=>this.containerRef=e,"data-testid":"container",style:u,className:R("reactEasyCrop_Container",h)},e?v.createElement("img",z({alt:"",className:R("reactEasyCrop_Image",b)},a,{src:e,ref:e=>this.imageRef=e,style:{...g,transform:n||`translate(${i}px, ${r}px) rotate(${o}deg) scale(${l*y}, ${l*x})`},onLoad:this.onMediaLoad})):t&&v.createElement("video",z({autoPlay:!0,loop:!0,muted:!0,className:R("reactEasyCrop_Video",b)},a,{src:t,ref:e=>this.videoRef=e,onLoadedMetadata:this.onMediaLoad,style:{...g,transform:n||`translate(${i}px, ${r}px) rotate(${o}deg) scale(${l*y}, ${l*x})`},controls:!1})),this.state.cropSize&&v.createElement("div",{style:{...p,width:this.state.cropSize.width,height:this.state.cropSize.height},"data-testid":"cropper",className:R("reactEasyCrop_CropArea","round"===d&&"reactEasyCrop_CropAreaRound",m&&"reactEasyCrop_CropAreaGrid",f)}))}constructor(...e){super(...e),this.imageRef=null,this.videoRef=null,this.containerRef=null,this.styleRef=null,this.containerRect=null,this.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},this.dragStartPosition={x:0,y:0},this.dragStartCrop={x:0,y:0},this.lastPinchDistance=0,this.lastPinchRotation=0,this.rafDragTimeout=null,this.rafPinchTimeout=null,this.wheelTimer=null,this.state={cropSize:null,hasWheelJustStarted:!1},this.preventZoomSafari=e=>e.preventDefault(),this.cleanEvents=()=>{document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onDragStopped),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onDragStopped)},this.clearScrollEvent=()=>{this.containerRef&&this.containerRef.removeEventListener("wheel",this.onWheel),this.wheelTimer&&clearTimeout(this.wheelTimer)},this.onMediaLoad=()=>{this.computeSizes(),this.emitCropData(),this.setInitialCrop(),this.props.onMediaLoaded&&this.props.onMediaLoaded(this.mediaSize)},this.setInitialCrop=()=>{let{initialCroppedAreaPixels:e,cropSize:t}=this.props;if(!e)return;let{crop:a,zoom:n}=function(e,t,a){let n=t.width/t.naturalWidth,i=function(e,t,a){let n=t.width/t.naturalWidth;if(a){let i=a.height>a.width;return i?a.height/n/e.height:a.width/n/e.width}let r=e.width/e.height,o=t.naturalWidth>=t.naturalHeight*r;return o?t.naturalHeight/e.height:t.naturalWidth/e.width}(e,t,a),r=n*i,o={x:((t.naturalWidth-e.width)/2-e.x)*r,y:((t.naturalHeight-e.height)/2-e.y)*r};return{crop:o,zoom:i}}(e,this.mediaSize,t);this.props.onCropChange(a),this.props.onZoomChange&&this.props.onZoomChange(n)},this.computeSizes=()=>{let e=this.imageRef||this.videoRef;if(e&&this.containerRef){var t,a,n,i,r,o;this.containerRect=this.containerRef.getBoundingClientRect(),this.mediaSize={width:e.offsetWidth,height:e.offsetHeight,naturalWidth:(null===(t=this.imageRef)||void 0===t?void 0:t.naturalWidth)||(null===(a=this.videoRef)||void 0===a?void 0:a.videoWidth)||0,naturalHeight:(null===(n=this.imageRef)||void 0===n?void 0:n.naturalHeight)||(null===(i=this.videoRef)||void 0===i?void 0:i.videoHeight)||0};let l=this.props.cropSize?this.props.cropSize:function(e,t,a,n,i,r=0){let{width:o,height:l}=O(e,t,r),s=Math.min(o,a),c=Math.min(l,n);return s>c*i?{width:c*i,height:c}:{width:s,height:s/i}}(e.offsetWidth,e.offsetHeight,this.containerRect.width,this.containerRect.height,this.props.aspect,this.props.rotation);((null===(r=this.state.cropSize)||void 0===r?void 0:r.height)!==l.height||(null===(o=this.state.cropSize)||void 0===o?void 0:o.width)!==l.width)&&this.props.onCropSizeChange&&this.props.onCropSizeChange(l),this.setState({cropSize:l},this.recomputeCropPosition)}},this.onMouseDown=e=>{e.preventDefault(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onDragStopped),this.onDragStart(I.getMousePoint(e))},this.onMouseMove=e=>this.onDrag(I.getMousePoint(e)),this.onTouchStart=e=>{e.preventDefault(),document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onDragStopped),2===e.touches.length?this.onPinchStart(e):1===e.touches.length&&this.onDragStart(I.getTouchPoint(e.touches[0]))},this.onTouchMove=e=>{e.preventDefault(),2===e.touches.length?this.onPinchMove(e):1===e.touches.length&&this.onDrag(I.getTouchPoint(e.touches[0]))},this.onDragStart=({x:e,y:t})=>{var a,n;this.dragStartPosition={x:e,y:t},this.dragStartCrop={...this.props.crop},null===(n=(a=this.props).onInteractionStart)||void 0===n||n.call(a)},this.onDrag=({x:e,y:t})=>{this.rafDragTimeout&&window.cancelAnimationFrame(this.rafDragTimeout),this.rafDragTimeout=window.requestAnimationFrame(()=>{if(!this.state.cropSize||void 0===e||void 0===t)return;let a=e-this.dragStartPosition.x,n=t-this.dragStartPosition.y,i={x:this.dragStartCrop.x+a,y:this.dragStartCrop.y+n},r=this.props.restrictPosition?w(i,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):i;this.props.onCropChange(r)})},this.onDragStopped=()=>{var e,t;this.cleanEvents(),this.emitCropData(),null===(t=(e=this.props).onInteractionEnd)||void 0===t||t.call(e)},this.onWheel=e=>{e.preventDefault();let t=I.getMousePoint(e),{pixelY:a}=E()(e),n=this.props.zoom-a*this.props.zoomSpeed/200;this.setNewZoom(n,t),this.state.hasWheelJustStarted||this.setState({hasWheelJustStarted:!0},()=>{var e,t;return null===(t=(e=this.props).onInteractionStart)||void 0===t?void 0:t.call(e)}),this.wheelTimer&&clearTimeout(this.wheelTimer),this.wheelTimer=window.setTimeout(()=>{return this.setState({hasWheelJustStarted:!1},()=>{var e,t;return null===(t=(e=this.props).onInteractionEnd)||void 0===t?void 0:t.call(e)})},250)},this.getPointOnContainer=({x:e,y:t})=>{if(!this.containerRect)throw Error("The Cropper is not mounted");return{x:this.containerRect.width/2-(e-this.containerRect.left),y:this.containerRect.height/2-(t-this.containerRect.top)}},this.getPointOnMedia=({x:e,y:t})=>{let{crop:a,zoom:n}=this.props;return{x:(e+a.x)/n,y:(t+a.y)/n}},this.setNewZoom=(e,t)=>{if(!this.state.cropSize||!this.props.onZoomChange)return;let a=this.getPointOnContainer(t),n=this.getPointOnMedia(a),i=Math.min(this.props.maxZoom,Math.max(e,this.props.minZoom)),r={x:n.x*i-a.x,y:n.y*i-a.y},o=this.props.restrictPosition?w(r,this.mediaSize,this.state.cropSize,i,this.props.rotation):r;this.props.onCropChange(o),this.props.onZoomChange(i)},this.getCropData=()=>{if(!this.state.cropSize)return null;let e=this.props.restrictPosition?w(this.props.crop,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):this.props.crop;return function(e,t,a,n,i,r=0,o=!0){let l=o&&0===r?Z:P,s={x:l(100,((t.width-a.width/i)/2-e.x/i)/t.width*100),y:l(100,((t.height-a.height/i)/2-e.y/i)/t.height*100),width:l(100,a.width/t.width*100/i),height:l(100,a.height/t.height*100/i)},c=Math.round(l(t.naturalWidth,s.width*t.naturalWidth/100)),d=Math.round(l(t.naturalHeight,s.height*t.naturalHeight/100)),m=t.naturalWidth>=t.naturalHeight*n,u=m?{width:Math.round(d*n),height:d}:{width:c,height:Math.round(c/n)},p={...u,x:Math.round(l(t.naturalWidth-u.width,s.x*t.naturalWidth/100)),y:Math.round(l(t.naturalHeight-u.height,s.y*t.naturalHeight/100))};return{croppedAreaPercentages:s,croppedAreaPixels:p}}(e,this.mediaSize,this.state.cropSize,this.getAspect(),this.props.zoom,this.props.rotation,this.props.restrictPosition)},this.emitCropData=()=>{let e=this.getCropData();if(!e)return;let{croppedAreaPercentages:t,croppedAreaPixels:a}=e;this.props.onCropComplete&&this.props.onCropComplete(t,a),this.props.onCropAreaChange&&this.props.onCropAreaChange(t,a)},this.emitCropAreaChange=()=>{let e=this.getCropData();if(!e)return;let{croppedAreaPercentages:t,croppedAreaPixels:a}=e;this.props.onCropAreaChange&&this.props.onCropAreaChange(t,a)},this.recomputeCropPosition=()=>{if(!this.state.cropSize)return;let e=this.props.restrictPosition?w(this.props.crop,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):this.props.crop;this.props.onCropChange(e),this.emitCropData()}}}I.defaultProps={zoom:1,rotation:0,aspect:4/3,flipVertical:!1,flipHorizontal:!1,maxZoom:3,minZoom:1,cropShape:"rect",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},I.getMousePoint=e=>({x:Number(e.clientX),y:Number(e.clientY)}),I.getTouchPoint=e=>({x:Number(e.clientX),y:Number(e.clientY)});var W=a(12902),N=a(18446),T=a.n(N);let A=(0,W.ZP)((e,t)=>{switch(t.type){case"setCrop":e.crop=t.payload;break;case"setFlipVertical":e.flipVertical=!e.flipVertical;break;case"setFlipHorizontal":e.flipHorizontal=!e.flipHorizontal;break;case"pendingSave":e.isLoading=!0;break;case"fullfilSave":e.isLoading=!1,e.isDirty=!1,e.isSuccess=!0;return;case"rejectSave":e.isLoading=!1;break;case"updateFile":e.imageSrc=t.payload,e.rotation=D.rotation,e.crop=D.crop,e.zoom=D.zoom;break;case"setImgSource":e.imageSrc=t.payload;break;case"setZoom":{let{mode:a,zoom:n}=t.payload;if(n){e.zoom=n;break}let i=0;"minus"===a&&(i=1<e.zoom-.2?e.zoom-.2:1),"plus"===a&&(i=3>e.zoom+.2?e.zoom+.2:3),e.zoom=i;break}case"setCroppedAreaPixels":e.croppedAreaPixels=t.payload;break;case"setRotation":e.rotation=t.payload}let r={crop:e.crop,flipVertical:e.flipVertical,flipHorizontal:e.flipHorizontal,rotation:e.rotation,zoom:e.zoom,imageSrc:e.imageSrc},o={crop:D.crop,flipVertical:D.flipVertical,flipHorizontal:D.flipHorizontal,rotation:D.rotation,zoom:D.zoom,imageSrc:D.imageSrc};e.isDirty=!T()(o,r)});var j=a(22410),$=a(73327),L=(0,j.Z)(e=>(0,$.Z)({avatarWrapper:{marginTop:-96,marginRight:e.spacing(3),position:"relative"},userAvatar:{width:168,height:168,border:"4px solid",borderColor:e.palette.background.paper},btnClose:{background:"none",boxShadow:"none",padding:0,fontSize:e.mixins.pxToRem(18),minWidth:"1px",color:`${e.palette.text.secondary} !important`,marginRight:`${e.spacing(-1)} !important`,marginLeft:"auto !important",width:e.spacing(4),height:e.spacing(4),borderRadius:e.spacing(4),"&:hover":{background:e.palette.background.default,color:"#fff"}},btnControl:{background:"none",boxShadow:"none",padding:0,fontSize:e.mixins.pxToRem(18),minWidth:e.spacing(4),color:`${e.palette.text.primary} !important`,width:e.spacing(4),height:e.spacing(4),borderRadius:e.spacing(4),"&:hover":{background:"rgba(5, 5, 5, 0.04)",color:e.palette.text.primary,boxShadow:"none"}},btnEditAvatar:{backgroundColor:e.palette.background.paper,textTransform:"capitalize",position:"absolute",top:e.spacing(1),right:e.spacing(1),minWidth:32,height:32,borderRadius:"100%","&:hover":{backgroundColor:e.palette.background.default}},sliderZoom:{margin:e.spacing(0,2)},iconEdit:{},cropDialog:{"& .MuiDialog-paper":{overflowY:"visible"}},titleDialog:{fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary,fontSize:e.mixins.pxToRem(18),padding:e.spacing(2),display:"flex",justifyContent:"space-between",alignItems:"center"},cropContainer:{[e.breakpoints.down("sm")]:{width:"100%"}},cropContent:{position:"relative",height:400,"& .reactEasyCrop_CropArea":{border:"none",color:"rgba(255,255,255,.3)"}},controls:{padding:e.spacing(1),display:"flex"},btnActions:{padding:e.spacing(1),display:"flex",justifyContent:"flex-end","& .Mui-disabled":{..."dark"===e.palette.mode&&{color:`${e.palette.text.hint} !important`}}},btnAction:{margin:`${e.spacing(1)} !important`},btnContainer:{padding:e.spacing(0,1),display:"flex",flexGrow:1,alignItems:"center",maxWidth:500,margin:"auto",justifyContent:"center",marginBottom:e.spacing(2),"& button":{padding:e.spacing(1,2),margin:e.spacing(0,1),whiteSpace:"nowrap",fontWeight:"normal",color:e.palette.text.primary}},sliderContainer:{padding:e.spacing(0,1),display:"flex",flexGrow:1,alignItems:"center",maxWidth:400,margin:"auto"},sliderLabel:{"& + span":{marginLeft:e.spacing(2)}},btnChangePhoto:{position:"relative",overflow:"hidden"},inputFile:{position:"absolute",opacity:0,left:0,top:0,right:0,bottom:0,cursor:"pointer"},cropBackdrop:{top:0,left:0,right:0,bottom:0,display:"flex",overflow:"hidden",position:"absolute",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:e.mixins.backgroundColor("paper")},cropBlurContent:{filter:"blur(10px)",transform:"scale(12)"},blurImage:{width:"100%",height:"100%",objectFit:"cover",border:0}}),{name:"MuiUserAvatarPhoto"});function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let D={crop:{x:0,y:0},zoom:1,flipHorizontal:!1,flipVertical:!1,rotation:0,isDirty:!1,isLoading:!1,croppedAreaPixels:null,isSuccess:!1},F=e=>{return new Promise(t=>{let a=new FileReader;a.addEventListener("load",()=>t(a.result),!1),a.readAsDataURL(e)})},V=({onUpdate:e,item:t,avatar:a})=>{let n=L(),h=(0,p.Z)(),b=v.useRef(null),[x,E]=v.useState(null),{i18n:w,dispatch:C,dialogBackend:k,useDialog:S,useLimitFileSize:Z}=(0,i.OgA)(),{dialogProps:P,setUserConfirm:M,closeDialog:_}=S(),{photo:O}=Z(),R=(0,g.Z)(h.breakpoints.down("sm")),z=(0,o.Q4)(null==t?void 0:t.avatar);a&&(z=(0,o.Q4)(a)),D.imageSrc=z;let[W,N]=(0,v.useReducer)(A,{...D}),[T,j]=v.useState(!z),{crop:$,zoom:V,rotation:H,flipHorizontal:U,flipVertical:q,imageSrc:Y,croppedAreaPixels:X,isLoading:G,isDirty:Q,isSuccess:K}=W;(0,v.useEffect)(()=>{M(()=>{if(Q)return{message:"Are you sure you want to discard the changes?"}})},[M,Q]),(0,v.useEffect)(()=>{K&&_()},[K,_]);let J=(e,t)=>{N({type:"setCroppedAreaPixels",payload:t})},ee=()=>{let e=360<=W.rotation+90?0:W.rotation+90;N({type:"setRotation",payload:e})},et=async()=>{N({type:"pendingSave"});try{let n=await y(Y,X,"base64",H,q,U);n&&C({type:"updateProfileUserAvatar",payload:{avatar:x,avatar_crop:n,userId:null==t?void 0:t.id,identity:null==t?void 0:t._identity},meta:{onSuccess:()=>{N({type:"fullfilSave"})},onFailure:()=>{k.alert({title:"Error",message:"Ops! Something wrong"}),N({type:"rejectSave"})}}}),f()(e)&&e(a)}catch(i){k.alert({title:"Error",message:"Ops! Picture format is not correct."}),N({type:"rejectSave"})}},ea=async e=>{if(e.target.files&&0<e.target.files.length){let t=e.target.files[0],a=t.size;if(a>O&&0!==O){k.alert({message:w.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,o.TX)(t.name,30),fileSize:(0,o.jA)(t.size),maxSize:(0,o.jA)(O)})});return}E(t);let n=await F(t);N({type:"updateFile",payload:n})}},en=()=>{b.current.click()},ei=()=>{window.addEventListener("focus",er)},er=()=>{setTimeout(()=>{j(!1)},500),window.removeEventListener("focus",er)};return((0,v.useEffect)(()=>{T&&en()},[T]),Y)?v.createElement(c.Z,B({},P,{className:n.cropDialog,"aria-labelledby":"dialog-title",maxWidth:"sm",fullWidth:!0,scroll:"body",fullScreen:R}),v.createElement(d.Z,{id:"dialog-title"},w.formatMessage({id:"update_your_profile_picture"}),v.createElement(m.Z,{size:"small",className:n.btnClose,disabled:G,onClick:_},v.createElement(r.zb,{icon:"ico-close"}))),v.createElement("div",{className:n.cropContainer},v.createElement("div",{className:n.cropContainer},v.createElement("div",{className:n.cropContent},v.createElement("div",{className:n.cropBackdrop},v.createElement("div",{className:n.cropBlurContent},v.createElement("img",{crossOrigin:"anonymous",src:Y,alt:"",className:n.blurImage}))),v.createElement(I,{image:Y,crop:$,zoom:V,aspect:1,flipHorizontal:U,flipVertical:q,onCropChange:e=>N({type:"setCrop",payload:e}),onCropComplete:J,onZoomChange:e=>N({type:"setZoom",payload:{zoom:e}}),rotation:H,showGrid:!1,cropShape:"round"})),!(0,o.Mf)(Y)&&v.createElement(v.Fragment,null,v.createElement("div",{className:n.controls},v.createElement("div",{className:n.sliderContainer},v.createElement(l.Z,{variant:"text",className:n.btnControl,onClick:()=>N({type:"setZoom",payload:{mode:"minus"}})},v.createElement(r.zb,{icon:"ico-minus"})),v.createElement(u.ZP,{className:n.sliderZoom,value:V,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:(e,t)=>N({type:"setZoom",payload:{zoom:t}})}),v.createElement(l.Z,{variant:"text",className:n.btnControl,onClick:()=>N({type:"setZoom",payload:{mode:"plus"}})},v.createElement(r.zb,{icon:"ico-plus"})))),v.createElement("div",{className:n.btnContainer},v.createElement(l.Z,{startIcon:v.createElement(r.zb,{icon:"ico-rotate-right-alt"}),onClick:ee},w.formatMessage({id:"rotate"})),v.createElement(l.Z,{startIcon:v.createElement(r.zb,{icon:"ico-flip-v"}),onClick:()=>N({type:"setFlipVertical"})},w.formatMessage({id:"flip_vertical"})),v.createElement(l.Z,{startIcon:v.createElement(r.zb,{icon:"ico-flip-h"}),onClick:()=>N({type:"setFlipHorizontal"})},w.formatMessage({id:"flip_horizontal"})))),v.createElement("div",{className:n.btnActions},v.createElement("div",{className:n.btnChangePhoto},v.createElement("input",{type:"file",onChange:ea,accept:"image/*",className:n.inputFile,ref:b}),v.createElement(l.Z,{variant:"outlined",disabled:G,className:n.btnAction,size:"small",onClick:en},w.formatMessage({id:"change_photo"}))),v.createElement(l.Z,{variant:"contained",className:n.btnAction,disabled:!Q,onClick:et,size:"small"},G?v.createElement(s.Z,{color:"inherit",size:"1rem"}):w.formatMessage({id:"save"})))))):T?v.createElement("input",{type:"file",onChange:ea,accept:"image/*",style:{display:"none"},ref:b,onClick:ei}):null};var H=V},12482:function(e,t,a){a.d(t,{Z:function(){return o}});var n=a(35705),i=a(67294);let r={backdrop:{position:"absolute",left:0,top:0,bottom:0,right:0},content:{position:"absolute",left:"50%",top:"50%",marginLeft:-20,marginTop:-20}};function o({size:e=40}){return i.createElement("div",{style:r.backdrop,"data-testid":"loadingIndicator"},i.createElement("div",{style:r.content},i.createElement(n.Z,{variant:"indeterminate",size:e})))}},13774:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=a(85597),i=a(92114),r=a(21241),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:s}){let{useDialog:c,ListView:d,i18n:m}=(0,n.OgA)(),{dialogProps:u}=c();return o.createElement(i.Vq,l({},u,{maxWidth:"xs",fullWidth:!0}),o.createElement(i.$N,null,m.formatMessage({id:s})),o.createElement(i.cZ,{variant:"fitScroll",sx:{height:"45vh"}},o.createElement(r.l$,{style:{height:"auto"}},o.createElement(d,{dataSource:{apiUrl:e,apiParams:t},pagingId:a,canLoadMore:!0,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"event.itemView.hostSmallCard"}))))}},47152:function(e,t,a){a.r(t);var n=a(85597),i=a(92114),r=a(81719),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let s="BlogViewDialog",c=(0,r.ZP)(i.cZ,{name:s,slot:"root"})(({theme:e})=>({padding:"0 !important",overflowY:"visible",display:"flex"})),d=(0,r.ZP)("div",{name:s,slot:"root"})(({theme:e})=>({width:"1020px",maxWidth:"100%"}));t.default=(0,n.SuR)(function({item:e,identity:t}){let{useDialog:a,jsxBackend:r,useIsMobile:s,i18n:m}=(0,n.OgA)(),{dialogProps:u}=a(),p=r.get("blog.block.blogView"),g=s();return e?o.createElement(i.Vq,l({},u,{maxWidth:"md",scroll:"body","data-testid":"popupViewBlog"}),o.createElement(i.$N,{enableBack:g,disableClose:g},m.formatMessage({id:"blog"})),o.createElement(c,null,o.createElement(d,null,o.createElement(p,{item:e,identity:t,isModalView:!0})))):null})},98251:function(e,t,a){var n=a(85597),i=a(16473),r=a(67294);t.Z=(0,r.memo)(function({identity:e,size:t=30,user:a}){let{useGetItem:o}=(0,n.OgA)(),l=o(e);return a||l?r.createElement(i.Yt,{user:a||l,size:t,noLink:!0}):null})},21690:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var n=a(2475),i=a(92114),r=a(85597),o=a(16473),l=a(81719),s=a(67294);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let d="dialogItemView",m=(0,l.ZP)("div",{name:d,slot:"ico-close",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(4),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"]},...t&&{top:e.spacing(2.5),right:e.spacing(2.5)}})),u=(0,l.ZP)("div",{name:d,slot:"ico-download",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(10),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"]},...t&&{top:e.spacing(2.5),right:e.spacing(8.125)}})),p=(0,l.ZP)(i.cZ,{name:d,slot:"content",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("xs")]:{flexFlow:"column"},...t&&{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.palette.grey.A400}})),g=(0,l.ZP)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative"})),h=(0,l.ZP)("img")(({theme:e})=>({maxWidth:"100%",maxHeight:" calc(100vh - 88px)",margin:"auto"})),f=(0,l.ZP)("div",{name:d,slot:"button-prev",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:e.spacing(5),left:e.spacing(4),...t&&{left:e.spacing(.5),zIndex:999,opacity:.8}})),v=(0,l.ZP)("div",{name:d,slot:"button-next",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:e.spacing(5),right:e.spacing(4),...t&&{right:e.spacing(.5),zIndex:999,opacity:.8}})),b=(0,l.ZP)("div",{name:d,slot:"button-image"})(({theme:e})=>({cursor:"pointer",width:e.spacing(5),height:e.spacing(5),borderRadius:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:e.palette.grey["800"],"& .ico":{fontSize:e.mixins.pxToRem(16),color:e.palette.grey["50"]}}));function y({image:e,images:t}){let{useDialog:a,useIsMobile:l}=(0,r.OgA)(),d=l(),{dialogProps:y,closeDialog:x}=a(),E=t&&t.length-1,w=t&&t.length>1,C=parseInt(null==e?void 0:e.id)||0,[k,S]=s.useState(C),Z=e=>{e+1>E?S(0):S(parseInt(e)+1)},P=e=>{e-1<0?S(E):S(parseInt(e)-1)},M=e=>{let t="rtl"===document.dir,a="";switch(e.keyCode){case 27:x();break;case 39:a=t?"prev":"next";break;case 37:a=t?"next":"prev"}if("next"===a&&k!==E){Z(k);return}if("prev"===a&&0!==k){P(k);return}},_=(e,t)=>{e&&(0,n.Sv)(e,t)};return(s.useEffect(()=>{return document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}},[k]),w)?s.createElement(i.Vq,c({},y,{"data-testid":"popupDetailPhoto",maxWidth:d?"xl":"lg",fullScreen:!!d,fullWidth:!1,scroll:"body"}),s.createElement(m,{onClick:x,isMobile:d},s.createElement(o.zb,{icon:"ico-close"})),0!==k&&s.createElement(f,{isMobile:d},s.createElement(b,{onClick:()=>P(k)},s.createElement(o.zb,{icon:"ico-angle-left"}))),s.createElement(p,{dividers:!1,isMobile:d},t.map((e,t)=>{return s.createElement("div",{key:t},e.id===k?s.createElement(g,null,(null==e?void 0:e.video_type)?s.createElement("video",{src:e.src,type:e.video_type,controls:!0,autoPlay:!0}):s.createElement(h,{src:e.src,alt:""}),(null==e?void 0:e.download_url)?s.createElement(u,{onClick:()=>_(e.download_url,e.file_name),isMobile:d},s.createElement(o.zb,{icon:"ico-download"})):null):null)})),k!==E&&s.createElement(v,{isMobile:d},s.createElement(b,{onClick:()=>Z(k)},s.createElement(o.zb,{icon:"ico-angle-right"})))):e?s.createElement(i.Vq,c({},y,{"data-testid":"popupDetailPhoto",maxWidth:d?"xl":"lg",fullScreen:!!d,fullWidth:!1,scroll:"body"}),s.createElement(m,{onClick:x,isMobile:d},s.createElement(o.zb,{icon:"ico-close"})),s.createElement(p,{dividers:!1,isMobile:d},s.createElement(g,null,(null==e?void 0:e.video_type)?s.createElement("video",{src:e.src,type:e.video_type,controls:!0,autoPlay:!0}):s.createElement(h,{src:e.src,alt:""}),(null==e?void 0:e.download_url)&&(null==e?void 0:e.is_image)?s.createElement(u,{onClick:()=>_(e.download_url,e.file_name),isMobile:d},s.createElement(o.zb,{icon:"ico-download"})):null))):null}},39218:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var n=a(92114),i=a(85597),r=a(21241),o=a(40471),l=a(70214),s=a(99164),c=a(22410),d=a(73327),m=a(41609),u=a.n(m),p=a(47037),g=a.n(p),h=a(67294),f=a(98251),v=a(21822),b=(0,c.Z)(e=>(0,d.Z)({root:{position:"relative",textDecoration:"none",display:"block",borderBottom:e.mixins.border("secondary"),"& .MuiAvatar-root":{fontSize:e.mixins.pxToRem(16)}},itemOuter:{height:"100%"},itemInner:{height:"100%",position:"relative",padding:e.spacing(1),alignItems:"center",display:"flex",flexDirection:"row",overflow:"hidden"},itemMainContent:{display:"flex",alignItems:"center"},itemSmallInner:{display:"flex",padding:e.spacing(2),justifyContent:"space-between",alignItems:"center",borderRadius:e.shape.borderRadius},actionContent:{fontWeight:`${e.typography.fontWeightMedium} !important`},itemSmallRequestInner:{display:"flex",padding:e.spacing(2),borderRadius:e.shape.borderRadius},itemMedia:{overflow:"hidden",position:"relative"},itemSmallMedia:{transition:"all 300ms ease",borderRadius:"100%",position:"relative"},itemReactSmall:{position:"absolute",width:"15px",height:"15px",right:0,bottom:0},imgSmallReactionIcon:{width:"100%"},imgWrapper:{margin:"auto"},imgSmallWrapper:{borderRadius:"100%"},userInfo:{flex:1,overflow:"hidden",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),flexBasis:"auto"},userSmallInfo:{marginLeft:e.spacing(1.5),flex:1,overflow:"hidden",paddingRight:e.spacing(1)},userSmallInfoRequest:{marginLeft:e.spacing(1.5),flex:1,overflow:"hidden"},userTitle:{color:e.palette.text.primary,fontSize:"1.125rem",marginBottom:e.spacing(1),transition:"all 300ms ease",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightBold},userSmallTitle:{color:e.palette.text.primary,fontSize:e.mixins.pxToRem(15),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightBold},friendInfo:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary},friendSmallInfo:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,marginTop:e.spacing(.5),display:"inline-block"},userLocation:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:e.spacing(1)},userJoined:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:e.spacing(1)},friendActions:{position:"relative",display:"flex"},friendActionsDropdown:{boxShadow:"none",padding:0,marginLeft:e.spacing(1)},iconButton:{border:"1px solid",width:"40px",height:"40px",borderRadius:e.spacing(.5),display:"flex",alignItems:"center",color:e.palette.primary.main,justifyContent:"center"},button:{boxShadow:"none",borderRadius:e.spacing(.5),fontSize:"1rem",textTransform:"capitalize"},friendRequestActions:{display:"flex",marginTop:e.spacing(1.5)},requestOption:{textTransform:"capitalize",fontSize:e.mixins.pxToRem(15),fontWeight:"bold",flexGrow:1,"& + $requestOption":{marginLeft:e.spacing(1)}},mutualFriend:{marginRight:e.spacing(.5)},btnAddFriend:{textTransform:"capitalize",fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,padding:e.spacing(.25,1.5),minWidth:"inherit"}}),{name:"ReactedUserItemView"});let y=({data:e,unsetReaction:t})=>{let a=b(),{useDialog:n,i18n:r,useSession:o}=(0,i.OgA)(),{closeDialog:l}=n(),{user:s}=o(),c=s.user_name;return e?e.usernames.map((e,n)=>{var i;return h.createElement("div",{className:a.root,key:n},h.createElement("div",{className:a.itemOuter},h.createElement("div",{className:a.itemSmallInner},h.createElement("div",{className:a.itemMainContent},h.createElement("div",{className:a.itemSmallMedia},h.createElement("div",{className:a.imgSmallWrapper},h.createElement(f.Z,{user:e.user,size:40})),h.createElement("div",{className:a.itemReactSmall},h.createElement("img",{className:a.imgSmallReactionIcon,src:e.icon,alt:"reaction"}))),h.createElement("div",{className:a.userSmallInfo},h.createElement("div",{className:a.userSmallTitle,onClick:l},(null===(i=e.user)||void 0===i?void 0:i.full_name)||e.username))),c===e.username&&h.createElement(v.Z,{className:a.actionContent,variant:"outlined",color:"primary",onClick:()=>t(e.id)},r.formatMessage({id:"remove"})))))}):null};function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let E=(0,c.Z)(e=>(0,d.Z)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,2,1,2)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:4,marginRight:"0.25em",padding:e.spacing(.5,1.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"}),w={minHeight:32},C={minWidth:16},k={width:15,height:15},S=e=>{let{i18n:t}=(0,i.OgA)(),a=(0,o.z)();if(!e&&!(null==e?void 0:e.length))return{};try{let n=e=>{let t=g()(e)&&e.split(":")[1].split("_")[1];return t&&a?a.find(e=>e.id===parseInt(t)):{}},r=[],l=Object.keys(e).reduce((t,a)=>{var i;let o=n(a),l=e[a].map(e=>{return{username:e.user_name,user:e,icon:o.src,id:a}});return r=r.concat(...l),t+(null===(i=e[a])||void 0===i?void 0:i.length)},0),s={all:{id:"all",title:t.formatMessage({id:"all"}),total_reacted:l,usernames:r}};return Object.keys(e).map(t=>{let a=n(t),i=e[t].map(e=>{return{username:e.user_name,user:e,icon:a.src,id:t}});return s[t]={id:t,icon:a.src,total_reacted:e[t].length,usernames:i}}),s}catch(c){return{}}};function Z({identity:e}){let t=E(),[a,o]=(0,h.useState)("all"),c=(0,h.useRef)(),{useDialog:d,i18n:m,dispatch:p,useGetItem:g}=(0,i.OgA)(),{dialogProps:f,closeDialog:v}=d(),b=g(e),Z=h.useCallback(t=>{p({type:"chat/unsetReaction",payload:{identity:e,shortcut:t},meta:{onSuccess:_}})},[e]),P=S(null==b?void 0:b.reactions);h.useEffect(()=>{(!b||u()(null==b?void 0:b.reactions)||u()(P))&&v()},[b,null==b?void 0:b.reactions,P,v]);let M=(e,t)=>{o(t)},_=()=>{a&&o("all")};return h.createElement(n.Vq,x({},f,{maxWidth:"xs",fullWidth:!0}),h.createElement(n.$N,null,m.formatMessage({id:"reacted_by"})),h.createElement(s.Z,{value:a,onChange:M,style:w,className:t.customTabs},Object.values(P).map(e=>h.createElement(l.Z,{key:e.id,style:C,disableRipple:!0,icon:e.icon?h.createElement("img",{src:e.icon,alt:e.id,style:k}):h.createElement("span",{className:t.reactNumber},e.title),iconPosition:"start",label:e.total_reacted?h.createElement("span",{className:t.reactNumber},e.total_reacted):void 0,value:e.id,"aria-label":e.id}))),h.createElement("div",{className:t.dialogContent,ref:c},h.createElement(r.ID,{scrollRef:c},h.createElement(y,{data:P[a],unsetReaction:Z}))))}},69709:function(e,t,a){a.r(t);var n=a(85597),i=a(27274),r=a(7961),o=a(6867),l=a(81719),s=a(62097),c=a(67294),d=a(93836),m=a(42977),u=a(17563);let p=(0,l.ZP)(r.Z,{name:"AvatarWrapper"})(({theme:e})=>({borderWidth:"thin",borderStyle:"solid",borderColor:e.palette.border.secondary})),g=(0,l.ZP)(n.rUS,{name:"Link"})(({theme:e})=>({"&:hover":{textDecoration:"none"}})),h=(0,l.ZP)(o.Z,{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({"& .MuiBadge-badge":{...0===t&&{display:"none"},...1===t&&{color:e.palette.success.main,backgroundColor:e.palette.success.main},...2===t&&{color:e.palette.warning.main,backgroundColor:e.palette.warning.main},...3===t&&{color:e.palette.error.main,backgroundColor:e.palette.error.main},boxShadow:"dark"===e.palette.mode?"none":`0 0 0 2px ${e.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}}})),f=(0,l.ZP)("div",{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"relative",width:"32px",height:"32px",...t&&{width:t,height:t}})),v=(0,l.ZP)(r.Z,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"absolute",bottom:0,left:0,width:"26px",height:"26px",backgroundColor:"dark"===e.palette.mode?e.palette.grey["600"]:e.palette.grey["300"],borderWidth:1,borderStyle:"solid",borderColor:"light"===e.palette.mode?e.palette.grey["50"]:e.palette.grey["800"],zIndex:2,...t&&{width:t-6,height:t-6}})),b=(0,l.ZP)(r.Z,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"relative",top:-2,left:6,width:"26px",height:"26px",...t&&{width:`${t-6}px !important`,height:`${t-6}px !important`}}));t.default=(0,c.memo)(function({username:e="Name",name:t="Name",src:a,size:o,to:l,onClick:y,status:x=0,room:E,uploadLocal:w=!1,roomType:C=null,avatarETag:k,hoverCard:S=!1,component:Z="span",target:P="_self"}){var M,_;let{getSetting:O}=(0,n.OgA)(),R=(0,s.Z)(),z=C||(null==E?void 0:E.t),I=(0,i.vK)(t),W={width:o,height:o,color:R.palette.grey["50"],fontSize:o/3},N=O("chatplus"),T=null==N?void 0:null===(M=N.server)||void 0===M?void 0:M.replace(/\/$/,""),A=a;if(A||(A=k?`${T}/avatar/${e}?${u.stringify({etag:k})}`:""),I&&(W.backgroundColor=i.kU.hex(I)),l)return c.createElement(g,{target:P,to:l||`/${e}`},c.createElement(p,{src:A,alt:t,style:W,component:Z,children:I}));if([d.n.Private,d.n.Public].includes(z)){if(w)return c.createElement(p,{src:A,alt:t,style:W,component:Z,children:I});if(null==E?void 0:E.avatarETag)return A=`${T}/avatar/room/${null==E?void 0:E.id}?${u.stringify({etag:null==E?void 0:E.avatarETag})}`,c.createElement(p,{src:A,alt:t,style:W,component:Z,children:I});{let j=`${T}/avatar/${null==E?void 0:null===(_=E.u)||void 0===_?void 0:_.username}`;return c.createElement(f,{sizeProps:o},c.createElement(v,{sizeProps:o,src:j,alt:t,component:Z,children:I}),c.createElement(b,{sizeProps:o,src:A,alt:t,style:W,component:Z,children:I}))}}if(z===d.n.Direct&&x){let $=(0,m.xW)(x);return c.createElement(h,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",status:$},c.createElement(r.Z,{src:A,alt:t,style:W,component:Z,children:I,hoverCard:S}))}return c.createElement(p,{src:A,alt:t,style:W,component:Z,children:I,onClick:y,to:e,hoverCard:S})})},60783:function(e,t,a){a.r(t);var n=a(39312),i=a(93836),r=a(85597),o=a(21822),l=a(29620),s=a(72962),c=a(24498),d=a(77745),m=a(81719),u=a(67294),p=a(69709);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let h="IncomingCallPopup",f=(0,m.ZP)("div")(({theme:e})=>({display:"flex",justifyContent:"flex-end",alignItems:"center"})),v=(0,m.ZP)(o.Z)(({theme:e})=>({marginRight:e.spacing(1)})),b=(0,m.ZP)("div",{name:h,slot:"uiChat_call-info"})(({theme:e})=>({display:"flex",alignItems:"center"})),y=(0,m.ZP)("div",{name:h,slot:"UserCallingYou-info"})(({theme:e})=>({marginLeft:e.spacing(1),...e.typography.body1}));t.default=function({callId:e}){let{useDialog:t,i18n:a,dispatch:m}=(0,r.OgA)(),{dialogProps:h,closeDialog:x}=t(),E=(0,n.tg)(e),w=(0,n.Fy)(),{Website:C,Metafox_Ringtone_Sound_Url:k}=w,S=`${C}${k}`,{subject:Z,displayName:P,avatar:M,group:_,callStatus:O,callType:R}=E,z=R&&R.split("_")[2]||i.n.Direct;(0,u.useEffect)(()=>{"end"===O&&x()},[O]);let I=()=>{m({type:"chatplus/room/rejectCallFromPopup",payload:{callId:e}}),x()},W=()=>{m({type:"chatplus/room/acceptCallFromPopup",payload:{callId:e}}),x()};return u.createElement(l.Z,g({},h,{maxWidth:"sm",fullWidth:!0}),u.createElement(d.Z,null,_?Z:a.formatMessage({id:Z})),u.createElement(c.Z,null,u.createElement(b,null,u.createElement(p.default,{size:40,src:M,name:P,username:P,roomType:z}),u.createElement(y,null,a.formatMessage({id:"user_is_calling_you"},{user:u.createElement("b",null,P)}),"."),S&&u.createElement("audio",{style:{display:"none"},src:S,loop:!0,autoPlay:!0,type:"audio/mpeg"}))),u.createElement(s.Z,null,u.createElement(f,null,u.createElement(v,{variant:"outlined",onClick:I,size:"small"},a.formatMessage({id:"reject"})),u.createElement(o.Z,{variant:"contained",onClick:W,size:"small",color:"primary"},a.formatMessage({id:"accept"})))))}},27229:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var n=a(39312),i=a(85597),r=a(21241),o=a(21822),l=a(29620),s=a(72962),c=a(24498),d=a(77745),m=a(81719),u=a(67294),p=a(16473),g=a(83940);let h=(0,m.ZP)("div")(({theme:e})=>({padding:e.spacing(1.5,0),display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"})),f=(0,m.ZP)("div")(({theme:e})=>({display:"flex",alignItems:"center"})),v=(0,m.ZP)("span")(({theme:e})=>({...e.typography.h5,marginLeft:e.spacing(1)}));function b({user:e,selected:t,toggleSelect:a}){return u.createElement(h,{onClick:()=>a(e)},u.createElement(f,null,u.createElement(g.Z,{name:e.name,username:e.username,avatarETag:null==e?void 0:e.avatarETag,size:32}),u.createElement(v,null,e.name?e.name:e.username)),u.createElement(p.zb,{icon:`${t?"ico ico-check active":""}`,sx:{mr:"12px"}}))}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let x=(0,m.ZP)("div")(({theme:e})=>({display:"flex",justifyContent:"flex-end",alignItems:"center"})),E=(0,m.ZP)(o.Z)(({theme:e})=>({marginRight:e.spacing(1)})),w=(0,m.ZP)("div")(({theme:e})=>({})),C=(0,m.ZP)("div")(({theme:e})=>({display:"flex",justifyContent:"flex-end",alignItems:"center"})),k=(0,m.ZP)(o.Z)(({theme:e})=>({...e.typography.body1,cursor:"pointer",padding:e.spacing(1,0,1,2)}));var S=function(e){let{rid:t,limit:a,okLabel:m="continue",cancelLabel:p="cancel",title:g,alertMsg:h,onSuccess:f}=e,{useDialog:v,i18n:S,dialogBackend:Z,dispatch:P}=(0,i.OgA)(),{dialogProps:M,closeDialog:_}=v(),O=(0,n.Oy)(),[R,z]=(0,u.useState)([]),[I,W]=(0,u.useState)(!1),[N,T]=(0,u.useState)([]);u.useEffect(()=>{A()},[t]);let A=()=>{P({type:"chatplus/room/presentMembers",payload:{rid:t},meta:{onSuccess:j}})},j=e=>{Array.isArray(e.users)&&T(e.users)},$=()=>{Z.alert({title:"Oops!",message:S.formatMessage({id:h},{value:a})})},L=({username:e})=>{let t=[...R];R.includes(e)?t=R.filter(t=>t!==e):R.length<a?t.push(e):$(),z(t),W(t.length>0)},B=()=>{let{username:e}=O,t=N.map(({username:e})=>e).filter(t=>t!==e);z(t),W(!0)},D=()=>{z([]),W(!1)},F=()=>{f&&f(R),_()},V=N.length,H=V>0&&V<a+2&&R.length<a,U=R.length;return u.createElement(l.Z,y({},M,{maxWidth:"sm",fullWidth:!0}),u.createElement(d.Z,null,S.formatMessage({id:g})),u.createElement(c.Z,null,u.createElement("div",null,u.createElement(C,{className:"uiSelectAllBar"},U>0?u.createElement(k,{onClick:D},S.formatMessage({id:"deselect_value"},{value:U})):null,H?u.createElement(k,{onClick:B},S.formatMessage({id:"select_all"})):null),u.createElement(w,null,u.createElement(r.l$,{autoHide:!0,autoHeight:!0},N.filter(e=>e.username!==O.username).map((e,t)=>u.createElement(b,{key:`member-${t}`,user:e,selected:R.includes(e.username),toggleSelect:L})))))),u.createElement(s.Z,null,u.createElement(x,null,u.createElement(E,{variant:"outlined",onClick:_,size:"small"},S.formatMessage({id:p})),u.createElement(o.Z,{variant:"contained",onClick:F,size:"small",color:"primary",disabled:!I},S.formatMessage({id:m})))))}},94767:function(e,t,a){a.d(t,{zj:function(){return m},jH:function(){return y},BB:function(){return M}});var n=a(16473),i=a(30120),r=a(21822),o=a(81719),l=a(67294);let s=(0,o.ZP)("div",{name:"ChatDockFilter"})(({theme:e})=>({position:"relative"})),c=(0,o.ZP)(i.Z,{name:"ChatDockFilter"})(({theme:e})=>({padding:e.spacing(1,2,1,2),display:"flex",flexDirection:"row",alignItems:"center"})),d=(0,o.ZP)(r.Z,{name:"ChatDockFilter"})(({theme:e})=>({marginLeft:e.spacing(.5)}));function m({placeholder:e,size:t,hide:a=!1,label:i,disabled:r,valueSearch:o,onChangeSearch:m,onKeyUp:u,onSubmit:p,variant:g="direct",isShowButtonSubmit:h=!0,sx:f}){return a?null:l.createElement(s,null,l.createElement(c,{sx:f},l.createElement(n.Rj,{placeholder:e,onKeyUp:u,value:o,onChange:m}),h&&p?l.createElement(d,{disabled:r,size:"medium",color:"primary",variant:"text",onClick:p},i):null))}a(39312);var u=a(93836),p=a(85597);a(21241),a(70735),a(69709);let g="AddNewMembers",h=((0,o.ZP)("div")(({theme:e})=>({padding:e.spacing(0,1,0,2)})),(0,o.ZP)("div",{shouldForwardProp:e=>"users"!==e})(({theme:e,users:t})=>({...t&&{padding:e.spacing(0,1,1,2)},listStyle:"none",display:"flex",alignItems:"center",flexWrap:"wrap"})),(0,o.ZP)("li")(({theme:e})=>({margin:e.spacing(.5)})),(0,o.ZP)("div")(({theme:e})=>({padding:e.spacing(1.75,0),display:"flex",alignItems:"center",cursor:"pointer"})),(0,o.ZP)("span")(({theme:e})=>({...e.typography.h5,marginLeft:e.spacing(1)})),(0,o.ZP)("div",{name:g,slot:"RootSearch"})(({theme:e})=>({})),(0,o.ZP)("div",{name:g,slot:"SearchControl"})(({theme:e})=>({padding:e.spacing(0,1,0,2),display:"flex",flexDirection:"row",alignItems:"center"})),(0,o.ZP)(r.Z,{name:g,slot:"ButtonCustom"})(({theme:e})=>({marginLeft:e.spacing(.5)})),(0,o.ZP)("input",{name:g,slot:"InputWrapper"})(({theme:e})=>({zIndex:"auto",backgroundColor:e.mixins.backgroundColor("paper"),color:"dark"===e.palette.mode?e.palette.grey["50"]:e.palette.grey["700"],height:"35px",borderRadius:"2px",fontSize:"14px",padding:"8px",paddingLeft:"12px",paddingRight:"72px",display:"block",width:"100%",margin:"0",border:e.mixins.border("secondary"),"&:focus":{borderColor:"#a2a2a2",boxShadow:"0 1px 4px 0 rgba(0,0,0,0.1)",outline:"none"},"&::placeholder":{fontSize:"14px"}})),(0,o.ZP)("div",{name:"ChatDockContent",slot:"root",shouldForwardProp:e=>"searching"!==e&&"collapsed"!==e})(({theme:e,searching:t,collapsed:a})=>({flex:1,maxHeight:"100%",position:"relative",paddingBottom:e.spacing(.75),...t&&{borderTop:"none"},...a&&{display:"none"},"&::-webkit-scrollbar":{height:"5px",width:"5px",background:"gray",borderRadius:e.spacing(.5),transition:"opacity 200ms"},"&::-webkit-scrollbar-track":{borderRadius:e.spacing(.5),background:"light"===e.palette.mode?"white":e.palette.grey["300"]},"&::-webkit-scrollbar-thumb":{background:e.palette.grey["600"],borderRadius:e.spacing(.5)},"&::-webkit-scrollbar-thumb:hover":{background:e.palette.grey["700"]},"&::-webkit-scrollbar-thumb:horizontal":{background:"#000",borderRadius:"10px"}})),"ChatDockFooter"),f=(0,o.ZP)("div",{name:h,slot:"root",shouldForwardProp:e=>"isAllPageMessages"!==e})(({theme:e,isAllPageMessages:t})=>({position:"relative",display:"flex",minHeight:e.spacing(5),zIndex:2,backgroundColor:e.palette.background.paper,borderTop:e.mixins.border("secondary"),...t&&{minHeight:e.spacing(6)}})),v=(0,o.ZP)("div",{name:h,slot:"uiChatRoomFooter",shouldForwardProp:e=>"disable"!==e&&"isAllPageMessages"!==e})(({theme:e,disable:t,isAllPageMessages:a})=>({position:"relative",borderTop:e.mixins.border("secondary"),display:"flex",alignItems:"flex-end",minHeight:e.spacing(5),zIndex:2,flexFlow:"wrap",justifyContent:"center",...t&&{userSelect:"none",backgroundColor:"dark"===e.palette.mode?e.palette.grey["700"]:e.palette.background.paper},...a&&{minHeight:e.spacing(6)}})),b=(0,o.ZP)("div",{name:h,slot:"uiChatComposerContainer"})(({theme:e})=>({textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",padding:"4px 8px",color:e.palette.grey["500"]}));function y({children:e,archived:t,isReadOnly:a,isMuted:n,searching:i,isBlocked:r,reactMode:o,allowMsgNoOne:s}){let{i18n:c,usePageParams:d}=(0,p.OgA)(),m=d(),u=(null==m?void 0:m.isAllPageMessages)||!1;return i?null:t?l.createElement(v,{disable:!0,isAllPageMessages:u},l.createElement(b,null,c.formatMessage({id:"this_group_is_archived"}))):a?l.createElement(v,{disable:!0,isAllPageMessages:u},l.createElement(b,null,c.formatMessage({id:"this_group_is_readonly"}))):n?l.createElement(v,{disable:!0,isAllPageMessages:u},l.createElement(b,null,c.formatMessage({id:"you_have_been_muted_in_this_group"}))):r||s&&"edit"!==o?l.createElement(v,{disable:!0,isAllPageMessages:u},l.createElement(b,null,c.formatMessage({id:"you_can_not_send_message_in_this_conversation"}))):l.createElement(f,{isAllPageMessages:u},e)}(0,o.ZP)("div",{shouldForwardProp:e=>"searching"!==e&&"addNewMembers"!==e})(({theme:e,searching:t,addNewMembers:a})=>({display:"flex",alignItems:"center",minHeight:e.spacing(7),padding:e.spacing(1.5,1.25,1.5,2),borderBottom:e.mixins.border("secondary"),...(t||a)&&{borderBottom:"none"}}));let x="ChatDockPanel";(0,o.ZP)("div",{name:x,slot:"Root"})(({theme:e})=>({display:"flex",alignItems:"flex-end",marginLeft:e.spacing(2),width:"328px",zIndex:999})),(0,o.ZP)("div",{name:x,slot:"PanelStyled"})(({theme:e})=>({display:"flex",flexDirection:"column",zIndex:10,backgroundColor:e.mixins.backgroundColor("paper"),borderTopLeftRadius:"4px",borderTopRightRadius:"4px",boxShadow:"0 0 4px 0 rgba(0,0,0,0.2)",wordBreak:"break-word",wordWrap:"break-word",borderStartStartRadius:e.spacing(1),borderStartEndRadius:e.spacing(1),height:"455px",maxHeight:"calc(100vh - 60px)"})),(0,o.ZP)("div",{name:x,slot:"StageStyled"})(({theme:e})=>({width:"100%"})),a(42963),a(23279);var E=a(22410),w=a(73327);(0,E.Z)(e=>(0,w.Z)({optionLabel:{width:"32px",height:"32px",display:"inline-flex",alignItems:"center",justifyContent:"center",margin:"0",color:"#a2a2a2"},optionChecked:{color:e.palette.primary.main},optionInput:{display:"none"},optionIcon:{display:"inline-flex",alignItems:"center",marginTop:"1px",height:"14px",marginRight:"4px"}}),{name:"ChatDockSearchFilter"}),(0,o.ZP)("div")(({theme:e})=>({})),(0,o.ZP)("div")(({theme:e})=>({display:"inline-flex"})),(0,o.ZP)("label",{shouldForwardProp:e=>"id"!==e})(({theme:e,id:t})=>({cursor:"pointer",..."close"===t&&{"& span.ico":{"&:hover":{background:e.palette.action.selected,width:e.spacing(2.8),height:e.spacing(2.8),display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"40px"}}}})),(0,o.ZP)(i.Z,{name:"SearchBox",slot:"Root"})(({theme:e})=>({margin:e.spacing(0,2,1,2),height:e.spacing(5),borderRadius:e.spacing(2.5),display:"flex",alignItems:"center",backgroundColor:e.palette.action.hover})),a(42977);var C=a(6867);a(81763),(0,o.ZP)("div")(({theme:e})=>({flex:1,fontWeight:"bold",display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"})),(0,o.ZP)("span",{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({fontSize:e.mixins.pxToRem(13),color:e.palette.text.primary,lineHeight:e.spacing(2.375),...t===u.d.Offline&&{color:e.palette.text.secondary}})),(0,o.ZP)("span",{shouldForwardProp:e=>"variant"!==e})(({theme:e,variant:t,type:a})=>({...e.typography.subtitle1,fontSize:"15px",lineHeight:e.spacing(2.375),...a===u.n.Direct&&{":hover":{cursor:"pointer",textDecoration:"underline"}},..."new_message"===t&&{fontSize:e.typography.pxToRem(18),":hover":{cursor:"auto",textDecoration:"none"}}})),(0,o.ZP)(C.Z,{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({margin:e.spacing(0,1,0,.5),"& .MuiBadge-badge":{...1===t&&{color:e.palette.success.main,backgroundColor:e.palette.success.main},...2===t&&{color:e.palette.warning.main,backgroundColor:e.palette.warning.main},...3===t&&{color:e.palette.error.main,backgroundColor:e.palette.error.main},"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}}})),(0,o.ZP)("div",{name:"DockPanelTitle"})(({theme:e})=>({display:"flex",alignItems:"center",marginTop:e.spacing(.25)}));var k=a(30998),S=a.n(k),Z=(0,E.Z)(e=>(0,w.Z)({root:{display:"flex",padding:"0",margin:"0",listStyle:"none"},item:{position:"relative",lineHeight:"34px",padding:"0",margin:"0",".panelHeader &":{height:"30px",width:"30px",marginLeft:e.spacing(.5)},".panelHeader &:hover button":{color:e.palette.text.secondary,backgroundColor:e.palette.action.selected,borderRadius:"50%"}},btn:{height:"34px",lineHeight:"20px",fontSize:"17px",padding:"0 6px",cursor:"pointer",color:"light"===e.palette.mode?e.palette.grey["600"]:e.palette.text.secondary,position:"relative",minWidth:e.spacing(3),display:"inline-flex",textAlign:"center",alignItems:"center",justifyContent:"center",border:"none",outline:"none",backgroundColor:"transparent",".panelHeader &":{height:"30px",width:"30px"}},itemActive:{},btnActive:{color:e.palette.primary.main}}),{name:"ChatDockToolbar"});let P=(0,o.ZP)("div",{name:"ToolbarChat",slot:"root",shouldForwardProp:e=>"variant"!==e})(({theme:e,variant:t})=>({display:"flex",padding:"0",margin:"0",listStyle:"none","& .MuiActionMenu-menu":"roomPanel"===t&&{overflow:"auto",maxHeight:"200px","&::-webkit-scrollbar":{height:"6px",width:"6px",background:"transparent",borderRadius:"3px",transition:"opacity 200ms"},"&::-webkit-scrollbar-track":{margin:e.spacing(.5,0),borderRadius:"3px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,.2)",borderRadius:"3px"},"&::-webkit-scrollbar-thumb:horizontal":{background:"#000",borderRadius:"10px"}},..."pageMessage"===t&&{"& .MuiListItem-root .ico":{fontSize:e.mixins.pxToRem(13)}}}));function M({items:e,displayLimit:t=4,variant:a=null,handleAction:i,popperOptions:r}){var o,s,c;let d=Z();if(!Array.isArray(e))return null;if("roomPanel"===a){let m=t-2,u=S()(e,{testid:"startVoiceCall"}),p=S()(e,{testid:"startVideoChat"});m=t-2-(u>-1?0:1)-(p>-1?0:1);let g=e.filter((e,t)=>{return t<m||e.behavior}),h=S()(g,{behavior:"more"});if(h>-1){if(null===(o=g[h].items)||void 0===o?void 0:o.length)g[h].as="dropdown";else{let f=e.filter((e,t)=>t>m-1&&!e.behavior);g[h]={...g[h],items:f,as:"dropdown"}}}return l.createElement(P,{variant:a},l.createElement(n.sd,{items:g,prefixName:"chatplusToolbar.item.",fallbackName:"button",classes:d,handleAction:i,popperOptions:r}))}if("pageMessage"===a){let v=e.filter((e,t)=>{return e.behavior}),b=S()(v,{behavior:"more"});if(b>-1){if(null===(s=v[b].items)||void 0===s?void 0:s.length)v[b].as="dropdown";else{let y=e.filter((e,t)=>!e.behavior);v[b]={...v[b],items:y,as:"dropdown"}}}return l.createElement(P,{variant:a},l.createElement(n.sd,{items:v,prefixName:"chatplusToolbar.item.",fallbackName:"button",classes:d,handleAction:i,variant:a,popperOptions:r}))}let x=e.filter((e,a)=>a<t-1||e.behavior),E=S()(x,{behavior:"more"});if(E>-1){if(null===(c=x[E].items)||void 0===c?void 0:c.length)x[E].as="dropdown";else{let w=e.filter((e,a)=>a>t-2&&!e.behavior);x[E]={...x[E],items:w,as:"dropdown"}}}return l.createElement(P,null,l.createElement(n.sd,{items:x,prefixName:"chatplusToolbar.item.",fallbackName:"button",classes:d,handleAction:i,popperOptions:r}))}},83940:function(e,t,a){var n=a(93836),i=a(67294),r=a(69709);t.Z=(0,i.memo)(function({username:e,name:t,size:a="sm",status:o=null,room:l=null,avatarETag:s,hoverCard:c}){return i.createElement(r.default,{username:e,size:a,name:t,roomType:n.n.Direct,status:o,room:l,avatarETag:s,hoverCard:c})})},28972:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var n=a(42977),i=a(92114),r=a(85597),o=a(16473),l=a(81719),s=a(67294);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let d="dialogItemView",m=(0,l.ZP)("div",{name:d,slot:"ico-close",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(4),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"]},...t&&{top:e.spacing(2.5),right:e.spacing(2.5)}})),u=(0,l.ZP)("div",{name:d,slot:"ico-download",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(10),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"]},...t&&{top:e.spacing(2.5),right:e.spacing(8.125)}})),p=(0,l.ZP)(i.cZ,{name:d,slot:"content",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("xs")]:{flexFlow:"column"},...t&&{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.palette.grey.A400}})),g=(0,l.ZP)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative"})),h=(0,l.ZP)("img")(({theme:e})=>({maxWidth:"100%",maxHeight:" calc(100vh - 88px)",margin:"auto"})),f=(0,l.ZP)("video")(({theme:e})=>({maxWidth:"100%",maxHeight:" calc(100vh - 88px)",margin:"auto"})),v=(0,l.ZP)("div",{name:d,slot:"button-prev",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:e.spacing(5),left:e.spacing(4),...t&&{left:e.spacing(.5),zIndex:999,opacity:.8}})),b=(0,l.ZP)("div",{name:d,slot:"button-next",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:e.spacing(5),right:e.spacing(4),...t&&{right:e.spacing(.5),zIndex:999,opacity:.8}})),y=(0,l.ZP)("div",{name:d,slot:"button-image"})(({theme:e})=>({cursor:"pointer",width:e.spacing(5),height:e.spacing(5),borderRadius:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:e.palette.grey["800"],"& .ico":{fontSize:e.mixins.pxToRem(16),color:e.palette.grey["50"]}}));function x({image:e,images:t}){let{useDialog:a,useIsMobile:l}=(0,r.OgA)(),d=l(),{dialogProps:x,closeDialog:E}=a(),w=t&&t.length-1,C=t&&t.length>1,k=parseInt(null==e?void 0:e.id)||0,[S,Z]=s.useState(k),P=e=>{e+1>w?Z(0):Z(parseInt(e)+1)},M=e=>{e-1<0?Z(w):Z(parseInt(e)-1)},_=e=>{let t="rtl"===document.dir,a="";switch(e.keyCode){case 27:E();break;case 39:a=t?"prev":"next";break;case 37:a=t?"next":"prev"}if("next"===a&&S!==w){P(S);return}if("prev"===a&&0!==S){M(S);return}},O=e=>{e&&(0,n.Sv)(e)};return(s.useEffect(()=>{return document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}},[S]),C)?s.createElement(i.Vq,c({},x,{"data-testid":"popupDetailPhoto",maxWidth:d?"xl":"lg",fullScreen:!!d,fullWidth:!1,scroll:"body"}),s.createElement(m,{onClick:E,isMobile:d},s.createElement(o.zb,{icon:"ico-close"})),0!==S&&s.createElement(v,{isMobile:d},s.createElement(y,{onClick:()=>M(S)},s.createElement(o.zb,{icon:"ico-angle-left"}))),s.createElement(p,{dividers:!1,isMobile:d},t.map((e,t)=>{return s.createElement("div",{key:t},e.id===S?s.createElement(g,null,(null==e?void 0:e.video_type)?s.createElement(f,{src:null==e?void 0:e.src,type:e.video_type,controls:!0,autoPlay:!0}):s.createElement(h,{src:(null==e?void 0:e.video_thumb_url)||(null==e?void 0:e.src),alt:""}),s.createElement(u,{onClick:()=>O(e.src),isMobile:d},s.createElement(o.zb,{icon:"ico-download"}))):null)})),S!==w&&s.createElement(b,{isMobile:d},s.createElement(y,{onClick:()=>P(S)},s.createElement(o.zb,{icon:"ico-angle-right"})))):e?s.createElement(i.Vq,c({},x,{"data-testid":"popupDetailPhoto",maxWidth:d?"xl":"lg",fullScreen:!!d,fullWidth:!1,scroll:"body"}),s.createElement(m,{onClick:E,isMobile:d},s.createElement(o.zb,{icon:"ico-close"})),s.createElement(p,{dividers:!1,isMobile:d},s.createElement(g,null,(null==e?void 0:e.video_type)?s.createElement("video",{src:e.src,type:e.video_type,controls:!0,autoPlay:!0}):s.createElement(h,{src:e.src,alt:""}),(null==e?void 0:e.video_type)||!e.src?null:s.createElement(u,{onClick:()=>O(e.src),isMobile:d},s.createElement(o.zb,{icon:"ico-download"}))))):null}},5021:function(e,t,a){a.r(t);var n=a(92114),i=a(85597),r=a(63516),o=a(21822),l=a(72962),s=a(22949),c=a(67294),d=a(42963);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}t.default=function({room:e}){let{useDialog:t,i18n:a,dispatch:u}=(0,i.OgA)(),{closeDialog:p,dialogProps:g}=t(),[h,f]=c.useState(null),[v,b]=c.useState(!1);if(!e)return p(),null;let y=()=>{p()},x=e=>{f(e.target.value)},E=()=>{h&&(b(!0),u({type:"chatplus/room/editSettings",payload:{identity:null==e?void 0:e.id,value:{roomName:h}},meta:{onSuccess:w,onFailure:C}}))},w=()=>{f(null),b(!1),p()},C=()=>{f(null),b(!1)};return c.createElement(n.Vq,m({maxWidth:"sm",fullWidth:!0},g),c.createElement(n.$N,{disableClose:!1},a.formatMessage({id:"change_name_group"})),c.createElement(n.cZ,{sx:{maxHeight:"300px",py:.5}},c.createElement(s.Z,{onChange:x,autoFocus:!0,fullWidth:!0,required:!0,placeholder:null==e?void 0:e.name,InputLabelProps:{shrink:!1},variant:"outlined",inputProps:{maxLength:d.LQ}})),c.createElement(l.Z,null,c.createElement(r.Z,{loading:v,role:"button","data-testid":"buttonCancel",tabIndex:0,variant:"contained",size:"medium",color:"primary",onClick:E,sx:{minWidth:120}},a.formatMessage({id:"save"})),c.createElement(o.Z,{role:"button","data-testid":"buttonSubmit",tabIndex:1,variant:"outlined",size:"medium",color:"primary",sx:{minWidth:120},onClick:y},a.formatMessage({id:"cancel"}))))}},11004:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var n=a(92114),i=a(85597),r=a(16473),o=a(27274),l=a(30120),s=a(21822),c=a(42853),d=a(81719),m=a(22949),u=a(91647),p=a(67294),g=a(86706),h=a(69709),f=a(39312),v=a(80036),b=a(71420),y=a(41609),x=a.n(y),E=a(84116),w=a(42963);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let k=(0,d.ZP)("div",{name:"WrapperAvatar"})(({theme:e})=>({marginBottom:e.spacing(2.5)})),S=(0,d.ZP)("div",{name:"EditAvatarButton"})(({theme:e})=>({width:100,height:100,borderRadius:100,position:"relative","&:hover":{opacity:.47},"&:hover .ico":{visibility:"visible"}})),Z=(0,d.ZP)(r.zb,{name:"LineIconCamera"})(({theme:e})=>({fontSize:30,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",visibility:"hidden",zIndex:99})),P=(0,d.ZP)(l.Z,{name:"WrapperInput"})(({theme:e})=>({marginBottom:e.spacing(2)})),M=(0,d.ZP)(l.Z,{name:"form"})(({theme:e})=>({color:e.palette.text.hint}));function _({text:e,sx:t,error:a=!1}){return e?p.createElement(c.Z,{sx:t,error:a},p.createElement(E.ZP,{html:e})):null}function O(e){let{title:t,allowEditing:a,rid:c,room:d}=e,{i18n:y,useDialog:E,dispatch:O,dialogBackend:R}=(0,i.OgA)(),{dialogProps:z,closeDialog:I}=E(),W=(null==d?void 0:d.ro)||!1,N=(null==d?void 0:d.t)==="c",T=(null==d?void 0:d.fname)||"",A=(null==d?void 0:d.topic)||"",j=(null==d?void 0:d.description)||"",$=(null==d?void 0:d.announcement)||"",[L,B]=p.useState(W),[D,F]=p.useState(N),[V,H]=p.useState(T),[U,q]=p.useState(A),[Y,X]=p.useState(j),[G,Q]=p.useState($),[K,J]=p.useState(""),ee=p.useRef(),et=(0,g.v9)(e=>(0,v.TC)(e,c)),ea=(0,f.Fy)(),en=null,ei=()=>{ee&&ee.current&&ee.current.click()},er=e=>{var t;e.preventDefault(),e.stopPropagation();let a=ee.current;if(!a||!(null===(t=a.files)||void 0===t?void 0:t.length))return;let n=a.files[0],i=new FileReader,r="",l=(null==ea?void 0:ea.RoomAvatarUpload_MaxFileSize)||8e3;i.addEventListener("load",e=>{r=e.target.result;let t=null==n?void 0:n.size,a=n.name;if(t&&t<l&&0!==l){if(!r)return;J(r)}else R.alert({message:y.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,o.TX)(a,30),fileSize:(0,o.jA)(n.size),maxSize:(0,o.jA)(l)})})}),i.readAsDataURL(n)},eo=()=>{I()},el=(e,t)=>{let a={};return Object.keys(e).forEach(n=>{t[n]!==e[n]&&(a[n]="string"==typeof t[n]?t[n].trim():t[n])}),a},es=()=>{if(x()(V)){en=p.createElement(_,{text:"Group Name is required",error:!0});return}let e=el({roomAvatar:"",readOnly:W,roomType:N?"c":"p",roomName:T,roomTopic:A,roomDescription:j,roomAnnouncement:$},{roomAvatar:K,readOnly:L,roomType:D?"c":"p",roomName:V,roomTopic:U,roomDescription:Y,roomAnnouncement:G});if(!Object.keys(e).length){I();return}O({type:"chatplus/room/editSettings",payload:{identity:null==d?void 0:d.id,value:e},meta:{onSuccess:()=>I()}})};x()(V)&&(en=p.createElement(_,{text:"Group Name is required",error:!0}));let ec=p.useMemo(()=>{return Boolean(x()(V))},[V]);return p.createElement(n.Vq,C({maxWidth:"sm",fullWidth:!0},z),p.createElement(n.$N,{disableClose:!1},t||y.formatMessage({id:"room_info"})),p.createElement(n.cZ,{sx:{py:2,px:3}},p.createElement(k,null,a?p.createElement(S,{onClick:ei},p.createElement(h.default,{name:null==et?void 0:et.name,username:null==et?void 0:et.name,src:K||(null==et?void 0:et.avatar),size:100,room:d,uploadLocal:!!K}),p.createElement(Z,{icon:"ico-camera"})):p.createElement(h.default,{name:null==et?void 0:et.name,username:null==et?void 0:et.name,size:100,src:null==et?void 0:et.avatar,room:d}),p.createElement("input",{accept:"image/*",style:{display:"none"},type:"file",ref:ee,onChange:er})),p.createElement(P,null,p.createElement(m.Z,{disabled:!a,defaultValue:V,value:V,error:ec,onChange:e=>{H(e.currentTarget.value)},autoFocus:!0,fullWidth:!0,required:!0,variant:"outlined",placeholder:y.formatMessage({id:"name"}),label:y.formatMessage({id:"channel_name"}),helperText:en,inputProps:{maxLength:w.LQ}})),a||A?p.createElement(P,null,a?p.createElement(m.Z,{disabled:!a,defaultValue:U,value:U,onChange:e=>q(e.currentTarget.value),autoFocus:!0,fullWidth:!0,variant:"outlined",placeholder:y.formatMessage({id:"topic"}),label:y.formatMessage({id:"topic"})}):p.createElement(m.Z,{disabled:!0,defaultValue:A||y.formatMessage({id:"empty"}),fullWidth:!0,variant:"outlined",label:y.formatMessage({id:"topic"})})):null,a||j?p.createElement(P,null,a?p.createElement(m.Z,{multiline:!0,rows:2,disabled:!a,defaultValue:Y,value:Y,onChange:e=>X(e.currentTarget.value),autoFocus:!0,fullWidth:!0,variant:"outlined",placeholder:y.formatMessage({id:"description"}),label:y.formatMessage({id:"description"})}):p.createElement(M,null,p.createElement(u.Z,{sx:{mb:1}},y.formatMessage({id:"description"})),p.createElement(u.Z,null,j?p.createElement(r.Ys,{variant:"body1",showFull:!0},p.createElement("span",{dangerouslySetInnerHTML:{__html:j}})):p.createElement("i",null,y.formatMessage({id:"empty"}))))):null,a||$?p.createElement(P,null,a?p.createElement(m.Z,{multiline:!0,rows:2,disabled:!a,defaultValue:G,value:G,onChange:e=>Q(e.currentTarget.value),autoFocus:!0,fullWidth:!0,variant:"outlined",placeholder:y.formatMessage({id:"announcement"}),label:y.formatMessage({id:"announcement"})}):p.createElement(M,null,p.createElement(u.Z,{sx:{mb:1}},y.formatMessage({id:"announcement"})),p.createElement(u.Z,null,$?p.createElement(r.Ys,{variant:"body1",showFull:!0},p.createElement("span",{dangerouslySetInnerHTML:{__html:$}})):p.createElement("i",null,y.formatMessage({id:"empty"}))))):null,p.createElement(l.Z,null,p.createElement(b.CheckboxLabels,{allowEditing:a,readonly:L,isPublic:D,setReadonly:B,setIsPublic:F}))),a?p.createElement(n.kX,null,p.createElement(s.Z,{disabled:ec,onClick:es,color:"primary",autoFocus:!0,variant:"contained",children:y.formatMessage({id:"save"})}),p.createElement(s.Z,{onClick:eo,color:"primary",autoFocus:!0,variant:"outlined",children:y.formatMessage({id:"cancel"})})):null)}},84687:function(e,t,a){a.r(t),a.d(t,{SelectItem:function(){return E}});var n=a(92114),i=a(85597),r=a(16473),o=a(21822),l=a(78573),s=a(85964),c=a(61702),d=a(74825),m=a(12501),u=a(81719),p=a(1469),g=a.n(p),h=a(67294),f=a(39312);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let b=(0,u.ZP)(s.ZP,{name:"StyledListItem"})(({theme:e})=>{var t;return{borderBottom:"solid 1px",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,padding:"22px 0 !important",display:"flex",justifyContent:"space-between","&:first-of-typed":{paddingTop:6},"&:last-child":{paddingBottom:6,borderBottom:"none"}}}),y=(0,u.ZP)(r.Ys)(({theme:e})=>({display:"flex",justifyContent:"center",flex:1,minWidth:0})),x=(0,u.ZP)(m.Z)(({theme:e})=>({"& .MuiInputBase-input":{fontWeight:"normal"}}));function E({item:e,onChanged:t}){var a;let[n,i]=h.useState(null==e?void 0:e.value),r=a=>{let n=a.target.value;i(n),t(n,null==e?void 0:e.var_name)};return h.createElement(b,null,h.createElement(c.Z,{primary:e.phrase,sx:{pr:2}}),h.createElement(x,{className:"select-quick-sort",variant:"standard",value:n,onChange:r,disableUnderline:!0},null==e?void 0:null===(a=e.options)||void 0===a?void 0:a.map((e,t)=>h.createElement(d.Z,{value:e.value,key:t},e.label))))}t.default=function(e){var t,a;let{i18n:r,useDialog:s,dispatch:c,useIsMobile:d}=(0,i.OgA)(),m=d(),u=(0,f.o4)(),{dialogProps:p,closeDialog:b}=s(),[x,w]=(0,h.useState)(null!==(t=null==u?void 0:u.mobileNotifications)&&void 0!==t?t:"all"),[C,k]=(0,h.useState)(null!==(a=null==u?void 0:u.audioNotifications)&&void 0!==a?a:"all"),S=[{default_value:x,ordering:1,value:x,phrase:r.formatMessage({id:"receive_mobile_notifications"}),var_name:"mobileNotifications",options:[{label:r.formatMessage({id:"all_messages"}),value:"all"},{label:r.formatMessage({id:"mentions"}),value:"mentions"},{label:r.formatMessage({id:"nothing"}),value:"nothing"}]},{default_value:C,ordering:2,value:C,phrase:r.formatMessage({id:"receive_sound_notifications"}),var_name:"audioNotifications",options:[{label:r.formatMessage({id:"all_messages"}),value:"all"},{label:r.formatMessage({id:"mentions"}),value:"mentions"},{label:r.formatMessage({id:"nothing"}),value:"nothing"}]}],Z=(e,t)=>{switch(t){case"mobileNotifications":w(e);break;case"audioNotifications":k(e)}},P=()=>{b()},M=()=>{let e={...u,mobileNotifications:x,audioNotifications:C};c({type:"chatplus/room/saveUserPreferences",payload:e,meta:{onSuccess:()=>b()}})};return m?h.createElement(n.Vq,v({maxWidth:"sm",fullWidth:!0},p),h.createElement(n.$N,{enableDone:!0,onDoneClick:M,enableBack:!0,onBackClick:P,disableClose:!0},h.createElement(y,{lines:1,color:"text.primary",variant:"h2",fontSize:18},r.formatMessage({id:"settings"}))),h.createElement(n.cZ,{sx:{p:"0 16px"}},h.createElement(l.Z,{disablePadding:!0},g()(S)?S.map(e=>{return h.createElement(E,{key:null==e?void 0:e.var_name,onChanged:Z,item:e})}):null))):h.createElement(n.Vq,v({maxWidth:"sm",fullWidth:!0},p),h.createElement(n.$N,{disableClose:!1},r.formatMessage({id:"settings"})),h.createElement(n.cZ,{sx:{p:"0 16px"}},h.createElement(l.Z,{disablePadding:!0},g()(S)?S.map(e=>{return h.createElement(E,{key:null==e?void 0:e.var_name,onChanged:Z,item:e})}):null)),h.createElement(n.kX,{sx:{mt:.5}},h.createElement(o.Z,{onClick:M,color:"primary",autoFocus:!0,variant:"contained",children:r.formatMessage({id:"save"})}),h.createElement(o.Z,{onClick:P,color:"primary",autoFocus:!0,variant:"outlined",children:r.formatMessage({id:"cancel"})})))}},46089:function(e,t,a){a.r(t),a.d(t,{MembersDialog:function(){return S},default:function(){return Z}});var n=a(39312),i=a(92114),r=a(85597),o=a(21241),l=a(12482),s=a(81719),c=a(41609),d=a.n(c),m=a(67294),u=a(69709),p=a(16473),g=a(27274);let h="MemberItem",f=(0,s.ZP)("div",{name:h,slot:"UIChatBuddyItem"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(1.5,2),color:"#555555",fontSize:"14px",cursor:"pointer","&:hover":{background:"dark"===e.palette.mode?e.palette.grey["700"]:e.palette.grey["50"]}})),v=(0,s.ZP)("div",{name:h,slot:"UIChatBuddyItemWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:0,flex:1})),b=(0,s.ZP)("div")(({theme:e})=>({marginLeft:e.spacing(1.5),display:"flex",alignItems:"flex-start",flexDirection:"column",flex:1})),y=(0,s.ZP)("div")(({theme:e})=>({color:e.palette.grey["600"],fontSize:e.spacing(2),padding:e.spacing(0,1)})),x=(0,s.ZP)(p.Ys)(({theme:e})=>({..."dark"===e.palette.mode&&{color:e.palette.grey["400"]}})),E=(0,s.ZP)("div")(({theme:e})=>({..."dark"===e.palette.mode&&{color:e.palette.grey["500"]}}));function w({u:e,user:t,room:a,perms:n={}}){let{i18n:i,chatplus:o,useActionControl:l}=(0,r.OgA)(),s={moderator:0,leader:0,owner:0};e&&e.roles&&Array.isArray(e.roles)&&Object.keys(s).forEach(t=>{e.roles.includes(t)&&(s[t]=1)});let{_id:c,muted:d}=a,{_id:h,username:w}=e,C=h===t._id,k=d&&d.includes(w),[S]=l(c,{}),Z=m.useMemo(()=>{return[{label:"unmute_room_user",icon:"ico-unlock-o",value:"closeMenu, chatplus/room/unmuteUserInRoom",params:{userId:h},showWhen:["and",["truthy","perms.mute-user"],["falsy","isOwner"],["truthy","isMuted"]]},{label:"mute",icon:"ico-lock",value:"closeMenu, chatplus/room/muteUserInRoom",params:{userId:h},showWhen:["and",["truthy","perms.mute-user"],["falsy","isOwner"],["falsy","isMuted"]]},{label:"set_room_owner",icon:"ico-businessman-plus",value:"closeMenu, chatplus/room/addRoomOwner",params:{userId:h},showWhen:["and",["truthy","perms.set-owner"],["falsy","roles.owner"],["falsy","isOwner"]]},{label:"remove_room_owner",icon:"ico-businessman-del",value:"closeMenu, chatplus/room/removeRoomOwner",params:{userId:h},showWhen:["and",["truthy","perms.set-owner"],["truthy","roles.owner"]]},{label:"set_room_moderator",icon:"ico-businessman-plus",value:"closeMenu, chatplus/room/addRoomModerator",params:{userId:h},showWhen:["and",["truthy","perms.set-moderator"],["falsy","roles.moderator"],["falsy","isOwner"]]},{label:"remove_room_moderator",icon:"ico-businessman-del",value:"closeMenu, chatplus/room/removeRoomModerator",params:{userId:h},showWhen:["and",["truthy","perms.set-moderator"],["truthy","roles.moderator"]]},{label:"set_room_leader",icon:"ico-businessman-plus",value:"closeMenu, chatplus/room/addRoomLeader",params:{userId:h},showWhen:["and",["truthy","perms.set-leader"],["falsy","roles.leader"],["falsy","isOwner"]]},{label:"remove_room_leader",icon:"ico-businessman-del",value:"closeMenu, chatplus/room/removeRoomLeader",params:{userId:h},showWhen:["and",["truthy","perms.set-leader"],["truthy","roles.leader"]]},{label:"remove_room_user",icon:"ico-trash-o",value:"closeMenu, chatplus/room/removeUserFromRoom",params:{userId:h},showWhen:["and",["truthy","perms.remove-user"],["falsy","isOwner"]]}]},[h]),P=m.useMemo(()=>(0,g.W$)(Z,{isOwner:C,roles:s,perms:n,isMuted:k}),[Z,C,s,n,k]);return e?m.createElement(f,null,m.createElement(v,{onClick:()=>{return o.openDirectMessageByUserId(null==e?void 0:e._id)}},m.createElement(u.default,{username:e.username,name:e.name,size:40,status:e.status,avatarETag:null==e?void 0:e.avatarETag,hoverCard:null==e?void 0:e.metafoxUserId,component:r.QVN}),m.createElement(b,null,m.createElement(x,{lines:1,variant:"h5"},m.createElement(r.rUS,{children:e.name,hoverCard:`/user/${null==e?void 0:e.metafoxUserId}`,underline:"none",color:"inherit"})),m.createElement(E,null,e.roles?e.roles.map(e=>i.formatMessage({id:e})).join(", "):null))),P.length?m.createElement(y,null,m.createElement(p.VK,{identity:c,icon:"ico-dottedmore-vertical-o",items:P,menuName:"detailActionMenu",handleAction:S,size:"smaller"})):null):null}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let k=(0,s.ZP)("div")(({theme:e})=>({}));function S({rid:e,users:t}){let{useDialog:a,dispatch:s}=(0,r.OgA)(),{dialogProps:c}=a(),u=(0,n.Oy)(),p=(0,n.F5)(e),g=(0,n.XP)(e),h=t?Object.values(t):[],[f,v]=m.useState(h);return m.useEffect(()=>{s({type:"chatplus/room/getRoomMembers",payload:{rid:e},meta:{onSuccess:e=>{v(Object.values(e))}}})},[s,null==p?void 0:p.usersCount]),m.createElement(i.Vq,C({maxWidth:"sm",fullWidth:!0},c),m.createElement(i.$N,{disableClose:!1},p?p.fname:""),m.createElement(i.cZ,{sx:{maxHeight:"300px",p:0}},m.createElement(k,null,m.createElement(o.l$,{autoHide:!0,autoHeight:!0},d()(t)?m.createElement(l.Z,null):f.map(e=>m.createElement(w,{key:e._id,u:e,room:p,user:u,perms:g}))))))}var Z=S},71420:function(e,t,a){a.r(t),a.d(t,{CheckboxLabels:function(){return N},default:function(){return T}});var n=a(92114),i=a(85597),r=a(21822),o=a(44373),l=a(49960),s=a(18037),c=a(52922),d=a(67294),m=a(21241),u=a(63343),p=a(33483),g=a(81719),h=a(91647),f=a(71682),v=a(70735),b=a.n(v),y=a(86706),x=a(39312),E=a(80036),w=a(69709),C=a(94767),k=a(96035),S=a(16473);let Z=(0,g.ZP)("div",{shouldForwardProp:e=>"suggestList"!==e&&"height"!==e&&"loading"!==e})(({theme:e,suggestList:t,height:a,loading:n})=>({padding:e.spacing(1,1,1,2),...!1===t&&!n&&{display:"flex",justifyContent:"center"},...n&&{display:"block"},...a&&{height:a}})),P=(0,g.ZP)("div",{shouldForwardProp:e=>"users"!==e})(({theme:e,users:t})=>({...t&&{padding:e.spacing(0,1,1,2)},listStyle:"none",display:"flex",alignItems:"center",flexWrap:"wrap"})),M=(0,g.ZP)("li")(({theme:e})=>({margin:e.spacing(.5)})),_=(0,g.ZP)("div",{shouldForwardProp:e=>"loading"!==e})(({theme:e,loading:t})=>({padding:e.spacing(1.75,0),display:"flex",alignItems:"center",cursor:"pointer",...t&&{padding:e.spacing(1.25,0)}})),O=(0,g.ZP)("span")(({theme:e})=>({...e.typography.h5,marginLeft:e.spacing(1)})),R=({user:e,onSelectItem:t})=>{let a=(0,x.ID)(null==e?void 0:e._id);return d.createElement(d.Fragment,null,d.createElement(_,{onClick:()=>t(e)},d.createElement(w.default,{name:e.label,username:e.value,avatarETag:(null==e?void 0:e.avatarETag)||(null==a?void 0:a.avatarETag),size:32}),d.createElement(O,null,e.label)),d.createElement(o.Z,null))},z=({loading:e,suggest:t,height:a,onSelectItem:n})=>{let{i18n:r}=(0,i.OgA)();return e?d.createElement(d.Fragment,null,[,,,,].fill(0).map((e,t)=>d.createElement(_,{key:t,loading:!0},d.createElement(S.vk,null,d.createElement(f.Z,{variant:"avatar",width:40,height:40,sx:{mr:2}})),d.createElement(S.eT,null,d.createElement(S.XQ,null,d.createElement(f.Z,{variant:"text",width:"50%"})))))):t&&t.length?d.createElement(m.l$,{autoHide:!0,autoHeight:!a},t.map((e,t)=>{return d.createElement(R,{key:null==e?void 0:e._id,user:e,onSelectItem:n})})):d.createElement(h.Z,{mt:1,variant:"body1"},r.formatMessage({id:"no_friend_found"}))};var I=function({variant:e="direct",placeholder:t,users:a=[],members:n=[],divider:r=!0,isShowButtonSubmit:l=!0,setUsers:s,onSubmit:c,height:m=335}){let{i18n:g,dispatch:h}=(0,i.OgA)(),{users:f=[],searchText:v,loading:w}=(0,k.Z)(),S=(0,x.Oy)(),_=(0,y.v9)(E.$J),[O,R]=d.useState("");d.useEffect(()=>{return()=>{h({type:"chatplus/spotlight/reset"})}},[]);let I=t||g.formatMessage({id:"search_people"}),W=e=>{R(""),s(t=>[...t,e])},N=e=>{s(t=>t.filter(t=>t.value!==e.value))},T=d.useCallback(e=>{var t;let a=null===(t=e.currentTarget)||void 0===t?void 0:t.value;a!==v&&h({type:"chatplus/spotlight",payload:{query:a,users:!0,rooms:!1}})},[h,v,_]),A=d.useCallback(e=>{var t;let a=null===(t=e.currentTarget)||void 0===t?void 0:t.value;R(a)},[]),j=f.filter(t=>{return"group"===e?t.username!==(null==S?void 0:S.username):"direct"===e?t:void 0}).map(e=>{return{value:e.username,label:e.name,_id:e._id,avatarETag:null==e?void 0:e.avatarETag}}),$=b()(j,a,"value"),L=n.map(e=>e.label);return d.createElement("div",null,d.createElement(C.zj,{disabled:!a.length,valueSearch:O,onChangeSearch:A,onKeyUp:T,placeholder:I,size:30,onSubmit:c,label:g.formatMessage({id:"next"}),variant:e,isShowButtonSubmit:l}),d.createElement(P,{users:a.length},a.map((e,t)=>{return L.length&&L.includes(e.label)?d.createElement(M,{key:t},d.createElement(p.Z,{size:"medium",label:e.label})):d.createElement(M,{key:t},d.createElement(p.Z,{size:"medium",onDelete:()=>N(e),label:e.label,deleteIcon:d.createElement(u.Z,{style:{fontSize:"20px"}})}))})),r&&d.createElement(o.Z,null),d.createElement(Z,{suggestList:Boolean($&&$.length),height:m,loading:w},d.createElement(z,{loading:w,suggest:$,height:m,onSelectItem:W})))};function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function N({setIsPublic:e,setReadonly:t,readonly:a=!1,isPublic:n=!1,allowEditing:r=!0}){let{i18n:o}=(0,i.OgA)();return d.createElement(c.Z,null,d.createElement(s.Z,{control:d.createElement(l.Z,{disabled:!r,defaultChecked:!0,checked:a,onChange:e=>t(e.target.checked)}),label:o.formatMessage({id:"read_only_chat"})}),d.createElement(s.Z,{control:d.createElement(l.Z,{disabled:!r,defaultChecked:!0,checked:n,onChange:t=>e(t.target.checked)}),label:o.formatMessage({id:"public_group_chat"})}))}var T=function(e){let{i18n:t,useDialog:a,dispatch:l}=(0,i.OgA)(),{dialogProps:s}=a(),c=(0,x.Oy)(),m=((null==e?void 0:e.users)||[]).filter(e=>e.username!==c.username).map(e=>({value:e.username,label:e.name,_id:e._id})),u=null==e?void 0:e.roomId,p=(null==e?void 0:e.isNewConversation)||!1,g=(null==e?void 0:e.readonly)||!1,h=(null==e?void 0:e.isPublic)||!1,f=(null==e?void 0:e.isAddMember)||!1,[v,b]=d.useState(m||[]),[y,E]=d.useState(g),[w,C]=d.useState(h),k=function(e,t,a,n){let i=!1;switch(e){case!0:i=!1;break;case!1:if(n&&t.length>=1&&a&&t.length!==a.length){i=!1;break}i=t.length<2||!!a&&t.length===a.length}return i}(p,v,m,f),S=function(e,t,a){let n=!0;switch(e){case!0:n=t.length>1;break;case!1:a&&(n=!1)}return n}(p,v,f),Z=function(e,t,a){let n="new_group_conversation";switch(e){case!0:n=t.length>1?"new_group_conversation":"new_conversation";break;case!1:a&&(n="add_members")}return n}(p,v,f),P=d.useMemo(()=>{return v.find(e=>{return e.value===(null==c?void 0:c.username)})},[v,c]);d.useEffect(()=>{P&&l({type:"chatplus/chatRoom/newConversation",payload:{users:v}})},[P,v]);let M=d.useCallback(()=>{let e=v.length;if(e){if(f&&u){let t=v.map(e=>e.value);l({type:"chatplus/room/addUsers",payload:{rid:u,users:t}})}else l({type:"chatplus/chatRoom/newConversation",payload:{users:v,readonly:y,isPublic:w,nameGroup:""}})}},[l,v,y,w,"",u,f]);return d.createElement(n.Vq,W({maxWidth:"sm",fullWidth:!0},s),d.createElement(n.$N,{disableClose:!1},t.formatMessage({id:Z})),d.createElement(n.cZ,{sx:{p:0}},d.createElement(I,{members:m,users:v,setUsers:b,placeholder:t.formatMessage({id:"search_people"}),variant:p&&0===v.length?"direct":"group",isShowButtonSubmit:!1,height:260})),S?d.createElement("div",{style:{padding:"8px 16px"}},d.createElement(N,{readonly:y,isPublic:w,setReadonly:E,setIsPublic:C})):null,d.createElement(o.Z,null),d.createElement(n.kX,null,d.createElement(r.Z,{disabled:k,onClick:M,color:"primary",autoFocus:!0,variant:"contained",children:t.formatMessage({id:f?"done":"create_conversation"})})))}},91480:function(e,t,a){a.r(t),a.d(t,{SelectItem:function(){return C}});var n=a(92114),i=a(85597),r=a(16473),o=a(27274),l=a(21822),s=a(78573),c=a(85964),d=a(61702),m=a(74825),u=a(12501),p=a(81719),g=a(1469),h=a.n(g),f=a(67294),v=a(39312),b=a(93836);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let x=(0,p.ZP)(c.ZP,{name:"StyledListItem"})(({theme:e})=>{var t;return{borderBottom:"solid 1px",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,padding:"22px 0 !important",display:"flex",justifyContent:"space-between","&:first-of-typed":{paddingTop:6},"&:last-child":{paddingBottom:6,borderBottom:"none"}}}),E=(0,p.ZP)(r.Ys)(({theme:e})=>({display:"flex",justifyContent:"center",flex:1,minWidth:0})),w=(0,p.ZP)(u.Z)(({theme:e})=>({"& .MuiInputBase-input":{fontWeight:"normal"}}));function C({item:e,onChanged:t,disableNotifications:a}){var n;let[i,r]=f.useState(null==e?void 0:e.value),l=a=>{let n=a.target.value;r(n),t(n,null==e?void 0:e.var_name)},s=!!e.disable&&(0,o.gx)({disableNotifications:a},e.disable);return f.createElement(x,null,f.createElement(d.Z,{primary:e.phrase,sx:{pr:2}}),f.createElement(w,{className:"select-quick-sort",variant:"standard",value:i,onChange:l,disableUnderline:!0,disabled:s},null==e?void 0:null===(n=e.options)||void 0===n?void 0:n.map((e,t)=>f.createElement(m.Z,{value:e.value,key:t},e.label))))}t.default=function({rid:e}){let{i18n:t,useDialog:a,useIsMobile:r}=(0,i.OgA)(),o=(0,v.jS)(e),c=r(),d=(0,v.o4)(),m=o.t||b.n.Direct,u=m===b.n.Direct&&((null==d?void 0:d.mobilePushNotifications)==="mentions"||(null==o?void 0:o.mobilePushNotifications)==="mentions")?"all":o.mobilePushNotifications||(null==d?void 0:d.mobilePushNotifications)||"all",p=m===b.n.Direct&&((null==d?void 0:d.audioNotifications)==="mentions"||"mentions"===o.audioNotifications)?"all":o.audioNotifications||(null==d?void 0:d.audioNotifications)||"all",{dialogProps:g,closeDialog:x,setDialogValue:w}=a(),[k,S]=(0,f.useState)(o.disableNotifications||d.disableNotifications||!1),[Z,P]=(0,f.useState)(u),[M,_]=(0,f.useState)(p),O=m===b.n.Direct?[{label:t.formatMessage({id:"default"}),value:"default"},{label:t.formatMessage({id:"all_messages"}),value:"all"},{label:t.formatMessage({id:"nothing"}),value:"nothing"}]:[{label:t.formatMessage({id:"default"}),value:"default"},{label:t.formatMessage({id:"all_messages"}),value:"all"},{label:t.formatMessage({id:"mentions"}),value:"mentions"},{label:t.formatMessage({id:"nothing"}),value:"nothing"}],R=[{default_value:k,ordering:1,value:k,phrase:t.formatMessage({id:"disable_notifications"}),var_name:"disableNotifications",options:[{label:t.formatMessage({id:"yes"}),value:!0},{label:t.formatMessage({id:"no"}),value:!1}]},{default_value:Z,ordering:2,value:Z,phrase:t.formatMessage({id:"receive_mobile_notifications"}),var_name:"mobilePushNotifications",options:O,disable:["eq","disableNotifications",!0]},{default_value:M,ordering:3,value:M,phrase:t.formatMessage({id:"receive_sound_notifications"}),var_name:"audioNotifications",options:O,disable:["eq","disableNotifications",!0]}],z=(e,t)=>{switch(t){case"mobilePushNotifications":P(e);break;case"audioNotifications":_(e);break;case"disableNotifications":S(e)}},I=()=>{x()},W=()=>{let e={ignored:1,audioNotifications:"all",audioNotificationValue:1,desktopNotificationDuration:1,mobilePushNotifications:"all",disableNotifications:!1,userHighlights:1,emailNotifications:(null==d?void 0:d.emailNotifications)||"mentions",desktopNotifications:(null==d?void 0:d.desktopNotifications)||"all",muteGroupMentions:(m!==b.n.Direct||null==d||!d.muteGroupMentions)&&((null==d?void 0:d.muteGroupMentions)||!1)},t={...e,mobilePushNotifications:Z,audioNotifications:M,disableNotifications:k};w(t)};return c?f.createElement(n.Vq,y({maxWidth:"sm",fullWidth:!0},g),f.createElement(n.$N,{enableDone:!0,onDoneClick:W,enableBack:!0,onBackClick:I,disableClose:!0},f.createElement(E,{lines:1,color:"text.primary",variant:"h2",fontSize:18},t.formatMessage({id:"settings"}))),f.createElement(n.cZ,{sx:{p:"0 16px"}},f.createElement(s.Z,{disablePadding:!0},h()(R)?R.map(e=>{return f.createElement(C,{key:null==e?void 0:e.var_name,onChanged:z,item:e,disableNotifications:k})}):null))):f.createElement(n.Vq,y({maxWidth:"sm",fullWidth:!0},g),f.createElement(n.$N,{disableClose:!1},t.formatMessage({id:"settings"})),f.createElement(n.cZ,{sx:{p:"0 16px"}},f.createElement(s.Z,{disablePadding:!0},h()(R)?R.map(e=>{return f.createElement(C,{key:null==e?void 0:e.var_name,onChanged:z,item:e,disableNotifications:k})}):null)),f.createElement(n.kX,null,f.createElement(l.Z,{onClick:W,color:"primary",autoFocus:!0,variant:"contained",children:t.formatMessage({id:"save"})}),f.createElement(l.Z,{onClick:I,color:"primary",autoFocus:!0,variant:"outlined",children:t.formatMessage({id:"cancel"})})))}},82847:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var n=a(92114),i=a(85597),r=a(21241),o=a(40471),l=a(70214),s=a(99164),c=a(22410),d=a(73327),m=a(41609),u=a.n(m),p=a(47037),g=a.n(p),h=a(67294),f=a(83940),v=a(39312),b=a(21822),y=(0,c.Z)(e=>(0,d.Z)({root:{position:"relative",textDecoration:"none",display:"block",borderBottom:e.mixins.border("secondary"),"&:hover":{backgroundColor:e.palette.action.hover}},itemOuter:{height:"100%"},itemInner:{height:"100%",position:"relative",padding:e.spacing(1),alignItems:"center",display:"flex",flexDirection:"row",overflow:"hidden"},itemMainContent:{display:"flex",alignItems:"center"},itemSmallInner:{display:"flex",padding:e.spacing(2),justifyContent:"space-between",alignItems:"center",borderRadius:e.shape.borderRadius},actionContent:{fontWeight:`${e.typography.fontWeightMedium} !important`},itemSmallRequestInner:{display:"flex",padding:e.spacing(2),borderRadius:e.shape.borderRadius},itemMedia:{overflow:"hidden",position:"relative"},itemSmallMedia:{transition:"all 300ms ease",borderRadius:"100%",position:"relative"},itemReactSmall:{position:"absolute",width:"15px",height:"15px",right:0,bottom:0},imgSmallReactionIcon:{width:"100%"},imgWrapper:{margin:"auto"},imgSmallWrapper:{borderRadius:"100%"},userInfo:{flex:1,overflow:"hidden",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),flexBasis:"auto"},userSmallInfo:{marginLeft:e.spacing(1.5),flex:1,overflow:"hidden",paddingRight:e.spacing(1)},userSmallInfoRequest:{marginLeft:e.spacing(1.5),flex:1,overflow:"hidden"},userTitle:{color:e.palette.text.primary,fontSize:"1.125rem",marginBottom:e.spacing(1),transition:"all 300ms ease",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightBold},userSmallTitle:{color:e.palette.text.primary,fontSize:e.mixins.pxToRem(15),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightBold},friendInfo:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary},friendSmallInfo:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,marginTop:e.spacing(.5),display:"inline-block"},userLocation:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:e.spacing(1)},userJoined:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:e.spacing(1)},friendActions:{position:"relative",display:"flex"},friendActionsDropdown:{boxShadow:"none",padding:0,marginLeft:e.spacing(1)},iconButton:{border:"1px solid",width:"40px",height:"40px",borderRadius:e.spacing(.5),display:"flex",alignItems:"center",color:e.palette.primary.main,justifyContent:"center"},button:{boxShadow:"none",borderRadius:e.spacing(.5),fontSize:"1rem",textTransform:"capitalize"},friendRequestActions:{display:"flex",marginTop:e.spacing(1.5)},requestOption:{textTransform:"capitalize",fontSize:e.mixins.pxToRem(15),fontWeight:"bold",flexGrow:1,"& + $requestOption":{marginLeft:e.spacing(1)}},mutualFriend:{marginRight:e.spacing(.5)},btnAddFriend:{textTransform:"capitalize",fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,padding:e.spacing(.25,1.5),minWidth:"inherit"}}),{name:"ReactedUserItemView"});let x=({data:e,unsetReaction:t})=>{let a=y(),{useDialog:n,i18n:r}=(0,i.OgA)(),{closeDialog:o}=n(),l=(0,v.Oy)(),s=l.username;return e?e.usernames.map((e,n)=>h.createElement("div",{className:a.root,key:n},h.createElement("div",{className:a.itemOuter},h.createElement("div",{className:a.itemSmallInner},h.createElement("div",{className:a.itemMainContent},h.createElement("div",{className:a.itemSmallMedia},h.createElement("div",{className:a.imgSmallWrapper},h.createElement(f.Z,{username:e.username,name:e.username,size:40})),h.createElement("div",{className:a.itemReactSmall},h.createElement("img",{className:a.imgSmallReactionIcon,src:e.icon,alt:"reaction"}))),h.createElement("div",{className:a.userSmallInfo},h.createElement("div",{className:a.userSmallTitle,onClick:o},e.username))),s===e.username&&h.createElement(b.Z,{className:a.actionContent,color:"primary",onClick:()=>t(e.id)},r.formatMessage({id:"remove"})))))):null};function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let w=(0,c.Z)(e=>(0,d.Z)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,2,1,2)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:4,marginRight:"0.25em",padding:e.spacing(.5,1.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"}),C={minHeight:32},k={minWidth:16},S={width:15,height:15},Z=e=>{let{i18n:t}=(0,i.OgA)(),a=(0,o.z)();if(!e&&!(null==e?void 0:e.length))return{};try{let n=e=>{let t=g()(e)&&e.split(":")[1].split("_")[1];return t&&a?a.find(e=>e.id===parseInt(t)):{}},r=[],l=Object.keys(e).sort((t,a)=>{var n,i,r,o,l,s,c,d;return((null===(n=e[a])||void 0===n?void 0:null===(i=n.usernames)||void 0===i?void 0:i.length)||1)-((null===(r=e[t])||void 0===r?void 0:null===(o=r.usernames)||void 0===o?void 0:o.length)||1)-((null===(l=e[a])||void 0===l?void 0:null===(s=l.updatedAt)||void 0===s?void 0:s.$date)||1)-((null===(c=e[t])||void 0===c?void 0:null===(d=c.updatedAt)||void 0===d?void 0:d.$date)||1)}).reduce((t,a)=>{var i,o;let l=n(a),s=e[a].usernames.map(e=>{return{username:e,icon:l.src,id:a}});return r=r.concat(...s),t+(null===(i=e[a])||void 0===i?void 0:null===(o=i.usernames)||void 0===o?void 0:o.length)},0),s={all:{id:"all",title:t.formatMessage({id:"all"}),total_reacted:l,usernames:r}};return Object.keys(e).map(t=>{let a=n(t),i=e[t].usernames.map(e=>{return{username:e,icon:a.src,id:t}});return s[t]={id:t,icon:a.src,total_reacted:e[t].usernames.length,usernames:i}}),s}catch(c){return{}}};function P({identity:e}){let t=w(),[a,o]=(0,h.useState)("all"),c=(0,h.useRef)(),{useDialog:d,i18n:m,dispatch:p,useGetItem:g}=(0,i.OgA)(),{dialogProps:f,closeDialog:v}=d(),b=g(e),y=h.useCallback(t=>{p({type:"chatplus/unsetReaction",payload:{identity:e,shortcut:t},meta:{onSuccess:_}})},[e]),P=Z(null==b?void 0:b.reactions);h.useEffect(()=>{(!b||u()(null==b?void 0:b.reactions)||u()(P))&&v()},[b,null==b?void 0:b.reactions,P,v]);let M=(e,t)=>{o(t)},_=()=>{a&&o("all")};return h.createElement(n.Vq,E({},f,{maxWidth:"xs",fullWidth:!0}),h.createElement(n.$N,null,m.formatMessage({id:"reacted_by"})),h.createElement(s.Z,{value:a,onChange:M,style:C,className:t.customTabs},Object.values(P).map(e=>h.createElement(l.Z,{key:e.id,style:k,disableRipple:!0,icon:e.icon?h.createElement("img",{src:e.icon,alt:e.id,style:S}):h.createElement("span",{className:t.reactNumber},e.title),iconPosition:"start",label:e.total_reacted?h.createElement("span",{className:t.reactNumber},e.total_reacted):void 0,value:e.id,"aria-label":e.id}))),h.createElement("div",{className:t.dialogContent,ref:c},h.createElement(r.ID,{scrollRef:c},h.createElement(x,{data:P[a],unsetReaction:y}))))}},40333:function(e,t,a){a.r(t);var n=a(92114),i=a(85597),r=a(21241),o=a(16473),l=a(81719),s=a(67294),c=a(42977),d=a(39312),m=a(69709);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let p="MemberItem",g=(0,l.ZP)("div",{name:p,slot:"UIChatBuddyItem"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(1.5,2,1.5,0),color:"#555555",fontSize:"14px"})),h=(0,l.ZP)("div",{name:p,slot:"UIChatBuddyItemWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:0,flex:1})),f=(0,l.ZP)("div")(({theme:e})=>({marginLeft:e.spacing(1.5),display:"flex",alignItems:"flex-start",flexDirection:"column",flex:1})),v=(0,l.ZP)(o.Ys)(({theme:e})=>({..."dark"===e.palette.mode&&{color:e.palette.grey["400"]}})),b=(0,l.ZP)("div")(({theme:e})=>({..."dark"===e.palette.mode&&{color:e.palette.grey["500"]}})),y=({item:e})=>{let t=(0,d.ID)(null==e?void 0:e._id);return s.createElement(g,null,s.createElement(h,null,s.createElement(m.default,{name:null==e?void 0:e.name,username:null==e?void 0:e.username,size:32,avatarETag:(null==e?void 0:e.avatarETag)||(null==t?void 0:t.avatarETag),hoverCard:`/user/${null==e?void 0:e.metafoxUserId}`,component:i.QVN}),s.createElement(f,null,s.createElement(v,{lines:1,variant:"h5"},s.createElement(i.rUS,{to:null==e?void 0:e.username,children:e.name,hoverCard:`/user/${null==e?void 0:e.metafoxUserId}`,underline:"none",color:"inherit"})),s.createElement(b,null,(0,c.jF)(null==e?void 0:e.seenAt.$date)))))};t.default=function({users:e}){let{useDialog:t,i18n:a}=(0,i.OgA)(),{closeDialog:o,dialogProps:l}=t();return e&&e.length?s.createElement(n.Vq,u({maxWidth:"sm",fullWidth:!0},l),s.createElement(n.$N,{disableClose:!1},a.formatMessage({id:"seen_users"})),s.createElement(n.cZ,{sx:{maxHeight:"300px",py:.5}},s.createElement(r.l$,{autoHide:!0,autoHeight:!0},e.map((e,t)=>s.createElement(y,{key:t,item:e}))))):(o(),null)}},96035:function(e,t,a){a.d(t,{Z:function(){return r}});var n=a(86706),i=a(80036);function r(){return(0,n.v9)(e=>(0,i.HT)(e))}},86192:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var n=a(92114),i=a(85597),r=a(16473),o=a(21822),l=a(44373),s=a(81719),c=a(91647),d=a(67294),m=a(86706),u=a(25237);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let g="CommentDialog",h=(0,s.ZP)(o.Z,{name:g,slot:"btnBack"})(({theme:e})=>({color:`${e.palette.text.hint} !important`,[e.breakpoints.down("sm")]:{paddingRight:`${e.spacing(2.5)} !important`}})),f=(0,s.ZP)(n.cZ,{name:g,slot:"DialogContentStyled"})(({theme:e})=>({borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,[e.breakpoints.down("sm")]:{borderRadius:0}})),v=(0,s.ZP)(n.cZ,{name:g,slot:"actionButtonStaticsWrapper"})(({theme:e})=>{var t;return{display:"flex",alignItems:"center",borderBottom:"solid 1px",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,padding:0,[e.breakpoints.down("sm")]:{flexDirection:"column-reverse"}}}),b=(0,s.ZP)(n.cZ,{name:g,slot:"reactionWrapper"})(({theme:e})=>({padding:0,"& .MuiFeedCommentBlock-itemOuter":{border:"none"},[e.breakpoints.down("sm")]:{width:"100%"}})),y=(0,s.ZP)(n.cZ,{name:g,slot:"FeedStatisticWrapper"})(({theme:e})=>{var t;return{flex:1,display:"flex",justifyContent:"flex-end",padding:"8px 0",[e.breakpoints.down("sm")]:{width:"100%",fontWeight:e.typography.fontWeightBold,borderBottom:"solid 1px",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary}}});function x({identity:e,handleAction:t,isFocus:a,viewMoreComments:o}){var s,g,x;let E=(0,d.useRef)(null),w=(0,d.useRef)(null),C=(0,d.useRef)(null),k=(0,d.useRef)(null),[S,Z]=(0,d.useState)(0),{dialogProps:P,closeDialog:M}=(0,n.Rh)(),{i18n:_,CommentList:O,CommentActButton:R,ShareActButton:z,ReactionActButton:I,CommentReaction:W,useSession:N,useTheme:T,jsxBackend:A}=(0,i.OgA)(),j=T(),$=N(),[L,B]=(0,u.X)(),D=A.get("CommentComposer"),F=(0,m.v9)(t=>(0,i.AV9)(t,e));(0,d.useEffect)(()=>{return setImmediate(()=>{V()}),window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V)}},[]);let V=()=>{var e,t,a,n;let i=null===(e=w.current)||void 0===e?void 0:e.offsetHeight,r=null===(t=E.current)||void 0===t?void 0:t.offsetHeight,o=null===(a=C.current)||void 0===a?void 0:a.offsetHeight,l=null===(n=k.current)||void 0===n?void 0:n.offsetHeight,s=getComputedStyle(k.current),c=Number(s.getPropertyValue("padding-top").replace(/\D/g,"")),d=Number(s.getPropertyValue("padding-bottom").replace(/\D/g,""));Z(window.innerHeight-o-(l-(l-c-d-(i+r))))},{statistic:H,most_reactions:U,like_phrase:q}=F;return d.createElement(n.Vq,p({},P,{scroll:"body"}),d.createElement(n.$N,{ref:C,disableClose:!0},d.createElement("div",null,d.createElement(h,{onClick:M,sx:{minWidth:0,paddingRight:j.spacing(2.5)},color:"secondary",size:"medium"},d.createElement(r.zb,{icon:"ico-angle-left"})),d.createElement(c.Z,{component:"span",fontWeight:"bold"},_.formatMessage({id:"comments"})))),d.createElement(f,{ref:k},d.createElement(d.Fragment,null,d.createElement(v,{ref:E},d.createElement(b,null,d.createElement(W,null,$.loggedIn&&(null===(s=F.extra)||void 0===s?void 0:s.can_like)&&I?d.createElement(I,{reacted:F.user_reacted,identity:e,handleAction:t}):null,$.loggedIn&&(null===(g=F.extra)||void 0===g?void 0:g.can_comment)&&R?d.createElement(R,{identity:e,handleAction:t}):null,$.loggedIn&&F.extra.can_share&&z?d.createElement(z,{handleAction:t,identity:e}):null)),d.createElement(y,null,d.createElement(r.Dq,{handleAction:t,identity:e,reactions:U,message:q,statistic:H}))),d.createElement("div",{style:{height:S,overflowY:"scroll"}},d.createElement(O,{identity:e,handleAction:t,data:F.related_comments,total_hidden:null==F?void 0:null===(x=F.related_comments_statistic)||void 0===x?void 0:x.total_hidden,viewMoreComments:o,total_comment:null==H?void 0:H.total_comment,total_reply:null==H?void 0:H.total_reply,setSortType:B,sortType:L,isDetailPage:!0})),$.loggedIn&&F.extra.can_comment&&D?d.createElement("div",{ref:w},d.createElement(l.Z,{sx:{display:{xs:"block",md:"none"}}}),d.createElement(D,{identity:e,open:!0,focus:a})):null)))}},14669:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var n=a(92114),i=a(85597),r=a(81719),o=a(91647),l=a(35705),s=a(30120),c=a(67294);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let m=(0,r.ZP)(n.cZ,{name:"HistoryDialog",slot:"DialogContentStyled"})(({theme:e})=>({borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,[e.breakpoints.down("sm")]:{borderRadius:0}}));function u({dataSource:e,pageParams:t}){let{dialogProps:a}=(0,n.Rh)(),{i18n:r,useFetchItems:u,jsxBackend:p}=(0,i.OgA)(),g=p.get("CommentHistoryItem"),[h,f]=u({dataSource:e,pageParams:t,data:[]});return c.createElement(n.Vq,d({},a,{fullWidth:!0,scroll:"body"}),c.createElement(n.$N,null,c.createElement(o.Z,{component:"span",fontWeight:"bold"},r.formatMessage({id:"edit_history"}))),c.createElement(m,null,f?c.createElement(s.Z,{p:2,sx:{display:"flex",alignItems:"center",justifyContent:"center"}},c.createElement(l.Z,{size:16})):null,h&&h.length?c.createElement(s.Z,{mt:2},h.map(e=>c.createElement(s.Z,{mb:2,key:`k${e.id}`},c.createElement(g,{item:e})))):null))}},81154:function(e,t,a){a.r(t);var n=a(92114),i=a(85597),r=a(16473),o=a(44373),l=a(92351),s=a(67294),c=a(27274);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}t.default=function(){let e=(0,l.Z)(),{useDialog:t,i18n:a,useSession:m,jsxBackend:u,getSetting:p,getAcl:g}=(0,i.OgA)(),{dialogProps:h}=t(),{user:f}=m(),v=(0,i.oRt)("core","accountMenu"),[b]=(0,i.zXz)(null,{}),y=a.formatMessage({id:"profile"}),x=p(),E=g(),w=m(),C=(0,c.W$)(v.items,{setting:x,acl:E,session:w});return s.createElement(n.Vq,d({},h,{fullWidth:!0,"data-testid":"popupProfileMenu",fullScreen:!0}),s.createElement(n.$N,{"data-testid":"popupTitle",enableBack:!0,disableClose:!0},y),s.createElement(n.cZ,{className:e.dialog},s.createElement("div",{className:e.profile},s.createElement(o.Z,d({},{variant:"fullWidth"})),s.createElement("div",{className:e.userBlock},s.createElement("div",{className:e.userAvatar},s.createElement(r.Yt,{user:f,size:48})),s.createElement("div",{className:e.userInner},s.createElement("div",{className:e.userName},f.full_name),s.createElement(i.rUS,{className:e.linkInfo,to:f.link},a.formatMessage({id:"view_profile"})))),C.filter(Boolean).map((e,t)=>u.render({component:`menuItem.as.${e.as||"normal"}`,props:{key:t.toString(),item:e,variant:"contained",handleAction:b}})))))}},92351:function(e,t,a){var n=a(22410),i=a(73327);let r=(0,n.Z)(e=>{var t,a,n;return(0,i.Z)({blockHeader:{minHeight:60},menuWrapper:{display:"flex",height:60,boxShadow:"0px 2px 1px 0 rgba(0, 0, 0, 0.05)",backgroundColor:e.mixins.backgroundColor("paper"),position:"fixed",left:0,right:0,top:0,zIndex:1300},menuButton:{flex:"1",minWidth:"64px",display:"flex",alignItems:"center",justifyContent:"center",color:e.palette.text.secondary,borderBottom:"solid 2px #fff"},active:{color:`${e.palette.primary.main} !important`,borderBottomColor:e.palette.primary.main},menuButtonIcon:{width:"24px",height:"24px",fontSize:"24px"},menuInner:{position:"relative"},number:{width:20,height:20,backgroundColor:e.palette.error.main,color:"#fff",fontSize:e.mixins.pxToRem(13),borderRadius:"50%",display:"flex",justifyContent:"center",position:"absolute",top:-10,right:-10},dot:{width:8,height:8,backgroundColor:e.palette.error.main,borderRadius:"50%",position:"absolute",top:0,right:-4},logo:{height:"35px",display:"inline-block"},menuGuestWrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"60px",boxShadow:"0px 2px 1px 0 rgba(0, 0, 0, 0.05)",backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(0,2),position:"fixed",left:0,right:0,top:0,zIndex:2,"& $menuButton":{flex:"none"}},button:{fontSize:15,height:32,padding:e.spacing(0,3),textTransform:"capitalize"},popover:{"& .MuiPopover-paper":{maxWidth:"100%",width:"100%",borderRadius:0,top:"60px !important",bottom:0,boxShadow:"none !important",borderTop:`solid 1px ${null===(t=e.palette.border)||void 0===t?void 0:t.secondary}`,marginTop:"-1px"}},dropdownMenuWrapper:{width:"100%",minHeight:"calc(100vh - 60px)"},menuItem:{color:e.palette.text.primary,padding:e.spacing(1.5,2)},menuItemLink:{padding:0},link:{color:e.palette.text.primary,textDecoration:"none",padding:e.spacing(1.5,2),display:"block",flexGrow:1},icon:{textAlign:"center",marginRight:e.spacing(1.5)},toggleDarkMode:{fontSize:"32px",marginLeft:"auto",lineHeight:"20px",width:"32px",height:"20px",color:e.palette.text.disabled},userBlock:{display:"flex",alignItems:"center",padding:e.spacing(2),borderBottom:`solid 1px ${null===(a=e.palette.border)||void 0===a?void 0:a.secondary}`},userAvatar:{width:48,marginRight:e.spacing(1)},userInner:{flex:1,minWidth:0},userName:{fontSize:e.mixins.pxToRem(18),lineHeight:1.5,color:e.palette.text.primary,fontWeight:"bold"},linkInfo:{fontSize:e.mixins.pxToRem(15),lineHeight:1,color:e.palette.text.secondary},userAction:{marginLeft:"auto","& > .ico":{width:32,height:32,fontSize:e.mixins.pxToRem(24),color:e.palette.text.secondary,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"}},profile:{},menuApp:{borderTop:"solid 8px",borderTopColor:null===(n=e.palette.border)||void 0===n?void 0:n.secondary,paddingTop:16,"& ul":{marginLeft:e.spacing(-1),paddingBottom:e.spacing(4)},"& ul > li":{marginLeft:0,marginRight:0,marginBottom:e.spacing(1),paddingLeft:0,"& > a":{display:"flex",padding:e.spacing(1),fontSize:"0.9375rem",alignItems:"center",fontWeight:"bold"}}},dialog:{padding:"0 !important"},searchMobile:{display:"block",zIndex:"1301",position:"absolute",backgroundColor:e.palette.background.paper,top:"0",width:"100%",height:"100%","& > div":{width:"100%"},"& form":{width:"calc(100% - 96px)"}},cancelButton:{position:"absolute",zIndex:"1",right:"16px",top:"50%",transform:"translateY(-50%)"}})},{name:"SiteBarMobileBlock"});t.Z=r},24656:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=a(92114),i=a(85597),r=a(21822),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s(){let{useDialog:e}=(0,i.OgA)(),{pathname:t}=(0,i.THL)(),{dialogProps:a,setDialogValue:s}=e(),c=({payload:e,type:t="@core/codeGenerate/make",children:a})=>{return o.createElement(r.Z,{onClick:()=>s({type:t,payload:e})},a)};return o.createElement(n.Vq,l({},a,{maxWidth:"xs",fullWidth:!0}),o.createElement(n.$N,null,"Code Generator"),o.createElement(n.cZ,null,o.createElement(c,{payload:"package"},"New App"),o.createElement(c,{payload:"migration"},"Migration"),o.createElement(c,{payload:"model"},"Model"),o.createElement(c,{payload:"web-api"},"Web API"),o.createElement(c,{payload:"admin-api"},"Admin API"),o.createElement(c,{payload:"form"},"Forms"),o.createElement(c,{payload:"request"},"Request"),o.createElement(c,{payload:"category"},"Category"),o.createElement(c,{payload:"data-grid"},"DataGrid"),o.createElement(c,{payload:"listener"},"Listener"),o.createElement(c,{payload:"notification"},"Notification"),o.createElement(c,{payload:"job"},"Job"),o.createElement(c,{payload:"mail"},"Mail"),o.createElement(c,{payload:"export"},"Export"),o.createElement(c,{payload:"inspect"},"Inspect"),o.createElement(c,{payload:"importer"},"Importer"),o.createElement(r.Z,{onClick:()=>s({type:"@core/codeGenerate/editCurrentSeo",payload:{url:t.replace(/^\/|\/$/g,"")}})},"Edit Meta"),o.createElement(r.Z,{onClick:()=>s({type:"@core/codeGenerate/ideFix"})},"IDE Fix")))}},4159:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var n=a(85597),i=a(92114),r=a(16473),o=a(41609),l=a.n(o),s=a(67294),c=a(73327),d=a(61366),m=a(94184),u=a.n(m);let p=e=>{var t;return(0,c.Z)({root:{borderBottom:"1px solid",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,padding:e.spacing(2),display:"flex",alignItems:"flex-start","&:hover":{backgroundColor:e.palette.action.hover}},info:{display:"flex",flexDirection:"column"},title:{flex:1,fontSize:e.mixins.pxToRem(15),fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary},icon:{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(2),marginTop:e.spacing(.5),color:e.palette.text.secondary},address:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,marginRight:e.spacing(2)},media:{},active:{color:e.palette.primary.main,"& $icon":{color:e.palette.primary.main}}})};var g=(0,d.Z)(p)(function({name:e,address:t,classes:a,active:n,onClick:i}){return s.createElement("div",{role:"button","aria-label":"select place","data-testid":"suggestion",className:u()([a.root,n&&a.active]),onClick:i},s.createElement(r.zb,{icon:"ico-checkin-o",className:a.icon}),s.createElement("div",{className:a.info},s.createElement("span",{className:u()([a.title,n&&a.active])},e),t?s.createElement("div",{className:u()([a.address,n&&a.active]),children:t}):null))}),h=(0,a(22410).Z)(e=>(0,c.Z)({dialog:{},dialogContent:{height:370,padding:`${e.spacing(0,0,2,0)} !important`},inputStage:{padding:e.spacing(2)},btnCancel:{minWidth:e.spacing(3),padding:0,marginRight:e.spacing(1),color:e.palette.text.secondary},searchIcon:{color:e.palette.text.secondary},dialogTitle:{},dialogContentTitle:{color:e.palette.text.secondary,padding:e.spacing(.5,0,.5,2),textTransform:"uppercase"},mapStage:{}}));function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var v=function({defaultValue:e}){let t=h(),{useDialog:a,i18n:o}=(0,n.OgA)(),{dialogProps:c,setDialogValue:d}=a(),m=o.formatMessage({id:"search_for_location"}),u=o.formatMessage({id:"search_dots"}),p=s.useRef(),[v,b,y,x]=(0,n.$Cd)(p,{...e,address:""}),E=s.useCallback(e=>y(e),[y]),w=e=>{d({...e,query:b})},C=()=>{d(!1)};return s.createElement(i.Vq,f({className:t.dialog,maxWidth:"sm",fullWidth:!0,"data-testid":"dialogLocationPicker"},c),s.createElement(i.$N,{"data-testid":"popupTitle",enableBack:!0,disableClose:!0},m),s.createElement("div",{className:t.inputStage},s.createElement(r.mN,{autoFocus:!0,"data-testid":"searchBox",placeholder:u,onChanged:E})),s.createElement(i.cZ,{className:t.dialogContent},s.createElement("div",{className:t.dialogContentTitle},o.formatMessage({id:"base_on_your_location"})),s.createElement("div",{className:t.mapStage,ref:p}),!l()(x)&&!b&&s.createElement(g,{active:!0,name:x.name,address:x.address,onClick:C}),!!(null==v?void 0:v.length)&&v.map((e,t)=>{return e.lat===(null==x?void 0:x.lat)&&e.lng===(null==x?void 0:x.lng)?null:s.createElement(g,{name:e.name,address:e.address,key:t.toString(),onClick:()=>w(e)})})))}},18661:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=a(85597),i=a(92114),r=a(84635),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s({title:e="Edit",maxWidth:t="sm",...a}){let{useDialog:s}=(0,n.OgA)(),c=s(),{dialogProps:d}=c;return o.createElement(i.Vq,l({},d,{maxWidth:t,fullWidth:!0,"data-testid":"editPopup"}),o.createElement(r.dq,l({dialog:!0,dialogTitle:e,dialogItem:c},a)))}},55502:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var n=a(85597),i=a(92114),r=a(16473),o=a(81674),l=a(86010),s=a(67294),c=a(22410),d=a(73327);let m=(0,c.Z)(e=>(0,d.Z)({root:{display:"flex",position:"relative"},titleDialog:{display:"flex",alignItems:"center"},closeDialog:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),marginLeft:"auto",cursor:"pointer"},searchFocused:{border:e.mixins.border("primary"),background:"none"},searchIcon:{top:0,width:e.mixins.pxToRem(32),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",transition:"all .2s ease",cursor:"pointer"},searchIconFocused:{color:e.palette.primary.main},inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(1,2,1,0),boxSizing:"border-box",paddingLeft:"30px !important",transition:"all .2s ease",width:"100%",height:e.mixins.pxToRem(32)}}),{name:"SearchInModule"});var u=a(17563);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function g({title:e,placeholder:t,item:a}){let{useDialog:c,navigate:d}=(0,n.OgA)(),{dialogProps:g,closeDialog:h}=c(),f=m(),[v,b]=(0,s.useState)(!1),[y,x]=(0,s.useState)(""),E=()=>{b(!0)},w=()=>{b(!1)},C=e=>{let{value:t}=e.target;x(t)},k=e=>{let t=null==e?void 0:e.keyCode;13===t&&(e.preventDefault(),S())},S=()=>{let e=y.trim();if(!e)return;let{id:t,module_name:n}=a;d({pathname:`/${n}/search/${t}`,search:u.stringify({q:e})}),h()};return s.createElement(i.Vq,p({},g,{maxWidth:"sm",fullWidth:!0,fullScreen:!1,"data-testid":"dialogSearchInApp"}),s.createElement(i.$N,null,s.createElement("div",{className:f.titleDialog},e)),s.createElement(i.cZ,{className:f.root},s.createElement("div",{className:(0,l.default)(f.searchIcon,v&&f.searchIconFocused)},s.createElement(r.zb,{icon:"ico-search-o"})),s.createElement(o.ZP,{placeholder:t,classes:{root:f.inputRoot,input:f.inputInput},value:y,name:"searchBox",autoComplete:"off",autoCapitalize:"off",inputProps:{"aria-label":"search","data-testid":"search_box_in_module"},onFocus:E,onChange:C,onKeyDown:k,onBlur:w})))}},50583:function(e,t,a){a.r(t);var n=a(92114),i=a(85597),r=a(16473),o=a(21822),l=a(71682),s=a(81719),c=a(38790),d=a(67294);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let u="GenerateLinkField",p=(0,s.ZP)("div",{name:u})(({theme:e})=>({padding:e.spacing(.5,1.75),margin:e.spacing(2),border:e.mixins.border("secondary"),borderRadius:e.spacing(.5),display:"flex",alignItems:"center",justifyContent:"space-between"})),g=(0,s.ZP)("div",{name:u})(({theme:e})=>({display:"flex",alignItems:"center",overflow:"hidden",width:"90%"})),h=(0,s.ZP)(r.zb,{name:"ReloadIcon"})(({theme:e})=>({fontSize:e.spacing(1.875),color:(e.palette.mode,e.palette.primary.main),cursor:"pointer"})),f=(0,s.ZP)(o.Z,{name:"ReloadButton"})(({theme:e})=>({fontWeight:"bold",height:e.spacing(4),marginLeft:e.spacing(1)})),v=(0,s.ZP)(r.Ys,{name:"CodeText"})(({theme:e})=>({color:e.palette.text.hint,overflow:"hidden"})),b=(0,s.ZP)("div",{name:"WrapperLoading"})(({theme:e})=>({margin:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center"})),y=(0,s.ZP)(o.Z)(()=>({"& span":{margin:0}})),x=e=>{let{useDialog:t,i18n:a,dispatch:r,copyToClipboard:o,toastBackend:s}=(0,i.OgA)(),{dialogProps:u}=t(),[x,E]=d.useState(null),w=t=>{r({type:t,payload:e,meta:{onSuccess:e=>{E(e)},onFailure:()=>{}}})};d.useEffect(()=>{e&&w("event/getCode")},[]);let C=()=>{o(x.url),s.success(a.formatMessage({id:"copied_to_clipboard"}))},k=()=>{w("event/refreshCode")};return d.createElement(n.Vq,m({},u,{maxWidth:"sm",fullWidth:!0}),d.createElement(n.$N,null,a.formatMessage({id:"generate_invite_link"})),d.createElement(n.cZ,{variant:"fitScroll"},x?d.createElement(p,null,d.createElement(g,null,d.createElement(v,{lines:1},x.url)),(null==x?void 0:x.status)?null:d.createElement(c.Z,{title:a.formatMessage({id:"refresh"}),placement:"top"},d.createElement(y,{onClick:k,variant:"outlined",size:"small",startIcon:d.createElement(h,{icon:"ico-refresh-o"})})),d.createElement(f,{variant:"outlined",onClick:C},a.formatMessage({id:"copy"}))):d.createElement(b,null,d.createElement(l.Z,{variant:"rounded",width:"100%",height:35}))))};t.default=x},67821:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var n=a(92114),i=a(58394),r=a(85597),o=a(21241),l=a(70214),s=a(99164),c=a(67294),d=a(22410),m=a(73327),u=(0,d.Z)(e=>(0,m.Z)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:4,marginRight:"0.25em",padding:e.spacing(.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"});function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let g=e=>{var t,a;let n=(0,r.oHF)(i.t3,"event_member","viewAll"),o=(0,r.oHF)(i.t3,"event_invite","viewAll"),l={joined:{id:"going",value:"joined",itemView:"event.itemView.guestSmallCard",emptyPage:"core.block.no_content",invisible:!0,dataSource:{apiUrl:n.apiUrl,apiParams:{event_id:e.id,view:"joined"}},total:"total_member"},interested:{id:"interested",value:"interested",itemView:"event.itemView.guestSmallCard",emptyPage:"core.block.no_content",invisible:!0,dataSource:{apiUrl:n.apiUrl,apiParams:{event_id:e.id,view:"interested"}},total:"total_interested"},invited:{id:"invited",value:"invited",invisible:(null===(t=e.extra)||void 0===t?void 0:t.can_invite)||!1,itemView:"event.itemView.inviteCard",emptyPage:"event.block.no_invite_content",emptyPageProps:{icon:"ico-user3-three",description:"no_one_has_been_invited",buttonCustom:(null===(a=e.extra)||void 0===a?void 0:a.can_invite)?{component:"event.invitedButton",props:{item:e,type:"event/invitePeopleToCome"}}:null},dataSource:{apiUrl:o.apiUrl,apiParams:{event_id:e.id}},total:"total_pending_invite"}};return l};function h({item:e,defaultTab:t="joined"}){let a=u(),i=g(e),[d,m]=(0,c.useState)(t),h=(0,c.useRef)(),{useDialog:f,i18n:v,ListView:b,useGetItem:y}=(0,r.OgA)(),{dialogProps:x}=f(),{resource_name:E,item_id:w}=e,C=`event_guest/${E}/${w}/${d}`,k=y(e._identity),S=(e,t)=>{m(t)};return c.createElement(n.Vq,p({},x,{maxWidth:"xs",fullWidth:!0}),c.createElement(n.$N,null,v.formatMessage({id:"guests"})),c.createElement(s.Z,{value:d,onChange:S,className:a.customTabs},Object.keys(i).filter(e=>i[e].invisible).map(e=>{var t;return c.createElement(l.Z,{key:i[e].id,disableRipple:!0,label:`${v.formatMessage({id:i[e].id})} (${k.statistic[null===(t=i[e])||void 0===t?void 0:t.total]||0})`,value:i[e].value,"aria-label":i[e].value})})),c.createElement("div",{className:a.dialogContent,ref:h},c.createElement(o.ID,{scrollRef:h},c.createElement(b,{dataSource:i[d].dataSource,pagingId:C,canLoadMore:!0,clearDataOnUnMount:!0,gridContainerProps:{spacing:0},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",emptyPage:i[d].emptyPage,emptyPageProps:i[d].emptyPageProps,itemView:i[d].itemView}))))}},49185:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var n=a(92114),i=a(58394),r=a(85597),o=a(21241),l=a(27274),s=a(70214),c=a(99164),d=a(67294),m=a(22410),u=a(73327),p=(0,m.Z)(e=>(0,u.Z)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:4,marginRight:"0.25em",padding:e.spacing(.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"});function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let h=e=>{var t;let a=(0,r.oHF)(i.t3,"event_member","viewHosts"),n=(0,r.oHF)(i.t3,"event_host_invite","viewAll"),o=(0,l.aZ)(a.apiParams,{id:e.id}),s=(0,l.aZ)(null==n?void 0:n.apiParams,{id:e.id}),c={list_host:{id:"host_list",value:"list_host",itemView:"event.itemView.hostCard",invisible:!0,dataSource:{apiUrl:null==a?void 0:a.apiUrl,apiParams:o},emptyPage:"core.block.no_content",total:"total_host"},invited:{id:"invited",value:"invited",invisible:(null===(t=e.extra)||void 0===t?void 0:t.can_invite)&&e.extra.can_manage_host,itemView:"event.itemView.hostInviteCard",dataSource:{apiUrl:null==n?void 0:n.apiUrl,apiParams:s},emptyPage:"event.block.no_invite_content",emptyPageProps:{icon:"ico-user3-three",description:"no_one_has_been_invited",buttonCustom:{component:"event.invitedButton",props:{item:e,type:"event/inviteToComeHost"}}},total:"total_pending_host_invite"}};return c};function f({item:e,defaultTab:t="list_host"}){let a=p(),i=h(e),[l,m]=(0,d.useState)(t),u=(0,d.useRef)(),{useDialog:f,i18n:v,ListView:b}=(0,r.OgA)(),{dialogProps:y}=f(),{resource_name:x,item_id:E}=e,w=`event_host/${x}/${E}/${l}`,C=(0,r.z88)(e._identity),k=(e,t)=>{m(t)};return d.createElement(n.Vq,g({},y,{maxWidth:"xs",fullWidth:!0}),d.createElement(n.$N,null,v.formatMessage({id:"manage_host_list"})),d.createElement(c.Z,{value:l,onChange:k,className:a.customTabs},Object.keys(i).filter(e=>i[e].invisible).map(e=>{var t;return d.createElement(s.Z,{key:i[e].id,disableRipple:!0,label:`${v.formatMessage({id:i[e].id})} (${C.statistic[null===(t=i[e])||void 0===t?void 0:t.total]||0})`,value:i[e].value,"aria-label":i[e].value})})),d.createElement("div",{className:a.dialogContent,ref:u},d.createElement(o.ID,{scrollRef:u},d.createElement(b,{dataSource:i[l].dataSource,pagingId:w,canLoadMore:!0,gridContainerProps:{spacing:0},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:i[l].itemView,emptyPage:i[l].emptyPage,emptyPageProps:i[l].emptyPageProps}))))}},30898:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=a(85597),i=a(92114),r=a(21241),o=a(16473),l=a(30120),s=a(70214),c=a(99164),d=a(81719),m=a(23279),u=a.n(m),p=a(67294),g=a(74499);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let f=(0,d.ZP)(s.Z)(({theme:e})=>({height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(4),textTransform:"uppercase","& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main},"&:hover":{color:e.palette.primary.main}})),v=e=>{switch(e){case g.yr:return"friend";case g.U3:return"page";case g.LL:return"group"}};function b(e){let{i18n:t,useSession:a,useDialog:s,ListView:d}=(0,n.OgA)(),{dialogProps:m}=s(),{user:{id:b}}=a(),[y,x]=p.useState(""),E=p.useRef(""),[w,C]=p.useState(g.yr),k=p.useMemo(()=>{return{source:{apiUrl:"/feed/hidden",apiParams:{user_id:b,limit:6,q:y||void 0,type:v(w)}},paging:`/manage-hidden/tab=${w}/${y}`}},[y,w]),S=()=>{E.current.trim()!==y.trim()&&x(E.current.trim())},Z=u()(S,1e3),P=e=>{E.current=e,Z()},M=(e,t)=>{C(t)};return p.createElement(i.Vq,h({},m,{maxWidth:"sm",fullWidth:!0}),p.createElement(i.$N,null,t.formatMessage({id:"manage_hidden"})),p.createElement(i.cZ,{variant:"fitScroll",sx:{height:"50vh"}},p.createElement(l.Z,{sx:{m:[2,2,0,2]}},p.createElement(o.mN,{placeholder:t.formatMessage({id:"search_users_pages_groups"}),onChanged:P})),p.createElement(c.Z,{value:w,onChange:M,indicatorColor:"primary",textColor:"primary",sx:{ml:2}},p.createElement(f,{disableRipple:!0,label:t.formatMessage({id:"users"})}),p.createElement(f,{disableRipple:!0,label:t.formatMessage({id:"pages"})}),p.createElement(f,{disableRipple:!0,label:t.formatMessage({id:"groups"})})),p.createElement("div",{key:y},p.createElement(r.l$,{autoHide:!0,autoHeight:!0,autoHeightMax:352},p.createElement(d,{canLoadMore:!0,dataSource:k.source,pagingId:k.paging,itemView:"user.itemView.hiddenUser",emptyPage:"core.block.no_content",emptyPageProps:{title:`no_${v(w)}_found`},clearDataOnUnMount:!0,prefixPagingId:"/manage-hidden",gridLayout:"Friend - Small List",itemLayout:"Friend - Small List"})))))}},28977:function(e,t,a){a.r(t);var n=a(92114),i=a(85597),r=a(30120),o=a(81719),l=a(35705),s=a(67294);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let d=(0,o.ZP)(n.cZ,{name:"HistoryDialog",slot:"DialogContentStyled"})(({theme:e})=>({borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,[e.breakpoints.down("sm")]:{borderRadius:0}})),m=({dataSource:e,pageParams:t})=>{let{useDialog:a,i18n:o,useFetchItems:m,jsxBackend:u}=(0,i.OgA)(),p=u.get("FeedHistoryItem"),{dialogProps:g}=a(),[h,f]=m({dataSource:e,pageParams:t,data:[]});return s.createElement(n.Vq,c({},g,{"data-testid":"dialogStatusComposer",maxWidth:"sm",fullWidth:!0}),s.createElement(n.$N,null,o.formatMessage({id:"edit_history"})),s.createElement(d,null,f?s.createElement(r.Z,{p:2,sx:{display:"flex",alignItems:"center",justifyContent:"center"}},s.createElement(l.Z,{size:16})):null,h&&h.length?s.createElement(r.Z,{mt:2},h.map(e=>s.createElement(r.Z,{mb:3,key:`k${e.id}`},s.createElement(p,{item:e})))):null))};t.default=m},56979:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=a(85597),i=a(92114),r=a(84635),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s({initialValues:e,formUrl:t}){let{useDialog:a}=(0,n.OgA)(),{dialogProps:s}=a();return t?o.createElement(i.Vq,l({},s,{maxWidth:"sm",fullWidth:!0}),o.createElement(r.AO,{initialValues:e,dataSource:{apiUrl:t},dialog:!0})):null}},35597:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=a(85597),i=a(92114),r=a(84635),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s({dataSource:e,parentPost:t}){let{useDialog:a,jsxBackend:s}=(0,n.OgA)(),{dialogProps:c}=a(),d=s.render({component:"forum_post.ui.quoteItem",props:{item:t}});return o.createElement(i.Vq,l({},c,{maxWidth:"sm",fullWidth:!0}),o.createElement(r.AO,{noHeader:!0,dataSource:e,dialog:!0,dialogEmbedItem:d,keepPaginationData:!0}))}},96370:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var n=a(92114),i=a(85597),r=a(21241),o=a(46060),l=a(21822),s=a(18446),c=a.n(s),d=a(67294),m=a(49960),u=a(71682),p=a(91647),g=a(81719);let h=(0,g.ZP)("div",{name:"FriendListItem",slot:"Root"})(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(1.5),borderBottom:"1px solid",borderBottomColor:e.palette.divider,":hover":{backgroundColor:e.palette.action.hover}}));function f({item:e,checked:t,onChange:a}){let n=d.useCallback((t,n)=>{a(n,e.id)},[]);return d.createElement(h,null,d.createElement(p.Z,{variant:"h5",sx:{flex:1}},e.name),d.createElement(m.Z,{size:"small",color:"primary",checked:Boolean(t),onChange:n}))}let v=()=>{return d.createElement(h,null,d.createElement(p.Z,{variant:"h5",sx:{flex:1}},d.createElement(u.Z,{variant:"text",width:"50%",height:24})),d.createElement(u.Z,{variant:"rectangular",width:16,height:16}))};f.LoadingSkeleton=v;var b=a(16473);let y=(0,g.ZP)("div",{name:"root"})(({theme:e})=>({display:"flex",flexDirection:"column",justifyContent:"center",padding:e.spacing(0,2),alignItems:"center",marginTop:e.spacing(11.25)})),x=(0,g.ZP)(b.zb,{name:"LineIcon"})(({theme:e})=>({fontSize:e.mixins.pxToRem(64),color:e.palette.text.secondary,marginBottom:e.spacing(4)})),E=(0,g.ZP)("div",{name:"content"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18),color:e.palette.text.secondary,textAlign:"center",[e.breakpoints.down("xs")]:{fontSize:e.mixins.pxToRem(15)}})),w=(0,g.ZP)(l.Z,{name:"WrapButton"})(({theme:e})=>({marginTop:e.spacing(1),"&:hover":{backgroundColor:"unset"}})),C=(0,g.ZP)(l.Z,{name:"ButtonInviteStyled"})(({theme:e})=>({height:"100%","& .MuiButton-startIcon":{marginLeft:0}}));function k({icon:e="ico-list-bullet-o",description:t="there_are_no_friend_list",buttonCustom:a}){let{i18n:n,dispatch:r,useDialog:o}=(0,i.OgA)(),{closeDialog:l}=o(),s=()=>{l(),a.type&&r({type:a.type})};return d.createElement(y,null,d.createElement(x,{icon:e}),t?d.createElement(E,null,n.formatMessage({id:t})):null,a?d.createElement(w,null,d.createElement(C,{size:"small",variant:"outlined",component:"h5",onClick:s,startIcon:d.createElement(b.zb,{sx:{marginLeft:"0 !important"},icon:"ico-envelope"})},d.createElement("span",null,n.formatMessage({id:a.label||"add_new_listing"})))):null)}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Z({id:e}){let{useDialog:t,i18n:a}=(0,i.OgA)(),[s,m]=d.useState([]),[u,p]=(0,o.sU)({dataSource:{apiUrl:`/friend/list/assign/${e}`},data:[]});d.useEffect(()=>{m(u)},[u]);let{dialogProps:g,setDialogValue:h}=t(),v=()=>{h(s)},b=d.useCallback((e,t)=>{m(a=>{return e?[...a,t]:a.filter(e=>e!==t)})},[m]),[y,x]=(0,o.sU)({dataSource:{apiUrl:"/friend/list"},data:[]});return d.createElement(n.Vq,S({maxWidth:"xs",fullWidth:!0},g),d.createElement(n.$N,null,a.formatMessage({id:"friend_list"})),d.createElement(n.cZ,{variant:"fitScroll",sx:{height:"45vh"}},d.createElement(r.l$,null,x||p?[0,5].map(e=>d.createElement(f.LoadingSkeleton,{key:e.toString()})):null,x||p||y.length?null:d.createElement(k,{icon:"ico-list-bullet-o",buttonCustom:{type:"friend/addNewList",label:"add_new_listing"}}),x||p||!y.length?null:y.map(e=>d.createElement(f,{key:e.id.toString(),item:e,checked:s.includes(e.id),onChange:b})))),d.createElement(n.kX,null,d.createElement(l.Z,{disabled:c()(u,s),color:"primary",variant:"contained",size:"medium",onClick:v},a.formatMessage({id:"save_changes"}))))}},18884:function(e,t,a){a.r(t);var n=a(85597),i=a(16473),r=a(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}t.default=function(e){let{i18n:t}=(0,n.OgA)(),[a,l]=(0,n.fBB)({apiUrl:e.apiUrl||"/friend/mention",initialParams:null==e?void 0:e.initialParams}),[s,c]=r.useState(e.value),d=r.useCallback(e=>{c(e)},[]);return r.createElement(i.zU,o({placeholder:t.formatMessage({id:"search_friend"}),dialogTitle:t.formatMessage({id:"select_friend"}),items:a.items,loading:a.loading,onSelectItem:d,selectedItem:s,onChanged:l,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.ui.pickItem",emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_people_found"})},"data-testid":"popupFriendPicker"},e))}},52267:function(e,t,a){a.r(t);var n=a(85597),i=a(16473),r=a(57043),o=a.n(r),l=a(59704),s=a.n(l),c=a(67294);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}t.default=function(e){let{i18n:t,useTheme:a}=(0,n.OgA)(),r=a(),[l,m]=(0,n.fBB)({apiUrl:e.apiUrl||"/friend/mention",initialParams:null==e?void 0:e.initialParams}),[u,p]=(0,c.useState)(e.value||[]),g=e=>{p(t=>{return s()(t,t=>t.id===e.id)?t.filter(t=>t.id!==e.id):o()(t,e)})};return c.createElement(i.f7,d({items:l.items,onSelectItem:g,selectedItems:u,onChanged:m,loading:l.loading,placeholder:t.formatMessage({id:"search_for_friends"}),dialogTitle:t.formatMessage({id:"tag_people"}),emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_people_found"})},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.ui.pickItem",heightContent:r.spacing(37.5)},e))}},56897:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(85597),i=a(92114),r=a(21241),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:s}){let{useDialog:c,ListView:d}=(0,n.OgA)(),{dialogProps:m}=c();return o.createElement(i.Vq,l({},m,{maxWidth:"xs",fullWidth:!0}),o.createElement(i.$N,null,s),o.createElement(i.cZ,{variant:"fitScroll",sx:{height:"45vh"}},o.createElement(r.l$,{style:{height:"auto"}},o.createElement(d,{dataSource:{apiUrl:e,apiParams:t},pagingId:a,canLoadMore:!0,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.itemView.smallCard"}))))}},90347:function(e,t,a){a.r(t),a.d(t,{default:function(){return o}});var n=a(85597),i=a(67294),r=a(56897);function o(e){let{i18n:t}=(0,n.OgA)();return i.createElement(r.Z,{apiUrl:"/friend",apiParams:{user_id:e.user_id,view:"mutual",limit:20},pagingId:`mutualFriends/${e.user_id}`,dialogTitle:t.formatMessage({id:"mutual_friends"})})}},54394:function(e,t,a){a.r(t),a.d(t,{default:function(){return o}});var n=a(85597),i=a(67294),r=a(56897);function o({item_type:e,item_id:t}){let{i18n:a}=(0,n.OgA)();return i.createElement(r.Z,{apiUrl:"/feed/tagged-friend",apiParams:{item_type:e,item_id:t,limit:20},pagingId:`tagged-friend/${e}/${t}`,dialogTitle:a.formatMessage({id:"tagged_friends"})})}},16234:function(e,t,a){a.r(t),a.d(t,{default:function(){return o}});var n=a(85597),i=a(67294),r=a(56897);function o(e){let{i18n:t}=(0,n.OgA)();return i.createElement(r.Z,{apiUrl:"/friend",apiParams:{user_id:e.user_id,limit:20},pagingId:`friends/${e.user_id}`,dialogTitle:t.formatMessage({id:"Friends"})})}},50821:function(e,t,a){a.r(t);var n=a(85597),i=a(92114),r=a(67294),o=a(84635);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let s="changeRuleGroupDialog",c=({id:e,dataSource:t})=>{let{eventCenter:a,dispatch:c}=(0,n.OgA)(),{dialogProps:d}=(0,i.Rh)();return(0,r.useEffect)(()=>{let e=a.on(s,e=>c({type:s,payload:e}));return()=>{a.off(s,e)}},[]),r.createElement(i.Vq,l({},d),r.createElement(o.AO,{changeEventName:s,dialog:!0,dataSource:t}))};t.default=c},19024:function(e,t,a){a.r(t);var n=a(92114),i=a(67294),r=a(84635);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let l=({id:e,dataSource:t})=>{let{dialogProps:a}=(0,n.Rh)();return i.createElement(n.Vq,o({fullWidth:!0,maxWidth:"xs"},a),i.createElement(r.AO,{dialog:!0,dataSource:t}))};t.default=l},34880:function(e,t,a){a.r(t);var n=a(92114),i=a(85597),r=a(16473),o=a(21822),l=a(71682),s=a(81719),c=a(38790),d=a(67294);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let u="GenerateLinkField",p=(0,s.ZP)("div",{name:u})(({theme:e})=>({padding:e.spacing(.5,1.75),margin:e.spacing(2),border:e.mixins.border("secondary"),borderRadius:e.spacing(.5),display:"flex",alignItems:"center",justifyContent:"space-between"})),g=(0,s.ZP)("div",{name:u})(({theme:e})=>({display:"flex",alignItems:"center",overflow:"hidden",width:"90%"})),h=(0,s.ZP)(r.zb,{name:"ReloadIcon"})(({theme:e})=>({fontSize:e.spacing(1.875),color:(e.palette.mode,e.palette.primary.main),cursor:"pointer"})),f=(0,s.ZP)(o.Z,{name:"ReloadButton"})(({theme:e})=>({fontWeight:"bold",height:e.spacing(4),marginLeft:e.spacing(1)})),v=(0,s.ZP)(r.Ys,{name:"CodeText"})(({theme:e})=>({color:e.palette.text.hint,overflow:"hidden"})),b=(0,s.ZP)("div",{name:"WrapperLoading"})(({theme:e})=>({margin:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center"})),y=(0,s.ZP)(o.Z)(()=>({"& span":{margin:0}})),x=e=>{let{useDialog:t,i18n:a,dispatch:r,copyToClipboard:o,toastBackend:s}=(0,i.OgA)(),{dialogProps:u}=t(),[x,E]=d.useState(null),w=t=>{r({type:t,payload:e,meta:{onSuccess:e=>{E(e)},onFailure:()=>{}}})};d.useEffect(()=>{e&&w("group/getCode")},[]);let C=()=>{o(x.url),s.success(a.formatMessage({id:"link_copied_to_clipboard"}))},k=()=>{w("group/refreshCode")};return d.createElement(n.Vq,m({},u,{maxWidth:"sm",fullWidth:!0}),d.createElement(n.$N,null,a.formatMessage({id:"generate_invite_link"})),d.createElement(n.cZ,{variant:"fitScroll"},x?d.createElement(p,null,d.createElement(g,null,d.createElement(v,{lines:1},x.url)),(null==x?void 0:x.status)?null:d.createElement(c.Z,{title:a.formatMessage({id:"refresh"}),placement:"top"},d.createElement(y,{onClick:k,variant:"outlined",size:"small",startIcon:d.createElement(h,{icon:"ico-refresh-o"})})),d.createElement(f,{variant:"outlined",onClick:C},a.formatMessage({id:"copy"}))):d.createElement(b,null,d.createElement(l.Z,{variant:"rounded",width:"100%",height:35}))))};t.default=x},86384:function(e,t,a){a.r(t);var n=a(85597),i=a(9949),r=a(16473),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}t.default=function(e){let{i18n:t}=(0,n.OgA)(),a=(0,n.oHF)(i.eA,i.eA,"getShareOnGroupSuggestion"),{apiUrl:s,apiParams:c}=Object.assign({},a),[d,m]=(0,n.fBB)({apiUrl:s,initialParams:c}),[u,p]=o.useState(e.value),g=o.useCallback(e=>{p(e)},[]);return o.createElement(r.zU,l({placeholder:t.formatMessage({id:"search_group"}),dialogTitle:t.formatMessage({id:"select_group_to_share"}),items:d.items,loading:d.loading,onSelectItem:g,selectedItem:u,onChanged:m,"data-testid":"popupGroupPicker",emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_groups_found"})},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"group.ui.pickGroupItem"},e))}},33009:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var n=a(85597),i=a(1881),r=a(67294),o=a(92114),l=a(21241);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:i}){let{useDialog:c,ListView:d}=(0,n.OgA)(),{dialogProps:m}=c();return r.createElement(o.Vq,s({},m,{maxWidth:"xs",fullWidth:!0}),r.createElement(o.$N,null,i),r.createElement(o.cZ,{variant:"fitScroll",sx:{height:"45vh"}},r.createElement(l.l$,{style:{height:"auto"}},r.createElement(d,{dataSource:{apiUrl:e,apiParams:t},canLoadMore:!0,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"group.itemView.reportCard"}))))}function d({id:e}){let{i18n:t,compactUrl:a}=(0,n.OgA)(),o=(0,n.oHF)(i.a,i.v,"listUsersReportOwner");return r.createElement(c,{apiUrl:a(o.apiUrl,{id:e}),pagingId:`listReport/${e}`,apiParams:{},dialogTitle:t.formatMessage({id:"people_who_reported_post"})})}},45694:function(e,t,a){a.r(t);var n=a(92114),i=a(84635),r=a(85597),o=a(67294),l=a(90717);let s=({id:e})=>{let{useDialog:t}=(0,r.OgA)(),{dialogProps:a}=t(),s=(0,r.oHF)(l.eA,"group_question","getQuestionForm"),{open:c}=a,d=o.useMemo(()=>o.createElement(n.Vq,{open:c,maxWidth:"md",fullWidth:!0,"data-testid":"popupReport"},o.createElement(i.AO,{dialog:!0,dataSource:s,pageParams:{id:e}})),[e,c]);return d};t.default=s},3706:function(e,t,a){a.r(t);var n=a(92114),i=a(85597),r=a(30120),o=a(81719),l=a(67294),s=a(90910),c=a(85309);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let m=(0,o.ZP)("div",{name:"VideoView",slot:"dialogVideo"})(({theme:e})=>({position:"relative",backgroundColor:"#000",width:"100%",overflow:"hidden","& iframe":{width:"100%",height:"100%"},[e.breakpoints.down("md")]:{width:"65%"},[e.breakpoints.down("sm")]:{width:"100%",height:"auto",borderRadius:0,overflow:"initial"}})),u=(0,o.ZP)("div",{name:"VideoView",slot:"dialogStatistic",shouldForwardProp:e=>"isExpand"!==e})(({theme:e,isExpand:t})=>({height:"100%",width:t?0:"480px",flexGrow:1,[e.breakpoints.down("md")]:{width:"35%"},[e.breakpoints.down("sm")]:{width:"100%"},[e.breakpoints.down("xs")]:{width:"100%",height:"400px"}})),p=(0,o.ZP)(n.cZ,{name:"VideoView",slot:"dialogStatistic"})(({theme:e})=>({padding:"0 !important",height:"100%",display:"flex",overflowX:"hidden",[e.breakpoints.down("sm")]:{flexFlow:"column"}})),g=(0,o.ZP)(r.Z,{name:"videoView",slot:"WrapperStatistic"})(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%"}));t.default=(0,i.YUM)(function({item:e,identity:t,error:a,actions:o,user:c}){let{ItemDetailInteractionInModal:h,useDialog:f,useIsMobile:v,i18n:b,jsxBackend:y,useSession:x}=(0,i.OgA)(),{dialogProps:E}=f(),w=v(),[C,k]=l.useState(!1),S=l.useRef(!1),{user:Z,loggedIn:P}=x(),M=(null==Z?void 0:Z.id)===(null==c?void 0:c.id),[_,O]=l.useState(),R=y.get("livestreaming.itemView.modalCard"),z=y.get("livestreaming.block.commentLiveListing");if(l.useEffect(()=>{if(!S.current&&(null==e?void 0:e.is_streaming)&&!M&&P)return S.current=!0,o.updateViewer(),()=>{o.removeViewer()}},[null==e?void 0:e.is_streaming]),!e)return null;let I=e=>{k(e)},W=()=>{O(void 0)},N=()=>{O(void 0)},{is_streaming:T}=e,A=T?[{component:"livestreaming.ui.watchingUsers",props:{streamKey:null==e?void 0:e.stream_key}},{component:"livestreaming.ui.composerReplyInfo",props:{item:_,removeReply:N,sx:{mt:1}}}]:void 0;return l.createElement(n.Vq,d({scroll:"body"},E,{fullScreen:!a,"data-testid":"popupDetailVideo",onBackdropClick:void 0}),w||a?l.createElement(n.$N,{enableBack:!a,disableClose:w},b.formatMessage({id:"video"})):null,l.createElement(s.Z,{error:a},l.createElement(p,null,l.createElement(m,null,R?l.createElement(R,{item:e,onMinimizePhoto:I,identity:t,actions:o}):null),l.createElement(u,{isExpand:C},l.createElement(g,{sx:{display:C?"none":"flex",flexDirection:"column"}},l.createElement(r.Z,{sx:{flex:1,minHeight:0}},l.createElement(h,{identity:t,startFooterItems:A,statisticDisplay:T?"":"total_view",commentComposerProps:{onSuccess:W,identity:(null==_?void 0:_.parent_comment_identity)||t},commentlistingComponent:T?l.createElement(z,{identity:t,streamKey:null==e?void 0:e.stream_key,setParentReply:O}):void 0})))))))},c.Z)},27265:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=a(92114),i=a(85597),r=a(21241),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s({item:e,dataSource:t}){let a=(0,o.useRef)(),{useDialog:s,i18n:c,ListView:d}=(0,i.OgA)(),{dialogProps:m}=s(),{resource_name:u,item_id:p}=e,g=`marketplace/${u}/${p}`;return o.createElement(n.Vq,l({},m,{maxWidth:"sm",fullWidth:!0}),o.createElement(n.$N,null,c.formatMessage({id:"invited_people"})),o.createElement(n.cZ,null,o.createElement("div",{ref:a},o.createElement(r.ID,{scrollRef:a},o.createElement(d,{dataSource:t,pagingId:g,canLoadMore:!0,clearDataOnUnMount:!0,gridContainerProps:{spacing:0},gridLayout:"Friend - Small List",itemLayout:"User - List",itemView:"marketplace.itemView.peopleCard"})))))}},28302:function(e,t,a){a.r(t);var n=a(85597),i=a(13585),r=a(16473),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}t.default=function(e){let{i18n:t}=(0,n.OgA)(),[a,s]=o.useState(e.value),c=(0,n.oHF)(i.t2,i.t2,"getShareOnPageSuggestion"),{apiUrl:d,apiParams:m}=Object.assign({},c),[u,p]=(0,n.fBB)({apiUrl:d,initialParams:m}),g=o.useCallback(e=>{s(e)},[]);return o.createElement(r.zU,l({placeholder:t.formatMessage({id:"search_page"}),dialogTitle:t.formatMessage({id:"select_page_to_share"}),items:u.items,loading:u.loading,onSelectItem:g,selectedItem:a,onChanged:p,emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_pages_found"})},"data-testid":"popupPagePicker",gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"page.ui.pickPageItem"},e))}},64169:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var n=a(85597),i=a(92114),r=a(21822),o=a(91647),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(){let{useDialog:e,i18n:t}=(0,n.OgA)(),{dialogProps:a,closeDialog:c}=e();return l.createElement(i.Vq,s({},a),l.createElement(i.$N,null,t.formatMessage({id:"Reassign Owner"})),l.createElement(i.cZ,null,l.createElement(o.Z,null,"Choose a friend and transfer this page to them. Remember that: Current owner will lose all admin privilege on this page after do this.")),l.createElement(i.kX,null,l.createElement(r.Z,{autoFocus:!0,color:"primary",onClick:c,"data-testid":"alertDialogOkButton"},t.formatMessage({id:"Submit"}))))}c.displayName="ReassignOwnerDialog";var d=c},33651:function(e,t,a){a.d(t,{Z:function(){return v}});var n=a(85597),i=a(62937),r=a(67294),o=a(27361),l=a.n(o),s=a(27274),c=a(7961),d=a(35705),m=a(81719);let u="SuggestionList",p=(0,m.ZP)("div",{name:u,slot:"RootNoFound"})(({theme:e})=>({minHeight:"100px",textAlign:"center"})),g=(0,m.ZP)("div",{name:u,slot:"Root"})(({theme:e})=>({minHeight:"100px"})),h=(e,{text:t,identity:a})=>{let n=l()(e,a);return{...e.friend.suggestions[`:${t}`],item_id:null==n?void 0:n.id}};var f=(0,n.$jX)(h)(function(e){let{dispatch:t,i18n:a}=(0,n.OgA)(),{text:i,item_id:o,data:l,loaded:m,onItemClick:u,classes:h,excludeIds:f,isFullFriend:v}=e,b=r.useMemo(()=>{return v?{excludeIds:f}:{item_type:"photo",item_id:o}},[f,o,v]);return(r.useEffect(()=>{t({type:"friend/suggestions/LOAD",payload:{text:i,...b}})},[t,i,b]),m)?(null==l?void 0:l.length)?r.createElement(g,null,l.map(e=>r.createElement("div",{onClick:t=>{t.preventDefault(),t.stopPropagation(),u(e)},className:h.tagItem,key:e.id.toString()},r.createElement(c.Z,{src:(0,s.Q4)(e.image,"240"),children:(0,s.vK)(e.label),alt:e.label,className:h.smallAvatar,style:{backgroundColor:s.kU.hex((0,s.vK)(e.label))}}),r.createElement("span",{className:h.userName},e.label)))):r.createElement(p,null,r.createElement("div",{style:{padding:16}},a.formatMessage({id:"no_people_found"}))):r.createElement(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center"}},r.createElement(d.Z,{color:"secondary",size:32}))});function v({classes:e,onItemClick:t,anchorRef:a,identity:o,isFullFriend:l,excludeIds:s}){let{i18n:c}=(0,n.OgA)(),[d,m]=r.useState(""),u=e=>{m(e)};return r.createElement(i.Z,{id:"suggest-friends",open:Boolean(a.current),disablePortal:!0,anchorEl:a.current,placement:"bottom",className:e.popper},r.createElement("div",{className:e.inputBaseBox},r.createElement("input",{type:"text",placeholder:c.formatMessage({id:"type_any_name"}),onChange:e=>u(e.target.value),autoFocus:!0,onBlur:e=>e.target.focus()})),r.createElement(f,{onItemClick:t,text:d,classes:e,identity:o,isFullFriend:l,excludeIds:s}))}},11770:function(e,t,a){var n=a(86010),i=a(67294);t.Z=i.forwardRef(function({classes:e,px:t,py:a,open:r},o){let l=i.useMemo(()=>{return{left:`${t}%`,top:`${a}%`}},[t,a]);return i.createElement("div",{className:(0,n.default)(e.taggedBox,r?"":"srOnly"),style:l,ref:o},i.createElement("div",{className:e.whoIsThis}))})},97252:function(e,t,a){var n=a(27274),i=a(81719),r=a(67294);let o=(0,i.ZP)("div",{name:"MultipleUploadField",slot:"PreviewImg",shouldForwardProp:e=>"radio"!==e})(({theme:e,radio:t})=>({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"auto 100%",maxWidth:"100%",...t&&"horizontal"===t&&{backgroundSize:"cover"}})),l=({item:e})=>{let[t,a]=r.useState({}),i=(e,t)=>{try{let a=new Image;a.src=t,a.onload=()=>{e({height:a.height,width:a.width})},a.onerror=e=>{}}catch(n){}},l=(null==e?void 0:e.source)||e.image_url||(0,n.Q4)(null==e?void 0:e.image,"1024");r.useEffect(()=>{i(a,l)},[]);let s="horizontal";return s=t&&t.width/t.height<=1?"vertical":"horizontal",r.createElement(o,{radio:s,style:{backgroundImage:`url(${l})`}})};t.Z=l},49249:function(e,t,a){a.d(t,{Z:function(){return v}});var n=a(85597),i=a(27361),r=a.n(i),o=a(16473),l=a(21822),s=a(81719),c=a(67294);let d="PhotoTag",m=(0,s.ZP)("div",{name:d,slot:"root",shouldForwardProp:e=>"tagging"!==e&&"px"!==e&&"py"!==e&&"hovering"!==e&&"forceShow"!==e})(({theme:e,tagging:t,px:a,py:n,hovering:i,forceShow:r})=>({position:"absolute",width:t?10:100,height:t?10:100,transform:"translate(-50%,-50%)","&:hover > div:first-of-type":{visibility:"visible"},...(t||r)&&{"& > div:first-of-type":{visibility:"visible"}},zIndex:i?10:"auto",...a&&n&&{left:`${a}%`,top:`${n}%`}})),u=(0,s.ZP)("div",{name:d,slot:"Item"})(({theme:e})=>({position:"absolute",backgroundColor:"rgba(255,255,255,.8)",borderRadius:e.shape.borderRadius,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"120px",textAlign:"center",display:"flex",alignItems:"center",padding:e.spacing(.5),transform:"translate(-50%,-50%)",left:"50%",top:"50%",visibility:"hidden"})),p=(0,s.ZP)(n.QVN,{name:d,slot:"LinkStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.grey["800"],fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,maxWidth:120,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",flexGrow:1,margin:e.spacing(0,.5)})),g=(0,s.ZP)(l.Z,{name:d,slot:"ButtonStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.grey["800"],minWidth:"11px",padding:e.spacing(.5,1),margin:e.spacing(-.5),fontSize:e.mixins.pxToRem(11)})),h=(0,s.ZP)("span",{name:d,slot:"LabelStyled"})(({theme:e})=>({margin:"0 4px"})),f=(e,{identity:t})=>{let a=r()(e,t);return a?{item:a,user:a.user?r()(e,a.user):void 0}:{}};var v=(0,n.$jX)(f)(function({item:e,user:t,tagging:a,extra:n,onRemove:i,isTypePreview:r,forceShow:l}){var s;let d=a&&(null==e?void 0:null===(s=e.extra)||void 0===s?void 0:s.can_remove_tag_friend),[f,v]=c.useState(!1);return c.createElement(m,{px:e.px,py:e.py,tagging:a,hovering:f,forceShow:l},c.createElement(u,{onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},t&&!r?c.createElement(p,{to:`/${t.user_name}`,children:t.full_name}):c.createElement(h,null,(null==t?void 0:t.full_name)||(null==e?void 0:e.content)),d?c.createElement(g,{disableRipple:!0,disableFocusRipple:!0,onClick:t=>{i(t,e.id)}},c.createElement(o.zb,{icon:"ico-close"})):null))})},81667:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var n=a(85597),i=a(92114),r=a(84635),o=a(89773),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c({id:e}){let{useDialog:t,compactUrl:a}=(0,n.OgA)(),{dialogProps:c}=t(),d=(0,n.oHF)(o.T7,o.Gk,"addItemForm");return d?l.createElement(i.Vq,s({},c,{fullWidth:!0,maxWidth:"xs","data-testid":"addPhotoAlbum"}),l.createElement(r.AO,{dialog:!0,dataSource:{apiMethod:d.apiMethod,apiUrl:a(d.apiUrl,{id:e})}})):null}},2067:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var n=a(92114),i=a(85597),r=a(89773),o=a(21822),l=a(72962),s=a(70214),c=a(99164),d=a(67294),m=a(21241),u=a(61225),p=a(62097),g=a(12902),h=a(22410),f=a(73327),v=(0,h.Z)(e=>(0,f.Z)({dialog:{"& .MuiDialog-paper":{maxWidth:"720px !important"}},dialogTitle:{height:50,maxWidth:720,display:"flex"},dialogContent:{padding:e.spacing(0,2,2,2),maxWidth:720,height:426,overflow:"hidden"},scroll:{marginTop:e.spacing(3),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"350px !important"}},scrollAlbum:{marginTop:e.spacing(2),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"406px !important"}},btnBack:{marginRight:`${e.spacing(1)} !important`,"& .ico":{flex:1}},tab:{textTransform:"uppercase",height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(5),"& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main}}}),{name:"ChooseAlbumItemDialog"});let b={spacing:1},y={xs:12,sm:6,md:4,lg:4,xl:4};var x=function({fileItems:e,uploadFiles:t,setFiles:a,isDetailAlbum:n,albumId:r,dataSource:o}){let{jsxBackend:l}=(0,i.OgA)(),s=v(),c=(0,p.Z)(),h=(0,u.Z)(c.breakpoints.down("sm")),f=l.get("photo.block.photoListingBlock"),x=e=>{let n=Boolean(t.find(t=>t.id===e.id));a((0,g.ZP)(t,a=>{if(n){let i=t.findIndex(t=>t.id===e.id);a.splice(i,1)}else a.push(e)}))};return d.createElement(m.l$,{className:s.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:h?"90vh":352},d.createElement(f,{canLoadMore:!0,clearDataOnUnMount:!0,dataSource:o,itemView:"photo.itemView.selectPhotoProfile",emptyPage:"core.block.no_content",gridContainerProps:b,gridItemProps:y,itemProps:{fileItems:e,isDetailAlbum:n,albumId:r,onSuccess:x,files:t},blockLayout:"Profile - Clean Body Only"}))},E=a(97252),w=a(16473),C=a(30030),k=a(81719),S=a(38790);let Z=(0,k.ZP)("div",{name:"MultipleUploadField",slot:"Root"})(({theme:e})=>({marginTop:e.spacing(3)})),P=(0,k.ZP)(o.Z,{name:"DropButton",slot:"DropButton"})(({theme:e,isOver:t})=>({...t&&{backgroundColor:e.palette.action.hover}})),M=(0,k.ZP)("div",{name:"MultipleUploadField",slot:"PreviewItem"})(({theme:e})=>({width:"100%",paddingBottom:"56%",borderRadius:8,background:e.palette.grey.A700,position:"relative",overflow:"hidden"})),_=(0,k.ZP)("video",{name:"MultipleUploadField",slot:"PreviewVideo"})({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",maxWidth:"100%"}),O=(0,k.ZP)("div",{name:"MultipleUploadField",slot:"removeBtn"})(({theme:e})=>({width:e.spacing(3),height:e.spacing(3),borderRadius:e.spacing(1.5),backgroundColor:"rgba(0,0,0,0.89)",color:"#fff",position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"})),R=(0,k.ZP)("div",{name:"MultipleUploadField",slot:"AddMoreBtnWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",border:e.mixins.border("primary"),borderRadius:e.shape.borderRadius,height:"100%",button:{width:"100% !important",height:"100% !important"},"&:before":{content:'""',display:"block",paddingBottom:"56%"}})),z=(0,k.ZP)("div",{name:"MultipleUploadField",slot:"PreviewVideoWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"})),I=(0,k.ZP)("div",{name:"MultipleUploadField",slot:"MaskPlay"})(({theme:e})=>({position:"absolute",width:e.spacing(5),height:e.spacing(5),color:"#fff",backgroundColor:"rgba(0,0,0,0.4)",borderRadius:"50%",left:"50%",top:"50%",marginLeft:e.spacing(-2.5),marginTop:e.spacing(-2.5),display:"flex",alignItems:"center",justifyContent:"center",fontSize:e.mixins.pxToRem(24)}));var W=function({config:e,uploadFiles:t,setFiles:a,checkFilesSize:n}){let{accept:r}=e,{i18n:o,getSetting:l}=(0,i.OgA)(),s=(0,d.useRef)(),c=(0,p.Z)(),g=(0,u.Z)(c.breakpoints.down("sm")),h=l("photo.photo_allow_uploading_video_to_photo_album");t=t.filter(e=>!e.id);let f=()=>{s.current.click()},v=()=>{let e=s.current.files;e.length&&n(Object.values(e))},b=e=>a(t=>t.filter(t=>t.uid!==e));return d.createElement(m.l$,{autoHide:!0,autoHeight:!0,autoHeightMax:g?"90vh":352},d.createElement(Z,null,d.createElement("input",{ref:s,type:"file","aria-hidden":!0,className:"srOnly",multiple:!0,accept:r,onChange:v}),d.createElement(C.ZP,{container:!0,columnSpacing:1,rowSpacing:1},d.createElement(C.ZP,{item:!0,sm:6,md:4},d.createElement(R,null,d.createElement(P,{size:"large",color:"primary",startIcon:d.createElement(w.zb,{icon:"ico-photos-plus-o"}),sx:{fontWeight:"bold"},onClick:f},h?o.formatMessage({id:"select_files"}):o.formatMessage({id:"add_photos"})))),null==t?void 0:t.map((e,t)=>{var a,n;return d.createElement(C.ZP,{item:!0,key:e.uid,sm:6,md:4,xs:6},d.createElement(M,null,(null==e?void 0:null===(a=e.file)||void 0===a?void 0:a.type.match(/image\/*/i))?d.createElement(E.Z,{item:e}):null,(null==e?void 0:null===(n=e.file)||void 0===n?void 0:n.type.match(/video\/*/i))?d.createElement(z,null,d.createElement(_,{src:e.source,controls:!1}),d.createElement(I,null,d.createElement(w.zb,{icon:"ico-play"}))):null,d.createElement(S.Z,{title:o.formatMessage({id:"remove"})},d.createElement(O,{onClick:()=>b(e.uid)},d.createElement(w.zb,{icon:"ico-close"})))))}))))},N=a(2597);function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function A({config:e,fileItems:t,setFileItems:a,isDetailAlbum:m=!1,formik:u}){var p,g,h,f;let{useDialog:b,i18n:y,compactData:E}=(0,i.OgA)(),{dialogProps:w,closeDialog:C}=b(),k=v(),{dialogTitle:S,max_upload_filesize:Z,upload_url:P,isVideoUploadAllowed:M,acceptFail:_}=e||{},[O,R]=d.useState(0),[z,I,A]=(0,N.Z)({initialValues:[],upload_url:P,maxSizeLimit:Z,isAcceptVideo:M,messageAcceptFail:_}),j=(0,i.oHF)(r.T7,"photo_album","selectFromMyPhotos"),$=(0,i.oHF)(r.T7,"photo_album","selectFromGroupPhotos"),{apiUrl:L,apiParams:B}=$,D=(e,t)=>{R(t)},F=()=>{a([...t,...z]),C(),m&&setImmediate(u.submitForm)};return d.createElement(n.Vq,T({},w,{maxWidth:!1,fullWidth:!0,className:k.dialog}),d.createElement(n.$N,{className:k.dialogTitle},S||y.formatMessage({id:"add_photos_video"})),d.createElement(n.cZ,{className:k.dialogContent,sx:{overflow:"hidden !important"}},d.createElement(c.Z,{value:O,onChange:D,indicatorColor:"primary",textColor:"primary"},d.createElement(s.Z,{className:k.tab,disableRipple:!0,label:y.formatMessage({id:"upload"})}),d.createElement(s.Z,{className:k.tab,disableRipple:!0,label:y.formatMessage({id:"select_from_my_photos"})}),u&&(null==u?void 0:null===(p=u.values)||void 0===p?void 0:p.owner_type)==="group"&&d.createElement(s.Z,{className:k.tab,disableRipple:!0,label:y.formatMessage({id:"select_from_group_photos"})})),0===O&&d.createElement(W,{config:e,uploadFiles:z,setFiles:I,checkFilesSize:A}),1===O&&d.createElement(x,{fileItems:t,uploadFiles:z,setFiles:I,isDetailAlbum:m,albumId:null==u?void 0:null===(g=u.values)||void 0===g?void 0:g.album,dataSource:j}),2===O&&d.createElement(x,{fileItems:t,uploadFiles:z,setFiles:I,isDetailAlbum:m,albumId:null==u?void 0:null===(h=u.values)||void 0===h?void 0:h.album,dataSource:{apiUrl:L,apiParams:E(B,{user_id:null==u?void 0:null===(f=u.values)||void 0===f?void 0:f.owner_id})}})),d.createElement(l.Z,null,d.createElement(o.Z,{"data-testid":"buttonSubmit",role:"button",id:"buttonSubmit",autoFocus:!0,color:"primary",size:"medium",variant:"contained",onClick:F,sx:{minWidth:120},disabled:!z.length},y.formatMessage({id:"add_to_album"}))))}},10149:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var n=a(92114),i=a(85597),r=a(21241),o=a(16473),l=a(50130),s=a(70214),c=a(99164),d=a(61225),m=a(62097),u=a(67294),p=a(22410),g=a(73327),h=(0,p.Z)(e=>(0,g.Z)({dialog:{"& .MuiDialog-paper":{maxWidth:"720px !important"}},dialogTitle:{height:50,maxWidth:720,display:"flex"},dialogContent:{padding:e.spacing(0,2,2,2),maxWidth:720,height:426,overflow:"hidden"},scroll:{marginTop:e.spacing(3),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"350px !important"}},scrollAlbum:{marginTop:e.spacing(2),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"406px !important"}},btnBack:{marginRight:`${e.spacing(1)} !important`,"& .ico":{flex:1}},tab:{textTransform:"uppercase",height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(5),"& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main}}}),{name:"ChooseCoverPhoto"});function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let v={spacing:1},b={xs:12,sm:6,md:4,lg:4,xl:4};function y({identity:e,onSuccess:t,onFailure:a}){let{useDialog:p,i18n:g,jsxBackend:y}=(0,i.OgA)(),{dialogProps:x,closeDialog:E}=p(),w=h(),C=y.get("photo.block.photoListingBlock"),[k,S]=u.useState(0),[Z,P]=u.useState(0),[M,_]=u.useState(""),[O,R]=u.useState(""),z=(0,m.Z)(),I=(0,d.Z)(z.breakpoints.down("sm")),W=e.split(".")[0],N=e.split(".")[3],T={close:E,onSuccess:t,onFailure:a,resource_name:W},A=`setCover/photo/${W}/${N}`,j={apiUrl:"/photo",apiParams:`user_id=${N}&sort=recent&limit=20`},$=`setCover/album/${W}/${N}`,L={apiUrl:"/photo-album",apiParams:`user_id=${N}&sort=recent&limit=20`},B=`setCover/photo-album/${W}/${O}/${N}`,D={apiUrl:"/photo",apiParams:`album_id=${O}&sort=recent&limit=20`},F=(e,t)=>{S(t)};return u.createElement(n.Vq,f({},x,{maxWidth:!1,fullWidth:!0,className:w.dialog}),u.createElement(n.$N,{className:w.dialogTitle},1===Z&&u.createElement(l.Z,{size:"small",className:w.btnBack},u.createElement(o.zb,{icon:"ico-arrow-left",onClick:()=>P(0)})),0===Z?g.formatMessage({id:"choose_cover_photo"}):M),0===Z&&u.createElement(n.cZ,{className:w.dialogContent,sx:{overflow:"hidden !important"}},u.createElement(c.Z,{value:k,onChange:F,indicatorColor:"primary",textColor:"primary"},u.createElement(s.Z,{className:w.tab,disableRipple:!0,label:g.formatMessage({id:"latest_photos"})}),u.createElement(s.Z,{className:w.tab,disableRipple:!0,label:g.formatMessage({id:"albums"})})),0===k&&u.createElement(r.l$,{className:w.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:I?"90vh":352,style:{height:"auto"}},u.createElement(C,{canLoadMore:!0,clearDataOnUnMount:!0,dataSource:j,pagingId:A,itemView:"photo.itemView.chooseCoverPhoto",emptyPage:"core.block.no_content",gridContainerProps:v,gridItemProps:b,itemProps:T,blockLayout:"Profile - Clean Body Only"})),1===k&&u.createElement(r.l$,{className:w.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:I?"90vh":352,style:{height:"auto"}},u.createElement(C,{canLoadMore:!0,dataSource:L,clearDataOnUnMount:!0,pagingId:$,emptyPage:"core.block.no_content",itemView:"photo_album.itemView.chooseCoverPhoto",gridContainerProps:v,gridItemProps:b,itemProps:{setId:e=>R(e),setStep:e=>P(e),setName:e=>_(e)},blockLayout:"Profile - Clean Body Only"}))),1===Z&&u.createElement(n.cZ,{className:w.dialogContent,sx:{overflow:"hidden !important"}},u.createElement(r.l$,{className:w.scrollAlbum,autoHide:!0,autoHeight:!0,autoHeightMax:I?"90vh":400,style:{height:"auto"}},u.createElement(C,{canLoadMore:!0,clearDataOnUnMount:!0,dataSource:D,pagingId:B,emptyPage:"core.block.no_content",itemView:"photo.itemView.chooseCoverPhoto",gridContainerProps:v,gridItemProps:b,itemProps:T,blockLayout:"Profile - Clean Body Only"}))))}},50474:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var n=a(73327);let i=e=>(0,n.Z)({dialogTitle:{},dialogContent:{padding:0,display:"flex",flexDirection:"row"},dialogActions:{},leftSide:{width:360,display:"flex",flexDirection:"column",padding:`${e.spacing(2)} ${e.spacing(2)} ${e.spacing(2)} 0`},leftSideActions:{display:"flex",flex:1,flexDirection:"column",padding:e.spacing(2,0)},leftSideBottom:{display:"flex",flexDirection:"row","& > :first-of-type":{marginRight:e.spacing(1)}},mainContent:{display:"flex",flexDirection:"column",backgroundColor:e.palette.background.default,width:720,height:600,position:"relative",textAlign:"center"},mask:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)"},backdrop:{backgroundColor:e.mixins.backgroundColor("paper"),textAlign:"center",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,right:0,top:0,bottom:0},blurContainer:{width:"10%",height:"10%",transform:"scale(14)",filter:"blur(3px)",WebkitFilter:"blur(3px)"},blurImg:{objectFit:"cover",width:"100%",height:"100%",border:0},mediaContainer:{position:"relative",maxWidth:"100%",height:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:e.spacing(2),flexGrow:1},mediaWrapper:{maxHeight:"100%",position:"relative",justifyContent:"center",alignItems:"center",display:"flex"},largeImage:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",position:"relative"},largeImageCropping:{},imageError:{color:"white",fontSize:e.mixins.pxToRem(20)}});var r=a(61366),o=a(85597),l=a(92114),s=a(16473),c=a(21822),d=a(22949),m=a(86010),u=a(67294),p=a(22410),g=(0,p.Z)(e=>(0,n.Z)({root:{top:200,left:200,width:200,height:200,position:"absolute",transform:"translate3d(0, 0, 0)",boxSizing:"border-box",cursor:"move",boxShadow:"0 0 0 9999em rgba(0, 0, 0, 0.5)",touchAction:"manipulation",border:"1px solid rgba(255,255,255, 0.9)"},disabled:{cursor:"inherit","& $dragHandle":{cursor:"inherit"}},circular:{borderRadius:"50%",boxShadow:"0px 0px 1px 1px white, 0 0 0 9999em rgba(0, 0, 0, 0.5)"},rootInvisible:{display:"none"},dragHandle:{position:"absolute","&::after":{position:"absolute",content:"''",display:"block",width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"rgba(255,255,255, 0.5)",border:"1px solid rgba(255, 255, 255, 0.7)",boxSizing:"border-box",outline:"1px solid transparent"}},ordNW:{top:"0",left:"0",marginTop:"-5px",marginLeft:"-5px",cursor:"nw-resize","&::after":{top:0,left:0}},ordN:{top:"0",left:"50%",marginTop:"-5px",marginLeft:"-5px",cursor:"n-resize","&::after":{top:"0"}},ordNE:{top:"0",right:"0",marginTop:"-5px",marginRight:"-5px",cursor:"ne-resize","&::after":{top:"0",right:"0"}},ordE:{top:"50%",right:"0",marginTop:"-5px",marginRight:"-5px",cursor:"e-resize","&::after":{right:"0"}},ordSE:{bottom:"0",right:"0",marginBottom:"-5px",marginRight:"-5px",cursor:"se-resize","&::after":{bottom:"0",right:"0"}},ordS:{bottom:"0",left:"50%",marginBottom:"-5px",marginLeft:"-5px",cursor:"s-resize","&::after":{bottom:"0"}},ordSW:{bottom:"0",left:"0",marginBottom:"-5px",marginLeft:"-5px",cursor:"sw-resize","&::after":{bottom:"0",left:"0"}},ordW:{top:"50%",left:"0",marginTop:"-5px",marginLeft:"-5px",cursor:"w-resize","&::after":{left:"0"}},dragBar:{position:"absolute","& $ordN":{top:"0",left:"0",width:"100%",height:"6px",marginTop:"-3px"},"& $ordE":{right:"0",top:"0",width:"6px",height:"100%",marginRight:"-3px"},"& $ordS":{bottom:"0",left:"0",width:"100%",height:"6px",marginBottom:"-3px"},"& $ordW":{top:"0",left:"0",width:"6px",height:"100%",marginLeft:"-3px"}},fixedAspect:{"& $dragHandle.$ordN":{display:"none"},"& $dragHandle.$ordE":{display:"none"},"& $dragHandle.$ordS":{display:"none"},"& $dragHandle.$ordW":{display:"none"}},"@media (pointer: coarse)":{ordN:{display:"none"},ordE:{display:"none"},ordS:{display:"none"},ordW:{display:"none"},dragHandle:{width:"24px",height:"24px"}}}),{name:"ImageCropperSelection"}),h=u.forwardRef(function({onMounted:e,onMouseDown:t,onTouchStart:a,style:n},i){let r=g();return u.useEffect(()=>{e&&e()},[]),u.createElement("div",{onMouseDown:t,onTouchStart:a,className:r.root,style:n,ref:i},u.createElement("div",{className:(0,m.default)(r.dragBar,r.ordN),"data-ord":"n"}),u.createElement("div",{className:(0,m.default)(r.dragBar,r.ordE),"data-ord":"e"}),u.createElement("div",{className:(0,m.default)(r.dragBar,r.ordS),"data-ord":"s"}),u.createElement("div",{className:(0,m.default)(r.dragBar,r.ordW),"data-ord":"w"}),u.createElement("div",{className:(0,m.default)(r.dragHandle,r.ordNW),"data-ord":"nw"}),u.createElement("div",{className:(0,m.default)(r.dragHandle,r.ordN),"data-ord":"n"}),u.createElement("div",{className:(0,m.default)(r.dragHandle,r.ordNE),"data-ord":"ne"}),u.createElement("div",{className:(0,m.default)(r.dragHandle,r.ordE),"data-ord":"e"}),u.createElement("div",{className:(0,m.default)(r.dragHandle,r.ordSE),"data-ord":"se"}),u.createElement("div",{className:(0,m.default)(r.dragHandle,r.ordS),"data-ord":"s"}),u.createElement("div",{className:(0,m.default)(r.dragHandle,r.ordSW),"data-ord":"sw"}),u.createElement("div",{className:(0,m.default)(r.dragHandle,r.ordW),"data-ord":"w"}))});function f(e){let t,a;return e.touches?[{pageX:t,pageY:a}]=e.touches:{pageX:t,pageY:a}=e,{x:t,y:a}}function v(e,t,a){return Math.min(Math.max(e,t),a)}function b(e){return"n"===e?"s":"ne"===e?"sw":"e"===e?"w":"se"===e?"nw":"s"===e?"n":"sw"===e?"ne":"w"===e?"e":"nw"===e?"se":e}function y(e,t,a){return"%"===e.unit?e:{unit:"%",aspect:e.aspect,x:e.x/t*100,y:e.y/a*100,width:e.width?e.width/t*100:100,height:e.height?e.height/a*100:100}}function x(e,t,a){return"px"===e.unit?e:{unit:"px",aspect:e.aspect,x:e.x*t/100,y:e.y*a/100,width:e.width?e.width*t/100:t,height:e.height?e.height*a/100:a}}let E={x:0,y:0,unit:"px",aspect:0},w={xOrds:["e","w"],yOrds:["n","s"],xyOrds:["nw","ne","se","sw"],nudgeStep:1,nudgeStepMedium:10,nudgeStepLarge:100},C=e=>(0,n.Z)({root:{fontSize:"1rem",justifyContent:"flex-start !important",marginBottom:"12px !important","&.Mui-disabled":{"& .MuiButton-startIcon":{borderColor:`${e.palette.action.disabled} !important`}}},startIcon:{width:"32px",height:"32px",fontSize:"15px",borderRadius:"50%",alignItems:"center",textAlign:"center",lineHeight:"32px",justifyContent:"center",border:`1px solid ${e.palette.primary.main}`},label:{}});var k=(0,r.Z)(C)(c.Z),S=a(27274),Z=a(11770),P=a(33651),M=a(81719);let _="PhotoTag",O=(0,M.ZP)("div",{name:_,slot:"root",shouldForwardProp:e=>"tagging"!==e&&"px"!==e&&"py"!==e&&"hovering"!==e&&"forceShow"!==e})(({theme:e,tagging:t,px:a,py:n,hovering:i,forceShow:r})=>({position:"absolute",width:t?10:100,height:t?10:100,transform:"translate(-50%,-50%)","&:hover > div:first-of-type":{visibility:"visible"},...(t||r)&&{"& > div:first-of-type":{visibility:"visible"}},zIndex:i?10:"auto",...a&&n&&{left:`${a}%`,top:`${n}%`}})),R=(0,M.ZP)("div",{name:_,slot:"Item"})(({theme:e})=>({position:"absolute",backgroundColor:"rgba(255,255,255,.8)",borderRadius:e.shape.borderRadius,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"120px",textAlign:"center",display:"flex",alignItems:"center",padding:e.spacing(.5),transform:"translate(-50%,-50%)",left:"50%",top:"50%",visibility:"hidden"})),z=(0,M.ZP)(c.Z,{name:_,slot:"ButtonStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.grey["800"],minWidth:"11px",padding:e.spacing(.5,1),margin:e.spacing(-.5),fontSize:e.mixins.pxToRem(11)})),I=(0,M.ZP)("span",{name:_,slot:"LabelStyled"})(({theme:e})=>({margin:"0 4px"}));function W({content:e,px:t,py:a,tagging:n,onRemove:i,forceShow:r}){let[o,l]=u.useState(!1);return u.createElement(O,{px:t,py:a,tagging:n,hovering:o,forceShow:r},u.createElement(R,{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1)},u.createElement(I,null,null==e?void 0:e.label),n?u.createElement(z,{disableRipple:!0,disableFocusRipple:!0,onClick:t=>{return i(t,null==e?void 0:e.id)}},u.createElement(s.zb,{icon:"ico-close"})):null))}var N=a(49249);let T=(0,p.Z)(e=>(0,n.Z)({root:{},image:{maxWidth:"100%",maxHeight:"100vh",float:"left",opacity:0,[e.breakpoints.down("sm")]:{maxHeight:"350px"}},imageHeightAuto:{maxHeight:"initial",[e.breakpoints.down("sm")]:{maxHeight:"350px"}},visibleImage:{opacity:1},boxFake:{position:"absolute",top:0,right:0,left:0,objectFit:"cover",display:"flex",alignItems:"center",justifyContent:"center"},imageFake:{width:"100%",height:"auto"},actionBar:{position:"absolute",right:0,top:0,padding:e.spacing(1),display:"flex",justifyContent:"flex-end",zIndex:1,alignItems:"center"},tagFriend:{color:"#fff !important",width:32,height:32,fontSize:e.mixins.pxToRem(15)},dropDown:{color:"#fff",minWidth:"32px",height:"32px",fontSize:e.mixins.pxToRem(15)},taggedBox:{position:"absolute",left:0,top:0,width:"100px",height:"100px",border:"2px solid",borderColor:e.palette.background.paper,boxShadow:e.shadows[20],transform:"translate(-50%,-50%)"},suggestFriend:{backgroundColor:e.mixins.backgroundColor("paper"),marginTop:"10px",marginLeft:"-70px",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,"&  .MuiFilledInput-root":{background:"none"}},smallAvatar:{width:"24px",height:"24px",marginRight:e.spacing(1)},whoIsThis:{height:"100px",width:"100%"},popper:{zIndex:e.zIndex.snackbar,backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(1),boxShadow:e.shadows[20],borderRadius:e.shape.borderRadius,margin:e.spacing(1,0),width:"240px","& .MuiAutocomplete-paper":{boxShadow:"none"},"& .MuiAutocomplete-listbox":{padding:0},"& .MuiAutocomplete-option":{borderRadius:e.shape.borderRadius,padding:"6px 8px"},"& .MuiAutocomplete-root":{maxWidth:"224px"},"& .MuiFilledInput-underline:after":{display:"none"},"& .MuiAutocomplete-endAdornment":{display:"none"},"& .MuiFilledInput-underline:before":{display:"none"},"& .MuiFilledInput-root":{background:"none",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius},"& .MuiAutocomplete-noOptions":{padding:e.spacing(1.5,1)}},tagItem:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(1,0),textAlign:"left",cursor:"pointer"},userName:{flexGrow:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",fontSize:e.mixins.pxToRem(14)},inputBaseBox:{"& input":{width:"100%",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,padding:e.spacing(1),fontSize:e.mixins.pxToRem(15),"&:focus":{border:e.mixins.border("secondary"),outline:"none"}}},message:{color:"#fff",margin:e.spacing(0,1)},iconButton:{color:"white"},clear:{clear:"both"}}),{name:"EditPreviewPhotoTag"});function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let j={top:0,left:0,width:"100%",height:"100%"},$=e=>{return{x:null==e?void 0:e.left,y:null==e?void 0:e.top,width:null==e?void 0:e.width,height:null==e?void 0:e.height}};var L=(0,r.Z)(i)(function({classes:e,dialogTitle:t="Edit Photos",item:a,hideTextField:n=!1,tagging:i}){var r,p;let{useDialog:g,i18n:C}=(0,o.OgA)(),{dialogProps:M,closeDialog:_,setDialogValue:O}=g(),[R]=u.useState(a),[z,I]=u.useState("loading"),[L,B]=u.useState(0),[D,F]=u.useState({x:0,y:0}),[V,H]=u.useState(i?"tag":void 0),U=u.useRef(),q=u.useRef(),Y=u.useRef(),X=u.useRef(),G=(0,S.Q4)(null==R?void 0:R.image),[Q,K]=u.useState(R.base64||R.source||G),J=u.useRef(),ee=u.useRef((null==R?void 0:R.tagged_friends)||[]),[et,ea]=u.useState((null==R?void 0:R.tagged_friends)||[]),en=T(),{user:ei}=(0,o.kPO)(),er=e=>{ea(t=>[...t,e])},eo=(e,t)=>{e.stopPropagation(),ea(e=>{return e.filter(e=>{var a;return(null===(a=e.content)||void 0===a?void 0:a.id)!==t})})},el=(e,t)=>{e.stopPropagation(),ea(e=>e.filter(e=>e.id!==t))},{onClickImageBox:es,setTagging:ec,tagging:ed,offsetTag:em,openTagBox:eu,chooseFriendToTag:ep}=function({imageRef:e,onAddPhotoTag:t,onRemovePhotoTag:a,ready:n}){let[i,r]=u.useState({px:0,py:0}),[o,l]=u.useState(!1),[s,c]=u.useState(!1),[d,m]=u.useState({width:0,height:0}),p=e=>{let t=e.getBoundingClientRect();m({width:t.width,height:t.height})},g=e=>{if(!s)return;let t=e.currentTarget.getBoundingClientRect(),a=Math.max(Math.min(e.clientX-t.left,d.width-50),50)/d.width*100,n=Math.max(Math.min(e.clientY-t.top,d.height-50),50)/d.height*100;r({px:a,py:n}),s&&l(!0)},h=e=>{let{px:a,py:n}=i;t({content:e,px:a,py:n}),l(!1)};return u.useEffect(()=>{n&&(null==e?void 0:e.current)&&p(null==e?void 0:e.current)},[n,null==e?void 0:e.current]),{chooseFriendToTag:h,onClickImageBox:g,tagging:s,setTagging:c,offsetTag:i,openTagBox:o}}({imageRef:Y,onAddPhotoTag:er,ready:"success"===z}),eg=u.useMemo(()=>{return null!==(p=null==R?void 0:R.text)&&void 0!==p?p:""},[null==R?void 0:R.text]),[eh,ef]=u.useState(eg),[ev,eb]=u.useState(),ey=u.useCallback(()=>{I("success")},[]),ex=u.useCallback(()=>{I("error")},[]),eE=u.useCallback((e,t)=>{},[]),{getCropStyle:ew,onFulfillSelection:eC,cropSelectionStyle:ek,onComponentMouseTouchDown:eS,onCropMouseTouchDown:eZ}=function({imageContainerRef:e,imageWrapperRef:t,cropSelectionRef:a,imageRef:n,crop:i,minWidth:r=0,maxWidth:o=0,minHeight:l=0,maxHeight:s=0,disabled:c,locked:d,keepSelection:m,onComplete:p,onChange:g,onDragStart:h,onDragEnd:C}){let k=window.document,S=u.useRef(),[Z,P]=u.useState({}),M=u.useRef(!1),_=u.useRef(!1),O=u.useRef(Object.assign({},E,i)),R=u.useCallback(()=>{if(!t.current)return{width:0,height:0};let{clientWidth:e,clientHeight:a}=t.current;return{width:e,height:a}},[t]),z=u.useCallback(e=>{let t=O.current,{width:a,height:n}=R();return"px"===e?x(t,a,n):y(t,a,n)},[R]),I=u.useCallback(()=>{let{clientTop:e=0,clientLeft:t=0}=window.document.documentElement||{};return{clientTop:e,clientLeft:t}},[]),W=u.useCallback(()=>{let{pageYOffset:e=0,pageXOffset:t=0}=window;return{pageYOffset:e,pageXOffset:t}},[]),N=u.useCallback(e=>{let t=e.getBoundingClientRect(),a=I(),n=W(),i=t.top+n.pageYOffset-a.clientTop,r=t.left+n.pageXOffset-a.clientLeft;return{top:i,left:r}},[I,W]),T=u.useCallback(()=>{let e=z("%");return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}},[z]),A=u.useCallback(()=>{let e;let{width:t,height:a}=R(),n=O.current,i=S.current.cropStartWidth+S.current.xDiff;return S.current.xCrossOver&&(i=Math.abs(i)),i=v(i,r,o||t),e=n.aspect?i/n.aspect:S.current.cropStartHeight+S.current.yDiff,S.current.yCrossOver&&(e=Math.min(Math.abs(e),S.current.cropStartY)),e=v(e,l,s||a),n.aspect&&(i=v(e*n.aspect,0,t)),{width:i,height:e}},[R,s,o,l,r]),j=u.useCallback(()=>{let e=z("px"),{width:t,height:a}=R();return e.x=v(S.current.cropStartX+S.current.xDiff,0,t-e.width),e.y=v(S.current.cropStartY+S.current.yDiff,0,a-e.height),e},[R,z]),$=u.useCallback(()=>{let e=z("px"),{width:t,height:n}=R();if(e.width=t,e.height=n,e.x=0,e.y=0,g&&g(x(e,t,n),y(e,t,n)),e.width&&e.height){let{left:i,top:r,width:o,height:l}=T();a.current.style.left=i,a.current.style.top=r,a.current.style.width=o,a.current.style.height=l}},[a,T,R,z,g]),L=u.useCallback(()=>{!r&&(!S.current.xCrossOver&&0<=-Math.abs(S.current.cropStartWidth)-S.current.xDiff||S.current.xCrossOver&&0>=-Math.abs(S.current.cropStartWidth)-S.current.xDiff)&&(S.current.xCrossOver=!S.current.xCrossOver),!l&&(!S.current.yCrossOver&&0<=-Math.abs(S.current.cropStartHeight)-S.current.yDiff||S.current.yCrossOver&&0>=-Math.abs(S.current.cropStartHeight)-S.current.yDiff)&&(S.current.yCrossOver=!S.current.yCrossOver);let e=S.current.xCrossOver!==S.current.startXCrossOver,t=S.current.yCrossOver!==S.current.startYCrossOver;S.current.inversedXOrd=!!e&&b(S.current.ord),S.current.inversedYOrd=!!t&&b(S.current.ord)},[l,r]),B=u.useCallback(()=>{let e=z("px"),{ord:t}=S.current;S.current.xInversed&&(S.current.xDiff-=2*S.current.cropStartWidth,S.current.xDiffPc-=2*S.current.cropStartWidth),S.current.yInversed&&(S.current.yDiff-=2*S.current.cropStartHeight,S.current.yDiffPc-=2*S.current.cropStartHeight);let a=A(),n=S.current.cropStartX,i=S.current.cropStartY;S.current.xCrossOver&&(n=e.x+(e.width-a.width)),S.current.yCrossOver&&(i=!1===S.current.lastYCrossover?e.y-a.height:e.y+(e.height-a.height));let r=O.current,{width:o,height:l}=R(),s=function(e,t,a,n){let i=x(t,a,n),r=x(e,a,n),o={...i};if(!i.aspect)return 0>i.x?(o.x=0,o.width+=i.x):i.x+i.width>a&&(o.width=a-i.x),i.y+i.height>n&&(o.height=n-i.y),o;let l=!1;0>i.x?(o.x=0,o.width+=i.x,o.height=o.width/i.aspect,l=!0):i.x+i.width>a&&(o.width=a-i.x,o.height=o.width/i.aspect,l=!0),l&&r.y>o.y&&(o.y=i.y+(i.height-o.height));let s=!1;return o.y+o.height>n&&(o.height=n-i.y,o.width=o.height*i.aspect,s=!0),s&&r.x>o.x&&(o.x=i.x+(i.width-o.width)),o}(r,{unit:e.unit,x:n,y:i,width:a.width,height:a.height,aspect:e.aspect},o,l);return e.aspect||-1<w.xyOrds.indexOf(t)?(e.x=s.x,e.y=s.y,e.width=s.width,e.height=s.height):-1<w.xOrds.indexOf(t)?(e.x=s.x,e.width=s.width):-1<w.yOrds.indexOf(t)&&(e.y=s.y,e.height=s.height),S.current.lastYCrossover=S.current.yCrossOver,L(),e},[L,R,A,z]),D=(0,u.useCallback)(e=>{let t;let n=O.current;if(c||!M.current)return;e.preventDefault(),!_.current&&(_.current=!0,h&&h(e));let i=f(e);if(S.current.isResize&&n.aspect&&S.current.cropOffset&&(i.y=H(i.x)),S.current.xDiff=i.x-S.current.clientStartX,S.current.yDiff=i.y-S.current.clientStartY,(t=S.current.isResize?B():j())!==n){let{width:r,height:o}=R();g&&g(x(t,r,o),y(t,r,o))}if(t.width&&t.height){let{left:l,top:s,width:d,height:m}=T();a.current.style.left=l,a.current.style.top=s,a.current.style.width=d,a.current.style.height=m}},[]),F=u.useCallback(e=>{if(V(),c)return;let t=O.current;if(M.current){M.current=!1,_.current=!1;let{width:a,height:n}=R();C&&C(e),p&&p(x(t,a,n),y(t,a,n)),P(e=>({...e,cropIsActive:!1,newCropIsBeingDrawn:!1}))}},[c,R,p,C,V]);var V=u.useCallback(()=>{k.removeEventListener("mousemove",D),k.removeEventListener("touchmove",D),k.removeEventListener("mouseup",F),k.removeEventListener("touchend",F),k.removeEventListener("touchcancel",F)},[k,F,D]);let H=u.useCallback(e=>{let t,a;let{ord:n,cropOffset:i,cropStartWidth:r,cropStartHeight:o}=S.current;return"nw"===n||"se"===n?(t=o/r,a=i.top-i.left*t):(t=-o/r,a=i.top+(o-i.left*t)),t*e+a},[]),U=u.useCallback(()=>{k.addEventListener("mousemove",D),k.addEventListener("touchmove",D,{passing:!1}),k.addEventListener("mouseup",F),k.addEventListener("touchend",F,{passing:!1}),k.addEventListener("touchcancel",F,{passing:!1})},[k,F,D]),q=t=>{let n;let i=O.current,{width:r,height:o}=R(),l=x(i,r,o);if(c)return;t.preventDefault(),U();let s=f(t);e.current.setActive?e.current.setActive({preventScroll:!0}):e.current.focus({preventScroll:!0});let{ord:d}=t.target.dataset,m="nw"===d||"w"===d||"sw"===d,u="nw"===d||"n"===d||"ne"===d;l.aspect&&(n=N(a.current)),S.current={clientStartX:s.x,clientStartY:s.y,cropStartWidth:l.width,cropStartHeight:l.height,cropStartX:m?l.x+l.width:l.x,cropStartY:u?l.y+l.height:l.y,xInversed:m,yInversed:u,xCrossOver:m,yCrossOver:u,startXCrossOver:m,startYCrossOver:u,isResize:t.target.dataset.ord,ord:d,cropOffset:n,xDiff:0,yDiff:0,xDiffPc:0,yDiffPc:0},M.current=!0,P(e=>({...e,cropIsActive:!0}))},Y=a=>{var n;let i=O.current;if(!t.current)return;let r=t.current.firstChild;if(a.target!==r||!r.contains(a.target)||c||d||m&&(n=i)&&!isNaN(n.width)&&!isNaN(n.height))return;a.preventDefault(),U();let o=f(a);e.current.setActive?e.current.setActive({preventScroll:!0}):e.current.focus({preventScroll:!0});let l=N(t.current),s=o.x-l.left,u=o.y-l.top,p={unit:"px",aspect:i?i.aspect:void 0,x:s,y:u,width:0,height:0};S.current={clientStartX:o.x,clientStartY:o.y,cropStartWidth:p.width,cropStartHeight:p.height,cropStartX:p.x,cropStartY:p.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw",xDiff:0,yDiff:0,xDiffPc:0,yDiffPc:0},M.current=!0;let{width:h,height:v}=R();g&&g(x(p,h,v),y(p,h,v)),P(e=>({...e,cropIsActive:!0,newCropIsBeingDrawn:!0}))},X=u.useCallback(()=>{let e=z("%"),t=0!==e.x||0!==e.y||100!==e.height||100!==e.width;return[t,e]},[z]);return{getCropStyle:T,cropSelectionStyle:T(),onFulfillSelection:$,getCropValue:X,onCropMouseTouchDown:q,onComponentMouseTouchDown:Y}}({imageContainerRef:U,imageWrapperRef:q,imageRef:Y,cropSelectionRef:X,onChange:eE}),eP=u.useCallback(()=>{"crop"!==V&&H("crop")},[V]),eM=u.useCallback(()=>{F(e=>({...e,x:e.x?0:1})),"flip"!==V&&H("flip")},[V]),e_=u.useCallback(()=>{F(e=>({...e,y:e.y?0:1})),"flip"!==V&&H("flip")},[V]),eO=u.useCallback(()=>{"rotate"!==V&&H("rotate"),B(e=>(e+90)%360)},[V]),eR=u.useCallback(()=>{"tag"!==V&&H("tag")},[V]);u.useEffect(()=>{ec("tag"===V)},[V,ec]);let ez=u.useCallback(()=>{"tag"===V&&ea(ee.current),K(Q||R.source||G),H(void 0),F({x:0,y:0}),B(0)},[R.source,G,Q,ee.current,V]),eI=async()=>{let e="crop"===V?ew():j,t=$(e),a=await (0,S.m4)(ev||Q,t,"base64",L,!!(null==D?void 0:D.x),!!(null==D?void 0:D.y),"%");return F({x:0,y:0}),B(0),a&&eb(a),!0},eW=u.useCallback(async()=>{if("tag"===V)ee.current=et,H(null);else{let e=await eI();e&&H(null)}},[eh,ek,Q,L,D]),eN=u.useCallback(()=>{O({text:eh,base64:ev,tagged_friends:et.map(e=>{var t,a;return{...e,user_id:(null===(t=e.content)||void 0===t?void 0:t.id)||(null===(a=e.user)||void 0===a?void 0:a.id)}})})},[eh,ev,et]),eT=(0,m.default)(e.mediaWrapper),eA=(0,m.default)(e.largeImage,V&&e.largeImageCropping),ej=u.useCallback(e=>{return"success"!==z||V&&e!==V},[z,V]),e$=L?`rotate(${L}deg)`:"",eL=D.x||D.y?`scale(${D.x?-1:1}, ${D.y?-1:1})`:"",eB={transform:`${e$} ${eL}`},eD=e=>{let t=e.target.value;ef(t)};return u.createElement(l.Vq,A({},M,{disableBackdropClick:!0,scroll:"body",maxWidth:"lg"}),u.createElement(l.$N,{className:e.dialogTitle},t),u.createElement(l.cZ,{className:e.dialogContent},u.createElement("div",{className:e.leftSide},n?null:u.createElement("div",{className:e.composerContainer},u.createElement(d.Z,{variant:"outlined",disabled:"success"!==z,placeholder:C.formatMessage({id:"caption"}),fullWidth:!0,multiline:!0,rows:4,InputLabelProps:{shrink:!0},value:eh,className:e.composer,onChange:eD})),u.createElement("div",{className:e.leftSideActions},(null===(r=ei.extra)||void 0===r?void 0:r.can_tag_friend)&&u.createElement(k,{disabled:ej("tag"),startIcon:u.createElement(s.zb,{icon:"ico-price-tag"}),children:C.formatMessage({id:"tags"}),onClick:eR}),u.createElement(k,{disabled:ej("crop"),startIcon:u.createElement(s.zb,{icon:"ico-arrow-collapse"}),children:C.formatMessage({id:"crop"}),onClick:eP}),u.createElement(k,{disabled:ej("rotate"),startIcon:u.createElement(s.zb,{icon:"ico-rotate-right-alt"}),children:C.formatMessage({id:"rotate"}),onClick:eO}),u.createElement(k,{disabled:ej("flip"),startIcon:u.createElement(s.zb,{icon:"ico-flip-v"}),children:C.formatMessage({id:"flip_vertical"}),onClick:eM}),u.createElement(k,{disabled:ej("flip"),startIcon:u.createElement(s.zb,{icon:"ico-flip-h"}),children:C.formatMessage({id:"flip_horizontal"}),onClick:e_})),u.createElement("div",{className:e.leftSideBottom},V?u.createElement(c.Z,{disabled:"success"!==z,variant:"contained",color:"primary",onClick:eW},C.formatMessage({id:"save_changes"})):null,V?u.createElement(c.Z,{disabled:"success"!==z,variant:"outlined",color:"primary",onClick:ez},C.formatMessage({id:"discard"})):null,V?null:u.createElement(c.Z,{disabled:!z,variant:"contained",color:"primary",onClick:eN},C.formatMessage({id:"save"})),V?null:u.createElement(c.Z,{disabled:!z,variant:"outlined",color:"primary",onClick:_},C.formatMessage({id:"cancel"})))),u.createElement("div",{className:e.mainContent},u.createElement("div",{className:e.backdrop},u.createElement("div",{className:e.blurContainer},u.createElement("img",{draggable:!1,src:R.source||G,className:e.blurImg,alt:R.uid}))),u.createElement("div",{className:e.mask}),u.createElement("div",{className:e.mediaContainer,onMouseDown:eS,onTouchStart:eS,ref:U},u.createElement("div",{className:eT,ref:q,onClick:es},"error"!==z?u.createElement(u.Fragment,null,u.createElement("img",{draggable:!1,src:ev||Q,ref:Y,className:eA,onLoad:ey,style:eB,onError:ex,alt:R.uid}),u.createElement(Z.Z,{open:ed&&eu,px:em.px,py:em.py,classes:en,ref:J}),ed&&eu?u.createElement(P.Z,{onItemClick:ep,classes:en,anchorRef:J,identity:(null==R?void 0:R.id)?`photo.entities.photo.${R.id}`:void 0,open:!0,excludeIds:et.map(e=>{var t,a;return(null==e?void 0:null===(t=e.content)||void 0===t?void 0:t.id)||(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.id)}),isFullFriend:!0}):null,et&&(null==et?void 0:et.length)?et.map(e=>{return(null==e?void 0:e.resource_name)==="photo_tag"?u.createElement(N.Z,{tagging:ed,identity:`${e.module_name}.entities.${e.resource_name}.${e.id}`,onRemove:el,classes:en,isTypePreview:!0,forceShow:!0}):u.createElement(W,A({},e,{tagging:ed,onRemove:eo,forceShow:!0}))}):null):u.createElement("div",{className:e.imageError},C.formatMessage({id:"could_not_load_photo"})),"crop"===V&&"success"===z?u.createElement(h,{onMounted:eC,style:ek,ref:X,onMouseDown:eZ,onTouchStart:eZ}):null)))))})},23068:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});var n=a(73327);let i=e=>(0,n.Z)({dialogTitle:{},dialogContent:{backgroundColor:e.palette.background.default,minWidth:550,minHeight:500},dialogActions:{},itemListContainer:{display:"flex",flexWrap:"wrap",padding:e.spacing(2),justifyContent:"space-between"},isDragging:{},itemRoot:{width:"calc(50% - 8px)",backgroundColor:e.mixins.backgroundColor("paper"),marginBottom:e.spacing(2),borderRadius:e.spacing(1),boxShadow:e.shadows[2],"&:hover $autoHideButton":{visibility:"visible"},"&$isDragging":{border:"dashed 2px",borderColor:e.palette.primary.main}},itemMediaBackdrop:{backgroundColor:e.mixins.backgroundColor("paper"),textAlign:"center",overflow:"hidden",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",height:"33vh",borderTopLeftRadius:e.spacing(1),borderTopRightRadius:e.spacing(1)},itemBlur:{width:"10%",height:"10%",transform:"scale(14)",filter:"blur(3px)",WebkitFilter:"blur(3px)"},itemBlurImg:{objectFit:"cover",width:"100%",height:"100%",border:0},itemMediaContainer:{position:"relative",textAlign:"center"},itemMedia:{position:"absolute",objectFit:"contain",left:0,top:0,width:"100%",height:"100%"},itemComposerContainer:{padding:e.spacing(1)},itemComposer:{},autoHideButton:{visibility:"hidden"},closeButton:{position:"absolute",top:e.spacing(2),right:e.spacing(2)},tagButton:{position:"absolute",bottom:e.spacing(2),left:e.spacing(2)},editButton:{position:"absolute",left:e.spacing(2),top:e.spacing(2)}});var r=a(61366),o=a(85597),l=a(92114),s=a(21241),c=a(21822),d=a(30120),m=a(12902),u=a(27361),p=a.n(u),g=a(67294),h=a(16473),f=a(57043),v=a.n(f),b=a(44908),y=a.n(b),x=a(73955),E=a.n(x);function w({setItems:e,variant:t}){let{i18n:a}=(0,o.OgA)(),n=g.useRef(),i=g.useCallback(()=>{n.current.click()},[n]),r=g.useCallback(()=>{let t=n.current.files;if(!t.length)return;let a=[];for(let i=0;i<t.length;++i)a.push({uid:E()("file"),source:URL.createObjectURL(t.item(i)),file:t.item(i)});e(e=>{return y()(v()(e,a),"uid").filter(Boolean)})},[e]),l=(0,o.VW9)("video","video"),s="image/*";return l&&(s="image/*, video/*"),g.createElement(g.Fragment,null,"listing"===t?g.createElement(c.Z,{color:"primary",onClick:i,startIcon:g.createElement(h.zb,{icon:"ico-photos-plus-o"}),variant:"outlined"},a.formatMessage({id:"add_photos"})):g.createElement(c.Z,{color:"primary",onClick:i,variant:"outlined",startIcon:g.createElement(h.zb,{icon:"ico-plus"})},a.formatMessage({id:"add_photos"})),g.createElement("input",{onChange:r,multiple:!0,ref:n,className:"srOnly",type:"file",accept:s}))}var C=a(27274),k=a(22949),S=a(86010),Z=a(60994),P=a(86487);let M={PHOTO:"photo"};function _({id:e,index:t,item:a,movePhoto:n,editItem:i,removeItem:r,tagItem:l,editTextPhoto:s,classes:c}){var m,u;let{i18n:p}=(0,o.OgA)(),f=g.useRef(null),v=g.useMemo(()=>{return null!==(u=null==a?void 0:a.text)&&void 0!==u?u:""},[null==a?void 0:a.text]),[b,y]=g.useState(v),[,x]=(0,Z.L)({accept:M.PHOTO,hover(e,a){var i;if(!f.current)return;let r=e.index;if(r===t)return;let o=null===(i=f.current)||void 0===i?void 0:i.getBoundingClientRect(),l=(o.bottom-o.top)/2,s=a.getClientOffset(),c=s.y-o.top;r<t&&c<l||r>t&&c>l||(n(r,t),e.index=t)}}),E=e=>{let t=e.target.value;y(t)};g.useEffect(()=>{b!==v&&s(a,b)},[b]),g.useEffect(()=>{y(null==a?void 0:a.text)},[null==a?void 0:a.text]);let[w,_]=(0,P.c)({type:M.PHOTO,item:{type:M.PHOTO,id:e,index:t},collect:e=>({isDragging:e.isDragging()})}),O=w.isDragging?.5:.9999,R=w.isDragging?"isDragging":"";if(_(x(f)),a)return g.createElement("div",{"data-uid":a.uid,style:{cursor:"move",opacity:O},ref:f,className:(0,S.default)(c.itemRoot,R?c.isDragging:"")},g.createElement("div",{className:c.itemMediaContainer},g.createElement("div",{className:c.itemMediaBackdrop},(0,C.yh)(null===(m=a.file)||void 0===m?void 0:m.type)?g.createElement(g.Fragment,null,g.createElement("div",{className:c.itemBlur},g.createElement("video",{src:a.source,draggable:!1,controls:!1,autoPlay:!1,muted:!0,className:c.itemBlurImg})),g.createElement("video",{src:a.source,draggable:!1,controls:!1,autoPlay:!1,muted:!0,className:c.itemMedia})):g.createElement(g.Fragment,null,g.createElement("div",{className:c.itemBlur},g.createElement("img",{draggable:!1,src:a.base64||a.source||(0,C.Q4)(null==a?void 0:a.image),className:c.itemBlurImg,alt:a.uid})),g.createElement("img",{draggable:!1,src:a.base64||a.source||(0,C.Q4)(null==a?void 0:a.image),className:c.itemMedia,alt:a.uid})),g.createElement(d.Z,{className:(0,S.default)(c.editButton,c.autoHideButton)},g.createElement(h.Qh,{size:"small",color:"primary",icon:"ico-pencil",onClick:()=>i(a),title:p.formatMessage({id:"edit"})})),g.createElement(d.Z,{className:(0,S.default)(c.tagButton)},g.createElement(h.Qh,{onClick:()=>l(a),size:"small",color:"primary",icon:"ico-price-tag",title:p.formatMessage({id:"tag_friends"})})),g.createElement(d.Z,{className:(0,S.default)(c.closeButton,c.autoHideButton)},g.createElement(h.Qh,{size:"small",onClick:()=>r(a),color:"primary",icon:"ico-close",title:p.formatMessage({id:"remove"})})))),g.createElement("div",{className:c.itemComposerContainer},g.createElement(k.Z,{value:b,variant:"outlined",placeholder:p.formatMessage({id:"caption"}),fullWidth:!0,InputLabelProps:{shrink:!0},className:c.itemComposer,onChange:E})))}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var R=(0,r.Z)(i)(function({composerRef:e,classes:t,dialogTitle:a="edit_media"}){let{useDialog:n,i18n:i,dialogBackend:r}=(0,o.OgA)(),{dialogProps:u,closeDialog:h}=n(),[f,v]=g.useState(p()(e.current.state,"attachments.photo.value"));g.useEffect(()=>{e.current.setAttachments("photo","photo",{as:"StatusComposerControlAttachedPhotos",value:f})},[e,f]);let b=g.useCallback((e,t)=>{v((0,m.ZP)(f,a=>{let n=a.find(t=>{return(null==e?void 0:e.uid)&&(null==t?void 0:t.uid)===e.uid||(null==e?void 0:e.id)&&(null==t?void 0:t.id)===(null==e?void 0:e.id)});n&&Object.assign(n,t)}))},[f]),y=g.useCallback(e=>{r.present({component:"photo.dialog.EditPreviewPhotoDialog",props:{item:e,tagging:!1}}).then(t=>{t&&b(e,t)})},[r,b]),x=g.useCallback(e=>{v(t=>t.filter(t=>t.uid!==e.uid||t.id!==e.id))},[]),E=g.useCallback(e=>{r.present({component:"photo.dialog.EditPreviewPhotoDialog",props:{item:e,tagging:!0}}).then(t=>{t&&b(e,t)})},[r]),C=f.length,k=g.useCallback((e,t)=>{let a=f[e];v((0,m.ZP)(f,n=>{n.splice(e,1),n.splice(t,0,a)}))},[f]),S=g.useCallback((e,t)=>{v((0,m.ZP)(f,a=>{let n=a.find(t=>{return(null==e?void 0:e.uid)&&(null==t?void 0:t.uid)===e.uid||(null==e?void 0:e.id)&&(null==t?void 0:t.id)===(null==e?void 0:e.id)});n&&(n.text=t)}))},[f]);return g.createElement(l.Vq,O({},u,{fullWidth:!0}),g.createElement(l.$N,{className:t.dialogTitle},i.formatMessage({id:a})),g.createElement(s.l$,{className:t.dialogContent},g.createElement("div",{className:t.itemListContainer},C?f.map((e,a)=>g.createElement(_,{key:e.uid,index:a,id:e.uid,movePhoto:k,item:e,editItem:y,removeItem:x,tagItem:E,classes:t,editTextPhoto:S})):g.createElement(d.Z,{p:3,sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}},g.createElement(w,{variant:"listing",setItems:v})))),g.createElement(l.kX,{className:t.dialogActions},g.createElement(c.Z,{variant:"contained",color:"primary",onClick:h},i.formatMessage({id:"done"})),g.createElement(w,{setItems:v})))})},72425:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var n=a(85597),i=a(92114),r=a(16473),o=a(81719),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let c=(0,o.ZP)("div")(({theme:e})=>({position:"fixed",top:e.spacing(4),right:e.spacing(4),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"2"})),d=(0,o.ZP)(i.cZ)(({theme:e})=>({padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",zIndex:"1",flexFlow:"column"})),m=(0,o.ZP)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative"})),u=(0,o.ZP)("img")(({theme:e})=>({maxHeight:" calc(100vh - 88px)",margin:"auto",maxWidth:"1280px",borderRadius:"8px"}));function p(e){let{useDialog:t}=(0,n.OgA)(),{src:a}=e,{dialogProps:o,closeDialog:p}=t();return l.createElement(i.Vq,s({},o,{"data-testid":"popupViewPhoto"}),l.createElement(c,{onClick:p},l.createElement(r.zb,{icon:"ico-close"})),l.createElement(d,{dividers:!1},l.createElement(m,null,l.createElement(u,{src:a,alt:"",style:{width:"100%"}}))))}},2597:function(e,t,a){a.d(t,{Z:function(){return m}});var n=a(85597),i=a(67294),r=a(41609),o=a.n(r),l=a(73955),s=a.n(l),c=a(27274);let d=(e,t)=>{let a=!0;if(o()(e))return!0;if(o()(t))return!1;let n=t.split(",");return n.some(t=>e.match(t))&&(a=!1),a};function m({initialValues:e,upload_url:t="",maxSizeLimit:a,isAcceptVideo:r=!0,messageAcceptFail:l,accept:m,inputRef:u}){let{dialogBackend:p,i18n:g}=(0,n.OgA)(),h=i.useRef(!0),[f,v]=i.useState([]),[b,y]=i.useState(e||[]),x=(null==a?void 0:a.photo)||(null==a?void 0:a.other)||0,E=(null==a?void 0:a.video)||(null==a?void 0:a.other)||0,w=e=>{let a=[],n=[];for(let i=0;i<e.length;++i){let o=e[i],h=o.size,f=(0,c.yh)(null==o?void 0:o.type)?E:x,v={id:0,uid:s()(),source:URL.createObjectURL(o),file_name:o.name,file_size:o.size,file_type:o.type,file:o,upload_url:t,type:o.type.match("image/*")?"photo":"video",status:"create"};if("video"===v.type&&!r||d(null==o?void 0:o.type,m)){p.alert({message:l||g.formatMessage({id:"photo_accept_type_fail"})}),(null==u?void 0:u.current)&&(u.current.value=null);break}h>f&&0!==f?(v.max_size=f,n.push(v)):a.push(v)}if(a.length&&y(e=>[...e||[],...a]),n.length>0){var b;p.alert({message:1===n.length?g.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,c.TX)(n[0].file_name,30),fileSize:(0,c.jA)(n[0].file_size),maxSize:(0,c.jA)(null===(b=n[0])||void 0===b?void 0:b.max_size)}):g.formatMessage({id:"warning_upload_limit_multi_file"},{numberFile:n.length,photoMaxSize:(0,c.jA)(x),videoMaxSize:(0,c.jA)(E)})})}};return(0,i.useEffect)(()=>{if(h.current=!0,!o()(f))return w(f),()=>{h.current=!1}},[f]),[b,y,v]}},70949:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var n=a(85597),i=a(30998),r=a.n(i),o=a(27361),l=a.n(o),s=a(92114),c=a(16473),d=a(30120),m=a(44373),u=a(81719),p=a(67294);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let h="ViewMediaModal",f=(0,u.ZP)(s.cZ,{name:h,slot:"root"})(({theme:e})=>({height:"100%",padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("sm")]:{flexFlow:"column",flexDirection:"column","& > div":{overflow:"inherit"}}})),v=(0,u.ZP)("div",{name:h,slot:"dialogStatistic",shouldForwardProp:e=>"isExpand"!==e})(({theme:e,isExpand:t})=>({display:t?"none":"block",height:"100%",width:"480px",flexGrow:1,[e.breakpoints.down("md")]:{width:"35%"},[e.breakpoints.down("sm")]:{width:"45%"},[e.breakpoints.down("xs")]:{width:"100%",height:"420px"}})),b=(0,u.ZP)("div",{name:h,slot:"dialogVideo"})(({theme:e})=>({position:"relative",backgroundColor:"#000",width:"100%",overflow:"hidden","& iframe":{width:"100%",height:"100%"},[e.breakpoints.down("md")]:{width:"65%"},[e.breakpoints.down("sm")]:{width:"100%",height:"auto",borderRadius:0,overflow:"initial"}})),y=(0,u.ZP)("div",{name:h,slot:"dialogImage"})(({theme:e})=>({height:"100%",display:"flex",alignItems:"center",backgroundColor:"#000",width:"100%",justifyContent:"center",position:"relative",[e.breakpoints.down("md")]:{width:"65%"},[e.breakpoints.down("sm")]:{width:"55%"},[e.breakpoints.down("xs")]:{width:"100%",height:"auto",minHeight:"250px",maxHeight:"350px"}})),x=(0,u.ZP)("div",{name:h,slot:"nextPhoto",shouldForwardProp:e=>"displayPosition"!==e})(({theme:e,displayPosition:t})=>({left:"left"===t?e.spacing(2):"unset",right:"right"===t?e.spacing(2):"unset",display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.4)",justifyContent:"center",position:"absolute",zIndex:1,padding:"10px",borderRadius:"50%",width:"30px",height:"30px",cursor:"pointer",color:"#FFF",top:"50%",transform:"translateY(-50%)",[e.breakpoints.down("md")]:{width:"65%"},[e.breakpoints.down("sm")]:{width:"55%"},[e.breakpoints.down("xs")]:{width:"100%",height:"auto",minHeight:"250px",maxHeight:"350px"}})),E=(0,u.ZP)("div",{name:h,slot:"HeaderAlbum"})(({theme:e})=>({display:"flex",flexDirection:"column",padding:e.spacing(0,2)})),w=(0,u.ZP)("div",{name:h,slot:"AlbumNameWrapper"})(({theme:e})=>({"& .ico.ico-photos-o":{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(1)},display:"flex",alignItems:"center"})),C=(0,u.ZP)("div",{name:h,slot:"AlbumName"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15)})),k=(0,u.ZP)(d.Z,{name:h,slot:"WrapperStatistic"})(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%"})),S=(e,{photo_set:t,photo_album:a,identity:n,photo_id:i,media_type:o})=>{let s=l()(e,n);if(!s)return{};let c=a?l()(e,`photo.entities.photo_album.${a}.photos`):l()(e,`photo.entities.photo_set.${t}.photos`),d=(null==s?void 0:s.user)?l()(e,s.user):void 0,m=null==c?void 0:c.length,u=1<m?r()(c,e=>e===n):-1,p=s.user_tags?s.user_tags.map(t=>l()(e,t)).filter(Boolean):[],g={item:s,photos:c,user:d,photo_id:i,user_tags:p,mediaType:o,nextUrl:void 0,prevUrl:void 0};if(-1<u){let h="/photo";if(t&&(h=`/media/${t}`),a&&(h=`/media/album/${a}`),u<m-1){let f=c[u+1],v=f.split(".")[2];g.nextUrl=`${h}/${v}/${f.replace(`${v}.entities.${v}.`,"")}`}if(0<u){let b=c[u-1],y=b.split(".")[2];g.prevUrl=`${h}/${y}/${b.replace(`${y}.entities.${y}.`,"")}`}}return g};var Z=(0,n.$jX)(S)(function({item:e,identity:t,nextUrl:a,prevUrl:i,mediaType:r,loading:o}){let{jsxBackend:l,navigate:u,ItemDetailInteractionInModal:h,useDialog:S,dispatch:Z,i18n:P,useIsMobile:M,useGetItem:_,useGetItems:O}=(0,n.OgA)(),R=M(),[z,I]=p.useState(!1),W=_(null==e?void 0:e.album),N=O(null==e?void 0:e.categories),T=l.get("photo.itemView.modalCard"),A=l.get("photo.block.photoViewMobile"),j=l.get("video.itemView.modalCard"),{dialogProps:$}=S(),L=p.useCallback(()=>{u({pathname:i},{replace:!0,state:{asModal:!0}})},[u,i]),B=p.useCallback(()=>{u({pathname:a},{replace:!0,state:{asModal:!0}})},[u,a]),D=e=>{Z({type:"photo/onAddPhotoTag",payload:{identity:t,data:e}})},F=e=>{Z({type:"photo/onRemovePhotoTag",payload:{identity:t,id:e}})},V=e=>{I(e)},H=e=>{39===e.keyCode&&a?B():37===e.keyCode&&i&&L()};return e?R?p.createElement(s.Vq,g({},$,{fullScreen:!0,scroll:"body","data-testid":"popupViewPhoto"}),p.createElement(s.$N,{enableBack:R,disableClose:R},P.formatMessage({id:"photo"})),p.createElement(f,null,p.createElement(A,{item:e,identity:t,onNextClick:B,onPrevClick:L,nextUrl:a,prevUrl:i}))):p.createElement(s.Vq,g({scroll:"body"},$,{fullScreen:!0,"data-testid":"popupDetailPhoto",onBackdropClick:void 0,onKeyDown:H}),p.createElement(f,{dividers:!1},"photo"===r?p.createElement(y,null,p.createElement(p.Fragment,null,a?p.createElement(x,{onClick:B,displayPosition:"right"},p.createElement(c.zb,{icon:"ico-angle-right"})):null,i?p.createElement(x,{onClick:L,displayPosition:"left"},p.createElement(c.zb,{icon:"ico-angle-left"})):null,p.createElement(T,{item:e,identity:t,taggedFriends:[],onAddPhotoTag:D,onRemovePhotoTag:F,onMinimizePhoto:V}))):p.createElement(b,null,p.createElement(p.Fragment,null,a?p.createElement(x,{onClick:B,displayPosition:"right"},p.createElement(c.zb,{icon:"ico-angle-right"})):null,i?p.createElement(x,{onClick:L,displayPosition:"left"},p.createElement(c.zb,{icon:"ico-angle-left"})):null,p.createElement(j,{item:e,onMinimizePhoto:V}))),p.createElement(v,{isExpand:z},p.createElement(k,null,p.createElement(E,null,W?p.createElement(d.Z,{sx:{pt:2}},p.createElement(w,null,p.createElement(c.zb,{icon:" ico-photos-o"}),p.createElement(C,null,P.formatMessage({id:"from_album_name"},{name:p.createElement(n.rUS,{to:null==W?void 0:W.link},null==W?void 0:W.name)}))),p.createElement(d.Z,{sx:{pt:2}},p.createElement(m.Z,null))):null,p.createElement(c.ot,{to:"photo"===r?"/photo/category":"/video/category",data:N,sx:{pt:2,mb:{sm:1,xs:0},textTransform:"capitalize"},displayLimit:2})),p.createElement(d.Z,{sx:{flex:1,minHeight:0}},p.createElement(h,{identity:t,loading:o})))))):null})},37164:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var n=a(85597),i=a(30998),r=a.n(i),o=a(27361),l=a.n(o),s=a(92114),c=a(16473),d=a(30120),m=a(44373),u=a(81719),p=a(67294),g=a(90910);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let f="PhotoViewDialog",v=(0,u.ZP)(s.cZ,{name:f,slot:"root"})(({theme:e})=>({height:"100%",padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("sm")]:{flexFlow:"column",flexDirection:"column","& > div":{overflow:"inherit"}}})),b=(0,u.ZP)("div",{name:f,slot:"dialogStatistic",shouldForwardProp:e=>"isExpand"!==e})(({theme:e,isExpand:t})=>({height:"100vh",display:t?"none":"block",width:"480px",flexGrow:1,[e.breakpoints.down("md")]:{width:"35%"},[e.breakpoints.down("sm")]:{width:"45%"},[e.breakpoints.down("xs")]:{width:"100%",height:"400px"}})),y=(0,u.ZP)("div",{name:f,slot:"dialogImage"})(({theme:e})=>({height:"100%",display:"flex",alignItems:"center",backgroundColor:"#000",width:"100%",justifyContent:"center",position:"relative",[e.breakpoints.down("md")]:{width:"65%"},[e.breakpoints.down("sm")]:{width:"55%"},[e.breakpoints.down("xs")]:{width:"100%",height:"auto",minHeight:"250px",maxHeight:"350px"}})),x=(0,u.ZP)("div",{name:f,slot:"HeaderAlbum"})(({theme:e})=>({display:"flex",flexDirection:"column",padding:e.spacing(0,2)})),E=(0,u.ZP)("div",{name:f,slot:"AlbumNameWrapper"})(({theme:e})=>({"& .ico.ico-photos-o":{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(1)},display:"flex",alignItems:"center"})),w=(0,u.ZP)("div",{name:f,slot:"AlbumName"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15)})),C=(0,u.ZP)(d.Z,{name:f,slot:"WrapperStatistic"})(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%"})),k=(e,{photo_set:t,identity:a,photo_id:n})=>{let i=l()(e,a);if(!i)return{};let o=l()(e,`photo.entities.photo_set.${t}.photos`),s=(null==i?void 0:i.user)?l()(e,i.user):void 0,c=null==o?void 0:o.length,d=1<c?r()(o,e=>e===a):-1,m=i.user_tags?i.user_tags.map(t=>l()(e,t)).filter(Boolean):[],u={item:i,photos:o,user:s,photo_id:n,user_tags:m,nextUrl:void 0,prevUrl:void 0};if(-1<d){let p=t?`/photo/${t}`:"/photo";if(d<c-1){let g=o[d+1];u.nextUrl=`${p}/${g.replace("photo.entities.photo.","")}`}if(0<d){let h=o[d-1];u.prevUrl=`${p}/${h.replace("photo.entities.photo.","")}`}}return u};var S=(0,n.$jX)(k)(function({item:e,identity:t,mediaType:a,loading:i,error:r,user:o}){let{jsxBackend:l,ItemDetailInteractionInModal:u,useDialog:f,dispatch:k,i18n:S,useIsMobile:Z,useGetItems:P,useGetItem:M,useSession:_}=(0,n.OgA)(),O=Z(),[R,z]=p.useState(!1),I=P(null==e?void 0:e.categories),W=M(null==e?void 0:e.album),N=M(null==e?void 0:e.owner),{user:T}=_(),A=l.get("photo.itemView.modalCard"),j=l.get("photo.block.photoViewMobile"),{dialogProps:$}=f(),L=e=>{k({type:"photo/onAddPhotoTag",payload:{identity:t,data:e}})},B=e=>{k({type:"photo/onRemovePhotoTag",payload:{identity:t,id:e}})},D=e=>{z(e)},F=(null==T?void 0:T.id)===(null==o?void 0:o.id);return e&&(!i||(null==o?void 0:o.id)===(null==N?void 0:N.id)||(null==e?void 0:e._loadedDetail)||F)?O?p.createElement(s.Vq,h({},$,{fullScreen:!r,scroll:"body","data-testid":"popupViewPhoto"}),p.createElement(s.$N,{enableBack:O,disableClose:O},S.formatMessage({id:"photo"})),p.createElement(g.Z,{error:r},p.createElement(v,null,p.createElement(j,{item:e,identity:t})))):p.createElement(s.Vq,h({scroll:"body"},$,{fullScreen:!r,"data-testid":"popupDetailPhoto",onBackdropClick:void 0}),p.createElement(g.Z,{error:r},p.createElement(v,{dividers:!1},p.createElement(y,null,p.createElement(p.Fragment,null,p.createElement(A,{item:e,identity:t,taggedFriends:[],onAddPhotoTag:L,onRemovePhotoTag:B,onMinimizePhoto:D}))),p.createElement(b,{isExpand:R},p.createElement(C,null,p.createElement(x,null,W?p.createElement(d.Z,{sx:{pt:2}},p.createElement(E,null,p.createElement(c.zb,{icon:" ico-photos-o"}),p.createElement(w,null,S.formatMessage({id:"from_album_name"},{name:p.createElement(n.rUS,{to:null==W?void 0:W.link},null==W?void 0:W.name)}))),p.createElement(d.Z,{sx:{pt:2}},p.createElement(m.Z,null))):null,p.createElement(c.ot,{to:"/photo/category",data:I,sx:{pt:2,mb:{sm:1,xs:0},textTransform:"capitalize"},displayLimit:2})),p.createElement(d.Z,{sx:{flex:1,minHeight:0}},p.createElement(u,{identity:t,loading:i}))))))):null})},77675:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var n=a(85597),i=a(92114),r=a(84635),o=a(98601),l=a.n(o),s=a(67294);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function d({initialValues:e}){let{useDialog:t}=(0,n.OgA)(),{dialogProps:a,setDialogValue:o}=t();return l()(e,"submit"),s.createElement(i.Vq,c({},a,{maxWidth:"sm",fullWidth:!0}),s.createElement(r.AO,{initialValues:e,dataSource:{apiUrl:"/poll/status-form"},onSubmit:o,dialog:!0}))}},44635:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var n=a(85597),i=a(92114),r=a(84635),o=a(98601),l=a.n(o),s=a(50361),c=a.n(s),d=a(67294);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function u({initialValues:e,formUrl:t}){let{useDialog:a}=(0,n.OgA)(),{dialogProps:o,setDialogValue:s}=a(),u=c()(e);return l()(u,"submit"),d.createElement(i.Vq,m({},o,{maxWidth:"sm",fullWidth:!0}),d.createElement(r.AO,{initialValues:u,dataSource:{apiUrl:t||"/poll/status-form"},onSubmit:s,dialog:!0}))}},26757:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var n=a(92114),i=a(85597),r=a(21241),o=a(16473),l=a(81719),s=a(70214),c=a(99164),d=a(67294),m=a(22410),u=a(73327),p=(0,m.Z)(e=>(0,u.Z)({root:{},dialogContent:{height:320},reactNumber:{paddingLeft:e.spacing(1),color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold},customTabs:{borderBottom:e.mixins.border("secondary"),"& .MuiTabs-scroller":{overflow:"auto !important"},"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5),display:"flex",flexDirection:"column"},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",minWidth:0,borderRadius:4,marginRight:e.spacing(1),padding:e.spacing(.5),flexDirection:"row","&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected,color:`${e.palette.text.secondary} !important`},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"});function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let h="PeopleWhoVoted",f={minHeight:32},v=(0,l.ZP)(s.Z,{name:h})(({theme:e})=>({justifyContent:"space-between",maxWidth:"100%",padding:`${e.spacing(.5,1)} !important`,height:`${e.spacing(3.5)} !important`,marginRight:"0px !important",marginBottom:e.spacing(.5)})),b=(0,l.ZP)(o.Ys,{name:h})(({theme:e})=>({maxWidth:"95%"}));var y=function(e){let{listAnswers:t}=e,a=p(),[o,l]=(0,d.useState)(t[0].id),{useDialog:s,i18n:m,ListView:u}=(0,i.OgA)(),{dialogProps:h}=s(),y=(0,d.useMemo)(()=>({apiUrl:"/poll-result",apiParams:{answer_id:o}}),[o]),x=`pollAnswerResult/${o}`,E=(e,t)=>{l(parseInt(t,10))};return d.createElement(n.Vq,g({},h,{maxWidth:"xs",fullWidth:!0}),d.createElement(n.$N,null,m.formatMessage({id:"people_who_voted"})),d.createElement(c.Z,{value:o,onChange:E,style:f,className:a.customTabs},t.map(e=>d.createElement(v,{key:e.id,disableRipple:!0,label:e.answer?d.createElement(d.Fragment,null,d.createElement(b,{lines:1},e.answer),d.createElement("span",{className:a.reactNumber},e.total_votes)):void 0,value:e.id,"aria-label":e.title}))),d.createElement("div",{className:a.dialogContent},d.createElement(r.l$,{autoHide:!0,autoHeightMax:320},d.createElement(u,{dataSource:y,pagingId:x,canLoadMore:!0,gridLayout:"Poll - People Who Voted",itemLayout:"Poll - People Who Voted",itemView:"poll.itemView.peopleWhoVoted",emptyPage:"core.block.no_content",emptyPageProps:{title:"no_votes",contentStyle:{sx:{pt:2}}}}))))}},38782:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var n=a(85597),i=a(92114),r=a(67294),o=a(22410),l=a(73327);let s=(0,o.Z)(e=>(0,l.Z)({root:{padding:"0 !important",overflowY:"visible",display:"flex"},titleDialog:{display:"flex",alignItems:"center"},closeDialog:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),marginLeft:"auto",cursor:"pointer"},contentWrapper:{width:"1020px",maxWidth:"100%"}}),{name:"MuiPollViewModal"});function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var d=(0,n.SuR)(function({item:e,identity:t}){let a=s(),{useDialog:o,jsxBackend:l,useIsMobile:d,i18n:m}=(0,n.OgA)(),{dialogProps:u}=o(),p=l.get("poll.block.pollView"),g=d();return e?r.createElement(i.Vq,c({},u,{maxWidth:"md",scroll:"body","data-testid":"popupViewBlog"}),r.createElement(i.$N,{enableBack:g,disableClose:g},m.formatMessage({id:"poll"})),r.createElement(i.cZ,{className:a.root},r.createElement("div",{className:a.contentWrapper},r.createElement(p,{item:e,identity:t,isModalView:!0})))):null})},76494:function(e,t,a){a.r(t),a.d(t,{default:function(){return X}});var n=a(85597),i=a(92114),r=a(21241),o=a(30120),l=a(81719),s=a(70214),c=a(99164),d=a(67294);let m="quiz",u="quiz";var p=a(39348),g=a(17888),h=a(22949),f=a(15949),v=a(27361),b=a.n(v);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var x=function({onSelect:e,data:t,valueSelect:a}){let{options:n=[]}=t,i=(e,t)=>b()(e,"id")==b()(t,"id"),r=e=>{var t;return null!==(t=b()(e,"label"))&&void 0!==t?t:""},l=(0,f.D)({stringify:({label:e})=>`${e}`}),s=e=>{13===e.keyCode&&e.preventDefault()},c=e=>{return d.createElement(h.Z,y({},e,{fullWidth:!0,onKeyDown:s,inputProps:{...e.inputProps,autoComplete:"on"}}))},m=d.useCallback((e,t)=>{return d.createElement(o.Z,y({component:"li"},e,{key:`${null==t?void 0:t.id}${null==t?void 0:t.question}`}),`${null==t?void 0:t.ordering}. ${t.label}`)},[]);return d.createElement(g.Z,{margin:"normal",fullWidth:!0,"data-testid":"field select custom"},d.createElement(p.Z,{disableClearable:!0,filterOptions:l,openOnFocus:!0,value:a||n[0],defaultValue:n[0],onChange:e,isOptionEqualToValue:i,options:n,getOptionLabel:r,autoHighlight:!0,renderInput:c,renderOption:m}))},E=a(90910),w=a(16473),C=a(91647),k=a(41609),S=a.n(k),Z=a(57147),P=a(53307),M=a(59462),_=a(18037),O=a(47546),R=a(20399),z=a(41470),I=a(1469),W=a.n(I),N=a(86706);let T=(0,l.ZP)(o.Z,{name:"quiz-question-dialog",slot:"root",shouldForwardProp:e=>"rightAnswer"!==e})(({theme:e,rightAnswer:t})=>({marginTop:e.spacing(3),marginBottom:e.spacing(1),...t?{"& .option .Mui-checked + span":{color:e.palette.success.main,fontWeight:"bold"}}:{"& .option .Mui-checked + span":{color:e.palette.error.main,fontWeight:"bold"}}})),A=(0,l.ZP)(R.Z,{slot:"RadioButton"})(({theme:e})=>({"&.Mui-disabled":{..."dark"===e.palette.mode&&{color:e.palette.text.hint}}})),j=(0,l.ZP)(O.Z,{slot:"label"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),lineHeight:1.33,fontWeight:"bold",color:e.palette.text.primary,marginBottom:e.spacing(1)}));function $(e){let{question:t,answers:a,order:n,result:i}=e,r=(0,N.v9)(e=>(0,Z.u)(e,a)),o=Boolean((null==i?void 0:i.correct_answer_id)===(null==i?void 0:i.user_answer_id));return d.createElement(T,{rightAnswer:o},d.createElement(j,{variant:"h5",component:"div"},`${n}. ${t}`),d.createElement(z.Z,{value:null==i?void 0:i.user_answer_id.toString()},W()(r)?r.map(e=>{return d.createElement(_.Z,{disabled:!0,key:e.id.toString(),value:e.id.toString(),style:{width:"fit-content"},control:d.createElement(A,{color:"primary",size:"small",icon:e.id===(null==i?void 0:i.correct_answer_id)?d.createElement(P.Z,{fontSize:"small"}):d.createElement(M.Z,{fontSize:"small"})}),label:e.answer,className:"option"})}):null))}let L=(0,l.ZP)(o.Z)(({theme:e})=>({display:"flex",alignItems:"center",marginTop:e.spacing(2)})),B=(0,l.ZP)(n.rUS,{name:"ProfileLinkStyled"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),fontWeight:e.typography.fontWeightBold,paddingRight:e.spacing(.5),color:e.palette.text.primary}));var D=function({questions:e,item:t,userId:a}){var i;let{useFetchDetail:r,i18n:l}=(0,n.OgA)(),s=(0,n.oHF)(m,u,"viewQuizResultIndividual"),[c,p,g]=r({dataSource:s,pageParams:{quiz_id:t.id,user_id:a}}),h=(e||[]).reduce((e,t)=>{var a;let n=null==c?void 0:null===(a=c.user_result)||void 0===a?void 0:a.find(e=>e.question_id===t.id),i=Boolean((null==n?void 0:n.correct_answer_id)===(null==n?void 0:n.user_answer_id));return i?e+1:e},0);return d.createElement(E.Z,{loading:p,error:g,emptyComponent:null},S()(c)?null:d.createElement(o.Z,null,d.createElement(L,null,d.createElement(w.Yt,{user:null==c?void 0:c.user,size:48}),d.createElement(o.Z,{sx:{ml:1.5}},d.createElement(B,{to:null==c?void 0:null===(i=c.user)||void 0===i?void 0:i.link,children:null==c?void 0:c.user.full_name,"data-testid":"headline"}),d.createElement(C.Z,{color:"text.secondary",mt:.5},l.formatMessage({id:"correct_answer_percent_question"},{result:()=>{return d.createElement("strong",null,`${h}/${null==e?void 0:e.length}`)},percent:()=>{return d.createElement("strong",null,"(",null==c?void 0:c.result_correct,")")}})))),(null==e?void 0:e.length)>0&&e.map((e,t)=>{var a;return d.createElement($,{key:t.toString(),question:e.question,questionId:e.id,answers:e.answers,order:t+1,result:null==c?void 0:null===(a=c.user_result)||void 0===a?void 0:a.find(t=>t.question_id===e.id)})})))},F=a(47037),V=a.n(F),H=a(27274);function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let q=(0,l.ZP)(s.Z)(({theme:e})=>({height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(4),textTransform:"uppercase","& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main},"&:hover":{color:e.palette.primary.main}})),Y=(0,l.ZP)(o.Z)(({theme:e})=>({padding:e.spacing(0,2)}));function X({dialogTitle:e,questions:t,user:a,userOwner:o,item:l}){let{useDialog:s,ListView:p,i18n:g,useGetItem:h}=(0,n.OgA)(),{dialogProps:f}=s(),v=(0,n.oHF)(m,u,"viewQuizSummary"),[b,y]=d.useState(0),[E,w]=d.useState(null),[C,k]=d.useState(t[0].id),Z=(e,t)=>{k(t.id),w(t)},P=(a||[]).map((e,t)=>{if(V()(e.user)){let a=h(e.user);return{id:a.id,label:a.full_name,ordering:t}}return{id:e.user.id,label:e.user.full_name,ordering:t}}),M=d.useMemo(()=>{return(t||[]).map(e=>{return{id:e.id,label:e.question,ordering:e.ordering}})},[t]),_=d.useMemo(()=>{return{0:{options:M},1:{options:P}}},[t,a,M,P]),O=(e,t)=>{y(t),0===t?(w(M[0]),k(M[0].id)):(w(P[0]),k(P[0].id))},R=d.useMemo(()=>{var e;return!S()(a)&&(null!=l&&!!l.is_owner||null!=l&&null!==(e=l.extra)&&void 0!==e&&!!e.can_moderate)},[a,l]);return d.createElement(i.Vq,U({},f,{maxWidth:"xs",fullWidth:!0}),d.createElement(i.$N,null,g.formatMessage({id:e})),d.createElement(i.cZ,{variant:"fitScroll",sx:{height:"45vh"}},d.createElement(Y,null,d.createElement(c.Z,{value:b,onChange:O,indicatorColor:"primary",textColor:"primary"},d.createElement(q,{disableRipple:!0,label:g.formatMessage({id:"summary"}).toUpperCase()}),R?d.createElement(q,{disableRipple:!0,label:g.formatMessage({id:"individuals"}).toUpperCase()}):null),d.createElement(x,{onSelect:Z,data:_[b],tab:b,valueSelect:E})),d.createElement(r.l$,null,d.createElement(Y,{sx:{mb:2}},0===b?d.createElement(p,{canLoadMore:!0,dataSource:{apiMethod:(null==v?void 0:v.apiMethod)||"get",apiUrl:null==v?void 0:v.apiUrl,apiParams:(0,H.aZ)(v.apiParams,{id:C})},pagingId:`/quiz/view-plays/tab=${b}/value=${C}`,prefixPagingId:"/quiz/view-plays",itemView:"quiz.itemView.AnswerPercent",emptyPage:"hide",gridLayout:"Friend - Small List",itemLayout:"Quiz - Answer Played List"}):d.createElement(D,{item:l,userId:C,questions:t})))))}},13324:function(e,t,a){a.r(t);var n=a(85597),i=a(92114),r=a(81719),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let s="QuizViewDialog",c=(0,r.ZP)(i.cZ,{name:s,slot:"root"})(({theme:e})=>({padding:"0 !important",overflowY:"visible",display:"flex"})),d=(0,r.ZP)("div",{name:s,slot:"root"})(({theme:e})=>({width:"1020px",maxWidth:"100%"}));t.default=(0,n.SuR)(function({item:e,identity:t}){let{useDialog:a,jsxBackend:r,useIsMobile:s,i18n:m}=(0,n.OgA)(),{dialogProps:u}=a(),p=r.get("quiz.block.quizView"),g=s();return e?o.createElement(i.Vq,l({},u,{maxWidth:"md",scroll:"body","data-testid":"popupViewQuiz"}),o.createElement(i.$N,{enableBack:g,disableClose:g},m.formatMessage({id:"quiz"})),o.createElement(c,null,o.createElement(d,null,o.createElement(p,{item:e,identity:t,isModalView:!0})))):null})},57147:function(e,t,a){a.d(t,{u:function(){return l}});var n=a(22222),i=a(27361),r=a.n(i);let o=(e,t)=>{return t?null==t?void 0:t.map(t=>r()(e,t)).filter(Boolean):[]},l=(0,n.P1)(o,e=>e)},10777:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var n=a(92114),i=a(85597),r=a(21241),o=a(21822),l=a(72962),s=a(24498),c=a(71682),d=a(70214),m=a(99164),u=a(91647),p=a(67294),g=a(22410),h=a(73327),f=(0,g.Z)(e=>(0,h.Z)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:4,marginRight:"0.25em",padding:e.spacing(.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"});function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let b={minHeight:32},y={minWidth:16},x={width:15,height:15},E=()=>{return p.createElement(p.Fragment,null,p.createElement(c.Z,{variant:"button",width:40,height:24,sx:{marginRight:1}}),p.createElement(c.Z,{variant:"button",width:60,height:24,sx:{marginRight:1}}),p.createElement(c.Z,{variant:"button",width:60,height:24,sx:{marginRight:1}}))};var w=function(e){let{item_type:t,item_id:a,reactId:c}=e,g=f(),[h,w]=(0,p.useState)(c),C=(0,p.useRef)(),{useDialog:k,i18n:S,ListView:Z,useFetchItems:P,dispatch:M,navigate:_}=(0,i.OgA)(),{dialogProps:O,closeDialog:R}=k(),[z,I,W]=P({dataSource:{apiUrl:"/preaction/reaction-tabs",apiParams:{item_type:t,item_id:a}},data:[]});(0,p.useEffect)(()=>{(null==z?void 0:z.length)&&M({type:"updateResourceReaction",payload:{tabResourceReaction:z}}),!c&&(null==z?void 0:z.length)&&w(z[0].id)},[z,c]);let N=(0,p.useMemo)(()=>({apiUrl:"/preaction/get-reacted-lists",apiParams:{item_type:t,item_id:a,react_id:h,limit:20}}),[a,t,h]),T=()=>{_("/"),R()};if(W)return p.createElement(n.Vq,v({},O,{maxWidth:"xs",fullWidth:!0}),p.createElement(n.$N,null,"Error"),p.createElement(s.Z,{dividers:!1},p.createElement(u.Z,{sx:{pt:2},variant:"body1"},S.formatMessage({id:"error_post_delete"}))),p.createElement(l.Z,null,p.createElement(o.Z,{"data-testid":"buttonBackHome",role:"button",tabIndex:1,autoFocus:!0,variant:"contained",disableRipple:!0,size:"medium",color:"primary",onClick:T,sx:{minWidth:100}},S.formatMessage({id:"refresh"}))));let A=`preaction/${t}/${a}/${h}`,j=(e,t)=>{w(parseInt(t,10))};return p.createElement(n.Vq,v({},O,{maxWidth:"xs",fullWidth:!0}),p.createElement(n.$N,null,S.formatMessage({id:"reacted_by"})),p.createElement(m.Z,{value:h,onChange:j,style:b,className:g.customTabs},I?p.createElement(E,null):z.map(e=>p.createElement(d.Z,{key:e.title,style:y,disableRipple:!0,icon:e.icon?p.createElement("img",{src:e.icon,alt:e.title,style:x}):p.createElement("span",{className:g.reactNumber},e.title),iconPosition:"start",label:e.total_reacted?p.createElement("span",{className:g.reactNumber},e.total_reacted):void 0,value:e.id,"aria-label":e.title}))),p.createElement("div",{className:g.dialogContent,ref:C},p.createElement(r.ID,{scrollRef:C},I?null:p.createElement(Z,{dataSource:N,pagingId:A,canLoadMore:!0,clearDataOnUnMount:!0,gridContainerProps:{spacing:0},itemView:"reaction.itemView.reactedUser"}))))}},40471:function(e,t,a){a.d(t,{z:function(){return o}});var n=a(86706),i=a(22222);let r=(0,i.P1)(e=>e.preaction.data.reactions,e=>e);function o(){return(0,n.v9)(r)}},24632:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var n=a(85597),i=a(92114),r=a(84635),o=a(17673),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(e){let{useDialog:t,compactData:a}=(0,n.OgA)(),{dialogProps:c}=t(),d=a("item_id=:item_id&item_type=:item_type&report_owner=:report_owner",e);return l.createElement(i.Vq,s({},c,{maxWidth:"xs",fullWidth:!0,"data-testid":"popupReport"}),l.createElement(r.AO,{dialog:!0,keepPaginationData:!0,dataSource:{apiUrl:`/report/form?${o.stringify(d)}`}}))}},12808:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var n=a(85597),i=a(92114),r=a(84635),o=a(17673),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(e){let{useDialog:t,compactData:a}=(0,n.OgA)(),{dialogProps:c}=t(),d=a("item_id=:item_id&item_type=:item_type",e);return l.createElement(i.Vq,s({},c,{maxWidth:"xs",fullWidth:!0,"data-testid":"popupReport"}),l.createElement(r.AO,{dialog:!0,dataSource:{apiUrl:`/report-owner/form?${o.stringify(d)}`}}))}},53691:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(49960),i=a(18037),r=a(67294),o=a(75990);function l(e){let{item:t,handleToggleItem:a,checked:l,loading:s}=e,c=(0,o.Z)(),[d,m]=r.useState(l),u=e=>{a(null==t?void 0:t.id,!d),m(e=>!e)};return(r.useEffect(()=>{m(l)},[l]),t)?r.createElement(i.Z,{className:c.itemWrapper,control:r.createElement(n.Z,{disabled:s,checked:d,onChange:u,color:"primary",size:"small"}),label:t.name}):null}},75990:function(e,t,a){var n=a(22410),i=a(73327);t.Z=(0,n.Z)(e=>{var t;return(0,i.Z)({root:{width:225},heading:{textTransform:"uppercase",color:e.palette.text.secondary,backgroundColor:e.palette.background.default,fontWeight:"bold",padding:e.spacing(1,1.5)},headingCollapse:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},listCollection:{display:"flex",flexDirection:"column",maxHeight:200,overflowY:"auto"},itemWrapper:{width:"100%",margin:"0 !important",padding:e.spacing(.5,1,.5,0),position:"relative","& + $itemWrapper:before":{content:'""',borderTop:"solid 1px",borderColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,position:"absolute",top:0,left:e.spacing(2),right:e.spacing(2)}},createForm:{backgroundColor:e.palette.background.default,padding:e.spacing(2)},input:{"& .MuiInputBase-root":{borderRadius:4,backgroundColor:e.mixins.backgroundColor("paper"),height:e.spacing(4)}},actions:{marginTop:e.spacing(1),display:"flex","& button":{flex:1,minWidth:0},"& button + button":{marginLeft:e.spacing(1)}}})},{name:"MenuItemAddToCollection"})},20666:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var n=a(92114),i=a(84635),r=a(85597),o=a(42826),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(){let{useDialog:e}=(0,r.OgA)(),t=e(),{dialogProps:a,closeDialog:c}=t,d=(0,r.oHF)(o.T6,"saved_list","addItem"),m=e=>l.createElement("div",null);return l.createElement(n.Vq,s({},a,{maxWidth:"sm","data-testid":""}),l.createElement(n.cZ,{sx:{maxWidth:"100%",p:0}},l.createElement(i.dq,{dialog:!0,dialogItem:t,dataSource:{apiUrl:d.apiUrl},onCancel:c,onSuccess:c,loadingComponent:l.createElement(m,null)})))}},80802:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=a(85597),i=a(92114),r=a(21241),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:s}){let{useDialog:c,ListView:d,i18n:m}=(0,n.OgA)(),{dialogProps:u}=c();return o.createElement(i.Vq,l({},u,{maxWidth:"sm",fullWidth:!0}),o.createElement(i.$N,null,m.formatMessage({id:s})),o.createElement(i.cZ,{variant:"fitScroll",sx:{height:"45vh"}},o.createElement(r.l$,{style:{height:"auto"}},o.createElement(d,{dataSource:{apiUrl:e,apiParams:t},canLoadMore:!1,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"saved.itemView.friendList",emptyPage:"core.block.no_item_with_icon",emptyPageProps:{description:"no_friends_found",image:"ico-user-circle-o"}}))))}},63045:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var n=a(92114),i=a(85597),r=a(21241),o=a(30120),l=a(35705),s=a(41609),c=a.n(s),d=a(67294),m=a(53691),u=a(16473),p=a(21822),g=a(81719);let h=(0,g.ZP)("div",{name:"root"})(({theme:e})=>({display:"flex",flexDirection:"column",justifyContent:"center",padding:e.spacing(0,2),alignItems:"center",margin:e.spacing(7.5)})),f=(0,g.ZP)(u.zb,{name:"LineIcon"})(({theme:e})=>({fontSize:e.mixins.pxToRem(64),color:e.palette.text.secondary,marginBottom:e.spacing(4)})),v=(0,g.ZP)("div",{name:"content"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18),color:e.palette.text.secondary,textAlign:"center",[e.breakpoints.down("xs")]:{fontSize:e.mixins.pxToRem(15)}})),b=(0,g.ZP)(p.Z,{name:"WrapButton"})(({theme:e})=>({marginTop:e.spacing(1),"&:hover":{backgroundColor:"unset"}})),y=(0,g.ZP)(p.Z,{name:"ButtonInviteStyled"})(({theme:e})=>({height:"100%","& .MuiButton-startIcon":{marginLeft:0}}));function x({icon:e="ico-list-bullet-o",description:t="there_are_no_friend_list",button:a}){let{i18n:n,dispatch:r,useDialog:o}=(0,i.OgA)(),{closeDialog:l}=o(),s=()=>{l(),a.type&&r({type:a.type,payload:{...a.props}})};return d.createElement(h,null,d.createElement(f,{icon:e}),t?d.createElement(v,null,n.formatMessage({id:t})):null,d.createElement(b,null,d.createElement(y,{size:"small",variant:"outlined",component:"h5",onClick:s,startIcon:d.createElement(u.zb,{sx:{marginLeft:"0 !important"},icon:"ico-envelope"})},d.createElement("span",null,n.formatMessage({id:a.label||"add_new_listing"})))))}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let w=()=>d.createElement(o.Z,{my:1,sx:{display:"flex",justifyContent:"center"}},d.createElement(l.Z,{color:"inherit",size:"1rem"}));function C({item:e,noShowFeedback:t}){let{useDialog:a,i18n:l,useFetchItems:s,dispatch:u}=(0,i.OgA)(),p=a(),{dialogProps:g}=p,h=e._identity,{collection_ids:f=[]}=e||{},[v,b]=d.useState(f||[]),[y,C]=d.useState(!1),[k,S]=s({dataSource:{apiUrl:"/saveditems-collection"}}),Z=(e,a)=>{C(!0);let n=a?[...v,e]:v.filter(t=>t!==e);u({type:"addSavedItemToCollection",payload:{identity:h,ids:n,collection_id:e,isRemoved:!a,noShowFeedback:t},meta:{onSuccess:()=>{C(!1),b(n)}}})},P=()=>{return c()(k)?d.createElement(x,{icon:"ico-list-bullet-o",description:"no_collections_found",button:{type:"addSavedItemToNewCollection",props:{identity:h},label:"new_collection"}}):d.createElement(o.Z,{sx:{p:1}},d.createElement(r.l$,{autoHide:!0,autoHeight:!0,autoHeightMax:300},k.map(e=>d.createElement(m.Z,{item:e,collection_ids:f,key:e.id.toString(),handleToggleItem:Z,checked:v.some(t=>t===e.id),loading:y}))))};return d.createElement(n.Vq,E({},g,{maxWidth:"xs","data-testid":""}),d.createElement(n.$N,{children:l.formatMessage({id:"save_to_collection"}),"data-testid":"popupTitle"}),d.createElement(n.cZ,{sx:{maxWidth:"100%",p:0}},S?d.createElement(w,null):d.createElement(P,null)))}},12475:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var n=a(85597),i=a(92114),r=a(16473),o=a(21822),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(e){let{i18n:t,useSession:a}=(0,n.OgA)(),{user:c}=a(),{dialogProps:d}=(0,i.Rh)();return l.createElement(i.Vq,s({},d),l.createElement(i.$N,null,t.formatMessage({id:"share"})),l.createElement(i.cZ,{sx:{minWidth:600,maxWidth:"100%"}},l.createElement("div",null,l.createElement(r.Yt,{user:c,size:40,noLink:!0})),"This features is coming soon!"),l.createElement(i.kX,null,l.createElement(o.Z,{style:{minWidth:160},variant:"contained",color:"primary",size:"medium"},t.formatMessage({id:"share"}))))}},20751:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var n=a(85597),i=a(92114),r=a(67294),o=a(16473),l=a(81719);let s="MenuItem",c=(0,l.ZP)("div",{name:s,slot:"itemRoot"})(({theme:e})=>({fontSize:"1rem",padding:e.spacing(1,2),cursor:"pointer","&:hover":{backgroundColor:e.palette.action.selected}})),d=(0,l.ZP)(o.zb,{name:s,slot:"itemIcon"})(({theme:e})=>({width:e.spacing(4),display:"inline-block"}));function m({item:e,onClick:t}){return r.createElement(c,{onClick:t},r.createElement(d,{icon:e.icon}),r.createElement("span",null,e.label))}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function p(e){let{i18n:t,dispatch:a}=(0,n.OgA)(),{dialogProps:o,closeDialog:l}=(0,i.Rh)(),{shareOptions:s,identity:c}=e,d=r.useCallback(e=>{a({type:e,payload:{identity:c}}),l()},[l,a,c]);return r.createElement(i.Vq,u({},o),r.createElement(i.$N,null,t.formatMessage({id:"share"})),r.createElement(i.cZ,{sx:{minWidth:360,px:0,py:1}},s.map((e,t)=>r.createElement(m,{item:e,onClick:()=>d(e.value),key:t.toString()}))))}},71837:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var n=a(92114),i=a(70214),r=a(99164),o=a(81719),l=a(91647),s=a(21822),c=a(30120),d=a(67294),m=a(85597),u=a(21241),p=a(90432),g=a(42130),h=a(16473);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let v=(0,o.ZP)(i.Z,{name:"TabStyled"})(({theme:e})=>({padding:"0!important",fontSize:e.mixins.pxToRem(15),textTransform:"uppercase",fontWeight:"bold",marginRight:e.spacing(3.5)})),b=(0,o.ZP)(r.Z,{name:"TabsStyled"})(({theme:e})=>({"& div>span":{height:e.spacing(.5)}})),y=(0,o.ZP)(n.cZ,{name:"DialogContentStyled"})(({theme:e})=>({padding:`${e.spacing(0,1,0,2)}!important`,height:"50vh"})),x=(0,o.ZP)(c.Z,{name:"EmptySticker"})(({theme:e})=>({display:"flex",flexDirection:"column",color:e.palette.text.secondary,alignItems:"center",justifyContent:"center",height:"100%"})),E=(0,o.ZP)(h.zb,{name:"iconEmpty"})(({theme:e})=>({fontSize:e.mixins.pxToRem(40),marginBottom:e.spacing(1)}));function w(e){let{itemView:t}=e,{useDialog:a,i18n:i,dispatch:r,jsxBackend:o}=(0,m.OgA)(),{dialogProps:c}=a(),h=g.oC,[w,C]=(0,d.useState)(h),k=(0,p.YC)(),S=(0,p.HP)(),Z=o.get(t),P=(e,t)=>{C(t)};(0,d.useEffect)(()=>{r({type:"sticker/fetchAllStickerSet"})},[]);let M=w===g.oC?S:k,_=()=>{C(g.Q_)};return d.createElement(n.Vq,f({},c,{maxWidth:"sm",fullWidth:!0}),d.createElement(n.$N,null,i.formatMessage({id:"manager_stickers"})),d.createElement(y,{variant:"fitScroll"},d.createElement(b,{value:w,onChange:P},d.createElement(v,{value:g.oC,label:i.formatMessage({id:"my_stickers"})}),d.createElement(v,{value:g.Q_,label:i.formatMessage({id:"all_stickers"})})),d.createElement(u.l$,null,M.data.length?M.data.map(e=>d.createElement(Z,{identity:e,key:e})):d.createElement(x,null,d.createElement(E,{icon:"ico-sticker"}),d.createElement(l.Z,{mb:2,fontSize:20},i.formatMessage({id:"no_sticker_found"})),d.createElement(s.Z,{variant:"contained",size:"medium",onClick:_},i.formatMessage({id:"add"}))))))}},11815:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var n=a(92114),i=a(81719),r=a(30120),o=a(21822),l=a(67294),s=a(85597);let c=(0,i.ZP)("li",{name:"StickerPicker",slot:"ListItem"})(({theme:e})=>({display:"inline-flex",marginBottom:e.spacing(4),width:"25%",height:e.spacing(11)})),d=(0,i.ZP)("img",{name:"StickerPicker",slot:"ListImg"})(({theme:e})=>({maxWidth:e.spacing(13)}));function m({identity:e}){let t=(0,s.z88)(e);return l.createElement(c,{role:"button","aria-label":"sticker","data-testid":"sticker",key:e},l.createElement(d,{draggable:!1,alt:"sticker",src:null==t?void 0:t.image}))}var u=a(27274);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let g=(0,i.ZP)(n.cZ,{name:"DialogContentStyled"})(({theme:e})=>({padding:`${e.spacing(0,1,0,2)}!important`,height:"50vh"})),h=(0,i.ZP)("img",{name:"StickerPicker",slot:"tabImg"})(({theme:e})=>({height:e.spacing(16),maxWidth:e.spacing(20)})),f=(0,i.ZP)(r.Z,{name:"titleSticker"})(({theme:e})=>({color:e.palette.text.primary,fontSize:e.mixins.pxToRem(18),marginBottom:e.spacing(1.5),fontWeight:e.typography.fontWeightSemiBold})),v=(0,i.ZP)(r.Z,{name:"totalSticker"})(({theme:e})=>({color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),marginBottom:e.spacing(2)})),b=(0,i.ZP)(r.Z,{name:"infoSticker"})(({theme:e})=>({display:"flex",alignItems:"center",borderBottom:`1px solid ${e.palette.divider}`,paddingBottom:e.spacing(2)}));function y({identity:e,addToMyList:t,removeToMyList:a}){let i=(0,s.z88)(e),{i18n:c,useDialog:d}=(0,s.OgA)(),{dialogProps:y}=d(),{stickers:x,image:E,title:w,statistic:C,is_added:k}=i;return l.createElement(n.Vq,p({},y,{maxWidth:"sm",fullWidth:!0}),l.createElement(n.$N,{enableBack:!0},c.formatMessage({id:"sticker_detail"})),l.createElement(g,{variant:"fitScroll"},l.createElement(b,null,l.createElement(h,{draggable:!1,alt:w,src:(0,u.Q4)(E,"200")}),l.createElement(r.Z,{ml:2,mt:2},l.createElement(f,null,w),l.createElement(v,null,c.formatMessage({id:"total_stickers"},{value:C.total_sticker})),k?l.createElement(o.Z,{variant:"outlined",size:"medium",onClick:a},c.formatMessage({id:"remove"})):l.createElement(o.Z,{variant:"contained",size:"medium",onClick:t},c.formatMessage({id:"add"})))),l.createElement(r.Z,{ml:5,sx:{display:"flex",flexWrap:"wrap"}},x.map(e=>l.createElement(m,{identity:e,key:e})))))}},90432:function(e,t,a){a.d(t,{YC:function(){return s},xV:function(){return l},HP:function(){return r},mi:function(){return o}});var n=a(86706),i=a(29701);function r(){return(0,n.v9)(e=>(0,i.Uz)(e))}function o(e){return(0,n.v9)(t=>(0,i.Fc)(t,e))}function l(){return(0,n.v9)(e=>(0,i.id)(e))}function s(){return(0,n.v9)(e=>(0,i.xl)(e))}},15442:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=a(85597),i=a(92114),r=a(67294),o=a(30120);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s({dataSource:e,title:t,hasComparison:a,meta:s,relatedFieldName:c}){let{useDialog:d,ListView:m,i18n:u,layoutBackend:p}=(0,n.OgA)(),{dialogProps:g}=d(),h="Subscription - Dialog - List",f=p.getItemPreset(h);return r.createElement(i.Vq,l({},g,{maxWidth:"sm",fullWidth:!0}),r.createElement(i.$N,{children:null!=t?t:u.formatMessage({id:"subscription_packages"}),"data-testid":"popupTitle"}),r.createElement(o.Z,{sx:{flex:1,minHeight:0,maxHeight:"100%",overflow:"auto"}},r.createElement(m,{dataSource:e,itemView:"subscription_package.itemView.smallCard",limitItemsLoadSmooth:3,gridLayout:h,itemLayout:h,itemProps:{...null==f?void 0:f.itemProps,setFieldValue:null==s?void 0:s.setFieldValue,relatedFieldName:c}}),a?r.createElement(o.Z,{px:2,pb:2,sx:{display:"flex",justifyContent:"flex-end"}},r.createElement(n.rUS,{to:"/subscription",color:"primary"},u.formatMessage({id:"compare_packages"}))):null))}},57807:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(85597),i=a(84635),r=a(78016),o=a(67294);function l({user:e,submitAction:t="@login",formName:a="login",title:l}){let[s,c]=o.useState(),d=(0,n.gM1)("user","user",a);o.useEffect(()=>{e&&c(e)},[e]);let m={email:null==s?void 0:s.email,password:null==s?void 0:s.password,remember:!1};return o.createElement(r.Z,{component:"main",maxWidth:"xs"},o.createElement(i.qu,{key:(null==s?void 0:s.id)||"none",submitAction:t,initialValues:m,formSchema:l?{...d,title:l}:d,navigationConfirmWhenDirty:!1}))}},75214:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var n=a(85597),i=a(92114),r=a(67294),o=a(57807),l=a(30120),s=a(50130),c=a(16473);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function m({title:e,formName:t="login_popup"}){let{useDialog:a}=(0,n.OgA)(),{dialogProps:m,closeDialog:u}=a();return r.createElement(i.Vq,d({},m,{maxWidth:"xs",fullWidth:!0}),r.createElement(l.Z,{py:3},r.createElement(s.Z,{sx:{position:"absolute",top:8,right:8},onClick:u},r.createElement(c.zb,{icon:"ico-close"})),r.createElement(o.Z,{submitAction:"@loginFromDialog",formName:t,title:e})))}},75255:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var n=a(85597),i=a(92114),r=a(21241),o=a(16473),l=a(30120),s=a(67294);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function d(){let{useDialog:e,i18n:t,ListView:a}=(0,n.OgA)(),{dialogProps:d}=e(),[m,u]=s.useState(""),p=s.useCallback(e=>{u(e)},[]),g=t.formatMessage({id:"edit_your_shortcuts"}),h=s.useMemo(()=>{return`/user/shortcut/edit/?query=${m}`},[m]);return s.useEffect(()=>{return()=>{}},[]),s.createElement(i.Vq,c({},d,{maxWidth:"xs",fullWidth:!0}),s.createElement(i.$N,null,g),s.createElement(i.cZ,{variant:"fitScroll",sx:{height:"45vh"}},s.createElement(l.Z,{sx:{p:2}},s.createElement(o.mN,{placeholder:t.formatMessage({id:"search_your_page_groups_dots"}),onChanged:p})),s.createElement(r.l$,{autoHeightMax:"100%",autoHide:!0,autoHeight:!0},s.createElement(a,{emptyPage:"core.block.no_content",emptyPageProps:{title:"no_results_try_another_search"},dataSource:{apiUrl:"/user/shortcut/edit",apiParams:{q:m||void 0}},pagingId:h,canLoadMore:!0,clearDataOnUnMount:!0,itemView:"shortcut.itemView.mainCard",gridLayout:"Shortcut - Small Lists",itemLayout:"Shortcut - Small Lists"}))))}},22003:function(e,t,a){a.r(t);var n=a(92114),i=a(85597),r=a(16473),o=a(30120),l=a(44373),s=a(81719),c=a(67294),d=a(90910);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let u="videoView",p=(0,s.ZP)("div",{name:"VideoView",slot:"dialogVideo"})(({theme:e})=>({position:"relative",backgroundColor:"#000",width:"100%",overflow:"hidden","& iframe":{width:"100%",height:"100%"},[e.breakpoints.down("md")]:{width:"65%"},[e.breakpoints.down("sm")]:{width:"100%",height:"auto",borderRadius:0,overflow:"initial"}})),g=(0,s.ZP)("div",{name:"VideoView",slot:"dialogStatistic",shouldForwardProp:e=>"isExpand"!==e})(({theme:e,isExpand:t})=>({height:"100%",width:t?0:"480px",flexGrow:1,[e.breakpoints.down("md")]:{width:"35%"},[e.breakpoints.down("sm")]:{width:"100%"},[e.breakpoints.down("xs")]:{width:"100%",height:"400px"}})),h=(0,s.ZP)(n.cZ,{name:"VideoView",slot:"dialogStatistic"})(({theme:e})=>({padding:"0 !important",height:"100%",display:"flex",overflowX:"hidden",[e.breakpoints.down("sm")]:{flexFlow:"column"}})),f=(0,s.ZP)("div",{name:u,slot:"HeaderAlbum"})(({theme:e})=>({display:"flex",flexDirection:"column",padding:e.spacing(0,2)})),v=(0,s.ZP)("div",{name:u,slot:"AlbumNameWrapper"})(({theme:e})=>({"& .ico.ico-photos-o":{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(1)},display:"flex",alignItems:"center"})),b=(0,s.ZP)("div",{name:u,slot:"AlbumName"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15)})),y=(0,s.ZP)(o.Z,{name:u,slot:"WrapperStatistic"})(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%"}));t.default=(0,i.SuR)(function({item:e,identity:t,error:a}){let{ItemDetailInteractionInModal:s,useDialog:u,useIsMobile:x,i18n:E,jsxBackend:w,useGetItem:C,useGetItems:k}=(0,i.OgA)(),{dialogProps:S}=u(),Z=x(),[P,M]=c.useState(!1),_=C(null==e?void 0:e.album),O=k(null==e?void 0:e.categories),R=w.get("video.itemView.modalCard");if(!e)return null;let z=e=>{M(e)};return c.createElement(n.Vq,m({scroll:"body"},S,{fullScreen:!a,"data-testid":"popupDetailVideo",onBackdropClick:void 0}),Z||a?c.createElement(n.$N,{enableBack:!a,disableClose:Z},E.formatMessage({id:"video"})):null,c.createElement(d.Z,{error:a},c.createElement(h,null,c.createElement(p,null,c.createElement(c.Fragment,null,c.createElement(R,{item:e,onMinimizePhoto:z}))),c.createElement(g,{isExpand:P},c.createElement(y,{sx:{display:P?"none":"flex",flexDirection:"column"}},c.createElement(f,null,_?c.createElement(o.Z,{sx:{pt:2}},c.createElement(v,null,c.createElement(r.zb,{icon:" ico-photos-o"}),c.createElement(b,null,E.formatMessage({id:"from_album_name"},{name:c.createElement(i.rUS,{to:null==_?void 0:_.link},null==_?void 0:_.name)}))),c.createElement(o.Z,{sx:{pt:2}},c.createElement(l.Z,null))):null,c.createElement(r.ot,{to:"/video/category",data:O,sx:{pt:2,mb:{sm:1,xs:0},textTransform:"capitalize"},displayLimit:2})),c.createElement(o.Z,{sx:{flex:1,minHeight:0}},c.createElement(s,{identity:t})))))))})}}]);