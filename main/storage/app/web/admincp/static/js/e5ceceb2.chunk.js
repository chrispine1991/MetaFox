"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-chatplus-components-MsgContent-MessageText","metafox-chatplus-components-Avatar"],{6867:function(e,t,r){r.d(t,{Z:function(){return I}});var n=r(63366),i=r(87462),a=r(67294),o=r(86010),l=r(2097),s=r(94780),d=r(1588),c=r(34867);function p(e){return(0,c.Z)("MuiBadge",e)}(0,d.Z)("MuiBadge",["root","badge","invisible"]);var m=r(34261),u=r(85893);let g=["badgeContent","component","children","invisible","max","slotProps","slots","showZero"],h=e=>{let{invisible:t}=e;return(0,s.Z)({root:["root"],badge:["badge",t&&"invisible"]},p,void 0)},f=a.forwardRef(function(e,t){let{component:r,children:a,max:o=99,slotProps:s={},slots:d={},showZero:c=!1}=e,p=(0,n.Z)(e,g),{badgeContent:f,max:v,displayValue:x,invisible:b}=function(e){let{badgeContent:t,invisible:r=!1,max:n=99,showZero:i=!1}=e,a=(0,l.Z)({badgeContent:t,max:n}),o=r;!1!==r||0!==t||i||(o=!0);let{badgeContent:s,max:d=n}=o?a:e,c=s&&Number(s)>d?`${d}+`:s;return{badgeContent:s,invisible:o,max:d,displayValue:c}}((0,i.Z)({},e,{max:o})),y=(0,i.Z)({},e,{badgeContent:f,invisible:b,max:v,showZero:c}),w=h(y),P=r||d.root||"span",Z=(0,m.Z)({elementType:P,externalSlotProps:s.root,externalForwardedProps:p,additionalProps:{ref:t},ownerState:y,className:w.root}),O=d.badge||"span",k=(0,m.Z)({elementType:O,externalSlotProps:s.badge,ownerState:y,className:w.badge});return(0,u.jsxs)(P,(0,i.Z)({},Z,{children:[a,(0,u.jsx)(O,(0,i.Z)({},k,{children:x}))]}))});var v=r(81719),x=r(78884),b=r(69633),y=r(36622);function w(e){return(0,c.Z)("MuiBadge",e)}let P=(0,d.Z)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Z=["anchorOrigin","className","component","components","componentsProps","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],O=e=>{let{color:t,anchorOrigin:r,invisible:n,overlap:i,variant:a,classes:o={}}=e,l={root:["root"],badge:["badge",a,n&&"invisible",`anchorOrigin${(0,y.Z)(r.vertical)}${(0,y.Z)(r.horizontal)}`,`anchorOrigin${(0,y.Z)(r.vertical)}${(0,y.Z)(r.horizontal)}${(0,y.Z)(i)}`,`overlap${(0,y.Z)(i)}`,"default"!==t&&`color${(0,y.Z)(t)}`]};return(0,s.Z)(l,w,o)},k=(0,v.ZP)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),E=(0,v.ZP)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.badge,t[r.variant],t[`anchorOrigin${(0,y.Z)(r.anchorOrigin.vertical)}${(0,y.Z)(r.anchorOrigin.horizontal)}${(0,y.Z)(r.overlap)}`],"default"!==r.color&&t[`color${(0,y.Z)(r.color)}`],r.invisible&&t.invisible]}})(({theme:e,ownerState:t})=>(0,i.Z)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},"default"!==t.color&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},"dot"===t.variant&&{borderRadius:4,height:8,minWidth:8,padding:0},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${P.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${P.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${P.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${P.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${P.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${P.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${P.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${P.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})})),_=a.forwardRef(function(e,t){var r,a,s,d,c,p;let m;let g=(0,x.Z)({props:e,name:"MuiBadge"}),{anchorOrigin:h={vertical:"top",horizontal:"right"},className:v,component:y="span",components:w={},componentsProps:P={},overlap:_="rectangular",color:I="default",invisible:C=!1,max:A,badgeContent:M,slots:T,slotProps:z,showZero:R=!1,variant:S="standard"}=g,$=(0,n.Z)(g,Z),F=(0,l.Z)({anchorOrigin:h,color:I,overlap:_,variant:S}),B=C;!1!==C||(0!==M||R)&&(null!=M||"dot"===S)||(B=!0);let{color:W=I,overlap:L=_,anchorOrigin:j=h,variant:U=S}=B?F:g,D=(0,i.Z)({},g,{anchorOrigin:j,invisible:B,color:W,overlap:L,variant:U}),N=O(D);"dot"!==U&&(m=M&&Number(M)>A?`${A}+`:M);let V=null!=(r=null!=(a=null==T?void 0:T.root)?a:w.Root)?r:k,H=null!=(s=null!=(d=null==T?void 0:T.badge)?d:w.Badge)?s:E,Q=null!=(c=null==z?void 0:z.root)?c:P.root,G=null!=(p=null==z?void 0:z.badge)?p:P.badge;return(0,u.jsx)(f,(0,i.Z)({invisible:C,badgeContent:m,showZero:R,max:A},$,{slots:{root:V,badge:H},className:(0,o.default)(null==Q?void 0:Q.className,N.root,v),slotProps:{root:(0,i.Z)({},Q,(0,b.Z)(V)&&{as:y,ownerState:(0,i.Z)({},null==Q?void 0:Q.ownerState,{anchorOrigin:j,color:W,overlap:L,variant:U})}),badge:(0,i.Z)({},G,{className:(0,o.default)(N.badge,null==G?void 0:G.className)},(0,b.Z)(H)&&{ownerState:(0,i.Z)({},null==G?void 0:G.ownerState,{anchorOrigin:j,color:W,overlap:L,variant:U})})},ref:t}))});var I=_},69633:function(e,t,r){var n=r(28442);let i=e=>{return!e||!(0,n.Z)(e)};t.Z=i},69709:function(e,t,r){r.r(t);var n=r(85597),i=r(27274),a=r(7961),o=r(6867),l=r(81719),s=r(62097),d=r(67294),c=r(93836),p=r(42977),m=r(17563);let u=(0,l.ZP)(a.Z,{name:"AvatarWrapper"})(({theme:e})=>({borderWidth:"thin",borderStyle:"solid",borderColor:e.palette.border.secondary})),g=(0,l.ZP)(n.rUS,{name:"Link"})(({theme:e})=>({"&:hover":{textDecoration:"none"}})),h=(0,l.ZP)(o.Z,{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({"& .MuiBadge-badge":{...0===t&&{display:"none"},...1===t&&{color:e.palette.success.main,backgroundColor:e.palette.success.main},...2===t&&{color:e.palette.warning.main,backgroundColor:e.palette.warning.main},...3===t&&{color:e.palette.error.main,backgroundColor:e.palette.error.main},boxShadow:"dark"===e.palette.mode?"none":`0 0 0 2px ${e.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}}})),f=(0,l.ZP)("div",{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"relative",width:"32px",height:"32px",...t&&{width:t,height:t}})),v=(0,l.ZP)(a.Z,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"absolute",bottom:0,left:0,width:"26px",height:"26px",backgroundColor:"dark"===e.palette.mode?e.palette.grey["600"]:e.palette.grey["300"],borderWidth:1,borderStyle:"solid",borderColor:"light"===e.palette.mode?e.palette.grey["50"]:e.palette.grey["800"],zIndex:2,...t&&{width:t-6,height:t-6}})),x=(0,l.ZP)(a.Z,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"relative",top:-2,left:6,width:"26px",height:"26px",...t&&{width:`${t-6}px !important`,height:`${t-6}px !important`}}));t.default=(0,d.memo)(function({username:e="Name",name:t="Name",src:r,size:o,to:l,onClick:b,status:y=0,room:w,uploadLocal:P=!1,roomType:Z=null,avatarETag:O,hoverCard:k=!1,component:E="span",target:_="_self"}){var I,C;let{getSetting:A}=(0,n.OgA)(),M=(0,s.Z)(),T=Z||(null==w?void 0:w.t),z=(0,i.vK)(t),R={width:o,height:o,color:M.palette.grey["50"],fontSize:o/3},S=A("chatplus"),$=null==S?void 0:null===(I=S.server)||void 0===I?void 0:I.replace(/\/$/,""),F=r;if(F||(F=O?`${$}/avatar/${e}?${m.stringify({etag:O})}`:""),z&&(R.backgroundColor=i.kU.hex(z)),l)return d.createElement(g,{target:_,to:l||`/${e}`},d.createElement(u,{src:F,alt:t,style:R,component:E,children:z}));if([c.n.Private,c.n.Public].includes(T)){if(P)return d.createElement(u,{src:F,alt:t,style:R,component:E,children:z});if(null==w?void 0:w.avatarETag)return F=`${$}/avatar/room/${null==w?void 0:w.id}?${m.stringify({etag:null==w?void 0:w.avatarETag})}`,d.createElement(u,{src:F,alt:t,style:R,component:E,children:z});{let B=`${$}/avatar/${null==w?void 0:null===(C=w.u)||void 0===C?void 0:C.username}`;return d.createElement(f,{sizeProps:o},d.createElement(v,{sizeProps:o,src:B,alt:t,component:E,children:z}),d.createElement(x,{sizeProps:o,src:F,alt:t,style:R,component:E,children:z}))}}if(T===c.n.Direct&&y){let W=(0,p.xW)(y);return d.createElement(h,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",status:W},d.createElement(a.Z,{src:F,alt:t,style:R,component:E,children:z,hoverCard:k}))}return d.createElement(u,{src:F,alt:t,style:R,component:E,children:z,onClick:b,to:e,hoverCard:k})})},83940:function(e,t,r){var n=r(93836),i=r(67294),a=r(69709);t.Z=(0,i.memo)(function({username:e,name:t,size:r="sm",status:o=null,room:l=null,avatarETag:s,hoverCard:d}){return i.createElement(a.default,{username:e,size:r,name:t,roomType:n.n.Direct,status:o,room:l,avatarETag:s,hoverCard:d})})},96211:function(e,t,r){var n=r(40684),i=r(85597),a=r(81719),o=r(67294);let l=(0,a.ZP)("audio",{slot:"AudioPre"})(({theme:e})=>({visibility:"hidden",height:0})),s=(0,a.ZP)("div",{slot:"uiChatAudioCustom",shouldForwardProp:e=>"isPageAllMessages"!==e&&"msgType"!==e&&"isOwner"!==e&&"isOther"!==e})(({theme:e,isPageAllMessages:t,msgType:r,isOwner:n,isOther:i})=>({width:"300px",maxWidth:"100%",...("message_pinned"===r||"message_unpinned"===r||i)&&{width:n?"177px":"137px"},...("message_pinned"===r||"message_unpinned"===r||i)&&t&&{width:"200px"},"& .rhap_container":{borderRadius:"4px",boxSizing:"border-box",display:"flex",flexDirection:"column",lineHeight:1,fontFamily:"inherit",width:"100%",padding:"10px 15px",backgroundColor:"#fff",boxShadow:"0 0 3px 0 rgba(0, 0, 0, 0.2)"},"& .rhap_main":{display:"flex",flexDirection:"column",flex:"1 1 auto","& .rhap_button-clear":{backgroundColor:"transparent",border:"none",padding:0,overflow:"hidden",cursor:"pointer"}},"& .rhap_progress-section":{display:"flex",flex:"3 1 auto",alignItems:"center","& .rhap_time":{color:"#555555",userSelect:"none",fontSize:t?"16px":"12px"},"& .rhap_progress-container":{display:"flex",alignItems:"center",height:"20px",flex:"1 0 auto",alignSelf:"center",margin:"0 calc(11px)",cursor:"pointer",userSelect:"none","& .rhap_progress-bar-show-download":{backgroundColor:"rgba(221, 221, 221, 0.5)"},"& .rhap_progress-bar":{boxSizing:"border-box",position:"relative",zIndex:0,width:"100%",height:"5px",backgroundColor:"#dddddd",borderRadius:"2px","& .rhap_progress-indicator":{boxSizing:"border-box",position:"absolute",zIndex:3,width:"20px",height:"20px",marginLeft:"-10px",top:"-8px",background:"#868686",borderRadius:"50px",boxShadow:"rgb(134 134 134 / 50%) 0 0 5px"},"& .rhap_progress-filled":{height:"100%",position:"absolute",zIndex:2,backgroundColor:"#868686",borderRadius:"2px",left:0},"& .rhap_download-progress":{width:"100%",height:"100%",position:"absolute",zIndex:1,backgroundColor:"#dddddd",borderRadius:"2px"}}}},"& .rhap_controls-section":{marginTop:"8px",flex:"1 1 auto",display:"flex",alignItems:"center",justifyContent:"space-between","& .rhap_additional-controls":{display:"none",flex:"1 1 auto",alignItems:"center"},"& .rhap_main-controls":{paddingRight:"8px",flex:"none",display:"flex",alignItems:"center",justifyContent:"center","& .rhap_play-pause-button":{fontSize:"40px",width:"40px",height:"40px"},"& .rhap_main-controls-button":{margin:"0 3px",color:"#868686",fontSize:"35px",width:"35px",height:"35px",display:"inline-flex",alignItems:"center"}},"& .rhap_volume-controls":{flex:1,minWidth:0,flexBasis:"auto",paddingRight:"8px",display:"flex",alignItems:"center",justifyContent:"flex-end","& .rhap_volume-container":{display:"flex",alignItems:"center",flex:"0 1 100px",userSelect:"none","& .rhap_volume-button":{flex:"0 0 26px",fontSize:"26px",width:"26px",height:"26px",color:"#868686",marginRight:"6px"},"& .rhap_volume-bar-area":{display:"flex",alignItems:"center",width:"100%",height:"14px",cursor:"pointer","& .rhap_volume-bar":{boxSizing:"border-box",position:"relative",width:"100%",height:"4px",background:"#dddddd",borderRadius:"2px","& .rhap_volume-indicator":{boxSizing:"border-box",position:"absolute",width:"12px",height:"12px",marginLeft:"-6px",left:0,top:"-4px",background:"#868686",opacity:.9,borderRadius:"50px",boxShadow:"rgb(134 134 134 / 50%) 0 0 3px",cursor:"pointer"}}}}}}})),d=(0,n.ZP)({resolved:{},chunkName(){return"AudioPlayer"},isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:()=>r.e("AudioPlayer").then(r.bind(r,8886)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>{return this.resolved[t]=!0,e})},requireSync(e){let t=this.resolve(e);return r(t)},resolve(){return 8886}});t.Z=o.memo(function({audio_url:e,msgType:t,isOwner:r,isOther:n}){let{usePageParams:a,useMediaPlaying:c}=(0,i.OgA)(),p=a(),m=(null==p?void 0:p.rid)||!1,u=o.useRef(),g=`msg-audio-${e}`,[h,f]=c(g),v=()=>{f(!0)},x=()=>{f(!1)},b=()=>{f(!1)};return o.useEffect(()=>{if(!h){var e,t,r;f(!1),(null===(e=u.current)||void 0===e?void 0:null===(t=e.audio)||void 0===t?void 0:t.current)&&(null===(r=u.current.audio.current)||void 0===r||r.pause())}},[g,h]),o.createElement(s,{isPageAllMessages:m,msgType:t,isOwner:r,isOther:n},o.createElement(l,{controls:!0,src:e,preload:"metadata"}),o.createElement(d,{ref:u,src:e,preload:"metadata",onPlay:v,onPause:x,onEnded:b}))},(e,t)=>{return(null==e?void 0:e.audio_url)===(null==t?void 0:t.audio_url)})},71348:function(e,t,r){r.d(t,{Z:function(){return I}});var n=r(85597),i=r(67294),a=r(96211),o=r(81719);let l="MsgAttachmentImage",s=(0,o.ZP)("div",{name:l})(({theme:e})=>({position:"relative",width:"100%"})),d=(0,o.ZP)("figure",{name:l})(({theme:e})=>({margin:0,display:"block"})),c=(0,o.ZP)("div",{name:l,shouldForwardProp:e=>"isOwner"!==e&&"isPageAllMessages"!==e})(({theme:e,isOwner:t,isPageAllMessages:r})=>({width:"144px",maxWidth:"100%",cursor:"pointer",...t&&{width:"186px"},...r&&{width:"300px"}})),p=(0,o.ZP)("img",{name:l})(({theme:e})=>({position:"absolute",left:0,top:0,width:"100%",borderRadius:e.spacing(1)}));function m({isOwner:e,title:t,image_url:r,image_dimensions:a}){let{chatplus:o,usePageParams:l}=(0,n.OgA)(),m=l(),u=(null==m?void 0:m.rid)||!1,g=!!a&&a.height/a.width;return i.createElement(s,{className:"uiMsgAttachmentImgWrapper"},i.createElement(d,null,i.createElement(c,{isOwner:!!e,isPageAllMessages:u,style:{paddingBottom:`${g?100*g:100}%`}},i.createElement(p,{src:`${o.sanitizeRemoteFileUrl(r)}&width=300`,onClick:e=>{o.presentImageView(e,{id:"img0",src:o.sanitizeRemoteFileUrl(r)})},alt:t}))))}let u="MsgAttachmentImage",g=(0,o.ZP)("div",{name:u,slot:"UIMsgAttachmentImgWrapper"})(({theme:e})=>({position:"relative",width:"100%"})),h=(0,o.ZP)("figure",{name:u})(({theme:e})=>({margin:0,display:"block"})),f=(0,o.ZP)("div",{name:u,shouldForwardProp:e=>"isOwner"!==e&&"isPageAllMessages"!==e&&"typeGridLayout"!==e&&"msgType"!==e&&"isOther"!==e})(({theme:e,isOwner:t,isPageAllMessages:r,typeGridLayout:n,msgType:i,isOther:a})=>({width:"94px",height:"94px",maxWidth:"100%",cursor:"pointer",marginBottom:"1px",..."type-2"===n&&!t&&{width:"72px",height:"72px"},..."type-1"===n&&{width:"52px",height:"52px"},..."type-1"===n&&t&&{width:"62px",height:"62px"},...("message_pinned"===i||"message_unpinned"===i||a)&&"type-2"===n&&{width:"84px",height:"84px"},...("message_pinned"===i||"message_unpinned"===i||a)&&"type-2"===n&&!t&&{width:"62px",height:"62px"},...("message_pinned"===i||"message_unpinned"===i||a)&&"type-1"===n&&{width:"45px",height:"45px"},...("message_pinned"===i||"message_unpinned"===i||a)&&"type-1"===n&&t&&{width:"58px",height:"58px"},...r&&"type-2"===n&&{width:"190px",height:"190px"},...r&&"type-1"===n&&{width:"126px",height:"126px"},...("message_pinned"===i||"message_unpinned"===i||a)&&r&&"type-2"===n&&{width:"120px",height:"120px"},...("message_pinned"===i||"message_unpinned"===i||a)&&r&&"type-1"===n&&{width:"100px",height:"100px"}})),v=(0,o.ZP)("img",{name:u,shouldForwardProp:e=>"typeGridLayout"!==e})(({theme:e,typeGridLayout:t})=>({position:"absolute",left:0,top:0,width:"100%",objectFit:"cover",borderRadius:e.spacing(1),...t&&{width:"98%",height:"98%"}}));function x({image_url:e,images:t,keyIndex:r,isOwner:a,typeGridLayout:o,msgType:l,isOther:s}){let{chatplus:d,usePageParams:c}=(0,n.OgA)(),p=c(),m=(null==p?void 0:p.rid)||!1,u=t&&t.length?t.map((e,t)=>{return{id:t,src:d.sanitizeRemoteFileUrl(e.image_url)}}):[];return i.createElement(g,null,i.createElement(h,null,i.createElement(f,{isOwner:!!a,isPageAllMessages:m,typeGridLayout:o,msgType:l,isOther:s},i.createElement(v,{typeGridLayout:o,src:`${d.sanitizeRemoteFileUrl(e)}&width=150`,onClick:t=>{d.presentImageView(t,{id:parseInt(r),src:d.sanitizeRemoteFileUrl(e)},u)},alt:"dwq"}))))}var b=r(16473);let y="MsgAttachmentVideo",w=(0,o.ZP)("figure",{name:y})(({theme:e})=>({margin:0,display:"block"})),P=(0,o.ZP)("video",{slot:"AudioPre"})(({theme:e})=>({visibility:"hidden",height:0})),Z=(0,o.ZP)("video",{name:y,slot:"VideoStyled",shouldForwardProp:e=>"isPageAllMessages"!==e})(({theme:e,isPageAllMessages:t})=>({width:"186px",maxWidth:"100%",display:"inline-block",...t&&{width:"300px"}})),O=(0,o.ZP)("div",{name:y,slot:"VideoPreviewWrapper",shouldForwardProp:e=>"isOwner"!==e&&"isPageAllMessages"!==e})(({theme:e,isOwner:t,isPageAllMessages:r})=>({width:"144px",maxWidth:"100%",position:"relative",cursor:"pointer",...t&&{width:"186px"},...r&&{width:"300px"}})),k=(0,o.ZP)("span",{name:y,slot:"VideoPreviewSrc"})(({theme:e})=>({display:"block",position:"relative",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundOrigin:"border-box",border:"1px solid rgba(0, 0, 0, 0.1)","&:before":{content:'""',display:"block",paddingBottom:"56.25%"}})),E=(0,o.ZP)(b.zb,{name:y,slot:"CustomPlayButton"})({position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",fontSize:"40px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,background:"rgba(0, 0, 0, 0.3)",color:"#fff",pointerEvents:"none"});var _=i.memo(function({video_url:e,thumb_url:t,isOwner:r}){let{chatplus:a,usePageParams:o,useMediaPlaying:l}=(0,n.OgA)(),s=o(),d=(null==s?void 0:s.rid)||!1,[c,p]=i.useState(!1),m=i.useRef(),u=`msg-video-${e}`,[g,h]=l(u),f=()=>{h(!0)},v=()=>{h(!1)},x=()=>{h(!1)};return(i.useEffect(()=>{if(!g){var e;h(!1),m.current&&(null===(e=m.current)||void 0===e||e.pause())}},[u,g]),c)?i.createElement(w,null,i.createElement(P,{src:a.sanitizeRemoteFileUrl(e)}),i.createElement(Z,{ref:m,isPageAllMessages:d,src:a.sanitizeRemoteFileUrl(e),controls:!0,autoPlay:!0,onPlay:f,onPause:v,onEnded:x})):i.createElement(O,{isOwner:r,isPageAllMessages:d,onClick:()=>p(!0)},i.createElement(k,{style:{backgroundImage:`url(${t})`}}),i.createElement(E,{icon:"ico-play-circle-o"}))},(e,t)=>{return(null==e?void 0:e.video_url)===(null==t?void 0:t.video_url)});function I({image_url:e,image_dimensions:t,video_url:r,title:o,video_type:l,video_thumb_url:s,audio_url:d,layout:c,totalImages:p,isOwner:u,typeGridLayout:g,msgType:h,isOther:f,keyIndex:v}){let{chatplus:b}=(0,n.OgA)();return d?i.createElement(a.Z,{audio_url:b.sanitizeRemoteFileUrl(d),msgType:h,isOwner:u,isOther:f}):r?i.createElement(_,{isOwner:u,video_url:r,video_type:b.sanitizeRemoteFileUrl(l),thumb_url:b.sanitizeRemoteFileUrl(s)}):e&&"multi-image"===c?i.createElement(x,{title:o,images:p,image_url:e,isOwner:u,typeGridLayout:g,msgType:h,isOther:f,keyIndex:v}):e?i.createElement(m,{isOwner:u,title:o,image_dimensions:t,image_url:e}):null}},72637:function(e,t,r){r.d(t,{Z:function(){return z}});var n=r(67294),i=r(39312),a=r(38781),o=r(42977),l=r(85597),s=r(16473),d=r(30120),c=r(81719),p=r(83940),m=r(71348);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let g="MsgAttachmentMultiMedia",h=(0,c.ZP)("div",{name:g,slot:"uiMsgImageAttachmentWrapper",shouldForwardProp:e=>"isOwner"!==e})(({theme:e,isOwner:t})=>({display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:t?"flex-end":"flex-start",marginTop:e.spacing(.25)})),f=(0,c.ZP)("div",{name:g,slot:"uiMsgImageAttachmentItem",shouldForwardProp:e=>"typeGridLayout"!==e&&"isPageAllMessages"!==e&&"isLastItem"!==e})(({theme:e,typeGridLayout:t,isPageAllMessages:r,isLastItem:n})=>({..."type-1"===t&&{flexBasis:"33.333333%"},..."type-2"===t&&{flexBasis:"50%"}}));function v({mediaItems:e,isOwner:t,msgType:r,isOther:i}){let{usePageParams:a}=(0,l.OgA)(),o=a(),s=(null==o?void 0:o.rid)||!1,d=e.length,c=d%3==0?"type-1":d%3==1?"type-1":"type-2";return n.createElement(h,{isOwner:t},e.map((a,o)=>n.createElement(f,{typeGridLayout:c,isPageAllMessages:s,isLastItem:o===e.length-1,key:`k${o}`},n.createElement(m.Z,u({},a,{layout:"multi-image",keyIndex:o,totalImages:e,typeGridLayout:c,isOwner:t,msgType:r,isOther:i})))))}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let b="MsgAttachment",y=(0,c.ZP)("div",{name:b,slot:"UIMsgAttachment",shouldForwardProp:e=>"isOwner"!==e&&"isAudio"!==e&&"isTypeFile"!==e&&"isOther"!==e&&"msgType"!==e})(({theme:e,isOwner:t,isAudio:r,isTypeFile:n,isOther:i,msgType:a})=>({maxWidth:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:e.spacing(.5),marginTop:e.spacing(.25),overflow:"hidden",...(r||"message_pinned"===a||"message_unpinned"===a||i)&&{backgroundColor:e.palette.grey["100"],..."dark"===e.palette.mode&&{backgroundColor:e.palette.grey["600"]},padding:e.spacing(.5,.75),borderRadius:e.spacing(1.25),"& a":{color:t?"#fff":e.palette.text.primary,textDecoration:"underline",cursor:"pointer"},...t&&{backgroundColor:e.palette.primary.main,color:"#fff !important"}}})),w=(0,c.ZP)("div",{name:b,slot:"TitleStyled",shouldForwardProp:e=>"isOwner"!==e&&"isVideo"!==e&&"isImage"!==e&&"isAudio"!==e&&"isTypeFile"!==e})(({theme:e,isOwner:t,isVideo:r,isImage:n,isAudio:i,isTypeFile:a})=>({display:"none"})),P=(0,c.ZP)("div",{name:b,slot:"TitleLinkStyled",shouldForwardProp:e=>"isOwner"!==e&&"isVideo"!==e&&"isImage"!==e&&"isAudio"!==e&&"isTypeFile"!==e})(({theme:e,isOwner:t,isVideo:r,isImage:n,isAudio:i,isTypeFile:a})=>({borderRadius:e.spacing(1),fontSize:e.spacing(1.75),padding:e.spacing(1),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block",maxWidth:"100%",wordBreak:"break-word",wordWrap:"break-word",backgroundColor:e.palette.grey["100"],..."dark"===e.palette.mode&&{backgroundColor:e.palette.grey["600"]},...t&&{backgroundColor:e.palette.primary.main,color:"#fff"},...(r||n)&&{display:"none"},...i&&{width:"300px"}})),Z=(0,c.ZP)("div",{name:b,slot:"DescriptionStyled",shouldForwardProp:e=>"isOwner"!==e&&"isVideo"!==e})(({theme:e,isOwner:t,isVideo:r})=>({backgroundColor:e.palette.grey["100"],..."dark"===e.palette.mode&&{backgroundColor:e.palette.grey["600"]},borderRadius:e.spacing(1),fontSize:e.spacing(1.75),padding:e.spacing(1),display:"inline-block",...t&&{backgroundColor:e.palette.primary.main,color:"#fff"}})),O=(0,c.ZP)("div")(({theme:e})=>({cursor:"pointer","& .ico":{marginRight:e.spacing(1)}})),k=(0,c.ZP)("div",{name:b,slot:"uiMsgAttachmentAuthor"})(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center","& .MuiAvatar-root":{fontSize:`${e.spacing(1)} !important`},strong:{padding:e.spacing(0,.5,0,.25)}})),E=(0,c.ZP)("div",{name:b,slot:"uiMsgAttachmentFlex"})(({theme:e})=>({textAlign:"start"})),_=(0,c.ZP)("div",{name:b,slot:"uiMsgAttachmentText"})(({theme:e})=>({margin:e.spacing(.5,0)})),I=(0,c.ZP)("div",{name:b,slot:"UIMsgAttachmentTextDelete"})(({theme:e})=>({margin:e.spacing(.5),marginLeft:0,fontStyle:"italic"})),C=(0,c.ZP)("div",{name:b,slot:"uiMsgAttachmentInfoWrapper",shouldForwardProp:e=>"msgType"!==e&&"isOther"!==e})(({theme:e,msgType:t,isOther:r})=>({...("message_pinned"===t||"message_unpinned"===t||r)&&{borderLeft:"2px solid #a2a2a2",paddingLeft:e.spacing(1)}})),A=(0,c.ZP)(s.Ys,{name:b,slot:"uiMsgAttachmentLink"})(({theme:e})=>({cursor:"pointer","& .ico":{marginRight:e.spacing(1)}}));function M({mentions:e=[],title:t,author_real_name:r,author_name:c,author_id:u,text:g,image_url:h,image_dimensions:f,audio_url:b,video_url:M,video_type:T,title_link:z,description:R,video_thumb_url:S,attachments:$,type:F,layout:B,isOwner:W,msgType:L,t:j}){let{chatplus:U,i18n:D}=(0,l.OgA)(),N="file"===F,{count:V,data:H}=(0,o.HT)($),Q=(0,i.ID)(u);return n.createElement(y,{isOwner:W,isAudio:!!b,isTypeFile:!!N,isOther:!b&&!N,msgType:L},n.createElement(C,{msgType:L,isOther:!b&&!N},c?n.createElement(k,null,n.createElement(p.Z,{size:16,name:(null==Q?void 0:Q.name)||c,username:(null==Q?void 0:Q.username)||c,avatarETag:null==Q?void 0:Q.avatarETag}),n.createElement("strong",null,r||c)):null,n.createElement(E,null,"rm"===j?n.createElement(I,null,D.formatMessage({id:"message_was_deleted"})):null,g&&"rm"!==j?n.createElement(_,{dangerouslySetInnerHTML:{__html:(0,a.ZP)(g,{mentions:e})}}):null,$&&$.length?n.createElement(d.Z,{mt:1},V>1?n.createElement(v,{mediaItems:H,isOwner:W,msgType:L,isOther:!b&&!N}):n.createElement(n.Fragment,null,$.map((e,t)=>n.createElement(n.Fragment,{key:`k${t}`},e.video_url||e.image_url||e.audio_url?n.createElement(m.Z,x({},e,{key:`k${t}`,msgType:L,isOther:!b&&!N})):n.createElement(n.Fragment,null,e.title_link?n.createElement(A,{lines:1},n.createElement("div",{onClick:()=>(0,o.Sv)(U.sanitizeRemoteFileUrl(e.title_link),!0)},n.createElement(s.zb,{icon:"ico-arrow-down-circle"}),e.title)):null))))):null)),t?n.createElement(w,{isOwner:W,isVideo:!!M,isImage:!!h,isAudio:!!b,isTypeFile:!!N},t):null,n.createElement(m.Z,{image_url:h,video_url:M,audio_url:b,title:t,video_type:T,video_thumb_url:S,layout:B,image_dimensions:f,isOwner:W}),z?n.createElement(P,{isOwner:W,isVideo:!!M,isImage:!!h,isAudio:!!b,isTypeFile:!!N},n.createElement(O,{onClick:()=>(0,o.Sv)(U.sanitizeRemoteFileUrl(z),!0)},n.createElement("i",{className:"ico ico-arrow-down-circle mr-1"}),t)):null,R?n.createElement(Z,{isOwner:W,isVideo:!!M,isImage:!!h,isAudio:!!b,isTypeFile:!!N},R):null)}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function z({message:e,isOwner:t,msgType:r,dataQuote:i,isQuote:a}){var o;if(!(null===(o=e.attachments)||void 0===o?void 0:o.length))return null;let l=e.attachments;if(a&&i&&(l=l.filter(e=>!e.message_id)),!l&&!l.length)return null;let s=l.filter(e=>e.image_url);return s.length>1?n.createElement(v,{mediaItems:s,isOwner:t}):l.map((e,i)=>n.createElement(M,T({},e,{key:`k${i}`,isOwner:t,msgType:r})))}},32990:function(e,t,r){r.r(t),r.d(t,{checkIsQuote:function(){return T},default:function(){return z}});var n=r(38781),i=r(81719),a=r(38790),o=r(41609),l=r.n(o),s=r(67294),d=r(72637),c=r(28838),p=r(42977),m=r(85597),u=r(16473),g=r(91647),h=r(71348);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let v="MsgQuote",x=(0,i.ZP)("div",{name:v,slot:"UIMsgAttachment",shouldForwardProp:e=>"isOwner"!==e&&"isAudio"!==e&&"isTypeFile"!==e&&"isOther"!==e&&"msgType"!==e})(({theme:e,isOwner:t,isAudio:r,isTypeFile:n,isOther:i,msgType:a})=>({marginBottom:e.spacing(-2),marginLeft:e.spacing(1),marginRight:0,marginTop:e.spacing(.25),paddingBottom:e.spacing(3),maxWidth:"calc(100% - 8px)",display:"flex",flexDirection:"row",overflow:"hidden",border:e.mixins.border("secondary"),borderRadius:e.spacing(1),minHeight:"70px",...(r||"message_pinned"===a||"message_unpinned"===a||i)&&{"& a":{color:e.palette.text.primary,textDecoration:"underline",cursor:"pointer"},...t&&{color:e.palette.text.secondary,marginRight:e.spacing(1),marginLeft:0}}})),b=(0,i.ZP)("div",{name:v,slot:"uiMsgAttachmentAuthor"})(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center","& .MuiAvatar-root":{fontSize:`${e.spacing(1)} !important`}})),y=(0,i.ZP)(g.Z)(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A200:e.palette.text.primary})),w=(0,i.ZP)("div",{name:v,slot:"uiMsgAttachmentFlex"})(({theme:e})=>({textAlign:"start"})),P=(0,i.ZP)(u.Ys,{name:v,slot:"uiMsgAttachmentText"})(({theme:e})=>({color:e.palette.text.secondary})),Z=(0,i.ZP)("div",{name:v,slot:"UIMsgAttachmentTextDelete"})(({theme:e})=>({margin:e.spacing(.5),marginLeft:0,fontStyle:"italic"})),O=(0,i.ZP)("div",{name:v,slot:"uiMsgAttachmentInfoWrapper",shouldForwardProp:e=>"msgType"!==e&&"isOther"!==e})(({theme:e,msgType:t,isOther:r})=>({...("message_pinned"===t||"message_unpinned"===t||r)&&{overflow:"hidden",margin:e.spacing(1,1,0,0)}})),k=(0,i.ZP)(u.Ys,{name:v,slot:"uiMsgAttachmentLink"})(({theme:e})=>({"& .ico":{fontSize:e.mixins.pxToRem(12),marginRight:e.spacing(.5)}})),E=(0,i.ZP)("div")(({theme:e})=>({width:e.spacing(.5),height:"100%",backgroundColor:e.palette.grey["100"]})),_=(0,i.ZP)("div")(({theme:e})=>({width:e.spacing(3),minWidth:e.spacing(3),marginTop:e.spacing(1.5),display:"flex",justifyContent:"center",alignItems:"center"}));function I({dataQuote:e,isOwner:t}){let{chatplus:r,i18n:i}=(0,m.OgA)();if(!e)return null;let{mentions:a=[],author_real_name:o,author_name:l,text:d,audio_url:c,attachments:g,type:v,msgType:I,t:C}=e,A="file"===v,{count:M}=(0,p.HT)(g);return s.createElement(x,{isOwner:t,isAudio:!!c,isTypeFile:!!A,isOther:!c&&!A,msgType:I},s.createElement(_,null,s.createElement(E,null)),s.createElement(O,{msgType:I,isOther:!c&&!A},l?s.createElement(b,null,s.createElement(y,{component:"h2",variant:"h5"},o||l)):null,s.createElement(w,null,"rm"===C?s.createElement(Z,null,i.formatMessage({id:"message_was_deleted"})):null,d&&"rm"!==C?s.createElement(P,{lines:1,dangerouslySetInnerHTML:{__html:(0,n.ZP)(d,{mentions:a})}}):null,!d&&g&&g.length?s.createElement("div",{className:"mt-1"},M>1?s.createElement(P,{lines:1},i.formatMessage({id:"total_photo"},{value:M})):s.createElement(s.Fragment,null,g.map((e,t)=>{return s.createElement(s.Fragment,{key:`k${t}`},e.video_url||e.image_url?s.createElement(h.Z,f({},e,{key:`k${t}`,msgType:I,isOther:!c&&!A})):e.audio_url?s.createElement(P,{lines:1},(null==e?void 0:e.title)||i.formatMessage({id:"file_attachment"})):s.createElement("div",null,e.title_link?s.createElement(k,{lines:1},s.createElement("div",{onClick:()=>(0,p.Sv)(r.sanitizeRemoteFileUrl(e.title_link),!0)},s.createElement(u.zb,{icon:"ico-paperclip-alt"}),e.title)):null))}))):null)))}let C="MessageText",A=(0,i.ZP)("div",{name:C,slot:"uiChatMsgItemMsg",shouldForwardProp:e=>"isOwner"!==e&&"isQuote"!==e&&"isMention"!==e})(({theme:e,isOwner:t,isQuote:r,isMention:n})=>({borderRadius:e.spacing(1),fontSize:e.mixins.pxToRem(15),padding:e.spacing(1.25),display:"flex",alignItems:"center",backgroundColor:e.palette.grey["100"],..."dark"===e.palette.mode&&{backgroundColor:e.palette.grey["600"]},overflowWrap:"break-word","& a":{overflowWrap:"break-word",color:t?"#fff":e.palette.text.primary,textDecoration:"underline",cursor:"pointer",...n&&{textDecoration:"none","&:hover":{textDecoration:"underline"}}},...t&&{backgroundColor:e.palette.primary.main,color:"#fff !important"}})),M=(0,i.ZP)("div",{name:C,slot:"uiChatMsgItemBodyInnerWrapper",shouldForwardProp:e=>"isOwner"!==e})(({theme:e,isOwner:t})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",...t&&{alignItems:"flex-end"}})),T=e=>{var t;let r=e&&e.length&&(null===(t=e[e.length-1])||void 0===t?void 0:t.type)!=="file";if(!r)return{isQuote:r,dataQuote:null};{let n=e.filter(e=>e.message_id);return{isQuote:r,dataQuote:n?n[0]:null}}};function z({message:e,isOwner:t,createdDate:r,tooltipPosition:i}){let o=e.msg?(0,n.ZP)(e.msg,{mentions:e.mentions}):null,{isQuote:p,dataQuote:m}=T(null==e?void 0:e.attachments);return s.createElement(a.Z,{title:r,placement:i,PopperProps:{disablePortal:!0}},s.createElement(M,{isOwner:t},p?s.createElement(I,{dataQuote:m,isOwner:t}):null,o?s.createElement(A,{isMention:!l()(e.mentions),isQuote:p,isOwner:t,className:"uiChatMsgItemMsg"},s.createElement("div",{dangerouslySetInnerHTML:{__html:o}})):null,s.createElement(d.Z,{message:e,isOwner:t,isQuote:p,dataQuote:m}),s.createElement(c.Z,{message:e})))}},28838:function(e,t,r){r.d(t,{Z:function(){return y}});var n=r(67294),i=r(42977),a=r(16473),o=r(81719),l=r(41609),s=r.n(l);let d="MsgEmbed",c=(0,o.ZP)("div",{name:d,slot:"uiMsgEmbed"})(({theme:e})=>({marginTop:"4px",marginBottom:"8px",width:"400px",maxWidth:"100%",cursor:"pointer"})),p=(0,o.ZP)("div",{name:d,slot:"uiMsgEmbedOuter"})(({theme:e})=>({display:"flex",flexDirection:"column",borderRadius:"8px",border:e.mixins.border("secondary"),color:"#555555"})),m=(0,o.ZP)("div",{name:d,slot:"ItemMedia"})(({theme:e})=>({width:"100%"})),u=(0,o.ZP)("div",{name:d,slot:"ItemMediaSrc"})(({theme:e})=>({width:"100%",display:"block",position:"relative",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundOrigin:"border-box",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"8px 8px 0 0",backgroundColor:"transparent",borderBottom:"1px solid rgba(0, 0, 0, 0.1)","&:before":{content:"''",display:"block",paddingBottom:"56%"}})),g=(0,o.ZP)("div",{name:d,slot:"ItemInner"})(({theme:e})=>({flex:1,minWidth:0,padding:"8px"})),h=(0,o.ZP)(a.Ys,{name:d,slot:"ItemTitle"})(({theme:e})=>({marginBottom:"2px",color:"light"===e.palette.mode?e.palette.grey["900"]:e.palette.text.primary})),f=(0,o.ZP)(a.Ys,{name:d,slot:"ItemUrl"})(({theme:e})=>({marginBottom:"2px",color:e.palette.text.secondary})),v=(0,o.ZP)(a.Ys,{name:d,slot:"ItemDescription"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey["900"]:e.palette.text.primary}));function x({url:e,meta:t,parsedUrl:r,ignoreParse:a}){let o=!a&&(t&&!s()(t)||r&&!s()(r));if(!o)return null;let{ogTitle:l,ogDescription:d,ogImage:x,oembedThumbnailUrl:b,oembedTitle:y,oembedDescription:w}=t,P=r.host,Z=l||y,O=d||w;return n.createElement(c,null,n.createElement(p,{onClick:()=>(0,i.Sv)(e,!0)},x||b?n.createElement(m,null,n.createElement(u,{style:{backgroundImage:`url(${x||b})`}})):n.createElement(m,null,n.createElement("span",{className:"item-media-src media-default"})),n.createElement(g,null,Z?n.createElement(h,{lines:2,variant:"h6"},Z):null,n.createElement(f,{lines:2,variant:"body2"},P),O?n.createElement(v,{lines:2,variant:"h6"},O):null)))}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y({message:e}){var t;return(null===(t=e.urls)||void 0===t?void 0:t.length)?e.urls.filter(e=>{return!(null==e?void 0:e.ignoreParse)&&e.meta&&e.parsedUrl}).map((e,t)=>n.createElement(x,b({},e,{key:`k${t}`}))):null}},38781:function(e,t,r){r.d(t,{Hj:function(){return c},ZP:function(){return p},kK:function(){return u}});var n=r(7187),i=r.n(n),a=r(42977);function o(e){return e.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br/>$2")}function l(e,t={}){let{mentions:r=[]}=t,n=e.replace(/\[(\s)*\]\(([^\)]+)\)/gm,"");return r&&r.length>0&&(n=n.replace(/@([^\s\\#@:]+)/giu,(e,t)=>{let n=r.find(e=>e.username===t);return n&&n.name?`@${n.name}`:e})),n}function s(e,t={}){let{mentions:r=[]}=t,n=e.replace(/@\[([^\]]+)\]\(([^#@:]+)\)/giu,"<a onclick=\"triggerClick('$2')\">@$1</a>");return r&&r.length>0&&(n=n.replace(/@([^\s\\#@:]+)/giu,(e,t)=>{let n=r.find(e=>e.username===t);return n&&n.name?`<a onclick="triggerClick('/${t}')">@${n.name}</a>`:e})),n}window.triggerClick=a.Sv;let d=e=>e.replace(/:\w+:/gi,e=>e),c=(e,t={})=>{return e?l(e,t):null};function p(e,t={}){var r;return e?o(d(s((r=l(e),i()(r)).replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,'<a onclick="triggerClick(\'$1\',true)" target="_blank">$1</a>'),t))):null}let m=(e={})=>{return/^(\w+)_(audio|video)_call_([cpd]$)/.test((null==e?void 0:e.t)||(null==e?void 0:e.type))};function u(e){var t;let r=null==e?void 0:e.t;return["rm"].includes(r)?[{id:"message_was_deleted"}]:m(e)?/(invite)_/.test(r)||/(start)_/.test(r)?[{id:"started_a_call"}]:/(miss)_/.test(r)?[{id:"missed_a_call"}]:[{id:"call_ended"}]:(null==e?void 0:e.msg)?o(d(s((t=l(null==e?void 0:e.msg),i()(t)),{mentions:(null==e?void 0:e.mentions)||[]}))):null}}}]);