"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-video-components-StatusComposerAddVideoButton"],{84271:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var a=n(85597),l=n(67294),o=n(57043),r=n.n(o),i=n(27361),c=n.n(i),u=n(44908),s=n.n(u),d=n(73955),f=n.n(d),m=n(27274);let h=e=>{if(!(null==e?void 0:e.length))return!1;let t=0;for(let n=0;n<e.length;++n){let a=e[n].type;(0,m.yh)(a)&&(t+=1)}return t===e.length};function p(e){let{disabled:t,control:n}=e,{i18n:o}=(0,a.OgA)(),i=l.useRef(),[u,d]=function(e,t){let{dialogBackend:n,i18n:o}=(0,a.OgA)(),i=l.useCallback(()=>{t.current.click()},[t]),u=l.useCallback(()=>{let a=t.current.files;if(!a.length)return;if(!h(a))return n.alert({message:o.formatMessage({id:"cant_add_attachment"})});let{setAttachments:l,requestComposerUpdate:i}=e.current;if(l){let u=[];for(let d=0;d<a.length;++d)u.push({uid:f()("file"),source:URL.createObjectURL(a.item(d)),file:a.item(d)});let m=c()(e.current.state,"attachments.video.value"),p=s()(r()(m,u)).filter(Boolean);l("video","video",{as:"StatusComposerControlAttatchedVideos",value:p}),i&&i()}},[]);return[u,i]}(e.composerRef,i);return l.createElement(l.Fragment,null,l.createElement(n,{onClick:d,disabled:t,testid:"buttonAttachVideo",icon:"ico-video",label:o.formatMessage({id:"video"}),title:o.formatMessage({id:t?"this_cant_be_combined":"upload_video"})}),l.createElement("input",{"data-testid":"inputAttachVideo",onChange:u,multiple:!1,ref:i,className:"srOnly",type:"file",accept:"video/*"}))}}}]);