(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-pages-blocks-ProfileHeader-Block"],{88360:function(e,t,a){var n=a(65776);e.exports=function(e,t){var a=e.length;if(a)return n(t+=t<0?a:0,a)?e[t]:void 0}},98491:function(e,t,a){var n=a(88360),i=a(40554);e.exports=function(e,t){return e&&e.length?n(e,i(t)):void 0}},70431:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var n=a(85597),i=a(38673),r=a(21241),o=a(16473),l=a(27274),c=a(7961),m=a(30120),s=a(21822),d=a(81719),p=a(91647),u=a(98491),g=a.n(u),h=a(41609),b=a.n(h),f=a(67294),v=a(71682),x=a(22410),E=a(73327),w=(0,x.Z)(e=>(0,E.Z)({root:{},profileUserWrapper:{padding:e.spacing(2),background:e.palette.background.paper,borderBottom:e.mixins.border("secondary")},userInfo:{display:"flex"},avatarWrapper:{marginTop:e.spacing(-12.5),padding:e.spacing(.5),borderRadius:"999px",background:e.palette.background.paper},avatar:{width:160,height:160,borderRadius:"999px",background:e.palette.background.default},name:{marginLeft:e.spacing(3),flex:1,minWidth:0},btn:{marginLeft:"auto"},menu:{marginBottom:e.spacing(2),background:e.palette.background.paper,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,height:e.spacing(7.5),display:"flex",alignItems:"center","& > .MuiSkeleton-root":{padding:e.spacing(2),marginLeft:e.spacing(2)}},btnGroups:{display:"flex",marginLeft:"auto",marginRight:e.spacing(2),"& .MuiSkeleton-root":{padding:e.spacing(1),marginLeft:e.spacing(1)}}}),{name:"PageProfileHeaderSkeleton"});function k(){let e=w();return f.createElement(o.W2,{maxWidth:"md",disableGutters:!0},f.createElement(v.Z,{variant:"rectangular",sx:{height:320},animation:!1}),f.createElement("div",{className:e.profileUserWrapper},f.createElement("div",{className:e.userInfo},f.createElement("div",{className:e.avatarWrapper},f.createElement("div",{className:e.avatar})),f.createElement("div",{className:e.name},f.createElement(v.Z,{variant:"text",width:200,height:42}),f.createElement(v.Z,{variant:"text",width:"50%"})),f.createElement("div",{className:e.btn},f.createElement(v.Z,{variant:"button",width:272,height:32})))),f.createElement("div",{className:e.menu},f.createElement(v.Z,{variant:"button",width:100,height:20}),f.createElement(v.Z,{variant:"button",width:100,height:20}),f.createElement(v.Z,{variant:"button",width:100,height:20}),f.createElement(v.Z,{variant:"button",width:100,height:20}),f.createElement(v.Z,{variant:"button",width:100,height:20}),f.createElement("div",{className:e.btnGroups},f.createElement(v.Z,{variant:"button",width:96,height:32}),f.createElement(v.Z,{variant:"button",width:32,height:32}),f.createElement(v.Z,{variant:"button",width:32,height:32}))))}var y=(0,x.Z)(e=>{var t,a;return(0,E.Z)({root:{},imgWraper:{height:300,overflow:"hidden"},wrapper:{display:"block"},coverPhotoWrapper:{display:"block",height:320,overflow:"hidden",position:"relative"},coverPhotoInner:{display:"block",position:"absolute",left:0,top:0,right:0,bottom:0,"& img":{position:"relative",width:"100%",objectFit:"cover"}},userContainer:{padding:e.spacing(2),backgroundColor:e.mixins.backgroundColor("paper"),[e.breakpoints.down("sm")]:{paddingBottom:0}},userInfoContainer:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%",alignItems:"center",paddingBottom:0}},userInfo:{[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%",alignItems:"center",marginBottom:e.spacing(2)}},wrapperButtonInline:{display:"flex",justifyContent:" center",alignItems:"center",flexFlow:"column",width:272,marginTop:e.spacing(.5),"& button":{height:e.spacing(4),fontSize:e.mixins.pxToRem(13),fontWeight:"bold",width:"100%","& .ico":{fontSize:e.mixins.pxToRem(15)}},"& .MuiButton-contained":{color:e.palette.text.primary,backgroundColor:e.palette.action.selected,"&:hover":{backgroundColor:e.palette.background.default},"&.MuiButton-containedPrimary":{color:"#fff",backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark}}},[e.breakpoints.down("sm")]:{flexFlow:"column wrap",minHeight:40,padding:"4px 0px",width:"100%"}},link:{width:"100%",marginTop:e.spacing(2),fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:{fontWeight:"bold",fontSize:e.mixins.pxToRem(32),color:e.palette.text.primary,margin:0,padding:0},summary:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(18),paddingTop:e.spacing(1)},avatarWrapper:{marginTop:"-96px",marginRight:e.spacing(3),position:"relative",[e.breakpoints.down("sm")]:{marginRight:0}},userAvatar:{width:"168px",height:"168px",border:"4px solid",borderColor:e.palette.background.paper},profileUserWrapper:{},wrapperMenu:{display:"flex",flexGrow:1,[e.breakpoints.down("sm")]:{width:"auto",maxWidth:"100%"}},profileMenu:{flex:1,minWidth:0,height:72},profileHeaderContainer:{},profileHeaderBottom:{backgroundColor:e.mixins.backgroundColor("paper"),borderTop:"solid 1px",borderTopColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px",overflow:"hidden",[e.breakpoints.down("sm")]:{flexWrap:"wrap",flexDirection:"column-reverse",borderTop:"none"}},actionButtons:{display:"flex",paddingRight:e.spacing(2),"& button":{marginLeft:e.spacing(1),textTransform:"capitalize",fontWeight:"bold",whiteSpace:"nowrap",borderRadius:e.spacing(.5),fontSize:e.mixins.pxToRem(13),padding:e.spacing(.5,1.25),marginBottom:e.spacing(1),minWidth:e.spacing(4),height:e.spacing(4),"& .ico":{fontSize:e.mixins.pxToRem(13)}},[e.breakpoints.down("sm")]:{width:"100%",alignItems:"center",justifyContent:"flex-start",borderBottom:"solid 1px",borderBottomColor:null===(a=e.palette.border)||void 0===a?void 0:a.secondary,"& button":{margin:e.spacing(2,0,2,2)},"& button + button":{marginLeft:e.spacing(1)}}},userStickyWrapper:{display:"flex",alignItems:"center",height:72},userAvatarSticky:{width:48,height:48,textTransform:"uppercase"},userNameSticky:{fontSize:e.mixins.pxToRem(18),fontWeight:"bold",marginLeft:e.spacing(1.5),WebkitLineClamp:2,display:"-webkit-box",padding:"0",overflow:"hidden",maxWidth:"100%",whiteSpace:"normal",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"}})},{name:"PageProfileHeader"}),Z=a(15650),C=a(86079),W=a(13585);let N=(0,d.ZP)(o.zb,{name:"FeaturedIcon"})(({theme:e})=>({color:e.palette.primary.main,marginLeft:e.spacing(2),fontSize:24}));function B({item:e,identity:t,profileMenu:a,profileActionMenu:i,blockProps:d,handleAction:u,actions:h}){let{i18n:v,usePageParams:x,ProfileHeaderCover:E,ProfileHeaderAvatar:w,ItemActionMenu:B,dispatch:I,getAcl:S,getSetting:R,useSession:T,assetUrl:z}=(0,n.OgA)(),_=T(),L=S(),M=R(),{tab:H="home"}=x(),P=y();if(!(null==e?void 0:e.statistic))return f.createElement(k,null);let{cover_photo_id:A,extra:F,full_name:U,id:j,statistic:G,cover_photo_position:O,external_link:$}=e,D=l.kU.hex((0,l.vK)(U)||""),K={item:e,acl:L,setting:M,session:_},Q=[W.uC,W.Te,W.FZ],Y=(0,l.W$)(a.items,K),q=(0,l.W$)(i.items,K),J=q.filter(e=>!Q.includes(e.name)),V=null==q?void 0:q.filter(e=>e.name===W.FZ),X=g()(q,0),ee=(0,l.Q4)(e.image,"200x200",z("page.no_image")),et=(0,l.Q4)(null==e?void 0:e.cover,"1024",z("page.cover_no_image")),ea=()=>{I({type:"page/search",payload:{identity:t}})},en=()=>{I({type:"editProfileHeaderAvatar",payload:{identity:t}})},ei=()=>{I({type:"user/showDialogLogin"})};return f.createElement(r.gO,null,f.createElement(r.sU,null,f.createElement("div",{className:P.root},f.createElement("div",{className:P.wrapper},f.createElement(m.Z,null,f.createElement(E,{identity:t,image:et,imageId:A,alt:"",left:0,top:+O||0}),f.createElement("div",{className:P.profileUserWrapper},f.createElement(o.W2,{maxWidth:"md",className:P.profileHeaderContainer,disableGutters:!0},f.createElement(m.Z,{className:P.userContainer},f.createElement("div",{className:P.userInfoContainer},f.createElement(m.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",className:P.userInfo},f.createElement(w,{alt:(0,l.vK)(e.title),canEdit:null==F?void 0:F.can_edit,onEdit:en,avatar:ee,avatarId:e.image_id}),f.createElement("div",null,f.createElement(p.Z,{variant:"h2"},e.title,e.is_featured?f.createElement(N,{icon:"ico-check-circle"}):null),f.createElement("div",{className:P.summary},e.summary,G.total_like?f.createElement(f.Fragment,null," ","\xb7"," ",f.createElement(n.rUS,{to:`/page/${e.id}/member?stab=all_members`},v.formatMessage({id:"total_like"},{value:G.total_like}))):null))),f.createElement("div",{className:P.wrapperButtonInline},X.name!==W.d3&&f.createElement(s.Z,{disabled:X.name===W.Te&&(null==e?void 0:e.is_owner),disableElevation:!0,variant:"contained",size:"medium",startIcon:f.createElement(o.zb,{icon:X.icon}),color:X.color,onClick:b()(null==_?void 0:_.user)?ei:()=>u(X.value)},X.label),$?f.createElement(n.rUS,{href:$,color:"text.hint",variant:"body1",rel:"noopener noreferrer",target:"_blank",underline:"none",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",wordBreak:"break-all","-webkit-box-orient":"vertical","-webkit-line-clamp":"1",mt:2}},$):null)),(null==e?void 0:e.is_pending)||(null==e?void 0:e.membership)?f.createElement(m.Z,{sx:{mt:2.5}},f.createElement(C.Z,{item:e,actions:h}),f.createElement(Z.Z,{item:e,actions:h})):null)),f.createElement(o.PH,null,({sticky:a})=>f.createElement(o.W2,{maxWidth:"md",disableGutters:!0,className:P.profileHeaderContainer},a?f.createElement("div",{className:P.profileHeaderBottom},f.createElement("div",{className:P.wrapperMenu},f.createElement("div",{className:P.userStickyWrapper},f.createElement(c.Z,{className:P.userAvatarSticky,src:ee,children:(0,l.vK)(e.title),style:{backgroundColor:D}}),f.createElement("div",{className:P.userNameSticky},e.title))),f.createElement("div",{className:P.actionButtons},V.map((e,a)=>f.createElement(s.Z,{key:e.label,variant:"outlined",startIcon:f.createElement(o.zb,{icon:e.icon}),color:"primary",sx:{width:"100%"},onClick:()=>I({type:e.value,payload:{identity:t}})},e.label)),f.createElement(s.Z,{variant:"outlined",color:"primary"},f.createElement(o.zb,{icon:"ico-search-o"})),f.createElement(B,{id:"actionMenu",label:"ActionMenu",handleAction:u,items:J,control:f.createElement(s.Z,{variant:"outlined",color:"primary",size:"large"},f.createElement(o.zb,{icon:"ico-dottedmore-o"}))}))):f.createElement("div",{className:P.profileHeaderBottom},f.createElement("div",{className:P.wrapperMenu},f.createElement("div",{className:P.profileMenu},f.createElement(o.DY,{items:Y,activeTab:H,prefix:`/page/${j}`,maxDisplayTab:4}))),f.createElement("div",{className:P.actionButtons},V.map((e,a)=>f.createElement(s.Z,{key:e.label,variant:"outlined",startIcon:f.createElement(o.zb,{icon:e.icon}),color:"primary",sx:{width:"100%"},onClick:()=>I({type:e.value,payload:{identity:t}})},e.label)),f.createElement(s.Z,{variant:"outlined",color:"primary",onClick:ea},f.createElement(o.zb,{icon:"ico-search-o"})),f.createElement(B,{id:"actionMenu",label:"ActionMenu",handleAction:u,items:J,control:f.createElement(s.Z,{variant:"outlined",color:"primary",size:"large"},f.createElement(o.zb,{icon:"ico-dottedmore-o"}))})))))))))))}B.LoadingSkeleton=k;let I=(0,n.Uh$)((0,n.jEo)(B,i.Z));var S=(0,n.j4Z)({name:"PageProfileHeaderBlock",extendBlock:I})}}]);