"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-advertise-blocks-Detail-Block"],{41294:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var i=a(85597),n=a(81719),l=a(30120),r=a(50130),o=a(21822),d=a(71682),m=a(67294),s=a(84635),c=a(27274),u=a(17673),p=a(95130),v=a(16473),g=a(30030);let h=({isViewChart:e,pageParamsInitSearch:t,isSearch:a})=>{let{jsxBackend:n,useIsMobile:r,useFetchDetail:o,usePageParams:d}=(0,i.OgA)(),s=r(),c=d(),u=(0,i.oHF)(p.iC,p.iC,"viewClickReport"),v=(0,i.oHF)(p.iC,p.iC,"viewImpressionReport"),h=m.useMemo(()=>{return!a&&t?t:c},[a,t,c]),[E,_]=o({dataSource:(null==h?void 0:h.view)?u:null,pageParams:h}),[b,w]=o({dataSource:(null==h?void 0:h.view)?v:null,pageParams:h}),f=m.useMemo(()=>{return[{grid:6,grid_mobile:12,icon:"ico-mouse-alt",type:p.YW,total:null==E?void 0:E.total,phrase:null==E?void 0:E.phrase,view:null==E?void 0:E.view,data:null==E?void 0:E.statistic},{grid:6,grid_mobile:12,icon:"ico-eye",type:p.g6,total:null==b?void 0:b.total,phrase:null==b?void 0:b.phrase,view:null==b?void 0:b.view,data:null==b?void 0:b.statistic}]},[E,b]),Z=n.get("advertise.itemView.itemTable"),C=n.get("advertise.itemView.itemChart");return e?m.createElement(l.Z,{sx:{my:2}},m.createElement(g.ZP,{container:!0,spacing:2},f.map(e=>m.createElement(g.ZP,{key:e.type,item:!0,xs:s?e.grid_mobile:e.grid},m.createElement(C,{data:e,loading:e.type===p.YW?_:w}))))):m.createElement(l.Z,{sx:{my:2}},m.createElement(g.ZP,{container:!0,spacing:2},f.map(e=>m.createElement(g.ZP,{key:e.type,item:!0,xs:s?e.grid_mobile:e.grid},m.createElement(Z,{data:e,loading:e.type===p.YW?_:w})))))};var E=m.memo(h),_=a(41609),b=a.n(_);let w="Detail-Advertise",f=(0,n.ZP)(l.Z,{name:w,slot:"root"})(({theme:e})=>({backgroundColor:e.palette.background.paper,padding:e.spacing(2),borderBottomLeftRadius:e.spacing(1),borderBottomRightRadius:e.spacing(1)})),Z=(0,n.ZP)(r.Z,{name:w})(()=>({transform:"translate(-7px,0)"})),C=(0,n.ZP)(l.Z,{name:w})(({theme:e})=>({margin:e.spacing(2,0)})),y=(0,n.ZP)(l.Z,{name:w})(()=>({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"})),k=(0,n.ZP)(v.zb,{name:w,shouldForwardProp:e=>"active"!==e})(({theme:e,active:t})=>({...t&&{color:e.palette.primary.main}})),x=(0,n.ZP)(l.Z,{name:w,shouldForwardProp:e=>"isFormSearch"!==e})(({theme:e,isFormSearch:t})=>({marginLeft:"auto"}));function P({detailActionMenu:e,identity:t,item:a}){var n;let{navigate:r,jsxBackend:v,i18n:g,usePageParams:h}=(0,i.OgA)(),[_,w]=m.useState(!0),P=v.get("advertise.block.itemDetailInfo"),S=(0,i.oHF)(p.iC,p.iC,"viewItem"),{id:M}=h(),[$,F]=m.useState(null),[A,I]=m.useState(!1),[R,D]=m.useState(null),U=(0,i.oHF)(p.iC,p.iC,"getChartForm"),W=(e,t)=>{let a=S.apiRules,i=e.view,n=e[`start_date_${i}`],l=e[`end_date_${i}`],o=(0,c.Su)({view:i,[`start_date_${i}`]:n,[`end_date_${i}`]:l},a);r(`?${u.stringify(o)}`,{replace:!0}),F(null),I(!0),t.setSubmitting(!1)},j=()=>{w(e=>!e)},B=()=>{},H=({data:e})=>{if(!e||!e.value)return;let t=e.value.view,a=e.value[`start_date_${t}`],i=e.value[`end_date_${t}`];F({id:M,view:t,[`start_date_${t}`]:a,[`end_date_${t}`]:i})},Y=e=>{D(e)};if(!a)return null;let z=m.createElement(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"}},m.createElement(d.Z,{animation:"wave",height:30,width:200}),m.createElement(d.Z,{animation:"wave",height:30,width:200}),m.createElement(d.Z,{animation:"wave",height:30,width:200}));return m.createElement(f,null,m.createElement(l.Z,{sx:{mb:2,mt:1}},m.createElement(i.rUS,{to:"/advertise",underline:"hover",color:"primary"},g.formatMessage({id:"back_to_all_ads"}))),m.createElement(P,{identity:t,item:a,detailActionMenu:e}),m.createElement(C,null,U&&b()(R)?m.createElement(l.Z,null,m.createElement(y,null,m.createElement(s.AO,{hideWhenError:!0,loadingComponent:z,navigationConfirmWhenDirty:!1,dataSource:{apiMethod:U.apiMethod,apiUrl:(0,c.bf)(U.apiUrl,{id:M})},onLoaded:H,onFailure:Y,onSubmit:W}),m.createElement(x,null,m.createElement(Z,{size:"small",onClick:j,role:"button",id:"back","data-testid":"buttonChart"},m.createElement(k,{active:_,icon:"ico-stats-dots"})),m.createElement(Z,{size:"small",onClick:j,role:"button",id:"back","data-testid":"buttonTable"},m.createElement(k,{active:!_,icon:"ico-th-o"})))),m.createElement(E,{isViewChart:_,pageParamsInitSearch:$,isSearch:A})):null,(null==a?void 0:null===(n=a.extra)||void 0===n?void 0:n.can_export)?m.createElement(o.Z,{onClick:B,"data-testid":"buttonExport",color:"primary",variant:"outlined"},g.formatMessage({id:"export"})):null))}P.displayName="Advertise";let S=(0,i.$jX)(e=>({detailActionMenu:e._resourceMenus.advertise.advertise.detailActionMenu.items}))(P),M=(0,i.Uh$)((0,i.YUM)(S,()=>{},{}));var $=(0,i.j4Z)({extendBlock:M})}}]);