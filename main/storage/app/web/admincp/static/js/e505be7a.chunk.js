"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-chat-components-MsgContent-MessageText"],{62335:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(81719),i=n(42097),r=n(67294);let l=(0,a.ZP)("div",{name:"MsgAttachment",slot:"UIMsgAttachment",shouldForwardProp:e=>"isOwner"!==e&&"isAudio"!==e&&"isTypeFile"!==e&&"isOther"!==e})(({theme:e})=>({maxWidth:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:e.spacing(.5),marginTop:e.spacing(.25),overflow:"hidden"}));function o({item:e,isOwner:t}){let{is_image:n,image:a,file_name:o,download_url:s,file_size_text:m}=e;return r.createElement(l,{isOwner:t},r.createElement(i.Z,{isOwner:t,image:a,is_image:n,download_url:s,file_name:o,file_size_text:m}))}},42097:function(e,t,n){n.d(t,{Z:function(){return Z}});var a=n(2475),i=n(81719),r=n(67294),l=n(85597),o=n(27274);let s="MsgAttachmentImage",m=(0,i.ZP)("div",{name:s})(({theme:e})=>({position:"relative",width:"100%"})),g=(0,i.ZP)("figure",{name:s})(({theme:e})=>({margin:0,display:"block"})),d=(0,i.ZP)("div",{name:s,shouldForwardProp:e=>"isOwner"!==e&&"isPageAllMessages"!==e})(({theme:e,isOwner:t,isPageAllMessages:n})=>({width:"144px",maxWidth:"100%",cursor:"pointer",...t&&{width:"186px"},...n&&{width:"300px"}})),c=(0,i.ZP)("img",{name:s})(({theme:e})=>({position:"absolute",left:0,top:0,width:"100%",borderRadius:e.spacing(1)})),p=(e,t)=>{let n=new Image;n.src=t,n.onload=()=>{e({height:n.height,width:n.width})},n.onerror=t=>{e(t)}};function u({isOwner:e,image:t,download_url:n,file_name:a}){let{dispatch:i,usePageParams:s,assetUrl:u}=(0,l.OgA)(),h=s(),f=(null==h?void 0:h.rid)||!1,[w,y]=r.useState(null),x=(0,o.Q4)(t,"240",u("photo.no_image")),v=(0,o.Q4)(t,"origin",u("photo.no_image"));r.useEffect(()=>{x&&p(y,x)},[x]);let P=!!w&&w.height/w.width,E=()=>{i({type:"chat/room/presentImageView",payload:{image:{id:"img0",src:v,download_url:n,is_image:!0,file_name:a}}})};return r.createElement(m,{className:"uiMsgAttachmentImgWrapper"},r.createElement(g,null,r.createElement(d,{isOwner:!!e,isPageAllMessages:f,style:{paddingBottom:`${P?100*P:100}%`}},r.createElement(c,{src:x,onClick:E,alt:a}))))}let h="MsgAttachmentImage",f=(0,i.ZP)("div",{name:h,slot:"UIMsgAttachmentImgWrapper"})(({theme:e})=>({position:"relative",width:"100%"})),w=(0,i.ZP)("figure",{name:h})(({theme:e})=>({margin:0,display:"block"})),y=(0,i.ZP)("div",{name:h,shouldForwardProp:e=>"isOwner"!==e&&"isPageAllMessages"!==e&&"typeGridLayout"!==e})(({theme:e,isOwner:t,isPageAllMessages:n,typeGridLayout:a})=>({width:"94px",height:"94px",maxWidth:"100%",cursor:"pointer",marginBottom:"1px",..."type-2"===a&&!t&&{width:"72px",height:"72px"},..."type-1"===a&&{width:"52px",height:"52px"},..."type-1"===a&&t&&{width:"62px",height:"62px"},...n&&"type-2"===a&&{width:"190px",height:"190px"},...n&&"type-1"===a&&{width:"126px",height:"126px"}})),x=(0,i.ZP)("img",{name:h,shouldForwardProp:e=>"typeGridLayout"!==e})(({theme:e,typeGridLayout:t})=>({position:"absolute",left:0,top:0,width:"100%",objectFit:"cover",borderRadius:e.spacing(1),...t&&{width:"98%",height:"98%"}}));function v({image:e,download_url:t,images:n,typeGridLayout:a,isOwner:i,file_name:s,keyIndex:m}){let{dispatch:g,usePageParams:d,assetUrl:c}=(0,l.OgA)(),p=d(),u=(null==p?void 0:p.rid)||!1,h=r.useMemo(()=>{return n&&n.length?n.map((e,t)=>{let n=(0,o.Q4)(e.image,"origin",c("photo.no_image"));return{id:t,src:n,download_url:e.download_url,file_name:e.file_name}}):[]},[n]),v=(0,o.Q4)(e,"500",c("photo.no_image")),P=(0,o.Q4)(e,"origin",c("photo.no_image")),E=()=>{g({type:"chat/room/presentImageView",payload:{image:{id:parseInt(m),src:P,download_url:t,file_name:s},images:h}})};return r.createElement(f,null,r.createElement(w,null,r.createElement(y,{isOwner:!!i,isPageAllMessages:u,typeGridLayout:a},r.createElement(x,{typeGridLayout:a,src:v,onClick:E,alt:"dwq"}))))}let P=(0,i.ZP)("div",{name:"MsgAttachmentMedia",slot:"TitleLink",shouldForwardProp:e=>"isOwner"!==e})(({theme:e,isOwner:t})=>({borderRadius:e.spacing(1),fontSize:e.spacing(1.75),padding:e.spacing(1),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block",maxWidth:"100%",wordBreak:"break-word",wordWrap:"break-word",backgroundColor:e.palette.grey["100"],..."dark"===e.palette.mode&&{backgroundColor:e.palette.grey["600"]},...t&&{backgroundColor:e.palette.primary.main,color:"#fff"}})),E=(0,i.ZP)("div")(({theme:e})=>({display:"flex",alignItems:"center",cursor:"pointer","& .ico":{marginRight:e.spacing(1)}}));function Z({isOwner:e,layout:t,totalImages:n,typeGridLayout:i,is_image:l,image:o,file_name:s,download_url:m,file_size_text:g,keyIndex:d}){return o&&"multi-image"===t?r.createElement(v,{images:n,file_name:s,image:o,download_url:m,isOwner:e,typeGridLayout:i,keyIndex:d}):l&&o?r.createElement(u,{isOwner:e,image:o,file_name:s,download_url:m}):l?null:r.createElement(P,{isOwner:e},r.createElement(E,{onClick:()=>(0,a.Sv)(m)},r.createElement("i",{className:"ico ico-arrow-down-circle mr-1"}),s))}},82353:function(e,t,n){n.d(t,{Z:function(){return u},C:function(){return p}});var a=n(85597),i=n(67294),r=n(62335),l=n(81719),o=n(42097);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}let m="MsgAttachmentMultiMedia",g=(0,l.ZP)("div",{name:m,slot:"uiMsgImageAttachmentWrapper",shouldForwardProp:e=>"isOwner"!==e})(({theme:e,isOwner:t})=>({display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:t?"flex-end":"flex-start",marginTop:e.spacing(.25)})),d=(0,l.ZP)("div",{name:m,slot:"uiMsgImageAttachmentItem",shouldForwardProp:e=>"typeGridLayout"!==e&&"isPageAllMessages"!==e&&"isLastItem"!==e})(({theme:e,typeGridLayout:t,isPageAllMessages:n,isLastItem:a})=>({..."type-1"===t&&{flexBasis:"33.333333%"},..."type-2"===t&&{flexBasis:"50%"}}));function c({mediaItems:e,isOwner:t}){let{usePageParams:n}=(0,a.OgA)(),r=n(),l=(null==r?void 0:r.rid)||!1,m=e.length,c=m%3==0?"type-1":m%3==1?"type-1":"type-2";return i.createElement(g,{isOwner:t},e.map((n,a)=>i.createElement(d,{typeGridLayout:c,isPageAllMessages:l,isLastItem:a===e.length-1,key:`k${a}`},i.createElement(o.Z,s({},n,{keyIndex:a,layout:"multi-image",totalImages:e,typeGridLayout:c,isOwner:t})))))}let p=e=>{let{useGetItem:t}=(0,a.OgA)(),n=e.map(e=>{if("string"!=typeof e)return e;{let n=t(e);return n}}),i=[],r=[];return n.map(e=>{e.is_image?i.push(e):r.push(e)}),{multiImageFile:i,otherFile:r,attachments:n}};function u({message:e,isOwner:t}){var n;let{multiImageFile:a,otherFile:l,attachments:o}=p(null==e?void 0:e.attachments);return(null===(n=e.attachments)||void 0===n?void 0:n.length)&&(a.length||l.length)?a.length>1?i.createElement(i.Fragment,null,i.createElement(c,{mediaItems:a,isOwner:t}),l.length?l.map((e,n)=>i.createElement(r.Z,{item:e,key:`k${n}`,isOwner:t})):null):o.map((e,n)=>i.createElement(r.Z,{item:e,key:`k${n}`,isOwner:t})):null}},31938:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var a=n(40263),i=n(81719),r=n(38790),l=n(67294),o=n(82353),s=n(58668);let m="MessageText",g=(0,i.ZP)("div",{name:m,slot:"uiChatMsgItemMsg",shouldForwardProp:e=>"isOwner"!==e&&"isQuote"!==e})(({theme:e,isOwner:t,isQuote:n})=>({borderRadius:e.spacing(1),fontSize:e.mixins.pxToRem(15),padding:e.spacing(1.25),display:"flex",alignItems:"center",backgroundColor:e.palette.grey["100"],..."dark"===e.palette.mode&&{backgroundColor:e.palette.grey["600"]},overflowWrap:"break-word","& a":{color:t?"#fff":e.palette.text.primary,textDecoration:"underline",cursor:"pointer",overflowWrap:"break-word"},...t&&{backgroundColor:e.palette.primary.main,color:"#fff !important"}})),d=(0,i.ZP)("div",{name:m,slot:"uiChatMsgItemBodyInnerWrapper",shouldForwardProp:e=>"isOwner"!==e&&"filter"!==e})(({theme:e,isOwner:t,filter:n})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",...t&&!n&&{alignItems:"flex-end"}}));function c({message:e,isOwner:t,createdDate:n,tooltipPosition:i}){let m=e.message?(0,a.ZP)(e.message,{mentions:e.mentions}):null,c=null==e?void 0:e.extra;return l.createElement(r.Z,{title:n,placement:i,PopperProps:{disablePortal:!0}},l.createElement(d,{isOwner:t,filter:null==e?void 0:e.filtered},c?l.createElement(s.Z,{dataQuote:c,isOwner:t}):null,m?l.createElement(g,{isQuote:Boolean(c),isOwner:t,className:"uiChatMsgItemMsg",dangerouslySetInnerHTML:{__html:m}}):null,l.createElement(o.Z,{message:e,isOwner:t})))}},58668:function(e,t,n){n.d(t,{Z:function(){return Z}});var a=n(40263),i=n(85597),r=n(30120),l=n(81719),o=n(91647),s=n(67294),m=n(16473),g=n(82353),d=n(62335);let c="MsgAttachment",p=(0,l.ZP)("div",{name:c,slot:"UIMsgAttachment",shouldForwardProp:e=>"isOwner"!==e})(({theme:e,isOwner:t})=>({marginBottom:e.spacing(-2),marginLeft:e.spacing(1),marginRight:0,marginTop:e.spacing(.25),paddingBottom:e.spacing(3),maxWidth:"calc(100% - 8px)",display:"flex",flexDirection:"row",overflow:"hidden",border:e.mixins.border("secondary"),borderRadius:e.spacing(1),minHeight:"70px","& a:not(.MuiAvatar-root)":{color:e.palette.text.primary,textDecoration:"underline",cursor:"pointer"},...t&&{color:e.palette.text.secondary,marginRight:e.spacing(1),marginLeft:0}})),u=(0,l.ZP)("div",{name:c,slot:"Author"})(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center","& .MuiAvatar-root":{fontSize:e.mixins.pxToRem(7)},strong:{padding:e.spacing(0,.5)}})),h=(0,l.ZP)("div",{name:c,slot:"MsgAttachmentFlex"})(({theme:e})=>({textAlign:"start"})),f=(0,l.ZP)(m.Ys,{name:c,slot:"Text"})(({theme:e})=>({color:e.palette.text.secondary,margin:e.spacing(.5,0)})),w=(0,l.ZP)("div",{name:c,slot:"TextDelete"})(({theme:e})=>({margin:e.spacing(.5),marginLeft:0,fontStyle:"italic"})),y=(0,l.ZP)("div",{name:c,slot:"AttachmentInfo"})(({theme:e})=>({overflow:"hidden",margin:e.spacing(1,1,0,0)})),x=(0,l.ZP)("div")(({theme:e})=>({width:e.spacing(.5),height:"100%",backgroundColor:e.palette.grey["100"]})),v=(0,l.ZP)("div")(({theme:e})=>({width:e.spacing(3),minWidth:e.spacing(3),marginTop:e.spacing(1.5),display:"flex",justifyContent:"center",alignItems:"center"})),P=(0,l.ZP)(o.Z)(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A200:e.palette.text.primary})),E=(0,l.ZP)(m.Ys,{name:c,slot:"uiMsgAttachmentLink"})(({theme:e})=>({"& .ico":{fontSize:e.mixins.pxToRem(12),marginRight:e.spacing(.5)}}));function Z({dataQuote:e,isOwner:t}){var n;let{i18n:l}=(0,i.OgA)(),{type:o,user:c,message:Z}=e,{multiImageFile:M,otherFile:k,attachments:O}=(0,g.C)(null==e?void 0:e.attachments);return s.createElement(p,{isOwner:t},s.createElement(v,null,s.createElement(x,null)),s.createElement(y,null,c?s.createElement(u,null,s.createElement(P,{component:"h2",variant:"h5"},c.full_name||c.user_name)):null,s.createElement(h,null,"messageDeleted"===o?s.createElement(w,null,l.formatMessage({id:"message_was_deleted"})):null,Z&&"messageDeleted"!==o?s.createElement(f,{lines:1,dangerouslySetInnerHTML:{__html:(0,a.ZP)(Z)}}):null,Z||(null===(n=e.attachments)||void 0===n||!n.length)&&(M.length||k.length)?null:s.createElement(r.Z,{sx:{mt:1}},M.length>1?s.createElement(f,{lines:1},l.formatMessage({id:"total_photo"},{value:M.length})):s.createElement(s.Fragment,null,O.map((e,n)=>s.createElement(s.Fragment,{key:`k${n}`},e.is_image&&e.image?s.createElement(d.Z,{item:e,isOwner:t}):s.createElement(E,{lines:1},s.createElement(m.zb,{icon:"ico-paperclip-alt"}),e.file_name))))))))}}}]);