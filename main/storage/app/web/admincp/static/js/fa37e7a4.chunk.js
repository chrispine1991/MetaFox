"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-admincp-blocks-AdminChartStats-Block"],{47546:function(e,t,a){var r=a(63366),l=a(87462),n=a(67294),o=a(86010),s=a(94780),i=a(56594),d=a(59711),c=a(36622),u=a(78884),m=a(81719),p=a(65410),f=a(85893);let h=["children","className","color","component","disabled","error","filled","focused","required"],v=e=>{let{classes:t,color:a,focused:r,disabled:l,error:n,filled:o,required:i}=e,d={root:["root",`color${(0,c.Z)(a)}`,l&&"disabled",n&&"error",o&&"filled",r&&"focused",i&&"required"],asterisk:["asterisk",n&&"error"]};return(0,s.Z)(d,p.M,t)},g=(0,m.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>{return(0,l.Z)({},t.root,"secondary"===e.color&&t.colorSecondary,e.filled&&t.filled)}})(({theme:e,ownerState:t})=>(0,l.Z)({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${p.Z.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${p.Z.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${p.Z.error}`]:{color:(e.vars||e).palette.error.main}})),Z=(0,m.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${p.Z.error}`]:{color:(e.vars||e).palette.error.main}})),x=n.forwardRef(function(e,t){let a=(0,u.Z)({props:e,name:"MuiFormLabel"}),{children:n,className:s,component:c="label"}=a,m=(0,r.Z)(a,h),p=(0,d.Z)(),x=(0,i.Z)({props:a,muiFormControl:p,states:["color","required","focused","disabled","error","filled"]}),b=(0,l.Z)({},a,{color:x.color||"primary",component:c,disabled:x.disabled,error:x.error,filled:x.filled,focused:x.focused,required:x.required}),k=v(b);return(0,f.jsxs)(g,(0,l.Z)({as:c,ownerState:b,className:(0,o.default)(k.root,s),ref:t},m,{children:[n,x.required&&(0,f.jsxs)(Z,{ownerState:b,"aria-hidden":!0,className:k.asterisk,children:["â€‰","*"]})]}))});t.Z=x},65410:function(e,t,a){a.d(t,{M:function(){return n}});var r=a(1588),l=a(34867);function n(e){return(0,l.Z)("MuiFormLabel",e)}let o=(0,r.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]);t.Z=o},84917:function(e,t,a){a.d(t,{Z:function(){return y}});var r=a(63366),l=a(87462),n=a(67294),o=a(94780),s=a(86010),i=a(56594),d=a(59711),c=a(47546),u=a(65410),m=a(78884),p=a(81719),f=a(1588),h=a(34867);function v(e){return(0,h.Z)("MuiInputLabel",e)}(0,f.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var g=a(85893);let Z=["disableAnimation","margin","shrink","variant","className"],x=e=>{let{classes:t,formControl:a,size:r,shrink:n,disableAnimation:s,variant:i,required:d}=e,c=(0,o.Z)({root:["root",a&&"formControl",!s&&"animated",n&&"shrink","small"===r&&"sizeSmall",i],asterisk:[d&&"asterisk"]},v,t);return(0,l.Z)({},t,c)},b=(0,p.ZP)(c.Z,{shouldForwardProp:e=>(0,p.FO)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[{[`& .${u.Z.asterisk}`]:t.asterisk},t.root,a.formControl&&t.formControl,"small"===a.size&&t.sizeSmall,a.shrink&&t.shrink,!a.disableAnimation&&t.animated,t[a.variant]]}})(({theme:e,ownerState:t})=>(0,l.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===t.size&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===t.variant&&(0,l.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&(0,l.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===t.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===t.variant&&(0,l.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))),k=n.forwardRef(function(e,t){let a=(0,m.Z)({name:"MuiInputLabel",props:e}),{disableAnimation:n=!1,shrink:o,className:c}=a,u=(0,r.Z)(a,Z),p=(0,d.Z)(),f=o;void 0===f&&p&&(f=p.filled||p.focused||p.adornedStart);let h=(0,i.Z)({props:a,muiFormControl:p,states:["size","variant","required"]}),v=(0,l.Z)({},a,{disableAnimation:n,formControl:p,shrink:f,size:h.size,variant:h.variant,required:h.required}),k=x(v);return(0,g.jsx)(b,(0,l.Z)({"data-shrink":f,ownerState:v,ref:t,className:(0,s.default)(k.root,c)},u,{classes:k}))});var y=k},62425:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var r=a(85597),l=a(21241),n=a(67294),o=a(61560),s=a(26495),i=a(30120),d=a(17888),c=a(84917),u=a(74825),m=a(12501),p=a(81719),f=a(13218),h=a.n(f),v=a(30381),g=a.n(v);o.kL.register(o.uw,o.f$,o.od,o.jn,o.Dx,o.u,o.De);let Z=(0,p.ZP)(l.sU,{slot:"BlockContent"})(({theme:e})=>({height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"})),x=(0,p.ZP)("div",{slot:"HeaderWrapper"})(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:e.spacing(3),[e.breakpoints.down("lg")]:{flexDirection:"column"}})),b=(0,p.ZP)("div",{slot:"HeaderLeftWrapper"})(({theme:e})=>({height:"auto",[e.breakpoints.down("lg")]:{marginBottom:e.spacing(2)}})),k=(0,p.ZP)("div",{slot:"HeaderRightWrapper"})(({theme:e})=>({height:"auto","& .MuiSelect-select":{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)}})),y=(0,p.ZP)("h3",{slot:"TitleHeader"})(({theme:e})=>({fontSize:e.spacing(2.5),margin:e.spacing(0),fontWeight:"normal"})),E=(0,p.ZP)("span",{slot:"Time"})(({theme:e})=>({color:e.palette.grey[700],height:e.spacing(2),display:"block"})),w=(0,p.ZP)("div",{slot:"Chart"})(({theme:e})=>({color:e.palette.grey[700],position:"relative","&.loading canvas":{opacity:.1}})),S=(0,p.ZP)(i.Z,{slot:"Loading"})(({theme:e})=>({height:"100%",width:"100%",justifyContent:"center",display:"flex",position:"absolute"}));var C=(0,r.j4Z)({extendBlock:function({blockProps:e,title:t}){var a,o;let{useFetchDetail:i,apiClient:p,jsxBackend:f,i18n:v}=(0,r.OgA)(),[C,z]=n.useState([]),[M,L]=n.useState(""),[P,q]=n.useState(""),[W,F]=n.useState("1d"),[$,j]=n.useState(!0),O=(0,r.kPO)(),[R]=i({dataSource:{apiUrl:"admincp/dashboard/stat-type"}}),A=n.useCallback((e,t)=>{j(!0),F(t),p.request({method:"get",url:`admincp/dashboard/chart?name=${e}&period=${t}`}).then(e=>{z(e.data.data),setTimeout(()=>{j(!1)},300)})},[p]),B=e=>{L(e.target.value),A(e.target.value,P)},I=e=>{q(e.target.value),A(M,e.target.value)};(0,n.useEffect)(()=>{h()(R)&&(L("user"),q("1d"),A("user","1d"))},[A,R]);let _=[],N=[];null==C||C.forEach(e=>{if(N.push(e.data),"1d"===W){_.push(g()(null==e?void 0:e.date).format("ll"));return}_.push(null==e?void 0:e.date)});let D={labels:_,datasets:[{data:N,borderColor:"#2682d5",backgroundColor:"#2682d5"}]},H=C.filter(e=>{return e.data>0}),T={responsive:!0,plugins:{legend:!1,title:{display:!1}}};return n.createElement(l.gO,null,n.createElement(Z,null,n.createElement(x,null,n.createElement(b,null,n.createElement(y,null,v.formatMessage({id:"welcome_back_username"},{username:O.user.full_name})),n.createElement(E,null,$?null:n.createElement(n.Fragment,null,_[0]," - ",_[_.length-1]," "))),n.createElement(k,null,n.createElement(d.Z,{sx:{m:1,minWidth:200},size:"small"},n.createElement(c.Z,null,v.formatMessage({id:"type"})),n.createElement(m.Z,{value:M,label:"Type",onChange:B},null==R?void 0:null===(a=R.types)||void 0===a?void 0:a.map((e,t)=>n.createElement(u.Z,{key:t,value:e.value},e.label)))),n.createElement(d.Z,{sx:{m:1,minWidth:200},size:"small"},n.createElement(c.Z,null,v.formatMessage({id:"view"})),n.createElement(m.Z,{value:P,label:"View",onChange:I},null==R?void 0:null===(o=R.period)||void 0===o?void 0:o.map((e,t)=>n.createElement(u.Z,{key:t,value:e.value},e.label)))))),n.createElement(w,{className:$?"loading":""},n.createElement(n.Fragment,null,$?n.createElement(S,null,f.render({component:"form.DefaultLoading"})):null,0!==H.length?n.createElement(n.Fragment,null," ",n.createElement(s.x1,{width:500,data:D,options:T})," "):n.createElement(s.x1,{width:500,data:D,options:{...T,scales:{y:{min:0}}}})))))},defaults:{title:"Chart",blockLayout:"Admin - Block - Contained",blockProps:{blockStyle:{sx:{height:"calc(100% - 16px)"}}}}})}}]);