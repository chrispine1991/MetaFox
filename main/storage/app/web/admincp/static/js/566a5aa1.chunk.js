"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-admincp-blocks-AdminSideMenu-Block"],{65249:function(e,t,o){o.r(t),o.d(t,{default:function(){return x}});var n=o(85597),r=o(21241),i=o(16980),m=o(27274),a=o(30120),l=o(81719),c=o(67294),u=o(96974),d=o(22410),p=o(73327);let s="#354661",b=(0,d.Z)(e=>(0,p.Z)({menuItem:{padding:"12px 16px",fontSize:14,display:"flex",alignItems:"center",minHeight:24,justifyContent:"center",cursor:"pointer",userSelect:"none",position:"relative","&:before":{content:'""',position:"absolute",top:0,bottom:0,left:0,width:"3px",background:"transparent"},"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.08)",color:"rgb(238, 238, 238)","&:not($menuItemMinimize)":{"&:before":{background:e.palette.common.white}}}},menuItemMinimize:{padding:"12px","& $menuItemIcon":{margin:"0 !important",textAlign:"center"}},menuItemMinimizeOpen:{"&:before":{background:e.palette.common.white},"& $menuItemIcon":{color:e.palette.common.white}},menuItemLink:{flex:1,display:"flex",alignItems:"center",minHeight:24,color:"rgba(238,238,238,0.7)",cursor:"pointer","&:hover":{"& $menuItemIcon":{color:e.palette.common.white},color:e.palette.common.white}},menuItemActive:{backgroundColor:s,color:e.palette.common.white,"& $menuItemLink":{color:e.palette.common.white},"&$menuItemMinimize":{backgroundColor:`${s} !important`,color:"rgb(255, 255, 255)","& $menuItemIcon":{color:"rgb(255, 255, 255) !important"}}},menuItemIcon:{width:24,fontSize:18,color:"rgb(238, 238, 238,0.6)",marginRight:8,display:"inline-block"},iconArrow:{color:"rgb(238, 238, 238,0.6)",fontSize:13},subMenuItem:{},menuItemLinkPoper:{},menuItemLinkPoperParent:{},subMenuItemLink:{padding:"12px 16px 12px 48px",color:"rgba(238, 238, 238, 0.7)",fontSize:13,display:"block","&$menuItemLinkPoper":{padding:"12px 16px"},"&:not($menuItemLinkPoperParent):hover":{backgroundColor:"rgba(0, 0, 0, 0.08)",color:e.palette.common.white}},subMenuItemActive:{backgroundColor:s,color:e.palette.common.white,fontWeight:"bold","& $subMenuItemLink":{color:e.palette.common.white}}}),{name:"AdminSideMenu"});function f(e){let t=[],o=e.split("/").filter(Boolean);return o.forEach((e,n)=>{n>0&&t.unshift(`/${o.slice(0,n).join("/")}`)}),t.unshift(e),t}let h=e=>{let t={},o=c.useMemo(()=>{return e.items.reduce((e,t)=>{return e.push(t.to),t.items&&t.items.forEach(t=>{e.push(t.to)}),e},[]).filter(Boolean)},[e]);return o.forEach(e=>{t[e]=e}),o.forEach(e=>{f(e).forEach(o=>{t[o]||(t[o]=e)})}),t},g=(e,t)=>{let o=h(e),n=f(t).find(e=>o[e]),r=o[n];return r||""},I=(0,l.ZP)(a.Z,{name:"AdminSideMenu",slot:"Root",shouldForwardProp:e=>"mobile"!==e})(({mobile:e,theme:t,drawerVisible:o})=>({...e?{zIndex:t.zIndex.appBar+2}:{width:o?256:48}})),k=(0,l.ZP)(a.Z,{name:"AdminSideMenu",slot:"Staged",shouldForwardProp:e=>"drawerVisible"!==e})(({theme:e,drawerVisible:t})=>({position:"fixed",width:t?256:48,top:58,bottom:0,left:0,background:"rgb(35, 48, 68)",overflowX:"hidden",overflowY:"auto"})),w=(0,l.ZP)(a.Z,{name:"AdminSideMenu",slot:"Content"})(({theme:e})=>({paddingTop:"12px",paddingBottom:e.spacing(10)}));var x=(0,n.j4Z)({extendBlock:function({drawerVisible:e,isDesktop:t=!0}){let o=b(),{usePageParams:a,useSession:l,getAcl:d,getSetting:p,jsxBackend:s,compactUrl:f,useAppMenu:h,useLoggedIn:x,dispatch:S}=(0,n.OgA)(),{id:M}=a(),v=(0,u.TH)(),$=l(),P=d(),z=p(),A=h("core","adminSidebarMenu"),[C,E]=c.useState(-1),Z=c.useCallback(e=>{S({type:e,payload:{}})},[]),y=c.useRef(),L=x(),B=g(A,v.pathname),R=c.useRef(),H=e=>{clearTimeout(R.current),E(e)},T=()=>{R.current=setTimeout(()=>{E(-1)},500)},_=(0,m.W$)(A.items,{session:$,acl:P,setting:z});if(!_.length)return null;let j=_.findIndex(e=>{return e.items&&e.items.length?e.items.some(e=>e.to===B):B===e.to});return L&&(e||t)?c.createElement(I,{mobile:!t,drawerVisible:e,"data-testid":"layoutSlotSide"},c.createElement(k,{drawerVisible:e},c.createElement(r.ID,{scrollRef:y},c.createElement(i.$,{scrollRef:y},c.createElement(w,null,_.map((n,r)=>s.render({component:`adminSideMenu.as.${n.as||"normal"}`,props:{key:r.toString(),handleAction:Z,item:{...n,to:n.to?f(n.to,{id:M}):void 0},classes:o,pathname:B,active:j===r,minimize:!e,isDesktop:t,activeHover:C===r,handlePopoverOpen:()=>H(r),handlePopoverClose:T}}))))))):null},name:"core.block.AdminSideMenu"})}}]);