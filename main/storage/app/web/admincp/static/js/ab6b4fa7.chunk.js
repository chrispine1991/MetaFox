"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-feed-components-AddPhotoButton-Base"],{20201:function(t,e,o){o.r(e),o.d(e,{default:function(){return m}});var a=o(85597),r=o(81719),n=o(41609),s=o.n(n),l=o(67294),c=o(74996),d=o(61394);function i({onClick:t,testid:e,label:o,canUploadTypes:r}){let{i18n:n}=(0,a.OgA)();return l.createElement(d.Z,{sx:{fontWeight:400,cursor:"pointer"},color:"primary",onClick:t,"data-testid":e},n.formatMessage({id:o||"add_photos_video"},r?{allowVideo:(null==r?void 0:r.video)?1:0,allowPhoto:(null==r?void 0:r.photo)?1:0}:{}))}let u=(0,r.ZP)("div")(({theme:t})=>({display:"flex",margin:t.spacing(0,1.5)})),p=(0,r.ZP)("div")(({theme:t})=>({display:"flex",flexDirection:"row"}));function m(t){let[e,,o]=(0,c.Z)(),{useSession:r,dispatch:n,jsxBackend:d,usePageParams:m}=(0,a.OgA)(),{user:f}=r(),{label:h,tab:v}=t,k=m(),{identity:C,resource_name:g}=k;o.current.requestComposerUpdate=l.useCallback(()=>{setImmediate(()=>{let{attachmentType:t,attachments:e}=o.current.state;n({type:"statusComposer/onPress/status",payload:{data:{attachmentType:t,attachments:{[t]:e[t]}},parentIdentity:C,parentType:g}})})},[o,n,C,g]);let x=()=>{o.current.removeAttachments()};return s()(f)?null:l.createElement(p,{"data-testid":"addPhotoButton"},l.createElement(u,{onClick:x},d.render({component:"statusComposer.control.StatusUploadPhotoButton",props:{strategy:"block",composerRef:o,composerState:e,control:i,label:h,forceAcceptVideo:"video"===v}})))}}}]);