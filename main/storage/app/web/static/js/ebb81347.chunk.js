(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["VideoPlayer"],{9996:function(e){"use strict";var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==r},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s(Array.isArray(e)?[]:{},e,t):e}function n(e,t,r){return e.concat(t).map(function(e){return i(e,r)})}function a(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[])}function o(e,t){try{return t in e}catch(r){return!1}}function s(e,r,l){(l=l||{}).arrayMerge=l.arrayMerge||n,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=i;var u,d,c=Array.isArray(r);return c!==Array.isArray(e)?i(r,l):c?l.arrayMerge(e,r,l):(d={},(u=l).isMergeableObject(e)&&a(e).forEach(function(t){d[t]=i(e[t],u)}),a(r).forEach(function(t){(!o(e,t)||Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))&&(o(e,t)&&u.isMergeableObject(r[t])?d[t]=(function(e,t){if(!t.customMerge)return s;var r=t.customMerge(e);return"function"==typeof r?r:s})(t,u)(e[t],r[t],u):d[t]=i(r[t],u))}),d)}s.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,r){return s(e,r,t)},{})},e.exports=s},64560:function(e){"undefined"!=typeof window&&(e.exports=(()=>{var e={21:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var i=function(){function e(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),n=function(){function e(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),a=r(145),o=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),i=0;i<4;i++)r[i]=t.getUint32(4*i);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],n=r[1],a=r[2],o=r[3],s=this.invSubMix,l=s[0],u=s[1],d=s[2],c=s[3],h=new Uint32Array(256),f=0,p=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,e[f]=v,t[v]=f;var g=h[f],y=h[g],b=h[y],E=257*h[v]^16843008*v;i[f]=E<<24|E>>>8,n[f]=E<<16|E>>>16,a[f]=E<<8|E>>>24,o[f]=E,E=16843009*b^65537*y^257*g^16843008*f,l[v]=E<<24|E>>>8,u[v]=E<<16|E>>>16,d[v]=E<<8|E>>>24,c[v]=E,f?(f=g^h[h[h[b^g]]],p^=h[h[p]]):f=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,i=0;i<t.length&&r;)r=t[i]===this.key[i],i++;if(!r){this.key=t;var n=this.keySize=t.length;if(4!==n&&6!==n&&8!==n)throw Error("Invalid aes key size="+n);var a,o,s,l,u=this.ksRows=4*(n+6+1),d=this.keySchedule=new Uint32Array(u),c=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,m=p[0],v=p[1],g=p[2],y=p[3];for(a=0;a<u;a++)a<n?s=d[a]=t[a]:(l=s,a%n==0?l=(h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l])^f[a/n|0]<<24:n>6&&a%n==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),d[a]=s=(d[a-n]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?d[a]:d[a-4],c[o]=o<4||a<=4?l:m[h[l>>>24]]^v[h[l>>>16&255]]^g[h[l>>>8&255]]^y[h[255&l]],c[o]=c[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r){for(var i,n,a,o,s,l,u,d,c,h,f,p,m,v,g=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,E=this.invSubMix,T=E[0],_=E[1],A=E[2],S=E[3],k=this.uint8ArrayToUint32Array_(r),w=k[0],L=k[1],I=k[2],D=k[3],R=new Int32Array(e),O=new Int32Array(R.length),P=this.networkToHostOrderSwap;t<R.length;){for(c=P(R[t]),h=P(R[t+1]),f=P(R[t+2]),p=P(R[t+3]),s=c^y[0],l=p^y[1],u=f^y[2],d=h^y[3],m=4,v=1;v<g;v++)i=T[s>>>24]^_[l>>16&255]^A[u>>8&255]^S[255&d]^y[m],n=T[l>>>24]^_[u>>16&255]^A[d>>8&255]^S[255&s]^y[m+1],a=T[u>>>24]^_[d>>16&255]^A[s>>8&255]^S[255&l]^y[m+2],o=T[d>>>24]^_[s>>16&255]^A[l>>8&255]^S[255&u]^y[m+3],s=i,l=n,u=a,d=o,m+=4;i=b[s>>>24]<<24^b[l>>16&255]<<16^b[u>>8&255]<<8^b[255&d]^y[m],n=b[l>>>24]<<24^b[u>>16&255]<<16^b[d>>8&255]<<8^b[255&s]^y[m+1],a=b[u>>>24]<<24^b[d>>16&255]<<16^b[s>>8&255]<<8^b[255&l]^y[m+2],o=b[d>>>24]<<24^b[s>>16&255]<<16^b[l>>8&255]<<8^b[255&u]^y[m+3],O[t]=P(i^w),O[t+1]=P(o^L),O[t+2]=P(a^I),O[t+3]=P(n^D),w=c,L=h,I=f,D=p,t+=4}return O.buffer},e}(),s=r(93),l=r(63),u=function(){function e(e,t){var r=(void 0===t?{}:t).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=i,i)try{var n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch(a){}null===this.subtle&&(this.useSoftware=!0)}var t=e.prototype;return t.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},t.isSync=function(){return this.useSoftware},t.flush=function(){var e=this.currentResult,t=this.remainderData;if(!e||t)return s.logger.error("[softwareDecrypt] "+(t?"overflow bytes: "+t.byteLength:"no result")),this.reset(),null;var r,i,n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding&&(i=(r=n.byteLength)&&new DataView(n.buffer).getUint8(r-1))?(0,a.sliceUint8)(n,0,r-i):n},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,r){var i=this;return this.useSoftware?new Promise(function(n,a){i.softwareDecrypt(new Uint8Array(e),t,r);var o=i.flush();o?n(o.buffer):a(Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,r)},t.softwareDecrypt=function(e,t,r){var i=this.currentIV,n=this.currentResult,s=this.remainderData;this.logOnce("JS AES decrypt"),s&&(e=(0,l.appendUint8Array)(s,e),this.remainderData=null);var u=this.getValidChunk(e);if(!u.length)return null;i&&(r=i);var d=this.softwareDecrypter;return d||(d=this.softwareDecrypter=new o),d.expandKey(t),this.currentResult=d.decrypt(u.buffer,0,r),this.currentIV=(0,a.sliceUint8)(u,-16).buffer,n||null},t.webCryptoDecrypt=function(e,t,r){var a=this,o=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new n(o,t)),this.fastAesKey.expandKey().then(function(t){return o?(a.logOnce("WebCrypto AES decrypt"),new i(o,new Uint8Array(r)).decrypt(e.buffer,t)):Promise.reject(Error("web crypto not initialized"))}).catch(function(i){return s.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+i.name+": "+i.message),a.onWebCryptoError(e,t,r)})},t.onWebCryptoError=function(e,t,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r);var i=this.flush();if(i)return i.buffer;throw Error("WebCrypto and softwareDecrypt: failed to decrypt data")},t.getValidChunk=function(e){var t=e,r=e.length-e.length%16;return r!==e.length&&(t=(0,a.sliceUint8)(e,0,r),this.remainderData=(0,a.sliceUint8)(e,r)),t},t.logOnce=function(e){this.logEnabled&&(s.logger.log("[decrypter]: "+e),this.logEnabled=!1)},e}()},181:(e,t,r)=>{"use strict";r.r(t),r.d(t,{canParse:()=>l,decodeFrame:()=>f,getID3Data:()=>o,getID3Frames:()=>h,getTimeStamp:()=>u,isFooter:()=>a,isHeader:()=>n,isTimeStampFrame:()=>d,testables:()=>b,utf8ArrayToStr:()=>y});var i,n=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},o=function(e,t){for(var r=t,i=0;n(e,t);)i=10+s(e,t+6),a(e,t+10)&&(i+=10),t+=i;if(i>0)return e.subarray(r,r+i)},s=function(e,t){return(127&e[t])<<21|(127&e[t+1])<<14|(127&e[t+2])<<7|127&e[t+3]},l=function(e,t){return n(e,t)&&s(e,t+6)+10<=e.length-t},u=function(e){for(var t=h(e),r=0;r<t.length;r++){var i=t[r];if(d(i))return g(i)}},d=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},c=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=s(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}},h=function(e){for(var t=0,r=[];n(e,t);){for(var i=s(e,t+6),o=(t+=10)+i;t+8<o;){var l=c(e.subarray(t)),u=f(l);u&&r.push(u),t+=l.size+10}a(e,t)&&(t+=10)}return r},f=function(e){return"PRIV"===e.type?p(e):"W"===e.type[0]?v(e):m(e)},p=function(e){if(!(e.size<2)){var t=y(e.data,!0),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}}},m=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,r=y(e.data.subarray(t),!0);t+=r.length+1;var i=y(e.data.subarray(t));return{key:e.type,info:r,data:i}}var n=y(e.data.subarray(1));return{key:e.type,data:n}}},v=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,r=y(e.data.subarray(t),!0);t+=r.length+1;var i=y(e.data.subarray(t));return{key:e.type,info:r,data:i}}var n=y(e.data);return{key:e.type,data:n}},g=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},y=function(e,t){void 0===t&&(t=!1);var r=(i||void 0===self.TextDecoder||(i=new self.TextDecoder("utf-8")),i);if(r){var n=r.decode(e);if(t){var a=n.indexOf("\0");return -1!==a?n.substring(0,a):n}return n.replace(/\0/g,"")}for(var o,s,l=e.length,u="",d=0;d<l&&(0!==(o=e[d++])||!t);)if(0!==o&&3!==o)switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(o);break;case 12:case 13:u+=String.fromCharCode((31&o)<<6|63&e[d++]);break;case 14:u+=String.fromCharCode((15&o)<<12|(63&e[d++])<<6|(63&e[d++])<<0)}return u},b={decodeTextFrame:m}},182:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var i=r(544),n=r(851),a=r(93),o=r(729),s=r(973);function l(e){var t=new o.EventEmitter,r=function(t,r){e.postMessage({event:t,data:r})};t.on(n.Events.FRAG_DECRYPTED,r),t.on(n.Events.ERROR,r),e.addEventListener("message",function(o){var l=o.data;switch(l.cmd){case"init":var d=JSON.parse(l.config);e.transmuxer=new i.default(t,l.typeSupported,d,l.vendor,l.id),(0,a.enableLogs)(d.debug,l.id),function(){var e=function(e){a.logger[e]=function(t){r("workerLog",{logType:e,message:t})}};for(var t in a.logger)e(t)}(),r("init",null);break;case"configure":e.transmuxer.configure(l.config);break;case"demux":var h=e.transmuxer.push(l.data,l.decryptdata,l.chunkMeta,l.state);(0,i.isPromise)(h)?(e.transmuxer.async=!0,h.then(function(t){u(e,t)}).catch(function(e){r(n.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:l.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker push error"})})):(e.transmuxer.async=!1,u(e,h));break;case"flush":var f=l.chunkMeta,p=e.transmuxer.flush(f);(0,i.isPromise)(p)||e.transmuxer.async?((0,i.isPromise)(p)||(p=Promise.resolve(p)),p.then(function(t){c(e,t,f)}).catch(function(e){r(n.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:l.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker flush error"})})):c(e,p,f)}})}function u(e,t){if(!((r=t.remuxResult).audio||r.video||r.text||r.id3||r.initSegment))return!1;var r,i=[],n=t.remuxResult,a=n.audio,o=n.video;return a&&d(i,a),o&&d(i,o),e.postMessage({event:"transmuxComplete",data:t},i),!0}function d(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function c(e,t,r){t.reduce(function(t,r){return u(e,r)||t},!1)||e.postMessage({event:"transmuxComplete",data:t[0]}),e.postMessage({event:"flush",data:r})}},544:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TransmuxConfig:()=>J,TransmuxState:()=>ee,default:()=>X,isPromise:()=>Z});var i,n=r(851),a=r(973),o=r(21),s=r(965),l=r(181),u=r(856);function d(e,t){return void 0===e&&(e=""),void 0===t&&(t=9e4),{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}var c=r(63),h=r(145),f=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},t.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,r){},t.demux=function(e,t){this.cachedData&&(e=(0,c.appendUint8Array)(this.cachedData,e),this.cachedData=null);var r,i=l.getID3Data(e,0),n=i?i.length:0,a=this._audioTrack,o=this._id3Track,f=i?l.getTimeStamp(i):void 0,m=e.length;for((null===this.basePTS||0===this.frameIndex&&(0,s.isFiniteNumber)(f))&&(this.basePTS=p(f,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:u.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});n<m;){if(this.canParse(e,n)){var v=this.appendFrame(a,e,n);v?(this.frameIndex++,this.lastPTS=v.sample.pts,r=n+=v.length):n=m}else l.canParse(e,n)?(i=l.getID3Data(e,n),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:u.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),r=n+=i.length):n++;if(n===m&&r!==m){var g=(0,h.sliceUint8)(e,r);this.cachedData?this.cachedData=(0,c.appendUint8Array)(this.cachedData,g):this.cachedData=g}}return{audioTrack:a,videoTrack:d(),id3Track:o,textTrack:d()}},t.demuxSampleAes=function(e,t,r){return Promise.reject(Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:d(),id3Track:this._id3Track,textTrack:d()}},t.destroy=function(){},e}(),p=function(e,t,r){return(0,s.isFiniteNumber)(e)?90*e:9e4*t+(r||0)},m=r(93);function v(e,t){return 255===e[t]&&240==(246&e[t+1])}function g(e,t){return 1&e[t+1]?7:9}function y(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function b(e,t){return t+1<e.length&&v(e,t)}function E(e,t,r,i,o){if(!e.samplerate){var s=function(e,t,r,i){var o,s,l,u,d=navigator.userAgent.toLowerCase(),c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];o=1+((192&t[r+2])>>>6);var h=(60&t[r+2])>>>2;if(!(h>c.length-1))return l=(1&t[r+2])<<2|(192&t[r+3])>>>6,m.logger.log("manifest codec:"+i+", ADTS type:"+o+", samplingIndex:"+h),/firefox/i.test(d)?h>=6?(o=5,u=[,,,,],s=h-3):(o=2,u=[,,],s=h):-1!==d.indexOf("android")?(o=2,u=[,,],s=h):(o=5,u=[,,,,],i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&h>=6?s=h-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(h>=6&&1===l||/vivaldi/i.test(d))||!i&&1===l)&&(o=2,u=[,,]),s=h)),u[0]=o<<3,u[0]|=(14&h)>>1,u[1]|=(1&h)<<7,u[1]|=l<<3,5===o&&(u[1]|=(14&s)>>1,u[2]=(1&s)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:c[h],channelCount:l,codec:"mp4a.40."+o,manifestCodec:i};e.trigger(n.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+h})}(t,r,i,o);s&&(e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,m.logger.log("parsed codec:"+e.codec+", rate:"+s.samplerate+", channels:"+s.channelCount))}}function T(e,t,r,i,n){var a,o=i+n*(9216e4/e.samplerate),s=function(e,t){var r=g(e,t);if(t+r<=e.length){var i=y(e,t)-r;if(i>0)return{headerLength:r,frameLength:i}}}(t,r);if(s){var l=s.frameLength,u=s.headerLength,d=u+l,c=Math.max(0,r+d-t.length);c?(a=new Uint8Array(d-u)).set(t.subarray(r+u,t.length),0):a=t.subarray(r+u,r+d);var h={unit:a,pts:o};return c||e.samples.push(h),{sample:h,length:d,missing:c}}var f=t.length-r;return(a=new Uint8Array(f)).set(t.subarray(r,t.length),0),{sample:{unit:a,pts:o},length:f,missing:-1}}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let A=function(e){function t(t,r){var i;return(i=e.call(this)||this).observer=void 0,i.config=void 0,i.observer=t,i.config=r,i}(r=t).prototype=Object.create(e.prototype),r.prototype.constructor=r,_(r,e);var r,i=t.prototype;return i.resetInitSegment=function(t,r,i,n){e.prototype.resetInitSegment.call(this,t,r,i,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:n,inputTimeScale:9e4,dropped:0}},t.probe=function(e){if(!e)return!1;for(var t=(l.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(function(e,t){if(b(e,t)){var r=g(e,t);if(t+r>=e.length)return!1;var i=y(e,t);if(i<=r)return!1;var n=t+i;return n===e.length||b(e,n)}return!1}(e,t))return m.logger.log("ADTS sync word found !"),!0;return!1},i.canParse=function(e,t){return t+5<e.length&&v(e,t)&&y(e,t)<=e.length-t},i.appendFrame=function(e,t,r){E(e,this.observer,t,r,e.manifestCodec);var i=T(e,t,r,this.basePTS,this.frameIndex);if(i&&0===i.missing)return i},t}(f);var S=/\/emsg[-/]ID3/i;let k=function(){function e(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(e,t,r,i){var n=this.videoTrack=d("video",1),a=this.audioTrack=d("audio",1),o=this.txtTrack=d("text",1);if(this.id3Track=d("id3",1),this.timeOffset=0,e&&e.byteLength){var s=(0,c.parseInitSegment)(e);if(s.video){var l=s.video,u=l.id,h=l.timescale,f=l.codec;n.id=u,n.timescale=o.timescale=h,n.codec=f}if(s.audio){var p=s.audio,m=p.id,v=p.timescale,g=p.codec;a.id=m,a.timescale=v,a.codec=g}o.id=c.RemuxerTrackIdConfig.text,n.sampleDuration=0,n.duration=a.duration=i}},t.resetContiguity=function(){},e.probe=function(e){return e=e.length>16384?e.subarray(0,16384):e,(0,c.findBox)(e,["moof"]).length>0},t.demux=function(e,t){this.timeOffset=t;var r=e,i=this.videoTrack,n=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=(0,c.appendUint8Array)(this.remainderData,e));var a=(0,c.segmentValidRange)(r);this.remainderData=a.remainder,i.samples=a.valid||new Uint8Array}else i.samples=r;var o=this.extractID3Track(i,t);return n.samples=(0,c.parseSamples)(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}},t.flush=function(){var e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;var i=this.extractID3Track(t,this.timeOffset);return r.samples=(0,c.parseSamples)(e,t),{videoTrack:t,audioTrack:d(),id3Track:i,textTrack:d()}},t.extractID3Track=function(e,t){var r=this.id3Track;if(e.samples.length){var i=(0,c.findBox)(e.samples,["emsg"]);i&&i.forEach(function(e){var i=(0,c.parseEmsg)(e);if(S.test(i.schemeIdUri)){var n=(0,s.isFiniteNumber)(i.presentationTime)?i.presentationTime/i.timeScale:t+i.presentationTimeDelta/i.timeScale,a=4294967295===i.eventDuration?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;a<=.001&&(a=Number.POSITIVE_INFINITY);var o=i.payload;r.samples.push({data:o,len:o.byteLength,dts:n,pts:n,type:u.MetadataSchema.emsg,duration:a})}})}return r},t.demuxSampleAes=function(e,t,r){return Promise.reject(Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}();var w=null,L=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],I=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],D=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],R=[0,1,1,4];function O(e,t,r,i,n){if(!(r+24>t.length)){var a=P(t,r);if(a&&r+a.frameLength<=t.length){var o=i+n*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(r,r+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength,missing:0}}}}function P(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,n=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==r&&0!==n&&15!==n&&3!==a){var o=e[t+2]>>1&1,s=e[t+3]>>6,l=1e3*L[14*(3===r?3-i:3===i?3:4)+n-1],u=I[3*(3===r?0:2===r?1:2)+a],d=D[r][i],c=R[i];if(null===w){var h=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);w=h?parseInt(h[1]):0}return w&&w<=87&&2===i&&l>=224e3&&0===s&&(e[t+3]=128|e[t+3]),{sampleRate:u,channelCount:3===s?1:2,frameLength:Math.floor(d*l/u+o)*c,samplesPerFrame:8*d*c}}}function C(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function M(e,t){return t+1<e.length&&C(e,t)}let x=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw Error("no bytes available");i.set(e.subarray(r,r+n)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},t.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;if(e>32&&m.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw Error("no bits available");this.loadWord()}return(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,r=8,i=0;i<e;i++)0!==r&&(r=(t+this.readEG()+256)%256),t=0===r?t:r},t.readSPS=function(){var e,t,r,i=0,n=0,a=0,o=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),d=this.readBoolean.bind(this),c=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var m=s();if(l(5),c(3),s(),f(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){var v=u();if(3===v&&c(1),f(),f(),c(1),d())for(t=3!==v?8:12,r=0;r<t;r++)d()&&p(r<6?16:64)}f();var g=u();if(0===g)u();else if(1===g)for(c(1),h(),h(),e=u(),r=0;r<e;r++)h();f(),c(1);var y=u(),b=u(),E=l(1);0===E&&c(1),c(1),d()&&(i=u(),n=u(),a=u(),o=u());var T=[1,1];if(d()&&d())switch(s()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(y+1)-2*i-2*n),height:(2-E)*(b+1)*16-(E?2:4)*(a+o),pixelRatio:T}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),N=function(){function e(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new o.default(t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)},t.decryptAacSample=function(e,t,r){var i=this,n=e[t].unit;if(!(n.length<=16)){var a=n.subarray(16,n.length-n.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(o).then(function(a){var o=new Uint8Array(a);n.set(o,16),i.decrypter.isSync()||i.decryptAacSamples(e,t+1,r)})}},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,r),this.decrypter.isSync())))return}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),i=0,n=32;n<e.length-16;n+=160,i+=16)r.set(e.subarray(n,n+16),i);return r},t.getAvcDecryptedUnit=function(e,t){for(var r=new Uint8Array(t),i=0,n=32;n<e.length-16;n+=160,i+=16)e.set(r.subarray(i,i+16),n);return e},t.decryptAvcSample=function(e,t,r,i,n){var a=this,o=(0,c.discardEPB)(n.data),s=this.getAvcEncryptedData(o);this.decryptBuffer(s.buffer).then(function(s){n.data=a.getAvcDecryptedUnit(o,s),a.decrypter.isSync()||a.decryptAvcSamples(e,t,r+1,i)})},t.decryptAvcSamples=function(e,t,r,i){if(e instanceof Uint8Array)throw Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length)return void i();for(var n=e[t].units;!(r>=n.length);r++){var a=n[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,r,i,a),this.decrypter.isSync())))return}}},e}();function U(){return(U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function F(e,t,r,i){return{key:e,frame:!1,pts:t,dts:r,units:[],debug:i,length:0}}function B(e){var t,r,i,n,a,o=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&s.length>1;){var l=new Uint8Array(s[0].length+s[1].length);l.set(s[0]),l.set(s[1],s[0].length),s[0]=l,s.splice(1,1)}if(1===((t=s[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;var u=t[7];192&u&&(n=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&u?n-(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(m.logger.warn(Math.round((n-a)/9e4)+"s delta between PTS and DTS, align them"),n=a):a=n);var d=(i=t[8])+9;if(e.size<=d)return null;e.size-=d;for(var c=new Uint8Array(e.size),h=0,f=s.length;h<f;h++){var p=(t=s[h]).byteLength;if(d){if(d>p){d-=p;continue}t=t.subarray(d),p-=d,d=0}c.set(t,o),o+=p}return r&&(r-=i+3),{data:c,pts:n,dts:a,len:r}}return null}function j(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var r=t.samples,i=r.length;if(!i)return void t.dropped++;var n=r[i-1];e.pts=n.pts,e.dts=n.dts}t.samples.push(e)}e.debug.length&&m.logger.log(e.pts+"/"+e.dts+":"+e.debug)}let H=function(){function e(e,t,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=r}e.probe=function(t){var r=e.syncOffset(t);return r>0&&m.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r),-1!==r},e.syncOffset=function(e){for(var t=Math.min(940,e.length-376)+1,r=0;r<t;){if(71===e[r]&&71===e[r+188])return r;r++}return -1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:c.RemuxerTrackIdConfig[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var t=e.prototype;return t.resetInitSegment=function(t,r,i,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video"),this._audioTrack=e.createTrack("audio",n),this._id3Track=e.createTrack("id3"),this._txtTrack=e.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=i,this._duration=n},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,r=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},t.demux=function(t,r,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1),i||(this.sampleAes=null);var s,l=this._avcTrack,u=this._audioTrack,d=this._id3Track,h=this._txtTrack,f=l.pid,p=l.pesData,v=u.pid,g=d.pid,y=u.pesData,b=d.pesData,E=null,T=this.pmtParsed,_=this._pmtId,A=t.length;if(this.remainderData&&(A=(t=(0,c.appendUint8Array)(this.remainderData,t)).length,this.remainderData=null),A<188&&!o)return this.remainderData=t,{audioTrack:u,videoTrack:l,id3Track:d,textTrack:h};var S=Math.max(0,e.syncOffset(t));(A-=(A-S)%188)<t.byteLength&&!o&&(this.remainderData=new Uint8Array(t.buffer,A,t.buffer.byteLength-A));for(var k=0,w=S;w<A;w+=188)if(71===t[w]){var L,I,D=!!(64&t[w+1]),R=((31&t[w+1])<<8)+t[w+2],O=void 0;if((48&t[w+3])>>4>1){if((O=w+5+t[w+4])===w+188)continue}else O=w+4;switch(R){case f:D&&(p&&(s=B(p))&&this.parseAVCPES(l,h,s,!1),p={data:[],size:0}),p&&(p.data.push(t.subarray(O,w+188)),p.size+=w+188-O);break;case v:if(D){if(y&&(s=B(y)))switch(u.segmentCodec){case"aac":this.parseAACPES(u,s);break;case"mp3":this.parseMPEGPES(u,s)}y={data:[],size:0}}y&&(y.data.push(t.subarray(O,w+188)),y.size+=w+188-O);break;case g:D&&(b&&(s=B(b))&&this.parseID3PES(d,s),b={data:[],size:0}),b&&(b.data.push(t.subarray(O,w+188)),b.size+=w+188-O);break;case 0:D&&(O+=t[O]+1),_=this._pmtId=(31&(L=t)[(I=O)+10])<<8|L[I+11];break;case _:D&&(O+=t[O]+1);var P=function(e,t,r,i){var n={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var o=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 207:if(!i){m.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===n.audio&&(n.audio=o);break;case 21:-1===n.id3&&(n.id3=o);break;case 219:if(!i){m.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===n.avc&&(n.avc=o);break;case 3:case 4:!0!==r.mpeg&&!0!==r.mp3?m.logger.log("MPEG audio found, not supported in this browser"):-1===n.audio&&(n.audio=o,n.segmentCodec="mp3");break;case 36:m.logger.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return n}(t,O,this.typeSupported,i);(f=P.avc)>0&&(l.pid=f),(v=P.audio)>0&&(u.pid=v,u.segmentCodec=P.segmentCodec),(g=P.id3)>0&&(d.pid=g),null===E||T||(m.logger.log("unknown PID '"+E+"' in TS found"),E=null,w=S-188),T=this.pmtParsed=!0;break;case 17:case 8191:break;default:E=R}}else k++;k>0&&this.observer.emit(n.Events.ERROR,n.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+k+" TS packet/s that do not start with 0x47"}),l.pesData=p,u.pesData=y,d.pesData=b;var C={audioTrack:u,videoTrack:l,id3Track:d,textTrack:h};return o&&this.extractRemainingSamples(C),C},t.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},t.extractRemainingSamples=function(e){var t,r=e.audioTrack,i=e.videoTrack,n=e.id3Track,a=e.textTrack,o=i.pesData,s=r.pesData,l=n.pesData;if(o&&(t=B(o))?(this.parseAVCPES(i,a,t,!0),i.pesData=null):i.pesData=o,s&&(t=B(s))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,t);break;case"mp3":this.parseMPEGPES(r,t)}r.pesData=null}else null!=s&&s.size&&m.logger.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=s;l&&(t=B(l))?(this.parseID3PES(n,t),n.pesData=null):n.pesData=l},t.demuxSampleAes=function(e,t,r){var i=this.demux(e,r,!0,!this.config.progressive),n=this.sampleAes=new N(this.observer,this.config,t);return this.decrypt(i,n)},t.decrypt=function(e,t){return new Promise(function(r){var i=e.audioTrack,n=e.videoTrack;i.samples&&"aac"===i.segmentCodec?t.decryptAacSamples(i.samples,0,function(){n.samples?t.decryptAvcSamples(n.samples,0,0,function(){r(e)}):r(e)}):n.samples&&t.decryptAvcSamples(n.samples,0,0,function(){r(e)})})},t.destroy=function(){this._duration=0},t.parseAVCPES=function(e,t,r,i){var n,a=this,o=this.parseAVCNALu(e,r.data),s=this.avcSample,l=!1;r.data=null,s&&o.length&&!e.audFound&&(j(s,e),s=this.avcSample=F(!1,r.pts,r.dts,"")),o.forEach(function(i){switch(i.type){case 1:n=!0,s||(s=a.avcSample=F(!0,r.pts,r.dts,"")),s.frame=!0;var o=i.data;if(l&&o.length>4){var u=new x(o).readSliceType();2!==u&&4!==u&&7!==u&&9!==u||(s.key=!0)}break;case 5:n=!0,s||(s=a.avcSample=F(!0,r.pts,r.dts,"")),s.key=!0,s.frame=!0;break;case 6:n=!0,(0,c.parseSEIMessageFromNALu)(i.data,1,r.pts,t.samples);break;case 7:if(n=!0,l=!0,!e.sps){var d=new x(i.data).readSPS();e.width=d.width,e.height=d.height,e.pixelRatio=d.pixelRatio,e.sps=[i.data],e.duration=a._duration;for(var h=i.data.subarray(1,4),f="avc1.",p=0;p<3;p++){var m=h[p].toString(16);m.length<2&&(m="0"+m),f+=m}e.codec=f}break;case 8:n=!0,e.pps||(e.pps=[i.data]);break;case 9:n=!1,e.audFound=!0,s&&j(s,e),s=a.avcSample=F(!1,r.pts,r.dts,"");break;case 12:n=!0;break;default:n=!1,s&&(s.debug+="unknown NAL "+i.type+" ")}s&&n&&s.units.push(i)}),i&&s&&(j(s,e),this.avcSample=null)},t.getLastNalUnit=function(e){var t,r,i=this.avcSample;if(i&&0!==i.units.length||(i=e[e.length-1]),null!==(t=i)&&void 0!==t&&t.units){var n=i.units;r=n[n.length-1]}return r},t.parseAVCNALu=function(e,t){var r,i,n=t.byteLength,a=e.naluState||0,o=a,s=[],l=0,u=-1,d=0;for(-1===a&&(u=0,d=31&t[0],a=0,l=1);l<n;)if(r=t[l++],a){if(1!==a){if(r){if(1===r){if(u>=0){var c={data:t.subarray(u,l-a-1),type:d};s.push(c)}else{var h=this.getLastNalUnit(e.samples);if(h&&(o&&l<=4-o&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-o)),(i=l-a-1)>0)){var f=new Uint8Array(h.data.byteLength+i);f.set(h.data,0),f.set(t.subarray(0,i),h.data.byteLength),h.data=f,h.state=0}}l<n?(u=l,d=31&t[l],a=0):a=-1}else a=0}else a=3}else a=r?0:2}else a=r?0:1;if(u>=0&&a>=0){var p={data:t.subarray(u,n),type:d,state:a};s.push(p)}if(0===s.length){var m=this.getLastNalUnit(e.samples);if(m){var v=new Uint8Array(m.data.byteLength+t.byteLength);v.set(m.data,0),v.set(t,m.data.byteLength),m.data=v}}return e.naluState=a,s},t.parseAACPES=function(e,t){var r,i,o,s,l,u=0,d=this.aacOverFlow,c=t.data;if(d){this.aacOverFlow=null;var h=d.missing,f=d.sample.unit.byteLength;if(-1===h){var p=new Uint8Array(f+c.byteLength);p.set(d.sample.unit,0),p.set(c,f),c=p}else d.sample.unit.set(c.subarray(0,h),f-h),e.samples.push(d.sample),u=d.missing}for(r=u,i=c.length;r<i-1&&!b(c,r);r++);if(r===u||(r<i-1?(o="AAC PES did not start with ADTS header,offset:"+r,s=!1):(o="no ADTS header found in AAC PES",s=!0),m.logger.warn("parsing error:"+o),this.observer.emit(n.Events.ERROR,n.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:s,reason:o}),!s)){if(E(e,this.observer,c,r,this.audioCodec),void 0!==t.pts)l=t.pts;else{if(!d)return void m.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var v=9216e4/e.samplerate;l=d.sample.pts+v}for(var g,y=0;r<i;){if(r+=(g=T(e,c,r,l,y)).length,g.missing){this.aacOverFlow=g;break}for(y++;r<i-1&&!b(c,r);r++);}}},t.parseMPEGPES=function(e,t){var r=t.data,i=r.length,n=0,a=0,o=t.pts;if(void 0!==o)for(;a<i;)if(M(r,a)){var s=O(e,r,a,o,n);if(!s)break;a+=s.length,n++}else a++;else m.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},t.parseID3PES=function(e,t){if(void 0!==t.pts){var r=U({},t,{type:this._avcTrack?u.MetadataSchema.emsg:u.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}else m.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},e}();function V(e,t){return(V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let K=function(e){function t(){return e.apply(this,arguments)||this}(r=t).prototype=Object.create(e.prototype),r.prototype.constructor=r,V(r,e);var r,i=t.prototype;return i.resetInitSegment=function(t,r,i,n){e.prototype.resetInitSegment.call(this,t,r,i,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:n,inputTimeScale:9e4,dropped:0}},t.probe=function(e){if(!e)return!1;for(var t=(l.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(function(e,t){if(t+1<e.length&&C(e,t)){var r=P(e,t),i=4;null!=r&&r.frameLength&&(i=r.frameLength);var n=t+i;return n===e.length||M(e,n)}return!1}(e,t))return m.logger.log("MPEG Audio sync word found !"),!0;return!1},i.canParse=function(e,t){return C(e,t)&&4<=e.length-t},i.appendFrame=function(e,t,r){if(null!==this.basePTS)return O(e,t,r,this.basePTS,this.frameIndex)},t}(f);var G=r(524),W=r(923);function q(e,t){var r=null==e?void 0:e.codec;return r&&r.length>4?r:"hvc1"===r||"hev1"===r?"hvc1.1.c.L120.90":"av01"===r?"av01.0.04M.08":"avc1"===r||t===W.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}let Y=function(){function e(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},t.resetNextTimestamp=function(){this.lastEndTime=null},t.resetInitSegment=function(e,t,r,i){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment((0,c.patchEncyptionData)(e,i)),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,r=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=(0,c.parseInitSegment)(e);t||(t=q(i.audio,W.ElementaryStreamTypes.AUDIO)),r||(r=q(i.video,W.ElementaryStreamTypes.VIDEO));var n={};i.audio&&i.video?n.audiovideo={container:"video/mp4",codec:t+","+r,initSegment:e,id:"main"}:i.audio?n.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?n.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:m.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n},t.remux=function(e,t,r,i,n){var a,o=this.initPTS,l=this.lastEndTime,u={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};(0,s.isFiniteNumber)(l)||(l=this.lastEndTime=n||0);var d=t.samples;if(!d||!d.length)return u;var h={initPTS:void 0,timescale:1},f=this.initData;if(f&&f.length||(this.generateInitSegment(d),f=this.initData),!f||!f.length)return m.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);var p=(0,c.getStartDTS)(f,d);(0,s.isFiniteNumber)(o)||(this.initPTS=h.initPTS=o=p-n);var v=(0,c.getDuration)(d,f),g=e?p-o:l,y=g+v;(0,c.offsetStartDTS)(f,d,o),v>0?this.lastEndTime=y:(m.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var b=!!f.audio,E=!!f.video,T="";b&&(T+="audio"),E&&(T+="video");var _={data1:d,startPTS:g,startDTS:g,endPTS:y,endDTS:y,type:T,hasAudio:b,hasVideo:E,nb:1,dropped:0};u.audio="audio"===_.type?_:void 0,u.video="audio"!==_.type?_:void 0,u.initSegment=h;var A=null!=(a=this.initPTS)?a:0;return u.id3=(0,G.flushTextTrackMetadataCueSamples)(r,n,A,A),i.samples.length&&(u.text=(0,G.flushTextTrackUserdataCueSamples)(i,n,A)),u},e}();try{i=self.performance.now.bind(self.performance)}catch($){m.logger.debug("Unable to use Performance API on this environment"),i=self.Date.now}var z=[{demux:k,remux:Y},{demux:H,remux:G.default},{demux:A,remux:G.default},{demux:K,remux:G.default}],X=function(){function e(e,t,r,i,n){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.vendor=i,this.id=n}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,r,n){var a,o=this,s=r.transmuxing;s.executeStart=i();var l=new Uint8Array(e),u=this.currentTransmuxState,d=this.transmuxConfig;n&&(this.currentTransmuxState=n);var c=n||u,h=c.contiguous,f=c.discontinuity,p=c.trackSwitch,m=c.accurateTimeOffset,v=c.timeOffset,g=c.initSegmentChange,y=d.audioCodec,b=d.videoCodec,E=d.defaultInitPts,T=d.duration,_=d.initSegmentData,A=(a=null,l.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(a=t),a);if(A&&"AES-128"===A.method){var S=this.getDecrypter();if(!S.isSync())return this.decryptionPromise=S.webCryptoDecrypt(l,A.key.buffer,A.iv.buffer).then(function(e){var t=o.push(e,null,r);return o.decryptionPromise=null,t}),this.decryptionPromise;var k=S.softwareDecrypt(l,A.key.buffer,A.iv.buffer);if(!k)return s.executeEnd=i(),Q(r);l=new Uint8Array(k)}var w=this.needsProbing(f,p);w&&this.configureTransmuxer(l),(f||p||g||w)&&this.resetInitSegment(_,y,b,T,t),(f||g||w)&&this.resetInitialTimestamp(E),h||this.resetContiguity();var L=this.transmux(l,A,v,m,r),I=this.currentTransmuxState;return I.contiguous=!0,I.discontinuity=!1,I.trackSwitch=!1,s.executeEnd=i(),L},t.flush=function(e){var t=this,r=e.transmuxing;r.executeStart=i();var o=this.decrypter,s=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then(function(){return t.flush(e)});var u=[],d=s.timeOffset;if(o){var c=o.flush();c&&u.push(this.push(c,null,e))}var h=this.demuxer,f=this.remuxer;if(!h||!f)return this.observer.emit(n.Events.ERROR,n.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),r.executeEnd=i(),[Q(e)];var p=h.flush(d);return Z(p)?p.then(function(r){return t.flushRemux(u,r,e),u}):(this.flushRemux(u,p,e),u)},t.flushRemux=function(e,t,r){var n=t.audioTrack,a=t.videoTrack,o=t.id3Track,s=t.textTrack,l=this.currentTransmuxState,u=l.accurateTimeOffset,d=l.timeOffset;m.logger.log("[transmuxer.ts]: Flushed fragment "+r.sn+(r.part>-1?" p: "+r.part:"")+" of level "+r.level);var c=this.remuxer.remux(n,a,o,s,d,u,!0,this.id);e.push({remuxResult:c,chunkMeta:r}),r.transmuxing.executeEnd=i()},t.resetInitialTimestamp=function(e){var t=this.demuxer,r=this.remuxer;t&&r&&(t.resetTimeStamp(e),r.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,r,i,n){var a=this.demuxer,o=this.remuxer;a&&o&&(a.resetInitSegment(e,t,r,i),o.resetInitSegment(e,t,r,n))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,r,i,n){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,r,i,n):this.transmuxUnencrypted(e,r,i,n)},t.transmuxUnencrypted=function(e,t,r,i){var n=this.demuxer.demux(e,t,!1,!this.config.progressive),a=n.audioTrack,o=n.videoTrack,s=n.id3Track,l=n.textTrack;return{remuxResult:this.remuxer.remux(a,o,s,l,t,r,!1,this.id),chunkMeta:i}},t.transmuxSampleAes=function(e,t,r,i,n){var a=this;return this.demuxer.demuxSampleAes(e,t,r).then(function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,r,i,!1,a.id),chunkMeta:n}})},t.configureTransmuxer=function(e){for(var t,r=this.config,i=this.observer,n=this.typeSupported,a=this.vendor,o=0,s=z.length;o<s;o++)if(z[o].demux.probe(e)){t=z[o];break}t||(m.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),t={demux:k,remux:Y});var l=this.demuxer,u=this.remuxer,d=t.remux,c=t.demux;u&&u instanceof d||(this.remuxer=new d(i,r,n,a)),l&&l instanceof c||(this.demuxer=new c(i,r,n),this.probe=c.probe)},t.needsProbing=function(e,t){return!this.demuxer||!this.remuxer||e||t},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new o.default(this.config)),e},e}(),Q=function(e){return{remuxResult:{},chunkMeta:e}};function Z(e){return"then"in e&&e.then instanceof Function}var J=function(e,t,r,i,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=i,this.defaultInitPts=n},ee=function(e,t,r,i,n,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=n,this.initSegmentChange=a}},973:(e,t,r)=>{"use strict";var i,n,a,o;r.r(t),r.d(t,{ErrorDetails:()=>n,ErrorTypes:()=>i}),(a=i||(i={})).NETWORK_ERROR="networkError",a.MEDIA_ERROR="mediaError",a.KEY_SYSTEM_ERROR="keySystemError",a.MUX_ERROR="muxError",a.OTHER_ERROR="otherError",(o=n||(n={})).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",o.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",o.KEY_SYSTEM_NO_SESSION="keySystemNoSession",o.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",o.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",o.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",o.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",o.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",o.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",o.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",o.MANIFEST_LOAD_ERROR="manifestLoadError",o.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",o.MANIFEST_PARSING_ERROR="manifestParsingError",o.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",o.LEVEL_EMPTY_ERROR="levelEmptyError",o.LEVEL_LOAD_ERROR="levelLoadError",o.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",o.LEVEL_SWITCH_ERROR="levelSwitchError",o.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",o.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",o.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",o.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",o.FRAG_LOAD_ERROR="fragLoadError",o.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",o.FRAG_DECRYPT_ERROR="fragDecryptError",o.FRAG_PARSING_ERROR="fragParsingError",o.REMUX_ALLOC_ERROR="remuxAllocError",o.KEY_LOAD_ERROR="keyLoadError",o.KEY_LOAD_TIMEOUT="keyLoadTimeOut",o.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",o.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",o.BUFFER_APPEND_ERROR="bufferAppendError",o.BUFFER_APPENDING_ERROR="bufferAppendingError",o.BUFFER_STALLED_ERROR="bufferStalledError",o.BUFFER_FULL_ERROR="bufferFullError",o.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",o.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",o.INTERNAL_EXCEPTION="internalException",o.INTERNAL_ABORTED="aborted",o.UNKNOWN="unknown"},851:(e,t,r)=>{"use strict";var i,n;r.r(t),r.d(t,{Events:()=>i}),(n=i||(i={})).MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached"},76:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>rQ});var i,n,a,o,s,l,u,d,c=r(945),h=r(965),f=r(851),p=r(973),m=r(93),v=/^(\d+)x(\d+)$/,g=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,y=function(){function e(t){for(var r in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){var r=this[e];return r?parseFloat(r):t},t.enumeratedString=function(e){return this[e]},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){var t=v.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};for(g.lastIndex=0;null!==(t=g.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},e}();function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}(E=d||(d={})).ID="ID",E.CLASS="CLASS",E.START_DATE="START-DATE",E.DURATION="DURATION",E.END_DATE="END-DATE",E.END_ON_NEXT="END-ON-NEXT",E.PLANNED_DURATION="PLANNED-DURATION",E.SCTE35_OUT="SCTE35-OUT",E.SCTE35_IN="SCTE35-IN";var E,T,_,A,S=function(){function e(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var r=t.attr;for(var i in r)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==r[i]){m.logger.warn('DATERANGE tag attribute: "'+i+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=i;break}e=b(new y({}),r,e)}if(this.attr=e,this._startDate=new Date(e[d.START_DATE]),d.END_DATE in this.attr){var n=new Date(this.attr[d.END_DATE]);(0,h.isFiniteNumber)(n.getTime())&&(this._endDate=n)}}return function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(e.prototype,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}},{key:"duration",get:function(){if(d.DURATION in this.attr){var e=this.attr.decimalFloatingPoint(d.DURATION);if((0,h.isFiniteNumber)(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return d.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(d.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(d.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,h.isFiniteNumber)(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}(),k=r(923),w=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t,this.advanced=this.endSN>e.endSN||t>0||0===t&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(e.prototype,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&(0,h.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!==(e=this.fragments)&&void 0!==e&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}();function L(e){return Uint8Array.from(atob(e),function(e){return e.charCodeAt(0)})}function I(e){return Uint8Array.from(unescape(encodeURIComponent(e)),function(e){return e.charCodeAt(0)})}function D(e){switch(e){case _.FAIRPLAY:return T.FAIRPLAY;case _.PLAYREADY:return T.PLAYREADY;case _.WIDEVINE:return T.WIDEVINE;case _.CLEARKEY:return T.CLEARKEY}}function R(e){switch(e){case T.FAIRPLAY:return _.FAIRPLAY;case T.PLAYREADY:return _.PLAYREADY;case T.WIDEVINE:return _.WIDEVINE;case T.CLEARKEY:return _.CLEARKEY}}function O(e){var t=e.drmSystems,r=e.widevineLicenseUrl,i=t?[T.FAIRPLAY,T.WIDEVINE,T.PLAYREADY,T.CLEARKEY].filter(function(e){return!!t[e]}):[];return!i[T.WIDEVINE]&&r&&i.push(T.WIDEVINE),i}(es=T||(T={})).CLEARKEY="org.w3.clearkey",es.FAIRPLAY="com.apple.fps",es.PLAYREADY="com.microsoft.playready",es.WIDEVINE="com.widevine.alpha",(el=_||(_={})).CLEARKEY="org.w3.clearkey",el.FAIRPLAY="com.apple.streamingkeydelivery",el.PLAYREADY="com.microsoft.playready",el.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",(A||(A={})).WIDEVINE="edef8ba979d64acea3c827dcd51d21ed";var P="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null,C=r(63),M={},x=function(){function e(e,t,r,i,n){void 0===i&&(i=[1]),void 0===n&&(n=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=i,this.iv=n,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}e.clearKeyUriToKeyIdMap=function(){M={}};var t=e.prototype;return t.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;switch(this.keyFormat){case"identity":return"SAMPLE-AES"===this.method;case _.FAIRPLAY:case _.WIDEVINE:case _.PLAYREADY:case _.CLEARKEY:return -1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},t.getDecryptData=function(t){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof t&&("AES-128"!==this.method||this.iv||m.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),t=0);var r=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}(t);return new e(this.method,this.uri,"identity",this.keyFormatVersions,r)}var i=function(e){var t,r,i=e.split(":"),n=null;if("data"===i[0]&&2===i.length){var a=i[1].split(";"),o=a[a.length-1].split(",");if(2===o.length){var s="base64"===o[0],l=o[1];s?(a.splice(-1,1),n=L(l)):(t=I(l).subarray(0,16),(r=new Uint8Array(16)).set(t,16-t.length),n=r)}}return n}(this.uri);if(i)switch(this.keyFormat){case _.WIDEVINE:this.pssh=i,i.length>=22&&(this.keyId=i.subarray(i.length-22,i.length-6));break;case _.PLAYREADY:var n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,C.mp4pssh)(n,null,i);var a=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2),o=String.fromCharCode.apply(null,Array.from(a)),s=o.substring(o.indexOf("<"),o.length),l=(new DOMParser).parseFromString(s,"text/xml").getElementsByTagName("KID")[0];if(l){var u=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(u){var d,c=L(u).subarray(0,16);(d=function(e,t,r){var i=e[t];e[t]=e[r],e[r]=i})(c,0,3),d(c,1,2),d(c,4,5),d(c,6,7),this.keyId=c}}break;default:var h=i.subarray(0,16);if(16!==h.length){var f=new Uint8Array(16);f.set(h,16-h.length),h=f}this.keyId=h}if(!this.keyId||16!==this.keyId.byteLength){var p=M[this.uri];if(!p){var v=Object.keys(M).length%Number.MAX_SAFE_INTEGER;p=new Uint8Array(16),new DataView(p.buffer,12,4).setUint32(0,v),M[this.uri]=p}this.keyId=p}return this},e}(),N={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function U(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}function F(){return(F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var B=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,j=/#EXT-X-MEDIA:(.*)/g,H=RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),V=RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),K=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(i.id===t)return i}},e.convertAVC1ToAVCOTI=function(e){var t=e.split(".");if(t.length>2){var r=t.shift()+".";return(r+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).slice(-4)}return e},e.resolve=function(e,t){return(0,c.buildAbsoluteURL)(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var i,n=[],a=[],o={},s=[],l=!1;for(B.lastIndex=0;null!=(i=B.exec(t));)if(i[1]){var u,d=new y(i[1]),c={attrs:d,bitrate:d.decimalInteger("AVERAGE-BANDWIDTH")||d.decimalInteger("BANDWIDTH"),name:d.NAME,url:e.resolve(i[2],r)},h=d.decimalResolution("RESOLUTION");h&&(c.width=h.width,c.height=h.height),function(e,t){["video","audio","text"].forEach(function(r){var i=e.filter(function(e){var t;return!!(t=N[r])&&!0===t[e.slice(0,4)]});if(i.length){var n=i.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[r+"Codec"]=n.length>0?n[0]:i[0],e=e.filter(function(e){return -1===i.indexOf(e)})}}),t.unknownCodecs=e}((d.CODECS||"").split(/[ ,]+/).filter(function(e){return e}),c),c.videoCodec&&-1!==c.videoCodec.indexOf("avc1")&&(c.videoCodec=e.convertAVC1ToAVCOTI(c.videoCodec)),null!==(u=c.unknownCodecs)&&void 0!==u&&u.length||a.push(c),n.push(c)}else if(i[3]){var f=new y(i[3]);f["DATA-ID"]&&(l=!0,o[f["DATA-ID"]]=f)}else if(i[4]){var p=i[4],v=G(p,r);v.encrypted&&v.isSupported()?s.push(v):m.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+p+'"')}return{levels:a.length>0&&a.length<n.length?a:n,sessionData:l?o:null,sessionKeys:s.length?s:null}},e.parseMasterPlaylistMedia=function(t,r,i,n){void 0===n&&(n=[]);var a,o=[],s=0;for(j.lastIndex=0;null!==(a=j.exec(t));){var l=new y(a[1]);if(l.TYPE===i){var u={attrs:l,bitrate:0,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:i,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?e.resolve(l.URI,r):""};if(n.length){var d=e.findGroup(n,u.groupId)||n[0];W(u,d,"audioCodec"),W(u,d,"textCodec")}o.push(u)}}return o},e.parseLevelPlaylist=function(e,t,r,i,n){var a,o,s,l=new w(t),u=l.fragments,d=null,c=0,f=0,p=0,v=0,g=null,b=new k.Fragment(i,t),E=-1,T=!1;for(H.lastIndex=0,l.m3u8=e;null!==(a=H.exec(e));){T&&(T=!1,(b=new k.Fragment(i,t)).start=p,b.sn=c,b.cc=v,b.level=r,d&&(b.initSegment=d,b.rawProgramDateTime=d.rawProgramDateTime,d.rawProgramDateTime=null));var _=a[1];if(_){b.duration=parseFloat(_);var A=(" "+a[2]).slice(1);b.title=A||null,b.tagList.push(A?["INF",_,A]:["INF",_])}else if(a[3]){if((0,h.isFiniteNumber)(b.duration)){if(b.start=p,s){b.levelkeys=s;var L=l.encryptedFragments;b.levelkeys&&Object.keys(b.levelkeys).some(function(e){return b.levelkeys[e].isCommonEncryption})&&(!L.length||L[L.length-1].levelkeys!==s)&&L.push(b)}b.sn=c,b.level=r,b.cc=v,b.urlId=n,u.push(b),b.relurl=(" "+a[3]).slice(1),q(b,g),g=b,p+=b.duration,c++,f=0,T=!0}}else if(a[4]){var I=(" "+a[4]).slice(1);g?b.setByteRange(I,g):b.setByteRange(I)}else if(a[5])b.rawProgramDateTime=(" "+a[5]).slice(1),b.tagList.push(["PROGRAM-DATE-TIME",b.rawProgramDateTime]),-1===E&&(E=u.length);else{if(!(a=a[0].match(V))){m.logger.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length&&void 0===a[o];o++);var D=(" "+a[o]).slice(1),R=(" "+a[o+1]).slice(1),O=a[o+2]?(" "+a[o+2]).slice(1):"";switch(D){case"PLAYLIST-TYPE":l.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":c=l.startSN=parseInt(R);break;case"SKIP":var P=new y(R),C=P.decimalInteger("SKIPPED-SEGMENTS");if((0,h.isFiniteNumber)(C)){l.skippedSegments=C;for(var M=C;M--;)u.unshift(null);c+=C}var x=P.enumeratedString("RECENTLY-REMOVED-DATERANGES");x&&(l.recentlyRemovedDateranges=x.split("	"));break;case"TARGETDURATION":l.targetduration=parseFloat(R);break;case"VERSION":l.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"#":(R||O)&&b.tagList.push(O?[R,O]:[R]);break;case"DISCONTINUITY":v++,b.tagList.push(["DIS"]);break;case"GAP":b.tagList.push([D]);break;case"BITRATE":b.tagList.push([D,R]);break;case"DATERANGE":var N=new y(R),U=new S(N,l.dateRanges[N.ID]);U.isValid||l.skippedSegments?l.dateRanges[U.id]=U:m.logger.warn('Ignoring invalid DATERANGE tag: "'+R+'"'),b.tagList.push(["EXT-X-DATERANGE",R]);break;case"DISCONTINUITY-SEQUENCE":v=parseInt(R);break;case"KEY":var B=G(R,t);if(B.isSupported()){if("NONE"===B.method){s=void 0;break}s||(s={}),s[B.keyFormat]&&(s=F({},s)),s[B.keyFormat]=B}else m.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+R+'"');break;case"START":var j=new y(R).decimalFloatingPoint("TIME-OFFSET");(0,h.isFiniteNumber)(j)&&(l.startTimeOffset=j);break;case"MAP":var K=new y(R);if(b.duration){var W=new k.Fragment(i,t);Y(W,K,r,s),d=W,b.initSegment=d,d.rawProgramDateTime&&!b.rawProgramDateTime&&(b.rawProgramDateTime=d.rawProgramDateTime)}else Y(b,K,r,s),d=b,T=!0;break;case"SERVER-CONTROL":var $=new y(R);l.canBlockReload=$.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=$.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=l.canSkipUntil>0&&$.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=$.optionalFloat("PART-HOLD-BACK",0),l.holdBack=$.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var z=new y(R);l.partTarget=z.decimalFloatingPoint("PART-TARGET");break;case"PART":var X=l.partList;X||(X=l.partList=[]);var Q=f>0?X[X.length-1]:void 0,Z=f++,J=new k.Part(new y(R),b,t,Z,Q);X.push(J),b.duration+=J.duration;break;case"PRELOAD-HINT":var ee=new y(R);l.preloadHint=ee;break;case"RENDITION-REPORT":var et=new y(R);l.renditionReports=l.renditionReports||[],l.renditionReports.push(et);break;default:m.logger.warn("line parsed but not handled: "+a)}}}g&&!g.relurl?(u.pop(),p-=g.duration,l.partList&&(l.fragmentHint=g)):l.partList&&(q(b,g),b.cc=v,l.fragmentHint=b);var er=u.length,ei=u[0],en=u[er-1];if((p+=l.skippedSegments*l.targetduration)>0&&er&&en){l.averagetargetduration=p/er;var ea=en.sn;l.endSN="initSegment"!==ea?ea:0,l.live||(en.endList=!0),ei&&(l.startCC=ei.cc)}else l.endSN=0,l.startCC=0;return l.fragmentHint&&(p+=l.fragmentHint.duration),l.totalduration=p,l.endCC=v,E>0&&function(e,t){for(var r=e[t],i=t;i--;){var n=e[i];if(!n)return;n.programDateTime=r.programDateTime-1e3*n.duration,r=n}}(u,E),l},e}();function G(e,t){var r,i,n=new y(e),a=null!=(r=n.enumeratedString("METHOD"))?r:"",o=n.URI,s=n.hexadecimalInteger("IV"),l=n.enumeratedString("KEYFORMATVERSIONS"),u=null!=(i=n.enumeratedString("KEYFORMAT"))?i:"identity";o&&n.IV&&!s&&m.logger.error("Invalid IV: "+n.IV);var d=o?K.resolve(o,t):"",c=(l||"1").split("/").map(Number).filter(Number.isFinite);return new x(a,d,u,c,s)}function W(e,t,r){var i=t[r];i&&(e[r]=i)}function q(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),(0,h.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function Y(e,t,r,i){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=r,e.sn="initSegment",i&&(e.levelkeys=i),e.initSegment=null}var $=r(308);function z(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r}let X=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}var t=e.prototype;return t.startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){var e=this.hls;e.on(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(f.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(f.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(f.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(f.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(f.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(f.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,i=t.loader,n=new(r||i)(t);return e.loader=n,this.loaders[e.type]=n,n},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var r=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:$.PlaylistContextType.MANIFEST,url:r,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var r=t.id,i=t.level,n=t.url,a=t.deliveryDirectives;this.load({id:r,groupId:null,level:i,responseType:"text",type:$.PlaylistContextType.LEVEL,url:n,deliveryDirectives:a})},t.onAudioTrackLoading=function(e,t){var r=t.id,i=t.groupId,n=t.url,a=t.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:$.PlaylistContextType.AUDIO_TRACK,url:n,deliveryDirectives:a})},t.onSubtitleTrackLoading=function(e,t){var r=t.id,i=t.groupId,n=t.url,a=t.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:$.PlaylistContextType.SUBTITLE_TRACK,url:n,deliveryDirectives:a})},t.load=function(e){var t,r,i,n,a,o,s=this.hls.config,l=this.getInternalLoader(e);if(l){var u=l.context;if(u&&u.url===e.url)return void m.logger.trace("[playlist-loader]: playlist request ongoing");m.logger.log("[playlist-loader]: aborting previous loader for type: "+e.type),l.abort()}switch(e.type){case $.PlaylistContextType.MANIFEST:r=s.manifestLoadingMaxRetry,i=s.manifestLoadingTimeOut,n=s.manifestLoadingRetryDelay,a=s.manifestLoadingMaxRetryTimeout;break;case $.PlaylistContextType.LEVEL:case $.PlaylistContextType.AUDIO_TRACK:case $.PlaylistContextType.SUBTITLE_TRACK:r=0,i=s.levelLoadingTimeOut;break;default:r=s.levelLoadingMaxRetry,i=s.levelLoadingTimeOut,n=s.levelLoadingRetryDelay,a=s.levelLoadingMaxRetryTimeout}if(l=this.createInternalLoader(e),null!==(t=e.deliveryDirectives)&&void 0!==t&&t.part&&(e.type===$.PlaylistContextType.LEVEL&&null!==e.level?o=this.hls.levels[e.level].details:e.type===$.PlaylistContextType.AUDIO_TRACK&&null!==e.id?o=this.hls.audioTracks[e.id].details:e.type===$.PlaylistContextType.SUBTITLE_TRACK&&null!==e.id&&(o=this.hls.subtitleTracks[e.id].details),o)){var d=o.partTarget,c=o.targetduration;d&&c&&(i=Math.min(1e3*Math.max(3*d,.8*c),i))}var h={timeout:i,maxRetry:r,retryDelay:n,maxRetryDelay:a,highWaterMark:0},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};l.load(e,h,f)},t.loadsuccess=function(e,t,r,i){void 0===i&&(i=null),this.resetInternalLoader(r.type);var n=e.data;0===n.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(e,t,r,i):this.handleMasterPlaylist(e,t,r,i)):this.handleManifestParsingError(e,r,"no EXTM3U delimiter",i)},t.loaderror=function(e,t,r){void 0===r&&(r=null),this.handleNetworkError(t,r,!1,e)},t.loadtimeout=function(e,t,r){void 0===r&&(r=null),this.handleNetworkError(t,r,!0)},t.handleMasterPlaylist=function(e,t,r,i){var n=this.hls,a=e.data,o=z(e,r),s=K.parseMasterPlaylist(a,o),l=s.levels,u=s.sessionData,d=s.sessionKeys;if(l.length){var c=l.map(function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}}),h=l.map(function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}}),p=K.parseMasterPlaylistMedia(a,o,"AUDIO",c),v=K.parseMasterPlaylistMedia(a,o,"SUBTITLES",h),g=K.parseMasterPlaylistMedia(a,o,"CLOSED-CAPTIONS");p.length&&(p.some(function(e){return!e.url})||!l[0].audioCodec||l[0].attrs.AUDIO||(m.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new y({}),bitrate:0,url:""}))),n.trigger(f.Events.MANIFEST_LOADED,{levels:l,audioTracks:p,subtitles:v,captions:g,url:o,stats:t,networkDetails:i,sessionData:u,sessionKeys:d})}else this.handleManifestParsingError(e,r,"no level found in manifest",i)},t.handleTrackOrLevelPlaylist=function(e,t,r,i){var n=this.hls,a=r.id,o=r.level,s=r.type,l=z(e,r),u=(0,h.isFiniteNumber)(a)?a:0,d=(0,h.isFiniteNumber)(o)?o:u,c=function(e){switch(e.type){case $.PlaylistContextType.AUDIO_TRACK:return $.PlaylistLevelType.AUDIO;case $.PlaylistContextType.SUBTITLE_TRACK:return $.PlaylistLevelType.SUBTITLE;default:return $.PlaylistLevelType.MAIN}}(r),m=K.parseLevelPlaylist(e.data,l,d,c,u);if(m.fragments.length){if(s===$.PlaylistContextType.MANIFEST){var v={attrs:new y({}),bitrate:0,details:m,name:"",url:l};n.trigger(f.Events.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:l,stats:t,networkDetails:i,sessionData:null,sessionKeys:null})}t.parsing.end=performance.now(),r.levelDetails=m,this.handlePlaylistLoaded(e,t,r,i)}else n.trigger(f.Events.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:l,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})},t.handleManifestParsingError=function(e,t,r,i){this.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:t.type===$.PlaylistContextType.MANIFEST,url:e.url,reason:r,response:e,context:t,networkDetails:i})},t.handleNetworkError=function(e,t,r,i){void 0===r&&(r=!1),m.logger.warn("[playlist-loader]: A network "+(r?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var n=p.ErrorDetails.UNKNOWN,a=!1,o=this.getInternalLoader(e);switch(e.type){case $.PlaylistContextType.MANIFEST:n=r?p.ErrorDetails.MANIFEST_LOAD_TIMEOUT:p.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case $.PlaylistContextType.LEVEL:n=r?p.ErrorDetails.LEVEL_LOAD_TIMEOUT:p.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case $.PlaylistContextType.AUDIO_TRACK:n=r?p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;case $.PlaylistContextType.SUBTITLE_TRACK:n=r?p.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:p.ErrorDetails.SUBTITLE_LOAD_ERROR,a=!1}o&&this.resetInternalLoader(e.type);var s={type:p.ErrorTypes.NETWORK_ERROR,details:n,fatal:a,url:e.url,loader:o,context:e,networkDetails:t};i&&(s.response=i),this.hls.trigger(f.Events.ERROR,s)},t.handlePlaylistLoaded=function(e,t,r,i){var n=r.type,a=r.level,o=r.id,s=r.groupId,l=r.loader,u=r.levelDetails,d=r.deliveryDirectives;if(null!=u&&u.targetduration){if(l)switch(u.live&&(l.getCacheAge&&(u.ageHeader=l.getCacheAge()||0),l.getCacheAge&&!isNaN(u.ageHeader)||(u.ageHeader=0)),n){case $.PlaylistContextType.MANIFEST:case $.PlaylistContextType.LEVEL:this.hls.trigger(f.Events.LEVEL_LOADED,{details:u,level:a||0,id:o||0,stats:t,networkDetails:i,deliveryDirectives:d});break;case $.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(f.Events.AUDIO_TRACK_LOADED,{details:u,id:o||0,groupId:s||"",stats:t,networkDetails:i,deliveryDirectives:d});break;case $.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(f.Events.SUBTITLE_TRACK_LOADED,{details:u,id:o||0,groupId:s||"",stats:t,networkDetails:i,deliveryDirectives:d})}}else this.handleManifestParsingError(e,r,"invalid target duration",i)},e}();function Q(e,t){var r;try{r=new Event("addtrack")}catch(i){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function Z(e,t){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw Error("addCue is failed for: "+t)}catch(n){m.logger.debug("[texttrack-utils]: "+n);var i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}"disabled"===r&&(e.mode=r)}function J(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var r=e.cues.length;r--;)e.removeCue(e.cues[r]);"disabled"===t&&(e.mode=t)}function ee(e,t,r,i){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var a=function(e,t,r){var i=[],n=function(e,t){if(t<e[0].startTime)return 0;var r=e.length-1;if(t>e[r].endTime)return -1;for(var i=0,n=r;i<=n;){var a=Math.floor((n+i)/2);if(t<e[a].startTime)n=a-1;else{if(!(t>e[a].startTime&&i<r))return a;i=a+1}}return e[i].startTime-t<t-e[n].startTime?i:n}(e,t);if(n>-1)for(var a=n,o=e.length;a<o;a++){var s=e[a];if(s.startTime>=t&&s.endTime<=r)i.push(s);else if(s.startTime>r)break}return i}(e.cues,t,r),o=0;o<a.length;o++)i&&!i(a[o])||e.removeCue(a[o]);"disabled"===n&&(e.mode=n)}var et=r(181),er=r(856);function ei(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var en=function(){var e=ei();try{new e(0,Number.POSITIVE_INFINITY,"")}catch(t){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function ea(e,t){return e.getTime()/1e3-t}let eo=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},t._registerListeners=function(){var e=this.hls;e.on(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(f.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(f.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(f.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},t._unregisterListeners=function(){var e=this.hls;e.off(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(f.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(f.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(f.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&(J(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},t.onManifestLoading=function(){this.dateRangeCuesAppended={}},t.createTrack=function(e){var t=this.getID3Track(e.textTracks);return t.mode="hidden",t},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return Q(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var r=this.hls.config,i=r.enableEmsgMetadataCues,n=r.enableID3MetadataCues;if(i||n){var a=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var o=ei(),s=0;s<a.length;s++){var l=a[s].type;if((l!==er.MetadataSchema.emsg||i)&&n){var u=et.getID3Frames(a[s].data);if(u){var d=a[s].pts,c=d+a[s].duration;c>en&&(c=en),c-d<=0&&(c=d+.25);for(var h=0;h<u.length;h++){var f=u[h];if(!et.isTimeStampFrame(f)){this.updateId3CueEnds(d);var p=new o(d,c,"");p.value=f,l&&(p.type=l),this.id3Track.addCue(p)}}}}}}}},t.updateId3CueEnds=function(e){var t,r=null===(t=this.id3Track)||void 0===t?void 0:t.cues;if(r)for(var i=r.length;i--;){var n=r[i];n.startTime<e&&n.endTime===en&&(n.endTime=e)}},t.onBufferFlushing=function(e,t){var r=t.startOffset,i=t.endOffset,n=t.type,a=this.id3Track,o=this.hls;if(o){var s=o.config,l=s.enableEmsgMetadataCues,u=s.enableID3MetadataCues;a&&(l||u)&&ee(a,r,i,"audio"===n?function(e){return e.type===er.MetadataSchema.audioId3&&u}:"video"===n?function(e){return e.type===er.MetadataSchema.emsg&&l}:function(e){return e.type===er.MetadataSchema.audioId3&&u||e.type===er.MetadataSchema.emsg&&l})}},t.onLevelUpdated=function(e,t){var r=this,i=t.details;if(this.media&&i.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var n=this.dateRangeCuesAppended,a=this.id3Track,o=i.dateRanges,s=Object.keys(o);if(a)for(var l=Object.keys(n).filter(function(e){return!s.includes(e)}),u=l.length;u--;)(function(e){var t=l[e];Object.keys(n[t].cues).forEach(function(e){a.removeCue(n[t].cues[e])}),delete n[t]})(u);var c=i.fragments[i.fragments.length-1];if(0!==s.length&&(0,h.isFiniteNumber)(null==c?void 0:c.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var f=c.programDateTime/1e3-c.start,p=ei(),m=0;m<s.length;m++)(function(e){var t=s[e],i=o[t],a=n[t],l=(null==a?void 0:a.cues)||{},u=(null==a?void 0:a.durationKnown)||!1,c=ea(i.startDate,f),h=en,m=i.endDate;if(m)h=ea(m,f),u=!0;else if(i.endOnNext&&!u){var v=s.reduce(function(e,t){var r=o[t];return r.class===i.class&&r.id!==t&&r.startDate>i.startDate&&e.push(r),e},[]).sort(function(e,t){return e.startDate.getTime()-t.startDate.getTime()})[0];v&&(h=ea(v.startDate,f),u=!0)}for(var g,y=Object.keys(i.attr),b=0;b<y.length;b++){var E=y[b];if(E!==d.ID&&E!==d.CLASS&&E!==d.START_DATE&&E!==d.DURATION&&E!==d.END_DATE&&E!==d.END_ON_NEXT){var T=l[E];if(T)u&&!a.durationKnown&&(T.endTime=h);else{var _=i.attr[E];T=new p(c,h,""),E!==d.SCTE35_OUT&&E!==d.SCTE35_IN||(g=_,_=Uint8Array.from(g.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),T.value={key:E,data:_},T.type=er.MetadataSchema.dateRange,r.id3Track.addCue(T),l[E]=T}}}n[t]={cues:l,dateRange:i,durationKnown:u}})(m)}}},e}();var es,el,eu,ed=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},t.registerListeners=function(){this.hls.on(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(f.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(f.Events.ERROR,this.onError,this)},t.unregisterListeners=function(){this.hls.off(f.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(f.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(f.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(f.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(f.Events.ERROR,this.onError)},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},t.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},t.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},t.onLevelUpdated=function(e,t){var r=t.details;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},t.onError=function(e,t){t.details===p.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,m.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},t.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var r=this.computeLatency();if(null!==r){this._latency=r;var i=this.config,n=i.lowLatencyMode,a=i.maxLiveSyncPlaybackRate;if(n&&1!==a){var o=this.targetLatency;if(null!==o){var s=r-o,l=s<Math.min(this.maxLatency,o+t.targetduration);if(t.live&&l&&s>.05&&this.forwardBufferLength>1){var u=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(Math.min(2,Math.max(1,a)),Math.max(1,u))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},t.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},t.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(e.prototype,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,r=e.partHoldBack,i=e.targetduration,n=this.config,a=n.liveSyncDuration,o=n.liveSyncDurationCount,s=n.lowLatencyMode,l=this.hls.userConfig,u=s&&r||t;return(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==a?a:o*i),u+Math.min(1*this.stallCount,i)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,r=this.levelDetails;if(null===e||null===t||null===r)return null;var i=r.edge,n=e-t-this.edgeStalled;return Math.min(Math.max(i-r.totalduration,n),i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration))}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}(),ec=["NONE","TYPE-0","TYPE-1","TYPE-2",null];(eS=eu||(eu={})).No="",eS.Yes="YES",eS.v2="v2";var eh=function(){function e(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href},e}(),ef=function(){function e(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter(function(e){return e}).join(",").replace(/\.[^.,]+/g,"")}return function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(e.prototype,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){var t=e%this.url.length;this._urlId!==t&&(this.details=void 0,this._urlId=t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}();function ep(){return(ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function em(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function ev(e){var t={};e.forEach(function(e){var r=e.groupId||"";e.id=t[r]=t[r]||0,t[r]++})}function eg(e,t){var r=t.startPTS;if((0,h.isFiniteNumber)(r)){var i,n=0;t.sn>e.sn?(n=r-e.start,i=e):(n=e.start-r,i=t),i.duration!==n&&(i.duration=n)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function ey(e,t,r,i,n,a){i-r<=0&&(m.logger.warn("Fragment should have a positive duration",t),i=r+t.duration,a=n+t.duration);var o=r,s=i,l=t.startPTS,u=t.endPTS;if((0,h.isFiniteNumber)(l)){var d=Math.abs(l-r);(0,h.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(d,t.deltaPTS):t.deltaPTS=d,o=Math.max(r,l),r=Math.min(r,l),n=Math.min(n,t.startDTS),s=Math.min(i,u),i=Math.max(i,u),a=Math.max(a,t.endDTS)}t.duration=i-r;var c=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.startDTS=n,t.endPTS=i,t.minEndPTS=s,t.endDTS=a;var f,p=t.sn;if(!e||p<e.startSN||p>e.endSN)return 0;var v=p-e.startSN,g=e.fragments;for(g[v]=t,f=v;f>0;f--)eg(g[f],g[f-1]);for(f=v;f<g.length-1;f++)eg(g[f],g[f+1]);return e.fragmentHint&&eg(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,c}function eb(e,t){var r=t.startSN+t.skippedSegments-e.startSN,i=e.fragments;r<0||r>=i.length||eE(t,i[r].start)}function eE(e,t){if(t){for(var r=e.fragments,i=e.skippedSegments;i<r.length;i++)r[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}var eT=function(){function e(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=m.logger.log.bind(m.logger,t+":"),this.warn=m.logger.warn.bind(m.logger,t+":"),this.hls=e}var t=e.prototype;return t.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function(e,t){t.fatal&&(t.type===p.ErrorTypes.NETWORK_ERROR||t.type===p.ErrorTypes.KEY_SYSTEM_ERROR)&&this.stopLoad()},t.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t){var r=null==t?void 0:t.renditionReports;if(r)for(var i=0;i<r.length;i++){var n=r[i],a=void 0;try{a=new self.URL(n.URI,t.url).href}catch(o){m.logger.warn("Could not construct new URL for Rendition Report: "+o),a=n.URI||""}if(a===e.slice(-a.length)){var s=parseInt(n["LAST-MSN"])||(null==t?void 0:t.lastPartSn),l=parseInt(n["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){var u=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&u>t.partTarget&&(l+=1)}return new eh(s,l>=0?l:void 0,eu.No)}}},t.loadPlaylist=function(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},t.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,r){var i=this,n=t.details,a=t.stats,o=self.performance.now(),s=a.loading.first?Math.max(0,o-a.loading.first):0;if(n.advancedDateTime=Date.now()-s,n.live||null!=r&&r.live){if(n.reloaded(r),r&&this.log("live playlist "+e+" "+(n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:"MISSED")),r&&n.fragments.length>0&&function(e,t){for(var r=null,i=e.fragments,n=i.length-1;n>=0;n--){var a=i[n].initSegment;if(a){r=a;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var o,s,l,u,d,c=0;if(function(e,t,r){for(var i=t.skippedSegments,n=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,o=t.startSN-e.startSN,s=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=n;u<=a;u++){var d=l[o+u],c=s[u];i&&!c&&u<i&&(c=t.fragments[u]=d),d&&c&&r(d,c)}}(e,t,function(e,i){e.relurl&&(c=e.cc-i.cc),(0,h.isFiniteNumber)(e.startPTS)&&(0,h.isFiniteNumber)(e.endPTS)&&(i.start=i.startPTS=e.startPTS,i.startDTS=e.startDTS,i.appendedPTS=e.appendedPTS,i.maxStartPTS=e.maxStartPTS,i.endPTS=e.endPTS,i.endDTS=e.endDTS,i.minEndPTS=e.minEndPTS,i.duration=e.endPTS-e.startPTS,i.duration&&(o=i),t.PTSKnown=t.alignedSliding=!0),i.elementaryStreams=e.elementaryStreams,i.loader=e.loader,i.stats=e.stats,i.urlId=e.urlId,e.initSegment&&(i.initSegment=e.initSegment,r=e.initSegment)}),r&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach(function(e){var t;e.initSegment&&e.initSegment.relurl!==(null===(t=r)||void 0===t?void 0:t.relurl)||(e.initSegment=r)}),t.skippedSegments){if(t.deltaUpdateFailed=t.fragments.some(function(e){return!e}),t.deltaUpdateFailed){m.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var f=t.skippedSegments;f--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=(s=e.dateRanges,l=t.dateRanges,u=t.recentlyRemovedDateranges,d=ep({},s),u&&u.forEach(function(e){delete d[e]}),Object.keys(l).forEach(function(e){var t=new S(l[e].attr,d[e]);t.isValid?d[e]=t:m.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(l[e].attr)+'"')}),d))}var p=t.fragments;if(c){m.logger.warn("discontinuity sliding from playlist, take drift into account");for(var v=0;v<p.length;v++)p[v].cc+=c}t.skippedSegments&&(t.startCC=t.fragments[0].cc),function(e,t,r){if(e&&t)for(var i,n=0,a=0,o=e.length;a<=o;a++){var s=e[a],l=t[a+n];s&&l&&s.index===l.index&&s.fragment.sn===l.fragment.sn?((i=l).elementaryStreams=s.elementaryStreams,i.stats=s.stats):n--}}(e.partList,t.partList),o?ey(t,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS):eb(e,t),p.length&&(t.totalduration=t.edge-p[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;var g=t.advancedDateTime;if(t.advanced&&g){var y=t.edge;t.driftStart||(t.driftStartTime=g,t.driftStart=y),t.driftEndTime=g,t.driftEnd=y}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}(r,n),!this.canLoad||!n.live)return;var l,u=void 0,d=void 0;if(n.canBlockReload&&n.endSN&&n.advanced){var c=this.hls.config.lowLatencyMode,f=n.lastPartSn,p=n.endSN,v=n.lastPartIndex,g=f===p;-1!==v?(u=g?p+1:f,d=g?c?0:v:v+1):u=p+1;var y=n.age,b=Math.min(y+n.ageHeader-n.partTarget,1.5*n.targetduration);if(b>0){if(r&&b>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+b+" with playlist age: "+n.age),b=0;else{var E=Math.floor(b/n.targetduration);u+=E,void 0!==d&&(d+=Math.round(b%n.targetduration/n.partTarget)),this.log("CDN Tune-in age: "+n.ageHeader+"s last advanced "+y.toFixed(2)+"s goal: "+b+" skip sn "+E+" to part "+d)}n.tuneInGoal=b}if(l=this.getDeliveryDirectives(n,t.deliveryDirectives,u,d),c||!g)return void this.loadPlaylist(l)}else l=this.getDeliveryDirectives(n,t.deliveryDirectives,u,d);var T=this.hls.mainForwardBufferInfo,_=T?T.end-T.len:0,A=function(e,t){void 0===t&&(t=1/0);var r=1e3*e.targetduration;if(e.updated){var i=e.fragments;if(i.length&&4*r>t){var n=1e3*i[i.length-1].duration;n<r&&(r=n)}}else r/=2;return Math.round(r)}(n,1e3*(n.edge-_));n.updated?o>this.requestScheduled+A&&(this.requestScheduled=a.loading.start):this.requestScheduled=-1,void 0!==u&&n.canBlockReload?this.requestScheduled=a.loading.first+A-(1e3*n.partTarget||1e3):this.requestScheduled=(-1===this.requestScheduled?o:this.requestScheduled)+A;var k=this.requestScheduled-o;k=Math.max(0,k),this.log("reload live playlist "+e+" in "+Math.round(k)+" ms"),this.timer=self.setTimeout(function(){return i.loadPlaylist(l)},k)}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,r,i){var n,a,o,s,l=(n=r,a=e.canSkipUntil,o=e.canSkipDateRanges,s=e.endSN,a&&(void 0!==n?n-s:0)<a?o?eu.v2:eu.Yes:eu.No);return null!=t&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,i=t.part,l=eu.No),new eh(r,i,l)},t.retryLoadingOrFail=function(e){var t,r=this,i=this.hls.config,n=this.retryCount<i.levelLoadingMaxRetry;if(n){if(this.requestScheduled=-1,this.retryCount++,e.details.indexOf("LoadTimeOut")>-1&&null!==(t=e.context)&&void 0!==t&&t.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*i.levelLoadingRetryDelay,i.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return r.loadPlaylist()},a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+e.details+'"')}}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return n},e}();function e_(){return(e_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function eA(e,t){return(eA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var eS,ek,ew=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),eL=function(e){function t(t){var r;return(r=e.call(this,t,"[level-controller]")||this)._levels=[],r._firstLevel=-1,r._startLevel=void 0,r.currentLevelIndex=-1,r.manualLevelIndex=-1,r.onParsedComplete=void 0,r._registerListeners(),r}(r=t).prototype=Object.create(e.prototype),r.prototype.constructor=r,eA(r,e);var r,i=t.prototype;return i._registerListeners=function(){var e=this.hls;e.on(f.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(f.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(f.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(f.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(f.Events.ERROR,this.onError,this)},i._unregisterListeners=function(){var e=this.hls;e.off(f.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(f.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(f.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(f.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(f.Events.ERROR,this.onError,this)},i.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,e.prototype.destroy.call(this)},i.startLoad=function(){this._levels.forEach(function(e){e.loadError=0}),e.prototype.startLoad.call(this)},i.onManifestLoaded=function(e,t){var r,i,n=[],a=[],o=[],s={},l=!1,u=!1,d=!1;if(t.levels.forEach(function(e){var t=e.attrs;l=l||!(!e.width||!e.height),u=u||!!e.videoCodec,d=d||!!e.audioCodec,ew&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0);var r=e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS;(i=s[r])?i.url.push(e.url):(i=new ef(e),s[r]=i,n.push(i)),t&&(t.AUDIO&&em(i,"audio",t.AUDIO),t.SUBTITLES&&em(i,"text",t.SUBTITLES))}),(l||u)&&d&&(n=n.filter(function(e){var t=e.videoCodec,r=e.width,i=e.height;return!!t||!(!r||!i)})),n=n.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||U(t,"audio"))&&(!r||U(r,"video"))}),t.audioTracks&&ev(a=t.audioTracks.filter(function(e){return!e.audioCodec||U(e.audioCodec,"audio")})),t.subtitles&&ev(o=t.subtitles),n.length>0){r=n[0].bitrate,n.sort(function(e,t){return e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"]?(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1:e.bitrate!==t.bitrate?e.bitrate-t.bitrate:e.attrs.SCORE!==t.attrs.SCORE?e.attrs.decimalFloatingPoint("SCORE")-t.attrs.decimalFloatingPoint("SCORE"):l&&e.height!==t.height?e.height-t.height:0}),this._levels=n;for(var c=0;c<n.length;c++)if(n[c].bitrate===r){this._firstLevel=c,this.log("manifest loaded, "+n.length+" level(s) found, first bitrate: "+r);break}var h=d&&!u,m={levels:n,audioTracks:a,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:d,video:u,altAudio:!h&&a.some(function(e){return!!e.url})};this.hls.trigger(f.Events.MANIFEST_PARSED,m),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},i.onError=function(t,r){var i,n;if(e.prototype.onError.call(this,t,r),!r.fatal){var a=r.context,o=this._levels[this.currentLevelIndex];if(a&&(a.type===$.PlaylistContextType.AUDIO_TRACK&&o.audioGroupIds&&a.groupId===o.audioGroupIds[o.urlId]||a.type===$.PlaylistContextType.SUBTITLE_TRACK&&o.textGroupIds&&a.groupId===o.textGroupIds[o.urlId]))this.redundantFailover(this.currentLevelIndex);else{var s,l=!1,u=!0;switch(r.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:if(r.frag){var d=r.frag.type===$.PlaylistLevelType.MAIN?r.frag.level:this.currentLevelIndex,c=this._levels[d];c?(c.fragmentError++,c.fragmentError>this.hls.config.fragLoadingMaxRetry&&(s=d)):s=d}break;case p.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var h=o.attrs["HDCP-LEVEL"];h&&(this.hls.maxHdcpLevel=ec[ec.indexOf(h)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'));case p.ErrorDetails.FRAG_PARSING_ERROR:case p.ErrorDetails.KEY_SYSTEM_NO_SESSION:s=(null===(i=r.frag)||void 0===i?void 0:i.type)===$.PlaylistLevelType.MAIN?r.frag.level:this.currentLevelIndex,r.levelRetry=!1;break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:a&&(a.deliveryDirectives&&(u=!1),s=a.level),l=!0;break;case p.ErrorDetails.REMUX_ALLOC_ERROR:s=null!=(n=r.level)?n:this.currentLevelIndex,l=!0}void 0!==s&&this.recoverLevel(r,s,l,u)}}},i.recoverLevel=function(e,t,r,i){var n=e.details,a=this._levels[t];if(a.loadError++,r){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(i){var o=a.url.length;if(o>1&&a.loadError<o)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){for(var s=-1,l=this._levels,u=l.length;u--;){var d=(u+this.currentLevelIndex)%l.length;if(d!==this.currentLevelIndex&&0===l[d].loadError){s=d;break}}s>-1&&this.currentLevelIndex!==s?(this.warn(n+": switch to "+s),e.levelRetry=!0,this.hls.nextAutoLevel=s):!1===e.levelRetry&&(e.fatal=!0)}}},i.redundantFailover=function(e){var t=this._levels[e],r=t.url.length;if(r>1){var i=(t.urlId+1)%r;this.warn("Switching to redundant URL-id "+i),this._levels.forEach(function(e){e.urlId=i}),this.level=e}},i.onFragLoaded=function(e,t){var r=t.frag;if(void 0!==r&&r.type===$.PlaylistLevelType.MAIN){var i=this._levels[r.level];void 0!==i&&(i.fragmentError=0,i.loadError=0)}},i.onLevelLoaded=function(e,t){var r,i,n=t.level,a=t.details,o=this._levels[n];if(!o)return this.warn("Invalid level index "+n),void(null!==(i=t.deliveryDirectives)&&void 0!==i&&i.skip&&(a.deltaUpdateFailed=!0));n===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0,this.retryCount=0),this.playlistLoaded(n,t,o.details)):null!==(r=t.deliveryDirectives)&&void 0!==r&&r.skip&&(a.deltaUpdateFailed=!0)},i.onAudioTrackSwitched=function(e,t){var r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var i=-1,n=this.hls.audioTracks[t.id].groupId,a=0;a<r.audioGroupIds.length;a++)if(r.audioGroupIds[a]===n){i=a;break}i!==r.urlId&&(r.urlId=i,this.startLoad())}},i.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var r=this.currentLevelIndex,i=this._levels[r];if(this.canLoad&&i&&i.url.length>0){var n=i.urlId,a=i.url[n];if(t)try{a=t.addDirectives(a)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: "+o)}this.log("Attempt loading level index "+r+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+n+" "+a),this.clearTimer(),this.hls.trigger(f.Events.LEVEL_LOADING,{url:a,level:r,id:n,deliveryDirectives:t||null})}},i.removeLevel=function(e,t){var r=function(e,r){return r!==t},i=this._levels.filter(function(i,n){return n!==e||i.url.length>1&&void 0!==t&&(i.url=i.url.filter(r),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(r)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(r)),i.urlId=0,!0)}).map(function(e,t){var r=e.details;return null!=r&&r.fragments&&r.fragments.forEach(function(e){e.level=t}),e});this._levels=i,this.hls.trigger(f.Events.LEVELS_UPDATED,{levels:i})},function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(t.prototype,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t,r=this._levels;if(0!==r.length&&(this.currentLevelIndex!==e||null===(t=r[e])||void 0===t||!t.details)){if(e<0||e>=r.length){var i=e<0;if(this.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.OTHER_ERROR,details:p.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:i,reason:"invalid level idx"}),i)return;e=Math.min(e,r.length-1)}this.clearTimer();var n=this.currentLevelIndex,a=r[n],o=r[e];this.log("switching to level "+e+" from "+n),this.currentLevelIndex=e;var s=e_({},o,{level:e,maxBitrate:o.maxBitrate,uri:o.uri,urlId:o.urlId});delete s._urlId,this.hls.trigger(f.Events.LEVEL_SWITCHING,s);var l=o.details;if(!l||l.live){var u=this.switchParams(o.uri,null==a?void 0:a.details);this.loadPlaylist(u)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return -1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),Object.defineProperty(t,"prototype",{writable:!1}),t}(eT);(tO=ek||(ek={})).NOT_LOADED="NOT_LOADED",tO.APPENDING="APPENDING",tO.PARTIAL="PARTIAL",tO.OK="OK";var eI=function(){function e(e){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(f.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.on(f.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(f.Events.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(f.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.off(f.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(f.Events.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},t.getAppendedFrag=function(e,t){if(t===$.PlaylistLevelType.MAIN){var r=this.activeFragment,i=this.activeParts;if(!r)return null;if(i)for(var n=i.length;n--;){var a=i[n],o=a?a.end:r.appendedPTS;if(a.start<=e&&void 0!==o&&e<=o)return n>9&&(this.activeParts=i.slice(n-9)),a}else if(r.start<=e&&void 0!==r.appendedPTS&&e<=r.appendedPTS)return r}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){for(var r=this.fragments,i=Object.keys(r),n=i.length;n--;){var a=r[i[n]];if((null==a?void 0:a.body.type)===t&&a.buffered){var o=a.body;if(o.start<=e&&e<=o.end)return o}}return null},t.detectEvictedFragments=function(e,t,r){var i=this;this.timeRanges&&(this.timeRanges[e]=t),Object.keys(this.fragments).forEach(function(n){var a=i.fragments[n];if(a){if(a.buffered||a.loaded){var o=a.range[e];o&&o.time.some(function(e){var r=!i.isTimeBuffered(e.startPTS,e.endPTS,t);return r&&i.removeFragment(a.body),r})}else a.body.type===r&&i.removeFragment(a.body)}})},t.detectPartialFragments=function(e){var t=this,r=this.timeRanges,i=e.frag,n=e.part;if(r&&"initSegment"!==i.sn){var a=eR(i),o=this.fragments[a];o&&(Object.keys(r).forEach(function(e){var a=i.elementaryStreams[e];if(a){var s=r[e],l=null!==n||!0===a.partial;o.range[e]=t.getBufferedTimes(i,n,l,s)}}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,o.body.endList&&(this.endListFragments[o.body.type]=o)):this.removeFragment(o.body))}},t.fragBuffered=function(e){var t=eR(e),r=this.fragments[t];r&&(r.loaded=null,r.buffered=!0)},t.getBufferedTimes=function(e,t,r,i){for(var n={time:[],partial:r},a=t?t.start:e.start,o=t?t.end:e.end,s=e.minEndPTS||o,l=e.maxStartPTS||a,u=0;u<i.length;u++){var d=i.start(u)-this.bufferPadding,c=i.end(u)+this.bufferPadding;if(l>=d&&s<=c){n.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});break}if(a<c&&o>d)n.partial=!0,n.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});else if(o<=d)break}return n},t.getPartialFragment=function(e){var t,r,i,n=null,a=0,o=this.bufferPadding,s=this.fragments;return Object.keys(s).forEach(function(l){var u=s[l];u&&eD(u)&&(r=u.body.start-o,i=u.body.end+o,e>=r&&e<=i&&a<=(t=Math.min(e-r,i-e))&&(n=u.body,a=t))}),n},t.isEndListAppended=function(e){var t=this.endListFragments[e];return void 0!==t&&(t.buffered||eD(t))},t.getState=function(e){var t=eR(e),r=this.fragments[t];return r?r.buffered?eD(r)?ek.PARTIAL:ek.OK:ek.APPENDING:ek.NOT_LOADED},t.isTimeBuffered=function(e,t,r){for(var i,n,a=0;a<r.length;a++){if(i=r.start(a)-this.bufferPadding,n=r.end(a)+this.bufferPadding,e>=i&&t<=n)return!0;if(t<=i)break}return!1},t.onFragLoaded=function(e,t){var r=t.frag,i=t.part;if("initSegment"!==r.sn&&!r.bitrateTest&&!i){var n=eR(r);this.fragments[n]={body:r,loaded:t,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var r=this,i=t.frag,n=t.part,a=t.timeRanges;if(i.type===$.PlaylistLevelType.MAIN){if(this.activeFragment!==i&&(this.activeFragment=i,i.appendedPTS=void 0),n){var o=this.activeParts;o||(this.activeParts=o=[]),o.push(n)}else this.activeParts=null}this.timeRanges=a,Object.keys(a).forEach(function(e){var t=a[e];if(r.detectEvictedFragments(e,t),!n&&i.type===$.PlaylistLevelType.MAIN){var o=i.elementaryStreams[e];if(!o)return;for(var s=0;s<t.length;s++){var l=t.end(s);l<=o.endPTS&&l>o.startPTS?i.appendedPTS=Math.max(l,i.appendedPTS||0):i.appendedPTS=o.endPTS}}})},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=eR(e);return!!this.fragments[t]},t.removeFragmentsInRange=function(e,t,r){var i=this;Object.keys(this.fragments).forEach(function(n){var a=i.fragments[n];if(a&&a.buffered){var o=a.body;o.type===r&&o.start<t&&o.end>e&&i.removeFragment(o)}})},t.removeFragment=function(e){var t=eR(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),e.appendedPTS=void 0,delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]},t.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},e}();function eD(e){var t,r;return e.buffered&&((null===(t=e.range.video)||void 0===t?void 0:t.partial)||(null===(r=e.range.audio)||void 0===r?void 0:r.partial))}function eR(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}function eO(e){var t="function"==typeof Map?new Map:void 0;return(eO=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return eP(e,arguments,eM(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),eC(r,e)})(e)}function eP(e,t,r){return(eP=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,r){var i=[null];i.push.apply(i,t);var n=new(Function.bind.apply(e,i));return r&&eC(n,r.prototype),n}:Reflect.construct.bind()).apply(null,arguments)}function eC(e,t){return(eC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eM(e){return(eM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ex=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(e,t){var r=this,i=e.url;if(!i)return Promise.reject(new eU({type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(i?"part list":"url")));this.abort();var n=this.config,a=n.fLoader,o=n.loader;return new Promise(function(i,s){r.loader&&r.loader.destroy();var l=r.loader=e.loader=a?new a(n):new o(n),u=eN(e),d={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout,highWaterMark:"initSegment"===e.sn?1/0:131072};e.stats=l.stats,l.load(u,d,{onSuccess:function(t,n,a,o){r.resetLoader(e,l);var s=t.data;a.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),i({frag:e,part:null,payload:s,networkDetails:o})},onError:function(t,i,n){r.resetLoader(e,l),s(new eU({type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:t,networkDetails:n}))},onAbort:function(t,i,n){r.resetLoader(e,l),s(new eU({type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:n}))},onTimeout:function(t,i,n){r.resetLoader(e,l),s(new eU({type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:n}))},onProgress:function(r,i,n,a){t&&t({frag:e,part:null,payload:n,networkDetails:a})}})})},t.loadPart=function(e,t,r){var i=this;this.abort();var n=this.config,a=n.fLoader,o=n.loader;return new Promise(function(s,l){i.loader&&i.loader.destroy();var u=i.loader=e.loader=a?new a(n):new o(n),d=eN(e,t),c={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout,highWaterMark:131072};t.stats=u.stats,u.load(d,c,{onSuccess:function(n,a,o,l){i.resetLoader(e,u),i.updateStatsFromPart(e,t);var d={frag:e,part:t,payload:n.data,networkDetails:l};r(d),s(d)},onError:function(r,n,a){i.resetLoader(e,u),l(new eU({type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:r,networkDetails:a}))},onAbort:function(r,n,a){e.stats.aborted=t.stats.aborted,i.resetLoader(e,u),l(new eU({type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,networkDetails:a}))},onTimeout:function(r,n,a){i.resetLoader(e,u),l(new eU({type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,networkDetails:a}))}})})},t.updateStatsFromPart=function(e,t){var r=e.stats,i=t.stats,n=i.total;if(r.loaded+=i.loaded,n){var a=Math.round(e.duration/t.duration),o=Math.min(Math.round(r.loaded/n),a),s=(a-o)*Math.round(r.loaded/o);r.total=r.loaded+s}else r.total=Math.max(r.loaded,r.total);var l=r.loading,u=i.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}();function eN(e,t){void 0===t&&(t=null);var r=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},n=r.byteRangeStartOffset,a=r.byteRangeEndOffset;if((0,h.isFiniteNumber)(n)&&(0,h.isFiniteNumber)(a)){var o,s=n,l=a;if("initSegment"===e.sn&&"AES-128"===(null===(o=e.decryptdata)||void 0===o?void 0:o.method)){var u=a-n;u%16&&(l=a+(16-u%16)),0!==n&&(i.resetIV=!0,s=n-16)}i.rangeStart=s,i.rangeEnd=l}return i}var eU=function(e){var t;function r(t){for(var r,i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return(r=e.call.apply(e,[this].concat(n))||this).data=void 0,r.data=t,r}return(t=r).prototype=Object.create(e.prototype),t.prototype.constructor=t,eC(t,e),r}(eO(Error)),eF=function(){function e(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}var t=e.prototype;return t.abort=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.abort()}},t.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}},t.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}},t.createKeyLoadError=function(e,t,r,i){return void 0===t&&(t=p.ErrorDetails.KEY_LOAD_ERROR),new eU({type:p.ErrorTypes.NETWORK_ERROR,details:t,fatal:!1,frag:e,networkDetails:r})},t.loadClear=function(e,t){var r=this;if(this.emeController&&this.config.emeEnabled)for(var i=e.sn,n=e.cc,a=0;a<t.length&&"break"!==function(e){var a=t[e];if(n<=a.cc&&("initSegment"===i||i<a.sn))return r.emeController.selectKeySystemFormat(a).then(function(e){a.setKeyFormat(e)}),"break"}(a);a++);},t.load=function(e){var t=this;return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(function(r){return t.loadInternal(e,r)}):this.loadInternal(e)},t.loadInternal=function(e,t){t&&e.setKeyFormat(t);var r=e.decryptdata;if(!r)return Promise.reject(this.createKeyLoadError(e,p.ErrorDetails.KEY_LOAD_ERROR,null,t?"Expected frag.decryptdata to be defined after setting format "+t:"Missing decryption data on fragment in onKeyLoading"));var i=r.uri;if(!i)return Promise.reject(this.createKeyLoadError(e,p.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+i+'"'));var n,a,o,s=this.keyUriToKeyInfo[i];if(null!==(n=s)&&void 0!==n&&n.decryptdata.key)return r.key=s.decryptdata.key,Promise.resolve({frag:e,keyInfo:s});if(null!==(a=s)&&void 0!==a&&a.keyLoadPromise)switch(null===(o=s.mediaKeySessionContext)||void 0===o?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return s.keyLoadPromise}switch(s=this.keyUriToKeyInfo[i]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===r.keyFormat?this.loadKeyHTTP(s,e):this.loadKeyEME(s,e);case"AES-128":return this.loadKeyHTTP(s,e);default:return Promise.reject(this.createKeyLoadError(e,p.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+r.method+'"'))}},t.loadKeyEME=function(e,t){var r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i=this.emeController.loadKey(r);if(i)return(e.keyLoadPromise=i.then(function(t){return e.mediaKeySessionContext=t,r})).catch(function(t){throw e.keyLoadPromise=null,t})}return Promise.resolve(r)},t.loadKeyHTTP=function(e,t){var r=this,i=this.config,n=new i.loader(i);return t.keyLoader=e.loader=n,e.keyLoadPromise=new Promise(function(a,o){var s={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},l={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:i.fragLoadingRetryDelay,maxRetryDelay:i.fragLoadingMaxRetryTimeout,highWaterMark:0};n.load(s,l,{onSuccess:function(e,t,i,n){var s=i.frag,l=i.keyInfo,u=i.url;if(!s.decryptdata||l!==r.keyUriToKeyInfo[u])return o(r.createKeyLoadError(s,p.ErrorDetails.KEY_LOAD_ERROR,n,"after key load, decryptdata unset or changed"));l.decryptdata.key=s.decryptdata.key=new Uint8Array(e.data),s.keyLoader=null,l.loader=null,a({frag:s,keyInfo:l})},onError:function(e,i,n){r.resetLoader(i),o(r.createKeyLoadError(t,p.ErrorDetails.KEY_LOAD_ERROR,n))},onTimeout:function(e,i,n){r.resetLoader(i),o(r.createKeyLoadError(t,p.ErrorDetails.KEY_LOAD_TIMEOUT,n))},onAbort:function(e,i,n){r.resetLoader(i),o(r.createKeyLoadError(t,p.ErrorDetails.INTERNAL_ABORTED,n))}})})},t.resetLoader=function(e){var t=e.frag,r=e.keyInfo,i=e.url,n=r.loader;t.keyLoader===n&&(t.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],n&&n.destroy()},e}(),eB=function(){function e(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function(){},t.hasInterval=function(){return!!this._tickInterval},t.hasNextTick=function(){return!!this._tickTimer},t.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},t.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function(){},e}(),ej={length:0,start:function(){return 0},end:function(){return 0}},eH=function(){function e(){}return e.isBuffered=function(t,r){try{if(t){for(var i=e.getBuffered(t),n=0;n<i.length;n++)if(r>=i.start(n)&&r<=i.end(n))return!0}}catch(a){}return!1},e.bufferInfo=function(t,r,i){try{if(t){var n,a=e.getBuffered(t),o=[];for(n=0;n<a.length;n++)o.push({start:a.start(n),end:a.end(n)});return this.bufferedInfo(o,r,i)}}catch(s){}return{len:0,start:r,end:r,nextStart:void 0}},e.bufferedInfo=function(e,t,r){t=Math.max(0,t),e.sort(function(e,t){return e.start-t.start||t.end-e.end});var i=[];if(r)for(var n=0;n<e.length;n++){var a=i.length;if(a){var o=i[a-1].end;e[n].start-o<r?e[n].end>o&&(i[a-1].end=e[n].end):i.push(e[n])}else i.push(e[n])}else i=e;for(var s,l=0,u=t,d=t,c=0;c<i.length;c++){var h=i[c].start,f=i[c].end;if(t+r>=h&&t<f)u=h,l=(d=f)-t;else if(t+r<h){s=h;break}}return{len:l,start:u||0,end:d||0,nextStart:s}},e.getBuffered=function(e){try{return e.buffered}catch(t){return m.logger.log("failed to get media.buffered",t),ej}},e}(),eV=function(e,t,r,i,n,a){void 0===i&&(i=0),void 0===n&&(n=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=r,this.size=i,this.part=n,this.partial=a};function eK(e,t){for(var r=null,i=0,n=e.length;i<n;i++){var a=e[i];if(a&&a.cc===t){r=a;break}}return r}function eG(e,t){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}function eW(e,t){for(var r=t.fragments,i=0,n=r.length;i<n;i++)eG(r[i],e);t.fragmentHint&&eG(t.fragmentHint,e),t.alignedSliding=!0}function eq(e,t){if(e.hasProgramDateTime&&t.hasProgramDateTime){var r=e.fragments,i=t.fragments;if(r.length&&i.length){var n=i[Math.round(i.length/2)-1],a=eK(r,n.cc)||r[Math.round(r.length/2)-1],o=n.programDateTime,s=a.programDateTime;null!==o&&null!==s&&eW((s-o)/1e3-(a.start-n.start),e)}}}let eY=function(e,t){for(var r=0,i=e.length-1,n=null,a=null;r<=i;){var o=t(a=e[n=(r+i)/2|0]);if(o>0)r=n+1;else{if(!(o<0))return a;i=n-1}}return null};function e$(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=null;if(e?n=t[e.sn-t[0].sn+1]||null:0===r&&0===t[0].start&&(n=t[0]),n&&0===ez(r,i,n))return n;var a=eY(t,ez.bind(null,r,i));return!a||a===e&&n?n:a}function ez(e,t,r){if(void 0===e&&(e=0),void 0===t&&(t=0),r.start<=e&&r.start+r.duration>e)return 0;var i=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=e?1:r.start-i>e&&r.start?-1:0}var eX=r(21);let eQ=function(e){for(var t="",r=e.length,i=0;i<r;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t};function eZ(e,t){return(eZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var eJ="STOPPED",e0="IDLE",e1="KEY_LOADING",e2="FRAG_LOADING",e5="FRAG_LOADING_WAITING_RETRY",e4="WAITING_TRACK",e3="PARSING",e8="PARSED",e6="ENDED",e7="ERROR",e9="WAITING_INIT_PTS",te="WAITING_LEVEL",tt=function(e){function t(t,r,i,n){var a;return(a=e.call(this)||this).hls=void 0,a.fragPrevious=null,a.fragCurrent=null,a.fragmentTracker=void 0,a.transmuxer=null,a._state=eJ,a.media=null,a.mediaBuffer=null,a.config=void 0,a.bitrateTest=!1,a.lastCurrentTime=0,a.nextLoadPosition=0,a.startPosition=0,a.loadedmetadata=!1,a.fragLoadError=0,a.retryDate=0,a.levels=null,a.fragmentLoader=void 0,a.keyLoader=void 0,a.levelLastLoaded=null,a.startFragRequested=!1,a.decrypter=void 0,a.initPTS=[],a.onvseeking=null,a.onvended=null,a.logPrefix="",a.log=void 0,a.warn=void 0,a.logPrefix=n,a.log=m.logger.log.bind(m.logger,n+":"),a.warn=m.logger.warn.bind(m.logger,n+":"),a.hls=t,a.fragmentLoader=new ex(t.config),a.keyLoader=i,a.fragmentTracker=r,a.config=t.config,a.decrypter=new eX.default(t.config),t.on(f.Events.LEVEL_SWITCHING,a.onLevelSwitching,function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)),a}(r=t).prototype=Object.create(e.prototype),r.prototype.constructor=r,eZ(r,e);var r,i=t.prototype;return i.doTick=function(){this.onTickEnd()},i.onTickEnd=function(){},i.startLoad=function(e){},i.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var e=this.fragCurrent;e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=eJ},i._streamEnded=function(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;var r=t.partList;if(null!=r&&r.length){var i=r[r.length-1];return eH.isBuffered(this.media,i.start+i.duration/2)}var n=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(n)},i.getLevelDetails=function(){var e;if(this.levels&&null!==this.levelLastLoaded)return null===(e=this.levels[this.levelLastLoaded])||void 0===e?void 0:e.details},i.onMediaAttached=function(e,t){var r=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.state===eJ&&this.startLoad(i.startPosition)},i.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},i.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,r=this.media,i=this.mediaBuffer,n=this.state,a=r?r.currentTime:0,o=eH.bufferInfo(i||r,a,e.maxBufferHole);if(this.log("media seeking to "+((0,h.isFiniteNumber)(a)?a.toFixed(3):a)+", state: "+n),this.state===e6)this.resetLoadingState();else if(t){var s=e.maxFragLookUpTolerance,l=t.start-s,u=t.start+t.duration+s;if(!o.len||u<o.start||l>o.end){var d=a>u;(a<l||d)&&(d&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests()),this.resetLoadingState())}}r&&(this.lastCurrentTime=a),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},i.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.onLevelSwitching=function(e,t){this.fragLoadError=0},i.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},i.onHandlerDestroyed=function(){this.state=eJ,this.hls.off(f.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},i.loadFragment=function(e,t,r){this._loadFragForPlayback(e,t,r)},i._loadFragForPlayback=function(e,t,r){var i=this;this._doFragLoad(e,t,r,function(t){if(i.fragContextChanged(e))return i.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),void i.fragmentTracker.removeFragment(e);e.stats.chunkCount++,i._handleFragmentLoadProgress(t)}).then(function(t){if(t){i.fragLoadError=0;var r=i.state;i.fragContextChanged(e)?r!==e2&&(i.fragCurrent||r!==e3)||(i.fragmentTracker.removeFragment(e),i.state=e0):("payload"in t&&(i.log("Loaded fragment "+e.sn+" of level "+e.level),i.hls.trigger(f.Events.FRAG_LOADED,t)),i._handleFragmentLoadComplete(t))}}).catch(function(t){i.state!==eJ&&i.state!==e7&&(i.warn(t),i.resetFragmentLoading(e))})},i.flushMainBuffer=function(e,t,r){if(void 0===r&&(r=null),e-t){var i={startOffset:e,endOffset:t,type:r};this.fragLoadError=0,this.hls.trigger(f.Events.BUFFER_FLUSHING,i)}},i._loadInitSegment=function(e,t){var r=this;this._doFragLoad(e,t).then(function(t){if(!t||r.fragContextChanged(e)||!r.levels)throw Error("init load aborted");return t}).then(function(t){var i=r.hls,n=t.payload,a=e.decryptdata;if(n&&n.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var o=self.performance.now();return r.decrypter.decrypt(new Uint8Array(n),a.key.buffer,a.iv.buffer).then(function(r){var n=self.performance.now();return i.trigger(f.Events.FRAG_DECRYPTED,{frag:e,payload:r,stats:{tstart:o,tdecrypt:n}}),t.payload=r,t})}return t}).then(function(t){var i=r.fragCurrent,n=r.hls,a=r.levels;if(!a)throw Error("init load aborted, missing levels");a[e.level].details;var o=e.stats;r.state=e0,r.fragLoadError=0,e.data=new Uint8Array(t.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),t.frag===i&&n.trigger(f.Events.FRAG_BUFFERED,{stats:o,frag:i,part:null,id:e.type}),r.tick()}).catch(function(t){r.state!==eJ&&r.state!==e7&&(r.warn(t),r.resetFragmentLoading(e))})},i.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},i.fragBufferedComplete=function(e,t){var r,i,n=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" "+(n?eQ(eH.getBuffered(n)):"(detached)")),this.state=e0,n&&(!this.loadedmetadata&&e.type==$.PlaylistLevelType.MAIN&&n.buffered.length&&(null===(r=this.fragCurrent)||void 0===r?void 0:r.sn)===(null===(i=this.fragPrevious)||void 0===i?void 0:i.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},i.seekToStartPos=function(){},i._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var r=e.frag,i=e.part,n=e.partsLoaded,a=!n||0===n.length||n.some(function(e){return!e}),o=new eV(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(o)}},i._handleFragmentLoadProgress=function(e){},i._doFragLoad=function(e,t,r,i){var n,a=this;if(void 0===r&&(r=null),!this.levels)throw Error("frag load aborted, missing levels");var o=null;if(!e.encrypted||null!==(n=e.decryptdata)&&void 0!==n&&n.key?!e.encrypted&&t.encryptedFragments.length&&this.keyLoader.loadClear(e,t.encryptedFragments):(this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=e1,this.fragCurrent=e,o=this.keyLoader.load(e).then(function(e){if(!a.fragContextChanged(e.frag))return a.hls.trigger(f.Events.KEY_LOADED,e),e}),this.hls.trigger(f.Events.KEY_LOADING,{frag:e}),this.throwIfFragContextChanged("KEY_LOADING")),r=Math.max(e.start,r||0),this.config.lowLatencyMode&&t){var s=t.partList;if(s&&i){r>e.end&&t.fragmentHint&&(e=t.fragmentHint);var l=this.getNextPart(s,e,r);if(l>-1){var u=s[l];return this.log("Loading part sn: "+e.sn+" p: "+u.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+l+"-"+(s.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=u.start+u.duration,this.state=e2,this.hls.trigger(f.Events.FRAG_LOADING,{frag:e,part:s[l],targetBufferTime:r}),this.throwIfFragContextChanged("FRAG_LOADING parts"),o?o.then(function(t){return!t||a.fragContextChanged(t.frag)?null:a.doFragPartsLoad(e,s,l,i)}).catch(function(e){return a.handleFragLoadError(e)}):this.doFragPartsLoad(e,s,l,i).catch(function(e){return a.handleFragLoadError(e)})}if(!e.url||this.loadedEndOfParts(s,r))return Promise.resolve(null)}}this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(r.toFixed(3))),(0,h.isFiniteNumber)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=e2,this.hls.trigger(f.Events.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.throwIfFragContextChanged("FRAG_LOADING");var d=this.config.progressive;return d&&o?o.then(function(t){return!t||a.fragContextChanged(null==t?void 0:t.frag)?null:a.fragmentLoader.load(e,i)}).catch(function(e){return a.handleFragLoadError(e)}):Promise.all([this.fragmentLoader.load(e,d?i:void 0),o]).then(function(e){var t=e[0];return!d&&t&&i&&i(t),t}).catch(function(e){return a.handleFragLoadError(e)})},i.throwIfFragContextChanged=function(e){if(null===this.fragCurrent)throw Error("frag load aborted, context changed in "+e)},i.doFragPartsLoad=function(e,t,r,i){var n=this;return new Promise(function(a,o){var s=[];!function r(l){var u=t[l];n.fragmentLoader.loadPart(e,u,i).then(function(i){s[u.index]=i;var o=i.part;n.hls.trigger(f.Events.FRAG_LOADED,i);var d=t[l+1];if(!d||d.fragment!==e)return a({frag:e,part:o,partsLoaded:s});r(l+1)}).catch(o)}(r)})},i.handleFragLoadError=function(e){if("data"in e){var t=e.data;e.data&&t.details===p.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(f.Events.ERROR,t)}else this.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.OTHER_ERROR,details:p.ErrorDetails.INTERNAL_EXCEPTION,err:e,fatal:!0});return null},i._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===e3){var r=t.frag,i=t.part,n=t.level,a=self.performance.now();r.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(r,i,n,e.partial)}else this.fragCurrent||this.state===eJ||this.state===e7||(this.state=e0)},i.getCurrentContext=function(e){var t=this.levels,r=e.level,i=e.sn,n=e.part;if(!t||!t[r])return this.warn("Levels object was unset while buffering fragment "+i+" of level "+r+". The current chunk will not be buffered."),null;var a=t[r],o=n>-1?function(e,t,r){if(!e||!e.details)return null;var i=e.details.partList;if(i)for(var n=i.length;n--;){var a=i[n];if(a.index===r&&a.fragment.sn===t)return a}return null}(a,i,n):null,s=o?o.fragment:function(e,t,r){if(!e||!e.details)return null;var i=e.details,n=i.fragments[t-i.startSN];return n||((n=i.fragmentHint)&&n.sn===t?n:t<i.startSN&&r&&r.sn===t?r:null)}(a,i,this.fragCurrent);return s?{frag:s,part:o,level:a}:null},i.bufferFragmentData=function(e,t,r,i){if(e&&this.state===e3){var n=e.data1,a=e.data2,o=n;if(n&&a&&(o=(0,C.appendUint8Array)(n,a)),o&&o.length){var s={type:e.type,frag:t,part:r,chunkMeta:i,parent:t.type,data:o};this.hls.trigger(f.Events.BUFFER_APPENDING,s),e.dropped&&e.independent&&!r&&this.flushBufferGap(t)}}},i.flushBufferGap=function(e){var t=this.media;if(t){if(eH.isBuffered(t,t.currentTime)){var r=t.currentTime,i=eH.bufferInfo(t,r,0),n=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),o=Math.max(Math.min(e.start-a,i.end-a),r+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}else this.flushMainBuffer(0,e.start)}},i.getFwdBufferInfo=function(e,t){var r=this.config,i=this.getLoadPosition();if(!(0,h.isFiniteNumber)(i))return null;var n=eH.bufferInfo(e,i,r.maxBufferHole);if(0===n.len&&void 0!==n.nextStart){var a=this.fragmentTracker.getBufferedFrag(i,t);if(a&&n.nextStart<a.end)return eH.bufferInfo(e,i,Math.max(n.nextStart,r.maxBufferHole))}return n},i.getMaxBufferLength=function(e){var t=this.config;return Math.min(e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,t.maxMaxBufferLength)},i.reduceMaxBufferLength=function(e){var t=this.config,r=e||t.maxBufferLength;return t.maxMaxBufferLength>=r&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},i.getNextFragment=function(e,t){var r=t.fragments,i=r.length;if(!i)return null;var n,a=this.config,o=r[0].start;if(t.live){var s=a.initialLiveManifestSize;if(i<s)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+s+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(n=this.getInitialLiveFragment(t,r),this.startPosition=n?this.hls.liveSyncPosition||n.start:e)}else e<=o&&(n=r[0]);if(!n){var l=a.lowLatencyMode?t.partEnd:t.fragmentEnd;n=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(n)},i.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},i.getNextPart=function(e,t,r){for(var i=-1,n=!1,a=!0,o=0,s=e.length;o<s;o++){var l=e[o];if(a=a&&!l.independent,i>-1&&r<l.start)break;var u=l.loaded;u?i=-1:(n||l.independent||a)&&l.fragment===t&&(i=o),n=u}return i},i.loadedEndOfParts=function(e,t){var r=e[e.length-1];return r&&t>r.start&&r.loaded},i.getInitialLiveFragment=function(e,t){var r=this.fragPrevious,i=null;if(r){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),i=function(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!(0,h.isFiniteNumber)(t)||t<(e[0].programDateTime||0)||t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(var i=0;i<e.length;++i){var n=e[i];if(function(e,t,r){var i=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-i>e}(t,r,n))return n}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){var n,a=r.sn+1;if(a>=e.startSN&&a<=e.endSN){var o=t[a-e.startSN];r.cc===o.cc&&(i=o,this.log("Live playlist, switching playlist, load frag with next SN: "+i.sn))}i||(n=r.cc,(i=eY(t,function(e){return e.cc<n?1:e.cc>n?-1:0}))&&this.log("Live playlist, switching playlist, load frag with same CC: "+i.sn))}}else{var s=this.hls.liveSyncPosition;null!==s&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i},i.getFragmentAtPosition=function(e,t,r){var i,n=this.config,a=this.fragPrevious,o=r.fragments,s=r.endSN,l=r.fragmentHint,u=n.maxFragLookUpTolerance,d=!!(n.lowLatencyMode&&r.partList&&l);if(d&&l&&!this.bitrateTest&&(o=o.concat(l),s=l.sn),i=e<t?e$(a,o,e,e>t-u?0:u):o[o.length-1]){var c=i.sn-r.startSN;if(this.fragmentTracker.getState(i)===ek.OK&&(a=i),a&&i.sn===a.sn&&!d&&a&&i.level===a.level){var h=o[c+1];i.sn<s&&this.fragmentTracker.getState(h)!==ek.OK?(this.log("SN "+i.sn+" just loaded, load next one: "+h.sn),i=h):i=null}}return i},i.synchronizeToLiveEdge=function(e){var t=this.config,r=this.media;if(r){var i=this.hls.liveSyncPosition,n=r.currentTime,a=e.fragments[0].start,o=e.edge,s=n>=a-t.maxFragLookUpTolerance&&n<=o;if(null!==i&&r.duration>i&&(n<i||!s)){var l=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&r.readyState<4||n<o-l)&&(this.loadedmetadata||(this.nextLoadPosition=i),r.readyState&&(this.warn("Playback: "+n.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+i.toFixed(3)),r.currentTime=i))}}},i.alignPlaylists=function(e,t){var r=this.levels,i=this.levelLastLoaded,n=this.fragPrevious,a=null!==i?r[i]:null,o=e.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;var s=e.fragments[0].start,l=e.alignedSliding&&(0,h.isFiniteNumber)(s);if(!t||!l&&!s){a&&(function(e,t,r){if(!(!r.details||!(t.endCC>t.startCC||e&&e.cc<t.startCC))){var i=function(e,t,r){void 0===r&&(r=0);var i=e.fragments,n=t.fragments;if(n.length&&i.length){var a=eK(i,n[0].cc);if(a&&(!a||a.startPTS))return a;m.logger.log("No frag in previous level to align on")}else m.logger.log("No fragments to align")}(r.details,t);i&&(0,h.isFiniteNumber)(i.start)&&(m.logger.log("Adjusting PTS using last level due to CC increase within current level "+t.url),eW(i.start,t))}}(n,e,a),!e.alignedSliding&&a.details&&function(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var r=t.fragments[0].programDateTime,i=e.fragments[0].programDateTime,n=(i-r)/1e3+t.fragments[0].start;n&&(0,h.isFiniteNumber)(n)&&(m.logger.log("Adjusting PTS using programDateTime delta "+(i-r)+"ms, sliding:"+n.toFixed(3)+" "+e.url+" "),eW(n,e))}}(e,a.details),e.alignedSliding||!a.details||e.skippedSegments||eb(a.details,e));var u=e.fragments[0].start;return this.log("Live playlist sliding: "+u.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(n?n.sn:"na")+" fragments: "+o),u}return s},i.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},i.setStartPosition=function(e,t){var r=this.startPosition;if(r<t&&(r=-1),-1===r||-1===this.lastCurrentTime){var i=e.startTimeOffset;(0,h.isFiniteNumber)(i)?(r=t+i,i<0&&(r+=e.totalduration),r=Math.min(Math.max(t,r),t+e.totalduration),this.log("Start time offset "+i+" found in playlist, adjust startPosition to "+r),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||t:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r},i.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},i.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},i.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===e5)||(this.state=e0)},i.onFragmentOrKeyLoadError=function(e,t){if(t.fatal)return this.stopLoad(),void(this.state=e7);var r=this.config;if(t.chunkMeta){var i=this.getCurrentContext(t.chunkMeta);i&&(t.frag=i.frag,t.levelRetry=!0,this.fragLoadError=r.fragLoadingMaxRetry)}var n=t.frag;if(n&&n.type===e){if(this.fragCurrent,this.fragLoadError+1<=r.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var a=Math.min(Math.pow(2,this.fragLoadError)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);this.warn("Fragment "+n.sn+" of "+e+" "+n.level+" failed to load, retrying in "+a+"ms"),this.retryDate=self.performance.now()+a,this.fragLoadError++,this.state=e5}else t.levelRetry?(e===$.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=e0):(m.logger.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=e7)}},i.afterBufferFlushed=function(e,t,r){if(e){var i=eH.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,r),this.state===e6&&this.resetLoadingState()}},i.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=e0},i.resetStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=this.levels?this.levels[e].details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},i.updateLevelTiming=function(e,t,r,i){var n=this,a=r.details;Object.keys(e.elementaryStreams).reduce(function(t,o){var s=e.elementaryStreams[o];if(s){var l=s.endPTS-s.startPTS;if(l<=0)return n.warn("Could not parse fragment "+e.sn+" "+o+" duration reliably ("+l+")"),t||!1;var u=i?0:ey(a,e,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return n.hls.trigger(f.Events.LEVEL_PTS_UPDATED,{details:a,level:r,drift:u,type:o,frag:e,start:s.startPTS,end:s.endPTS}),!0}return t},!1)||(this.warn("Found no media in fragment "+e.sn+" of level "+r.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=e8,this.hls.trigger(f.Events.FRAG_PARSED,{frag:e,part:t})},i.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(t.prototype,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),Object.defineProperty(t,"prototype",{writable:!1}),t}(eB);function tr(){return self.MediaSource||self.WebKitMediaSource}function ti(){return self.SourceBuffer||self.WebKitSourceBuffer}var tn=(function(){var e=ENTRY_MODULE,t={},r=function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,r),a.exports};r.m=e,r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=r(ENTRY_MODULE);return i.default||i}).toString().split("ENTRY_MODULE"),ta="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function to(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function ts(e,t,r,i){var n=e[i].map(function(e){return'"'+e+'": '+t[i][e].toString().replace(/^"[^"]+"/,"function")}).join(",");return tn[0]+"{"+n+"}"+tn[1]+'"'+r+'"'+tn[2]}var tl=r(544),tu=r(729),td=r.n(tu),tc=tr()||{isTypeSupported:function(){return!1}},th=function(){function e(e,t,i,n){var a,o,s,l,u,d,c,h,v=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var g=e.config;this.hls=e,this.id=t,this.useWorker=!!g.enableWorker,this.onTransmuxComplete=i,this.onFlush=n;var y=function(e,t){(t=t||{}).frag=v.frag,t.id=v.id,v.hls.trigger(e,t)};this.observer=new tu.EventEmitter,this.observer.on(f.Events.FRAG_DECRYPTED,y),this.observer.on(f.Events.ERROR,y);var b={mp4:tc.isTypeSupported("video/mp4"),mpeg:tc.isTypeSupported("audio/mpeg"),mp3:tc.isTypeSupported('audio/mp4; codecs="mp3"')},E=navigator.vendor;if(this.useWorker&&"undefined"!=typeof Worker){m.logger.log("demuxing in webworker");try{h=this.worker=(a=a||{},o={main:r.m},s=a.all?{main:Object.keys(o.main)}:function(e,t){for(var i={main:[182]},n={main:[]},a={main:{}};Object.keys(i).reduce(function(e,t){return e||i[t].length>0},!1);)for(var o=Object.keys(i),s=0;s<o.length;s++){var l=o[s],u=i[l].pop();if(a[l]=a[l]||{},!a[l][u]&&e[l][u]){a[l][u]=!0,n[l]=n[l]||[],n[l].push(u);for(var d=function(e,t,i){var n={};n[i]=[];var a=t.toString().replace(/^"[^"]+"/,"function"),o=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||a.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!o)return n;for(var s,l=o[1],u=RegExp("(\\\\n|\\W)"+to(l)+ta,"g");s=u.exec(a);)"dll-reference"!==s[3]&&n[i].push(s[3]);for(u=RegExp("\\("+to(l)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)'+ta,"g");s=u.exec(a);)e[s[2]]||(n[i].push(s[1]),e[s[2]]=r(s[1]).m),n[s[2]]=n[s[2]]||[],n[s[2]].push(s[4]);for(var d=Object.keys(n),c=0;c<d.length;c++)for(var h=0;h<n[d[c]].length;h++)isNaN(1*n[d[c]][h])||(n[d[c]][h]=1*n[d[c]][h]);return n}(e,e[l][u],l),c=Object.keys(d),h=0;h<c.length;h++)i[c[h]]=i[c[h]]||[],i[c[h]]=i[c[h]].concat(d[c[h]])}}return n}(o,0),l="",Object.keys(s).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;s[e][t];)t++;s[e].push(t),o[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+e+" = ("+ts(s,o,t,modules)+")();\n"}),l=l+"new (("+ts(s,o,182,"main")+")())(self);",u=new window.Blob([l],{type:"text/javascript"}),d=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),(c=new window.Worker(d)).objectURL=d,c),this.onwmsg=this.onWorkerMessage.bind(this),h.addEventListener("message",this.onwmsg),h.onerror=function(e){v.useWorker=!1,m.logger.warn("Exception in webworker, fallback to inline"),v.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.OTHER_ERROR,details:p.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},h.postMessage({cmd:"init",typeSupported:b,vendor:E,id:t,config:JSON.stringify(g)})}catch(T){m.logger.warn("Error in worker:",T),m.logger.error("Error while initializing DemuxerWorker, fallback to inline"),h&&self.URL.revokeObjectURL(h.objectURL),this.transmuxer=new tl.default(this.observer,b,g,E,t),this.worker=null}}else this.transmuxer=new tl.default(this.observer,b,g,E,t)}var t=e.prototype;return t.destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null,this.onwmsg=void 0;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var r=this.observer;r&&r.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},t.push=function(e,t,r,i,n,a,o,s,l,u){var d,c,h=this;l.transmuxing.start=self.performance.now();var f=this.transmuxer,p=this.worker,v=a?a.start:n.start,g=n.decryptdata,y=this.frag,b=!(y&&n.cc===y.cc),E=!(y&&l.level===y.level),T=y?l.sn-y.sn:-1,_=this.part?l.part-this.part.index:-1,A=0===T&&l.id>1&&l.id===(null==y?void 0:y.stats.chunkCount),S=!E&&(1===T||0===T&&(1===_||A&&_<=0)),k=self.performance.now();(E||T||0===n.stats.parsing.start)&&(n.stats.parsing.start=k),a&&(_||!S)&&(a.stats.parsing.start=k);var w=!(y&&(null===(d=n.initSegment)||void 0===d?void 0:d.url)===(null===(c=y.initSegment)||void 0===c?void 0:c.url)),L=new tl.TransmuxState(b,S,s,E,v,w);if(!S||b||w){m.logger.log("[transmuxer-interface, "+n.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+b+"\n        trackSwitch: "+E+"\n        contiguous: "+S+"\n        accurateTimeOffset: "+s+"\n        timeOffset: "+v+"\n        initSegmentChange: "+w);var I=new tl.TransmuxConfig(r,i,t,o,u);this.configureTransmuxer(I)}if(this.frag=n,this.part=a,p)p.postMessage({cmd:"demux",data:e,decryptdata:g,chunkMeta:l,state:L},e instanceof ArrayBuffer?[e]:[]);else if(f){var D=f.push(e,g,l,L);(0,tl.isPromise)(D)?(f.async=!0,D.then(function(e){h.handleTransmuxComplete(e)}).catch(function(e){h.transmuxerError(e,l,"transmuxer-interface push error")})):(f.async=!1,this.handleTransmuxComplete(D))}},t.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var r=this.transmuxer,i=this.worker;if(i)i.postMessage({cmd:"flush",chunkMeta:e});else if(r){var n=r.flush(e);(0,tl.isPromise)(n)||r.async?((0,tl.isPromise)(n)||(n=Promise.resolve(n)),n.then(function(r){t.handleFlushResult(r,e)}).catch(function(r){t.transmuxerError(r,e,"transmuxer-interface flush error")})):this.handleFlushResult(n,e)}},t.transmuxerError=function(e,t,r){this.hls&&this.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:r})},t.handleFlushResult=function(e,t){var r=this;e.forEach(function(e){r.handleTransmuxComplete(e)}),this.onFlush(t)},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":m.logger[t.data.logType]&&m.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},t.configureTransmuxer=function(e){var t=this.worker,r=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):r&&r.configure(e)},t.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}(),tf=function(){function e(e,t,r,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=r,this.hls=i}var t=e.prototype;return t.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},t.poll=function(e,t){var r=this.config,i=this.media,n=this.stalled;if(null!==i){var a=i.currentTime,o=i.seeking,s=this.seeking&&!o,l=!this.seeking&&o;if(this.seeking=o,a===e){if((l||s)&&(this.stalled=null),!(i.paused&&!o||i.ended||0===i.playbackRate)&&eH.getBuffered(i).length){var u=eH.bufferInfo(i,a,0),d=u.len>0,c=u.nextStart||0;if(d||c){if(o){var h=u.len>2,f=!c||t&&t.start<=a||c-a>2&&!this.fragmentTracker.getPartialFragment(a);if(h||f)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var p,v=Math.max(c,u.start||0)-a,g=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,y=(null==g||null===(p=g.details)||void 0===p?void 0:p.live)?2*g.details.targetduration:2;if(v>0&&v<=y)return void this._trySkipBufferHole(null)}var b=self.performance.now();if(null!==n){var E=b-n;if(o||!(E>=250)||(this._reportStall(u),this.media)){var T=eH.bufferInfo(i,a,r.maxBufferHole);this._tryFixBufferStall(T,E)}}else this.stalled=b}}}else if(this.moved=!0,null!==n){if(this.stallReported){var _=self.performance.now()-n;m.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(_)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}}},t._tryFixBufferStall=function(e,t){var r=this.config,i=this.fragmentTracker,n=this.media;if(null!==n){var a=n.currentTime,o=i.getPartialFragment(a);if(o&&(this._trySkipBufferHole(o)||!this.media))return;e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(m.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},t._reportStall=function(e){var t=this.hls,r=this.media;!this.stallReported&&r&&(this.stallReported=!0,m.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer ("+JSON.stringify(e)+")"),t.trigger(f.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e.len}))},t._trySkipBufferHole=function(e){var t=this.config,r=this.hls,i=this.media;if(null===i)return 0;for(var n=i.currentTime,a=0,o=eH.getBuffered(i),s=0;s<o.length;s++){var l=o.start(s);if(n+t.maxBufferHole>=a&&n<l){var u=Math.max(l+.05,i.currentTime+.1);return m.logger.warn("skipping hole, adjusting currentTime from "+n+" to "+u),this.moved=!0,this.stalled=null,i.currentTime=u,e&&r.trigger(f.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+u,frag:e}),u}a=o.end(s)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,i=this.nudgeRetry;if(null!==r){var n=r.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){var a=n+(i+1)*e.nudgeOffset;m.logger.warn("Nudging 'currentTime' from "+n+" to "+a),r.currentTime=a,t.trigger(f.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else m.logger.error("Playhead still not moving while enough data buffered @"+n+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(f.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},e}();function tp(e,t){return(tp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var tm=function(e){function t(t,r,i){var n;return(n=e.call(this,t,r,i,"[stream-controller]")||this).audioCodecSwap=!1,n.gapController=null,n.level=-1,n._forceStartLoad=!1,n.altAudio=!1,n.audioOnly=!1,n.fragPlaying=null,n.onvplaying=null,n.onvseeked=null,n.fragLastKbps=0,n.couldBacktrack=!1,n.backtrackFragment=null,n.audioCodecSwitch=!1,n.videoBuffer=null,n._registerListeners(),n}(r=t).prototype=Object.create(e.prototype),r.prototype.constructor=r,tp(r,e);var r,i=t.prototype;return i._registerListeners=function(){var e=this.hls;e.on(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(f.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(f.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(f.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(f.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(f.Events.ERROR,this.onError,this),e.on(f.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(f.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(f.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(f.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(f.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(f.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i._unregisterListeners=function(){var e=this.hls;e.off(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(f.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(f.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(f.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(f.Events.ERROR,this.onError,this),e.off(f.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(f.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(f.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(f.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(f.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(f.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},i.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=r.startLevel;-1===i&&(r.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=r.nextAutoLevel),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=e0,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=eJ},i.stopLoad=function(){this._forceStartLoad=!1,e.prototype.stopLoad.call(this)},i.doTick=function(){switch(this.state){case e0:this.doTickIdle();break;case te:var e,t=this.levels,r=this.level,i=null==t||null===(e=t[r])||void 0===e?void 0:e.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=e0}break;case e5:var n,a=self.performance.now(),o=this.retryDate;(!o||a>=o||null!==(n=this.media)&&void 0!==n&&n.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=e0)}this.onTickEnd()},i.onTickEnd=function(){e.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},i.doTickIdle=function(){var e=this.hls,t=this.levelLastLoaded,r=this.levels,i=this.media,n=e.config,a=e.nextLoadLevel;if(null!==t&&(i||!this.startFragRequested&&n.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&r&&r[a]){var o=r[a],s=this.getMainFwdBufferInfo();if(null!==s){var l=this.getLevelDetails();if(l&&this._streamEnded(s,l)){var u={};return this.altAudio&&(u.type="video"),this.hls.trigger(f.Events.BUFFER_EOS,u),void(this.state=e6)}this.level=e.nextLoadLevel=a;var d=o.details;if(!d||this.state===te||d.live&&this.levelLastLoaded!==a)return this.level=a,void(this.state=te);if(!(s.len>=this.getMaxBufferLength(o.maxBitrate))){this.backtrackFragment&&this.backtrackFragment.start>s.end&&(this.backtrackFragment=null);var c=this.backtrackFragment?this.backtrackFragment.start:s.end,h=this.getNextFragment(c,d);if(this.couldBacktrack&&!this.fragPrevious&&h&&"initSegment"!==h.sn&&this.fragmentTracker.getState(h)!==ek.OK){var p,m=(null!=(p=this.backtrackFragment)?p:h).sn-d.startSN,v=d.fragments[m-1];v&&h.cc===v.cc&&(h=v,this.fragmentTracker.removeFragment(v))}else this.backtrackFragment&&s.len&&(this.backtrackFragment=null);if(h&&this.fragmentTracker.getState(h)===ek.OK&&this.nextLoadPosition>c){var g=this.audioOnly&&!this.altAudio?k.ElementaryStreamTypes.AUDIO:k.ElementaryStreamTypes.VIDEO,y=(g===k.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,g,$.PlaylistLevelType.MAIN),h=this.getNextFragment(this.nextLoadPosition,d)}h&&(!h.initSegment||h.initSegment.data||this.bitrateTest||(h=h.initSegment),this.loadFragment(h,d,c))}}}},i.loadFragment=function(t,r,i){var n,a=this.fragmentTracker.getState(t);this.fragCurrent=t,a===ek.NOT_LOADED?"initSegment"===t.sn?this._loadInitSegment(t,r):this.bitrateTest?(this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t,r)):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,r,i)):a===ek.APPENDING?this.reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t):0===(null===(n=this.media)||void 0===n?void 0:n.buffered.length)&&this.fragmentTracker.removeAllFragments()},i.getAppendedFrag=function(e){var t=this.fragmentTracker.getAppendedFrag(e,$.PlaylistLevelType.MAIN);return t&&"fragment"in t?t.fragment:t},i.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,$.PlaylistLevelType.MAIN)},i.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},i.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},i.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var r,i=this.getAppendedFrag(t.currentTime);if(i&&i.start>1&&this.flushMainBuffer(0,i.start-1),!t.paused&&e){var n=e[this.hls.nextLoadLevel],a=this.fragLastKbps;r=a&&this.fragCurrent?this.fragCurrent.duration*n.maxBitrate/(1e3*a)+1:0}else r=0;var o=this.getBufferedFrag(t.currentTime+r);if(o){var s=this.followingBufferedFrag(o);if(s){this.abortCurrentFrag();var l=s.maxStartPTS?s.maxStartPTS:s.start,u=s.duration,d=Math.max(o.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,.5*u),.75*u));this.flushMainBuffer(d,Number.POSITIVE_INFINITY)}}}},i.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&e.abortRequests(),this.state){case e1:case e2:case e5:case e3:case e8:this.state=e0}this.nextLoadPosition=this.getLoadPosition()},i.flushMainBuffer=function(t,r){e.prototype.flushMainBuffer.call(this,t,r,this.altAudio?"video":null)},i.onMediaAttached=function(t,r){e.prototype.onMediaAttached.call(this,t,r);var i=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new tf(this.config,i,this.fragmentTracker,this.hls)},i.onMediaDetaching=function(){var t=this.media;t&&this.onvplaying&&this.onvseeked&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),e.prototype.onMediaDetaching.call(this)},i.onMediaPlaying=function(){this.tick()},i.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;(0,h.isFiniteNumber)(t)&&this.log("Media seeked to "+t.toFixed(3)),this.tick()},i.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(f.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},i.onManifestParsed=function(e,t){var r,i,n,a=!1,o=!1;t.levels.forEach(function(e){(r=e.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(a=!0),-1!==r.indexOf("mp4a.40.5")&&(o=!0))}),this.audioCodecSwitch=a&&o&&"function"!=typeof(null==(n=ti())||null===(i=n.prototype)||void 0===i?void 0:i.changeType),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},i.onLevelLoading=function(e,t){var r=this.levels;if(r&&this.state===e0){var i=r[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(i.details))&&(this.state=te)}},i.onLevelLoaded=function(e,t){var r,i=this.levels,n=t.level,a=t.details,o=a.totalduration;if(i){this.log("Level "+n+" loaded ["+a.startSN+","+a.endSN+"], cc ["+a.startCC+", "+a.endCC+"] duration:"+o);var s=this.fragCurrent;!s||this.state!==e2&&this.state!==e5||s.level!==t.level&&s.loader&&(this.state=e0,this.backtrackFragment=null,s.abortRequests());var l=i[n],u=0;if(a.live||null!==(r=l.details)&&void 0!==r&&r.live){if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed)return;u=this.alignPlaylists(a,l.details)}if(l.details=a,this.levelLastLoaded=n,this.hls.trigger(f.Events.LEVEL_UPDATED,{details:a,level:n}),this.state===te){if(this.waitForCdnTuneIn(a))return;this.state=e0}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,u),this.tick()}else this.warn("Levels were reset while loading level "+n)},i._handleFragmentLoadProgress=function(e){var t,r=e.frag,i=e.part,n=e.payload,a=this.levels;if(a){var o=a[r.level],s=o.details;if(s){var l=o.videoCodec,u=s.PTSKnown||!s.live,d=null===(t=r.initSegment)||void 0===t?void 0:t.data,c=this._getAudioCodec(o),h=this.transmuxer=this.transmuxer||new th(this.hls,$.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=i?i.index:-1,p=new eV(r.level,r.sn,r.stats.chunkCount,n.byteLength,f,-1!==f),m=this.initPTS[r.cc];h.push(n,d,c,l,r,i,s.totalduration,u,p,m)}else this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},i.onAudioTrackSwitching=function(e,t){var r=this.altAudio,i=!!t.url,n=t.id;if(!i){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var o=this.hls;r&&o.trigger(f.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),o.trigger(f.Events.AUDIO_TRACK_SWITCHED,{id:n})}},i.onAudioTrackSwitched=function(e,t){var r=t.id,i=!!this.hls.audioTracks[r].url;if(i){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=i,this.tick()},i.onBufferCreated=function(e,t){var r,i,n=t.tracks,a=!1;for(var o in n){var s=n[o];if("main"===s.id){if(i=o,r=s,"video"===o){var l=n[o];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&r?(this.log("Alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},i.onFragBuffered=function(e,t){var r=t.frag,i=t.part;if(!r||r.type===$.PlaylistLevelType.MAIN){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(i?" p: "+i.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===e8&&(this.state=e0));var n=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}},i.onError=function(e,t){if(t.type!==p.ErrorTypes.KEY_SYSTEM_ERROR)switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.FRAG_PARSING_ERROR:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError($.PlaylistLevelType.MAIN,t);break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==e7&&(t.fatal?(this.warn(""+t.details),this.state=e7):t.levelRetry||this.state!==te||(this.state=e0));break;case p.ErrorDetails.BUFFER_FULL_ERROR:if("main"===t.parent&&(this.state===e3||this.state===e8)){var r=!0,i=this.getFwdBufferInfo(this.media,$.PlaylistLevelType.MAIN);i&&i.len>.5&&(r=!this.reduceMaxBufferLength(i.len)),r&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError($.PlaylistLevelType.MAIN,t)},i.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){if(this.loadedmetadata||!eH.getBuffered(e).length){var r=this.state!==e0?this.fragCurrent:null;t.poll(this.lastCurrentTime,r)}this.lastCurrentTime=e.currentTime}},i.onFragLoadEmergencyAborted=function(){this.state=e0,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},i.onBufferFlushed=function(e,t){var r=t.type;if(r!==k.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var i=(r===k.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,r,$.PlaylistLevelType.MAIN)}},i.onLevelsUpdated=function(e,t){this.levels=t.levels},i.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},i.seekToStartPos=function(){var e=this.media;if(e){var t=e.currentTime,r=this.startPosition;if(r>=0&&t<r){if(e.seeking)return void this.log("could not seek to "+r+", already seeking at "+t);var i=eH.getBuffered(e),n=(i.length?i.start(0):0)-r;n>0&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+n+" to match buffer start"),r+=n,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+t),e.currentTime=r}}},i._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},i._loadBitrateTestFrag=function(e,t){var r=this;e.bitrateTest=!0,this._doFragLoad(e,t).then(function(t){var i=r.hls;if(t&&!i.nextLoadLevel&&!r.fragContextChanged(e)){r.fragLoadError=0,r.state=e0,r.startFragRequested=!1,r.bitrateTest=!1;var n=e.stats;n.parsing.start=n.parsing.end=n.buffering.start=n.buffering.end=self.performance.now(),i.trigger(f.Events.FRAG_LOADED,t),e.bitrateTest=!1}})},i._handleTransmuxComplete=function(e){var t,r="main",i=this.hls,n=e.remuxResult,a=e.chunkMeta,o=this.getCurrentContext(a);if(!o)return this.warn("The loading context changed while buffering fragment "+a.sn+" of level "+a.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(a.level);var s=o.frag,l=o.part,u=o.level,d=n.video,c=n.text,p=n.id3,m=n.initSegment,v=u.details,g=this.altAudio?void 0:n.audio;if(!this.fragContextChanged(s)){if(this.state=e3,m){m.tracks&&(this._bufferInitSegment(u,m.tracks,s,a),i.trigger(f.Events.FRAG_PARSING_INIT_SEGMENT,{frag:s,id:r,tracks:m.tracks}));var y=m.initPTS,b=m.timescale;(0,h.isFiniteNumber)(y)&&(this.initPTS[s.cc]=y,i.trigger(f.Events.INIT_PTS_FOUND,{frag:s,id:r,initPTS:y,timescale:b}))}if(d&&!1!==n.independent){if(v){var E=d.startPTS,T=d.endPTS,_=d.startDTS,A=d.endDTS;if(l)l.elementaryStreams[d.type]={startPTS:E,endPTS:T,startDTS:_,endDTS:A};else if(d.firstKeyFrame&&d.independent&&1===a.id&&(this.couldBacktrack=!0),d.dropped&&d.independent){var S=this.getMainFwdBufferInfo();if((S?S.end:this.getLoadPosition())+this.config.maxBufferHole<(d.firstKeyFramePTS?d.firstKeyFramePTS:E)-this.config.maxBufferHole)return void this.backtrack(s);s.setElementaryStreamInfo(d.type,s.start,T,s.start,A,!0)}s.setElementaryStreamInfo(d.type,E,T,_,A),this.backtrackFragment&&(this.backtrackFragment=s),this.bufferFragmentData(d,s,l,a)}}else if(!1===n.independent)return void this.backtrack(s);if(g){var w=g.startPTS,L=g.endPTS,I=g.startDTS,D=g.endDTS;l&&(l.elementaryStreams[k.ElementaryStreamTypes.AUDIO]={startPTS:w,endPTS:L,startDTS:I,endDTS:D}),s.setElementaryStreamInfo(k.ElementaryStreamTypes.AUDIO,w,L,I,D),this.bufferFragmentData(g,s,l,a)}if(v&&null!=p&&null!==(t=p.samples)&&void 0!==t&&t.length){var R={id:r,frag:s,details:v,samples:p.samples};i.trigger(f.Events.FRAG_PARSING_METADATA,R)}if(v&&c){var O={id:r,frag:s,details:v,samples:c.samples};i.trigger(f.Events.FRAG_PARSING_USERDATA,O)}}},i._bufferInitSegment=function(e,t,r,i){var n=this;if(this.state===e3){this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;var a=t.audio,o=t.video,s=t.audiovideo;if(a){var l=e.audioCodec,u=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l&&(l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==a.metadata.channelCount&&-1===u.indexOf("firefox")&&(l="mp4a.40.5")),-1!==u.indexOf("android")&&"audio/mpeg"!==a.container&&(l="mp4a.40.2",this.log("Android: force audio codec to "+l)),e.audioCodec&&e.audioCodec!==l&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+l+'"'),a.levelCodec=l,a.id="main",this.log("Init audio buffer, container:"+a.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(e.audioCodec||"")+"/"+a.codec+"]")}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+o.codec+"]")),s&&this.log("Init audiovideo buffer, container:"+s.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+s.codec+"]"),this.hls.trigger(f.Events.BUFFER_CODECS,t),Object.keys(t).forEach(function(e){var a=t[e].initSegment;null!=a&&a.byteLength&&n.hls.trigger(f.Events.BUFFER_APPENDING,{type:e,data:a,frag:r,part:null,chunkMeta:i,parent:r.type})}),this.tick()}},i.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,$.PlaylistLevelType.MAIN)},i.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=e0},i.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var r=e.currentTime;if(eH.isBuffered(e,r)?t=this.getAppendedFrag(r):eH.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;var i=this.fragPlaying,n=t.level;i&&t.sn===i.sn&&i.level===n&&t.urlId===i.urlId||(this.fragPlaying=t,this.hls.trigger(f.Events.FRAG_CHANGED,{frag:t}),i&&i.level===n||this.hls.trigger(f.Events.LEVEL_SWITCHED,{level:n}))}}},function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(t.prototype,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{key:"currentProgramDateTime",get:function(){var e=this.media;if(e){var t=e.currentTime,r=this.currentFrag;if(r&&(0,h.isFiniteNumber)(t)&&(0,h.isFiniteNumber)(r.programDateTime)){var i=r.programDateTime+1e3*(t-r.start);return new Date(i)}}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),Object.defineProperty(t,"prototype",{writable:!1}),t}(tt);let tv=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}(),tg=function(){function e(e,t,r){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new tv(e),this.fast_=new tv(t)}var t=e.prototype;return t.update=function(e,t){var r=this.slow_,i=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new tv(e,r.getEstimate(),r.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new tv(t,i.getEstimate(),i.getTotalWeight()))},t.sample=function(e,t){var r=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/r;this.fast_.sample(r,i),this.slow_.sample(r,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}(),ty=function(){function e(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;var t=e.config;this.bwEstimator=new tg(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(f.Events.FRAG_LOADING,this.onFragLoading,this),e.on(f.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(f.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(f.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(f.Events.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e.off(f.Events.FRAG_LOADING,this.onFragLoading,this),e.off(f.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(f.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(f.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(f.Events.ERROR,this.onError,this)},t.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},t.onFragLoading=function(e,t){var r,i=t.frag;i.type===$.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=i,this.partCurrent=null!=(r=t.part)?r:null,this.timer=self.setInterval(this.onCheck,100)))},t.onLevelLoaded=function(e,t){var r=this.hls.config;t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)},t._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,r=this.hls,i=r.autoLevelEnabled,n=r.media;if(e&&n){var a=t?t.stats:e.stats,o=t?t.duration:e.duration;if(a.aborted||a.loaded&&a.loaded===a.total||0===e.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!n.paused&&n.playbackRate&&n.readyState){var s=r.mainForwardBufferInfo;if(null!==s){var l=performance.now()-a.loading.start,u=Math.abs(n.playbackRate);if(!(l<=500*o/u)){var d=a.loaded&&a.loading.first,c=this.bwEstimator.getEstimate(),p=r.levels,v=r.minAutoLevel,g=p[e.level],y=a.total||Math.max(a.loaded,Math.round(o*g.maxBitrate/8)),b=d?1e3*a.loaded/l:0,E=b?(y-a.loaded)/b:8*y/c,T=s.len/u;if(!(E<=T)){var _,A=Number.POSITIVE_INFINITY;for(_=e.level-1;_>v;_--){var S=p[_].maxBitrate;if((A=b?o*S/(6.4*b):o*S/c)<T)break}A>=E||(m.logger.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+_+"\n      Current BW estimate: "+((0,h.isFiniteNumber)(c)?(c/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+E.toFixed(3)+" s\n      Estimated load time for the next fragment: "+A.toFixed(3)+" s\n      Time to underbuffer: "+T.toFixed(3)+" s"),r.nextLoadLevel=_,d&&this.bwEstimator.sample(l,a.loaded),this.clearTimer(),(e.loader||e.keyLoader)&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),r.trigger(f.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:a}))}}}}}},t.onFragLoaded=function(e,t){var r=t.frag,i=t.part;if(r.type===$.PlaylistLevelType.MAIN&&(0,h.isFiniteNumber)(r.sn)){var n=i?i.stats:r.stats,a=i?i.duration:r.duration;if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var o=this.hls.levels[r.level],s=(o.loaded?o.loaded.bytes:0)+n.loaded,l=(o.loaded?o.loaded.duration:0)+a;o.loaded={bytes:s,duration:l},o.realBitrate=Math.round(8*s/l)}if(r.bitrateTest){var u={stats:n,frag:r,part:i,id:r.type};this.onFragBuffered(f.Events.FRAG_BUFFERED,u)}}},t.onFragBuffered=function(e,t){var r=t.frag,i=t.part,n=i?i.stats:r.stats;if(!n.aborted&&r.type===$.PlaylistLevelType.MAIN&&"initSegment"!==r.sn){var a=n.parsing.end-n.loading.start;this.bwEstimator.sample(a,n.loaded),n.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},t.onError=function(e,t){var r;if((null===(r=t.frag)||void 0===r?void 0:r.type)===$.PlaylistLevelType.MAIN){if(t.type===p.ErrorTypes.KEY_SYSTEM_ERROR)return void this.clearTimer();switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer()}}},t.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},t.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,r=this.hls,i=r.maxAutoLevel,n=r.config,a=r.minAutoLevel,o=r.media,s=t?t.duration:e?e.duration:0,l=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,d=r.mainForwardBufferInfo,c=(d?d.len:0)/l,h=this.findBestLevel(u,a,i,c,n.abrBandWidthFactor,n.abrBandWidthUpFactor);if(h>=0)return h;m.logger.trace((c?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var f=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,p=n.abrBandWidthFactor,v=n.abrBandWidthUpFactor;if(!c){var g=this.bitrateTestDelay;g&&(f=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-g,m.logger.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=v=1)}return Math.max(h=this.findBestLevel(u,a,i,c+f,p,v),0)},t.findBestLevel=function(e,t,r,i,n,a){for(var o,s=this.fragCurrent,l=this.partCurrent,u=this.lastLoadedFragLevel,d=this.hls.levels,c=d[u],f=!(null==c||null===(o=c.details)||void 0===o||!o.live),p=null==c?void 0:c.codecSet,v=l?l.duration:s?s.duration:0,g=r;g>=t;g--){var y=d[g];if(y&&(!p||y.codecSet===p)){var b,E=y.details,T=(l?null==E?void 0:E.partTarget:null==E?void 0:E.averagetargetduration)||v;b=g<=u?n*e:a*e;var _=d[g].maxBitrate,A=_*T/b;if(m.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+g+"/"+Math.round(b)+"/"+_+"/"+T+"/"+i+"/"+A),b>_&&(0===A||!(0,h.isFiniteNumber)(A)||f&&!this.bitrateTestDelay||A<i))return g}}return -1},function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(e.prototype,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&!t.canEstimate())return e;var r=this.getNextABRAutoLevel();return -1!==e&&this.hls.levels[r].loadError?e:(-1!==e&&(r=Math.min(e,r)),r)},set:function(e){this._nextAutoLevel=e}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}();var tb=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,r=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e,t){for(var r=new Uint8Array(t),i=0,n=0;n<e.length;n++){var a=e[n];r.set(a,i),i+=a.length}return r}(t,r),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}();function tE(){return(tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function tT(e,t){return(tT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var t_=function(e){function t(t,r,i){var n;return(n=e.call(this,t,r,i,"[audio-stream-controller]")||this).videoBuffer=null,n.videoTrackCC=-1,n.waitingVideoCC=-1,n.audioSwitch=!1,n.trackId=-1,n.waitingData=null,n.mainDetails=null,n.bufferFlushed=!1,n.cachedTrackLoadedData=null,n._registerListeners(),n}(r=t).prototype=Object.create(e.prototype),r.prototype.constructor=r,tT(r,e);var r,i=t.prototype;return i.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},i._registerListeners=function(){var e=this.hls;e.on(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(f.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(f.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(f.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(f.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(f.Events.ERROR,this.onError,this),e.on(f.Events.BUFFER_RESET,this.onBufferReset,this),e.on(f.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(f.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(f.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(f.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i._unregisterListeners=function(){var e=this.hls;e.off(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(f.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(f.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(f.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(f.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(f.Events.ERROR,this.onError,this),e.off(f.Events.BUFFER_RESET,this.onBufferReset,this),e.off(f.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(f.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(f.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(f.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i.onInitPtsFound=function(e,t){var r=t.frag,i=t.id,n=t.initPTS;if("main"===i){var a=r.cc;this.initPTS[r.cc]=n,this.log("InitPTS for cc: "+a+" found from main: "+n),this.videoTrackCC=a,this.state===e9&&this.tick()}},i.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=eJ);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=e0):(this.loadedmetadata=!1,this.state=e4),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},i.doTick=function(){switch(this.state){case e0:this.doTickIdle();break;case e4:var t,r=this.levels,i=this.trackId,n=null==r||null===(t=r[i])||void 0===t?void 0:t.details;if(n){if(this.waitForCdnTuneIn(n))break;this.state=e9}break;case e5:var a,o=performance.now(),s=this.retryDate;(!s||o>=s||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=e0);break;case e9:var l=this.waitingData;if(l){var u=l.frag,d=l.part,c=l.cache,h=l.complete;if(void 0!==this.initPTS[u.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=e2;var f={frag:u,part:d,payload:c.flush(),networkDetails:null};this._handleFragmentLoadProgress(f),h&&e.prototype._handleFragmentLoadComplete.call(this,f)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+u.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var p=this.getLoadPosition(),m=eH.bufferInfo(this.mediaBuffer,p,this.config.maxBufferHole);0>ez(m.end,this.config.maxFragLookUpTolerance,u)&&(this.log("Waiting fragment cc ("+u.cc+") @ "+u.start+" cancelled because another fragment at "+m.end+" is needed"),this.clearWaitingFragment())}}else this.state=e0}this.onTickEnd()},i.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=e0)},i.resetLoadingState=function(){this.clearWaitingFragment(),e.prototype.resetLoadingState.call(this)},i.onTickEnd=function(){var e=this.media;e&&e.readyState&&(this.lastCurrentTime=e.currentTime)},i.doTickIdle=function(){var e=this.hls,t=this.levels,r=this.media,i=this.trackId,n=e.config;if(t&&t[i]&&(r||!this.startFragRequested&&n.startFragPrefetch)){var a=t[i].details;if(!a||a.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(a))this.state=e4;else{var o=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&o&&(this.bufferFlushed=!1,this.afterBufferFlushed(o,k.ElementaryStreamTypes.AUDIO,$.PlaylistLevelType.AUDIO));var s=this.getFwdBufferInfo(o,$.PlaylistLevelType.AUDIO);if(null!==s){var l=this.audioSwitch;if(!l&&this._streamEnded(s,a))return e.trigger(f.Events.BUFFER_EOS,{type:"audio"}),void(this.state=e6);var u=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,$.PlaylistLevelType.MAIN);if(!(s.len>=this.getMaxBufferLength(null==u?void 0:u.len))||l){var d=a.fragments[0].start,c=s.end;if(l&&r){var h=this.getLoadPosition();c=h,a.PTSKnown&&h<d&&(s.end>d||s.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=d+.05)}if(!(u&&c>u.end+a.targetduration)&&(u&&u.len||!s.len)){var p=this.getNextFragment(c,a);p?this.loadFragment(p,a,c):this.bufferFlushed=!0}}}}}},i.getMaxBufferLength=function(t){var r=e.prototype.getMaxBufferLength.call(this);return t?Math.max(r,t):r},i.onMediaDetaching=function(){this.videoBuffer=null,e.prototype.onMediaDetaching.call(this)},i.onAudioTracksUpdated=function(e,t){var r=t.audioTracks;this.resetTransmuxer(),this.levels=r.map(function(e){return new ef(e)})},i.onAudioTrackSwitching=function(e,t){var r=!!t.url;this.trackId=t.id;var i=this.fragCurrent;i&&i.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.audioSwitch=!0,this.state=e0):this.state=eJ,this.tick()},i.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},i.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(f.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},i.onAudioTrackLoaded=function(e,t){var r;if(null!=this.mainDetails){var i=this.levels,n=t.details,a=t.id;if(i){this.log("Track "+a+" loaded ["+n.startSN+","+n.endSN+"],duration:"+n.totalduration);var o=i[a],s=0;if(n.live||null!==(r=o.details)&&void 0!==r&&r.live){var l=this.mainDetails;if(n.fragments[0]||(n.deltaUpdateFailed=!0),n.deltaUpdateFailed||!l)return;!o.details&&n.hasProgramDateTime&&l.hasProgramDateTime?(eq(n,l),s=n.fragments[0].start):s=this.alignPlaylists(n,o.details)}o.details=n,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(o.details,s),this.state!==e4||this.waitForCdnTuneIn(n)||(this.state=e0),this.tick()}else this.warn("Audio tracks were reset while loading level "+a)}else this.cachedTrackLoadedData=t},i._handleFragmentLoadProgress=function(e){var t,r=e.frag,i=e.part,n=e.payload,a=this.config,o=this.trackId,s=this.levels;if(s){var l=s[o],u=l.details,d=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2",c=this.transmuxer;c||(c=this.transmuxer=new th(this.hls,$.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var h=this.initPTS[r.cc],f=null===(t=r.initSegment)||void 0===t?void 0:t.data;if(void 0!==h){var p=i?i.index:-1,m=new eV(r.level,r.sn,r.stats.chunkCount,n.byteLength,p,-1!==p);c.push(n,f,d,"",r,i,u.totalduration,!1,m,h)}else this.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+u.startSN+" ,"+u.endSN+"],track "+o),(this.waitingData=this.waitingData||{frag:r,part:i,cache:new tb,complete:!1}).cache.push(new Uint8Array(n)),this.waitingVideoCC=this.videoTrackCC,this.state=e9}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},i._handleFragmentLoadComplete=function(t){this.waitingData?this.waitingData.complete=!0:e.prototype._handleFragmentLoadComplete.call(this,t)},i.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},i.onBufferCreated=function(e,t){var r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)},i.onFragBuffered=function(e,t){var r,i=t.frag,n=t.part;i.type===$.PlaylistLevelType.AUDIO?this.fragContextChanged(i)?this.warn("Fragment "+i.sn+(n?" p: "+n.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==i.sn&&(this.fragPrevious=i,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(f.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(i,n)):this.loadedmetadata||i.type!==$.PlaylistLevelType.MAIN||null!==(r=this.videoBuffer||this.media)&&void 0!==r&&r.buffered.length&&(this.loadedmetadata=!0)},i.onError=function(t,r){if(r.type!==p.ErrorTypes.KEY_SYSTEM_ERROR)switch(r.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.FRAG_PARSING_ERROR:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError($.PlaylistLevelType.AUDIO,r);break;case p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==e7&&this.state!==eJ&&(this.state=r.fatal?e7:e0,this.warn(r.details+" while loading frag, switching to "+this.state+" state"));break;case p.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===r.parent&&(this.state===e3||this.state===e8)){var i=!0,n=this.getFwdBufferInfo(this.mediaBuffer,$.PlaylistLevelType.AUDIO);n&&n.len>.5&&(i=!this.reduceMaxBufferLength(n.len)),i&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError($.PlaylistLevelType.AUDIO,r)},i.onBufferFlushed=function(e,t){t.type===k.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===e6&&(this.state=e0))},i._handleTransmuxComplete=function(e){var t,r="audio",i=this.hls,n=e.remuxResult,a=e.chunkMeta,o=this.getCurrentContext(a);if(!o)return this.warn("The loading context changed while buffering fragment "+a.sn+" of level "+a.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(a.level);var s=o.frag,l=o.part,u=o.level.details,d=n.audio,c=n.text,h=n.id3,p=n.initSegment;if(!this.fragContextChanged(s)&&u){if(this.state=e3,this.audioSwitch&&d&&this.completeAudioSwitch(),null!=p&&p.tracks&&(this._bufferInitSegment(p.tracks,s,a),i.trigger(f.Events.FRAG_PARSING_INIT_SEGMENT,{frag:s,id:r,tracks:p.tracks})),d){var m=d.startPTS,v=d.endPTS,g=d.startDTS,y=d.endDTS;l&&(l.elementaryStreams[k.ElementaryStreamTypes.AUDIO]={startPTS:m,endPTS:v,startDTS:g,endDTS:y}),s.setElementaryStreamInfo(k.ElementaryStreamTypes.AUDIO,m,v,g,y),this.bufferFragmentData(d,s,l,a)}if(null!=h&&null!==(t=h.samples)&&void 0!==t&&t.length){var b=tE({id:r,frag:s,details:u},h);i.trigger(f.Events.FRAG_PARSING_METADATA,b)}if(c){var E=tE({id:r,frag:s,details:u},c);i.trigger(f.Events.FRAG_PARSING_USERDATA,E)}}},i._bufferInitSegment=function(e,t,r){if(this.state===e3){e.video&&delete e.video;var i=e.audio;if(i){i.levelCodec=i.codec,i.id="audio",this.log("Init audio buffer, container:"+i.container+", codecs[parsed]=["+i.codec+"]"),this.hls.trigger(f.Events.BUFFER_CODECS,e);var n=i.initSegment;if(null!=n&&n.byteLength){var a={type:"audio",frag:t,part:null,chunkMeta:r,parent:t.type,data:n};this.hls.trigger(f.Events.BUFFER_APPENDING,a)}this.tick()}}},i.loadFragment=function(t,r,i){var n=this.fragmentTracker.getState(t);this.fragCurrent=t,(this.audioSwitch||n===ek.NOT_LOADED||n===ek.PARTIAL)&&("initSegment"===t.sn?this._loadInitSegment(t,r):r.live&&!(0,h.isFiniteNumber)(this.initPTS[t.cc])?(this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=e9):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,r,i)))},i.completeAudioSwitch=function(){var t=this.hls,r=this.media,i=this.trackId;r&&(this.log("Switching audio track : flushing all audio"),e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,t.trigger(f.Events.AUDIO_TRACK_SWITCHED,{id:i})},t}(tt);function tA(e,t){return(tA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let tS=function(e){function t(t){var r;return(r=e.call(this,t,"[audio-track-controller]")||this).tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.trackName="",r.selectDefaultTrack=!0,r.registerListeners(),r}(r=t).prototype=Object.create(e.prototype),r.prototype.constructor=r,tA(r,e);var r,i=t.prototype;return i.registerListeners=function(){var e=this.hls;e.on(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(f.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(f.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(f.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(f.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(f.Events.ERROR,this.onError,this)},i.unregisterListeners=function(){var e=this.hls;e.off(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(f.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(f.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(f.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(f.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(f.Events.ERROR,this.onError,this)},i.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,e.prototype.destroy.call(this)},i.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},i.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},i.onAudioTrackLoaded=function(e,t){var r=t.id,i=t.details,n=this.tracksInGroup[r];if(n){var a=n.details;n.details=t.details,this.log("audioTrack "+r+" loaded ["+i.startSN+"-"+i.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,t,a))}else this.warn("Invalid audio track id "+r)},i.onLevelLoading=function(e,t){this.switchLevel(t.level)},i.onLevelSwitching=function(e,t){this.switchLevel(t.level)},i.switchLevel=function(e){var t=this.hls.levels[e];if(null!=t&&t.audioGroupIds){var r=t.audioGroupIds[t.urlId];if(this.groupId!==r){this.groupId=r;var i=this.tracks.filter(function(e){return!r||e.groupId===r});this.selectDefaultTrack&&!i.some(function(e){return e.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=i,this.log("Updating audio tracks, "+i.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(f.Events.AUDIO_TRACKS_UPDATED,{audioTracks:i}),this.selectInitialTrack()}}},i.onError=function(t,r){e.prototype.onError.call(this,t,r),!r.fatal&&r.context&&r.context.type===$.PlaylistContextType.AUDIO_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r)},i.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var r=t[this.trackId];this.log("Now switching to audio-track index "+e);var i=t[e],n=i.id,a=i.groupId,o=i.name,s=i.type,l=i.url;if(this.trackId=e,this.trackName=o,this.selectDefaultTrack=!1,this.hls.trigger(f.Events.AUDIO_TRACK_SWITCHING,{id:n,groupId:void 0===a?"":a,name:o,type:s,url:l}),!i.details||i.details.live){var u=this.switchParams(i.url,null==r?void 0:r.details);this.loadPlaylist(u)}}},i.selectInitialTrack=function(){this.tracksInGroup;var e=this.trackName,t=this.findTrackId(e)||this.findTrackId();-1!==t?this.setAudioTrack(t):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},i.findTrackId=function(e){for(var t=this.tracksInGroup,r=0;r<t.length;r++){var i=t[r];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return -1},i.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var r=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(r)){var i=r.id,n=r.groupId,a=r.url;if(t)try{a=t.addDirectives(a)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: "+o)}this.log("loading audio-track playlist for id: "+i),this.clearTimer(),this.hls.trigger(f.Events.AUDIO_TRACK_LOADING,{url:a,id:i,groupId:n,deliveryDirectives:t||null})}},function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(t.prototype,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}]),Object.defineProperty(t,"prototype",{writable:!1}),t}(eT);function tk(e,t){return(tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var tw=function(e){function t(t,r,i){var n;return(n=e.call(this,t,r,i,"[subtitle-stream-controller]")||this).levels=[],n.currentTrackId=-1,n.tracksBuffered=[],n.mainDetails=null,n._registerListeners(),n}(r=t).prototype=Object.create(e.prototype),r.prototype.constructor=r,tk(r,e);var r,i=t.prototype;return i.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},i._registerListeners=function(){var e=this.hls;e.on(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(f.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(f.Events.ERROR,this.onError,this),e.on(f.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(f.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(f.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(f.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(f.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(f.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i._unregisterListeners=function(){var e=this.hls;e.off(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(f.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(f.Events.ERROR,this.onError,this),e.off(f.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(f.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(f.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(f.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(f.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(f.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i.startLoad=function(e){this.stopLoad(),this.state=e0,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},i.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},i.onLevelLoaded=function(e,t){this.mainDetails=t.details},i.onSubtitleFragProcessed=function(e,t){var r=t.frag,i=t.success;if(this.fragPrevious=r,this.state=e0,i){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var a,o=r.start,s=0;s<n.length;s++)if(o>=n[s].start&&o<=n[s].end){a=n[s];break}var l=r.start+r.duration;a?a.end=l:(a={start:o,end:l},n.push(a)),this.fragmentTracker.fragBuffered(r)}}},i.onBufferFlushing=function(e,t){var r=t.startOffset,i=t.endOffset;if(0===r&&i!==Number.POSITIVE_INFINITY){var n=this.currentTrackId,a=this.levels;if(!a.length||!a[n]||!a[n].details)return;var o=i-a[n].details.targetduration;if(o<=0)return;t.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach(function(e){for(var t=0;t<e.length;)if(e[t].end<=o)e.shift();else{if(!(e[t].start<o))break;e[t].start=o,t++}}),this.fragmentTracker.removeFragmentsInRange(r,o,$.PlaylistLevelType.SUBTITLE)}},i.onFragBuffered=function(e,t){var r;this.loadedmetadata||t.frag.type!==$.PlaylistLevelType.MAIN||null!==(r=this.media)&&void 0!==r&&r.buffered.length&&(this.loadedmetadata=!0)},i.onError=function(e,t){var r=t.frag;r&&r.type===$.PlaylistLevelType.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=e0)},i.onSubtitleTracksUpdated=function(e,t){var r=this,i=t.subtitleTracks;this.tracksBuffered=[],this.levels=i.map(function(e){return new ef(e)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(e){r.tracksBuffered[e.id]=[]}),this.mediaBuffer=null},i.onSubtitleTrackSwitch=function(e,t){if(this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId){var r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(500)}else this.clearInterval()},i.onSubtitleTrackLoaded=function(e,t){var r,i=t.details,n=t.id,a=this.currentTrackId,o=this.levels;if(o.length){var s=o[a];if(!(n>=o.length||n!==a)&&s){this.mediaBuffer=this.mediaBufferTimeRanges;var l=0;if(i.live||null!==(r=s.details)&&void 0!==r&&r.live){var u=this.mainDetails;if(i.deltaUpdateFailed||!u)return;var d=u.fragments[0];s.details?0===(l=this.alignPlaylists(i,s.details))&&d&&eE(i,l=d.start):i.hasProgramDateTime&&u.hasProgramDateTime?(eq(i,u),l=i.fragments[0].start):d&&eE(i,l=d.start)}s.details=i,this.levelLastLoaded=n,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(s.details,l),this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===e0&&(e$(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),s.details=void 0))}}},i._handleFragmentLoadComplete=function(e){var t=this,r=e.frag,i=e.payload,n=r.decryptdata,a=this.hls;if(!this.fragContextChanged(r)&&i&&i.byteLength>0&&n&&n.key&&n.iv&&"AES-128"===n.method){var o=performance.now();this.decrypter.decrypt(new Uint8Array(i),n.key.buffer,n.iv.buffer).then(function(e){var t=performance.now();a.trigger(f.Events.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:o,tdecrypt:t}})}).catch(function(e){t.warn(e.name+": "+e.message),t.state=e0})}},i.doTick=function(){if(this.media){if(this.state===e0){var e=this.currentTrackId,t=this.levels;if(!t.length||!t[e]||!t[e].details)return;var r=t[e].details,i=r.targetduration,n=this.config,a=this.getLoadPosition(),o=eH.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a-i,n.maxBufferHole),s=o.end,l=o.len,u=this.getFwdBufferInfo(this.media,$.PlaylistLevelType.MAIN);if(l>this.getMaxBufferLength(null==u?void 0:u.len)+i)return;var d=r.fragments,c=d.length,h=r.edge,f=null,p=this.fragPrevious;if(s<h){var m=n.maxFragLookUpTolerance;(f=e$(p,d,Math.max(d[0].start,s),m))||!p||!(p.start<d[0].start)||(f=d[0])}else f=d[c-1];f&&(f=this.mapToInitFragWhenRequired(f),this.fragmentTracker.getState(f)===ek.NOT_LOADED&&this.loadFragment(f,r,s))}}else this.state=e0},i.getMaxBufferLength=function(t){var r=e.prototype.getMaxBufferLength.call(this);return t?Math.max(r,t):r},i.loadFragment=function(t,r,i){this.fragCurrent=t,"initSegment"===t.sn?this._loadInitSegment(t,r):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,r,i))},function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(t.prototype,[{key:"mediaBufferTimeRanges",get:function(){return new tL(this.tracksBuffered[this.currentTrackId]||[])}}]),Object.defineProperty(t,"prototype",{writable:!1}),t}(tt),tL=function(e){this.buffered=void 0;var t=function(t,r,i){if((r>>>=0)>i-1)throw new DOMException("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+r+") is greater than the maximum bound ("+i+")");return e[r][t]};this.buffered={get length(){return e.length},end:function(r){return t("end",r,e.length)},start:function(r){return t("start",r,e.length)}}};function tI(e,t){return(tI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tD(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];"subtitles"===i.kind&&i.label&&t.push(e[r])}return t}let tR=function(e){function t(t){var r;return(r=e.call(this,t,"[subtitle-track-controller]")||this).media=null,r.tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.trackChangeListener=function(){return r.onTextTracksChanged()},r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r._subtitleDisplay=!0,r.registerListeners(),r}(r=t).prototype=Object.create(e.prototype),r.prototype.constructor=r,tI(r,e);var r,i=t.prototype;return i.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,e.prototype.destroy.call(this)},i.registerListeners=function(){var e=this.hls;e.on(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(f.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(f.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(f.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(f.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(f.Events.ERROR,this.onError,this)},i.unregisterListeners=function(){var e=this.hls;e.off(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(f.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(f.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(f.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(f.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(f.Events.ERROR,this.onError,this)},i.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},i.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},i.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),tD(this.media.textTracks).forEach(function(e){J(e)}),this.subtitleTrack=-1,this.media=null)},i.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},i.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},i.onSubtitleTrackLoaded=function(e,t){var r=t.id,i=t.details,n=this.trackId,a=this.tracksInGroup[n];if(a){var o=a.details;a.details=t.details,this.log("subtitle track "+r+" loaded ["+i.startSN+"-"+i.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,t,o))}else this.warn("Invalid subtitle track id "+r)},i.onLevelLoading=function(e,t){this.switchLevel(t.level)},i.onLevelSwitching=function(e,t){this.switchLevel(t.level)},i.switchLevel=function(e){var t=this.hls.levels[e];if(null!=t&&t.textGroupIds){var r=t.textGroupIds[t.urlId];if(this.groupId!==r){var i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,n=this.tracks.filter(function(e){return!r||e.groupId===r});this.tracksInGroup=n;var a=this.findTrackId(null==i?void 0:i.name)||this.findTrackId();this.groupId=r,this.log("Updating subtitle tracks, "+n.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(f.Events.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),-1!==a&&this.setSubtitleTrack(a,i)}}},i.findTrackId=function(e){for(var t=this.tracksInGroup,r=0;r<t.length;r++){var i=t[r];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return -1},i.onError=function(t,r){e.prototype.onError.call(this,t,r),!r.fatal&&r.context&&r.context.type===$.PlaylistContextType.SUBTITLE_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r)},i.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var r=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(r)){var i=r.id,n=r.groupId,a=r.url;if(t)try{a=t.addDirectives(a)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: "+o)}this.log("Loading subtitle playlist for id "+i),this.hls.trigger(f.Events.SUBTITLE_TRACK_LOADING,{url:a,id:i,groupId:n,deliveryDirectives:t||null})}},i.toggleTrackModes=function(e){var t=this,r=this.media,i=this.trackId;if(r){var n=tD(r.textTracks),a=n.filter(function(e){return e.groupId===t.groupId});if(-1===e)[].slice.call(n).forEach(function(e){e.mode="disabled"});else{var o=a[i];o&&(o.mode="disabled")}var s=a[e];s&&(s.mode=this.subtitleDisplay?"showing":"hidden")}},i.setSubtitleTrack=function(e,t){var r,i=this.tracksInGroup;if(this.media){if(this.trackId!==e&&this.toggleTrackModes(e),!(this.trackId===e&&(-1===e||null!==(r=i[e])&&void 0!==r&&r.details)||e<-1||e>=i.length)){this.clearTimer();var n=i[e];if(this.log("Switching to subtitle track "+e),this.trackId=e,n){var a=n.id,o=n.groupId,s=n.name,l=n.type,u=n.url;this.hls.trigger(f.Events.SUBTITLE_TRACK_SWITCH,{id:a,groupId:void 0===o?"":o,name:s,type:l,url:u});var d=this.switchParams(n.url,null==t?void 0:t.details);this.loadPlaylist(d)}else this.hls.trigger(f.Events.SUBTITLE_TRACK_SWITCH,{id:e})}}else this.queuedDefaultTrack=e},i.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=tD(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(t.prototype,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}]),Object.defineProperty(t,"prototype",{writable:!1}),t}(eT);var tO,tP,tC=function(){function e(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var t=e.prototype;return t.append=function(e,t){var r=this.queues[t];r.push(e),1===r.length&&this.buffers[t]&&this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,r=new Promise(function(e){t=e}),i={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,e),r},t.executeNext=function(e){var t=this.buffers,r=this.queues,i=t[e],n=r[e];if(n.length){var a=n[0];try{a.execute()}catch(o){m.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),a.onError(o),i&&i.updating||(n.shift(),this.executeNext(e))}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},e}(),tM=tr(),tx=/([ha]vc.)(?:\.[^.,]+)+/,tN=function(){function e(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=t.hls,r=t.media,i=t.mediaSource;m.logger.log("[buffer-controller]: Media source opened"),r&&(t.updateMediaElementDuration(),e.trigger(f.Events.MEDIA_ATTACHED,{media:r})),i&&i.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){m.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){m.logger.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var t=e.prototype;return t.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},t.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},t.registerListeners=function(){var e=this.hls;e.on(f.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(f.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(f.Events.BUFFER_RESET,this.onBufferReset,this),e.on(f.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.on(f.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(f.Events.BUFFER_EOS,this.onBufferEos,this),e.on(f.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(f.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(f.Events.FRAG_PARSED,this.onFragParsed,this),e.on(f.Events.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function(){var e=this.hls;e.off(f.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(f.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(f.Events.BUFFER_RESET,this.onBufferReset,this),e.off(f.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.off(f.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(f.Events.BUFFER_EOS,this.onBufferEos,this),e.off(f.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(f.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(f.Events.FRAG_PARSED,this.onFragParsed,this),e.off(f.Events.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new tC(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},t.onManifestParsed=function(e,t){var r=2;(!t.audio||t.video)&&t.altAudio||(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.details=null,m.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function(e,t){var r=this.media=t.media;if(r&&tM){var i=this.mediaSource=new tM;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(i),this._objectUrl=r.src}},t.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,r=this._objectUrl;if(t){if(m.logger.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(i){m.logger.warn("[buffer-controller]: onMediaDetaching: "+i.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(r&&self.URL.revokeObjectURL(r),e.src===r?(e.removeAttribute("src"),e.load()):m.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(f.Events.MEDIA_DETACHED,void 0)},t.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach(function(t){var r=e.sourceBuffer[t];try{r&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(r),e.sourceBuffer[t]=void 0)}catch(i){m.logger.warn("[buffer-controller]: Failed to reset the "+t+" buffer",i)}}),this._initSourceBuffer()},t.onBufferCodecs=function(e,t){var r=this,i=this.getSourceBufferTypes().length;Object.keys(t).forEach(function(e){if(i){var n=r.tracks[e];if(n&&"function"==typeof n.buffer.changeType){var a=t[e],o=a.id,s=a.codec,l=a.levelCodec,u=a.container,d=a.metadata,c=(n.levelCodec||n.codec).replace(tx,"$1"),h=(l||s).replace(tx,"$1");c!==h&&(r.appendChangeType(e,u+";codecs="+(l||s)),m.logger.log("[buffer-controller]: switching codec "+c+" to "+h),r.tracks[e]={buffer:n.buffer,codec:s,container:u,levelCodec:l,metadata:d,id:o})}}else r.pendingTracks[e]=t[e]}),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.appendChangeType=function(e,t){var r=this,i=this.operationQueue;i.append({execute:function(){var n=r.sourceBuffer[e];n&&(m.logger.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+t),n.changeType(t)),i.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){m.logger.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",t)}},e)},t.onBufferAppending=function(e,t){var r=this,i=this.hls,n=this.operationQueue,a=this.tracks,o=t.data,s=t.type,l=t.frag,u=t.part,d=t.chunkMeta,c=d.buffering[s],h=self.performance.now();c.start=h;var v=l.stats.buffering,g=u?u.stats.buffering:null;0===v.start&&(v.start=h),g&&0===g.start&&(g.start=h);var y=a.audio,b=!1;"audio"===s&&"audio/mpeg"===(null==y?void 0:y.container)&&(b=!this.lastMpegAudioChunk||1===d.id||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);var E=l.start;n.append({execute:function(){if(c.executeStart=self.performance.now(),b){var e=r.sourceBuffer[s];if(e){var t=E-e.timestampOffset;Math.abs(t)>=.1&&(m.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+E+" (delta: "+t+") sn: "+l.sn+")"),e.timestampOffset=E)}}r.appendExecutor(o,s)},onStart:function(){},onComplete:function(){var e=self.performance.now();c.executeEnd=c.end=e,0===v.first&&(v.first=e),g&&0===g.first&&(g.first=e);var t=r.sourceBuffer,i={};for(var n in t)i[n]=eH.getBuffered(t[n]);r.appendError=0,r.hls.trigger(f.Events.BUFFER_APPENDED,{type:s,frag:l,part:u,chunkMeta:d,parent:l.type,timeRanges:i})},onError:function(e){m.logger.error("[buffer-controller]: Error encountered while trying to append to the "+s+" SourceBuffer",e);var t={type:p.ErrorTypes.MEDIA_ERROR,parent:l.type,details:p.ErrorDetails.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=p.ErrorDetails.BUFFER_FULL_ERROR:(r.appendError++,t.details=p.ErrorDetails.BUFFER_APPEND_ERROR,r.appendError>i.config.appendErrorMaxRetry&&(m.logger.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0,i.stopLoad())),i.trigger(f.Events.ERROR,t)}},s)},t.onBufferFlushing=function(e,t){var r=this,i=this.operationQueue,n=function(e){return{execute:r.removeExecutor.bind(r,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){r.hls.trigger(f.Events.BUFFER_FLUSHED,{type:e})},onError:function(t){m.logger.warn("[buffer-controller]: Failed to remove from "+e+" SourceBuffer",t)}}};t.type?i.append(n(t.type),t.type):this.getSourceBufferTypes().forEach(function(e){i.append(n(e),e)})},t.onFragParsed=function(e,t){var r=this,i=t.frag,n=t.part,a=[],o=n?n.elementaryStreams:i.elementaryStreams;o[k.ElementaryStreamTypes.AUDIOVIDEO]?a.push("audiovideo"):(o[k.ElementaryStreamTypes.AUDIO]&&a.push("audio"),o[k.ElementaryStreamTypes.VIDEO]&&a.push("video")),0===a.length&&m.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers(function(){var e=self.performance.now();i.stats.buffering.end=e,n&&(n.stats.buffering.end=e);var t=n?n.stats:i.stats;r.hls.trigger(f.Events.FRAG_BUFFERED,{frag:i,part:n,stats:t,id:i.type})},a)},t.onFragChanged=function(e,t){this.flushBackBuffer()},t.onBufferEos=function(e,t){var r=this;this.getSourceBufferTypes().reduce(function(e,i){var n=r.sourceBuffer[i];return!n||t.type&&t.type!==i||(n.ending=!0,n.ended||(n.ended=!0,m.logger.log("[buffer-controller]: "+i+" sourceBuffer now EOS"))),e&&!(n&&!n.ended)},!0)&&(m.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){r.getSourceBufferTypes().forEach(function(e){var t=r.sourceBuffer[e];t&&(t.ending=!1)});var e=r.mediaSource;e&&"open"===e.readyState?(m.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),e.endOfStream()):e&&m.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+e.readyState)}))},t.onLevelUpdated=function(e,t){var r=t.details;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.flushBackBuffer=function(){var e=this.hls,t=this.details,r=this.media,i=this.sourceBuffer;if(r&&null!==t){var n=this.getSourceBufferTypes();if(n.length){var a=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if((0,h.isFiniteNumber)(a)&&!(a<0)){var o=r.currentTime,s=t.levelTargetDuration,l=Math.floor(o/s)*s-Math.max(a,s);n.forEach(function(r){var n=i[r];if(n){var a=eH.getBuffered(n);if(a.length>0&&l>a.start(0)){if(e.trigger(f.Events.BACK_BUFFER_REACHED,{bufferEnd:l}),t.live)e.trigger(f.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:l});else if(n.ended&&a.end(a.length-1)-o<2*s)return void m.logger.info("[buffer-controller]: Cannot flush "+r+" back buffer while SourceBuffer is in ended state");e.trigger(f.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:l,type:r})}}})}}}},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,r=this.media,i=this.mediaSource,n=e.fragments[0].start+e.totalduration,a=r.duration,o=(0,h.isFiniteNumber)(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(m.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(n>o&&n>a||!(0,h.isFiniteNumber)(a))&&(m.logger.log("[buffer-controller]: Updating Media Source duration to "+n.toFixed(3)),i.duration=n)}},t.updateSeekableRange=function(e){var t=this.mediaSource,r=e.fragments;if(r.length&&e.live&&null!=t&&t.setLiveSeekableRange){var i=Math.max(0,r[0].start),n=Math.max(i,i+e.totalduration);t.setLiveSeekableRange(i,n)}},t.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,r=this.pendingTracks,i=Object.keys(r).length;if(i&&!e||2===i){this.createSourceBuffers(r),this.pendingTracks={};var n=this.getSourceBufferTypes();if(0===n.length)return void this.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});n.forEach(function(e){t.executeNext(e)})}},t.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");var i=0;for(var n in e)if(!t[n]){var a=e[n];if(!a)throw Error("source buffer exists for track "+n+", however track does not");var o=a.levelCodec||a.codec,s=a.container+";codecs="+o;m.logger.log("[buffer-controller]: creating sourceBuffer("+s+")");try{var l=t[n]=r.addSourceBuffer(s),u=n;this.addBufferListener(u,"updatestart",this._onSBUpdateStart),this.addBufferListener(u,"updateend",this._onSBUpdateEnd),this.addBufferListener(u,"error",this._onSBUpdateError),this.tracks[n]={buffer:l,codec:o,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id},i++}catch(d){m.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+d.message),this.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:d,mimeType:s})}}i&&this.hls.trigger(f.Events.BUFFER_CREATED,{tracks:this.tracks})},t._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},t._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},t._onSBUpdateError=function(e,t){m.logger.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var r=this.operationQueue.current(e);r&&r.onError(t)},t.removeExecutor=function(e,t,r){var i=this.media,n=this.mediaSource,a=this.operationQueue,o=this.sourceBuffer[e];if(!i||!n||!o)return m.logger.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void a.shiftAndExecuteNext(e);var s=(0,h.isFiniteNumber)(i.duration)?i.duration:1/0,l=(0,h.isFiniteNumber)(n.duration)?n.duration:1/0,u=Math.max(0,t),d=Math.min(r,s,l);d>u&&!o.ending?(o.ended=!1,m.logger.log("[buffer-controller]: Removing ["+u+","+d+"] from the "+e+" SourceBuffer"),o.remove(u,d)):a.shiftAndExecuteNext(e)},t.appendExecutor=function(e,t){var r=this.operationQueue,i=this.sourceBuffer[t];if(!i)return m.logger.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(t);i.ended=!1,i.appendBuffer(e)},t.blockBuffers=function(e,t){var r=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return m.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);var i=this.operationQueue;Promise.all(t.map(function(e){return i.appendBlocker(e)})).then(function(){e(),t.forEach(function(e){var t=r.sourceBuffer[e];t&&t.updating||i.shiftAndExecuteNext(e)})})},t.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function(e,t,r){var i=this.sourceBuffer[e];if(i){var n=r.bind(this,e);this.listeners[e].push({event:t,listener:n}),i.addEventListener(t,n)}},t.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach(function(e){t.removeEventListener(e.event,e.listener)})},e}(),tU={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},tF=function(e){var t=e;return tU.hasOwnProperty(e)&&(t=tU[e]),String.fromCharCode(t)},tB={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},tj={17:2,18:4,21:6,22:8,23:10,19:13,20:15},tH={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},tV={25:2,26:4,29:6,30:8,31:10,27:13,28:15},tK=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];(i=tP||(tP={}))[i.ERROR=0]="ERROR",i[i.TEXT=1]="TEXT",i[i.WARNING=2]="WARNING",i[i.INFO=2]="INFO",i[i.DEBUG=3]="DEBUG",i[i.DATA=3]="DATA";var tG=function(){function e(){this.time=null,this.verboseLevel=tP.ERROR}return e.prototype.log=function(e,t){if(this.verboseLevel>=e){var r="function"==typeof t?t():t;m.logger.log(this.time+" ["+e+"] "+r)}},e}(),tW=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},tq=function(){function e(e,t,r,i,n){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=i||"black",this.flash=n||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),tY=function(){function e(e,t,r,i,n,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new tq(t,r,i,n,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),t$=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<100;t++)this.chars.push(new tY);this.logger=e,this.pos=0,this.currPenState=new tq}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<100;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(tP.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(tP.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){var t=this;e>=144&&this.backSpace();var r=tF(e);this.pos>=100?this.logger.log(tP.ERROR,function(){return"Cannot insert "+e.toString(16)+" ("+r+") at position "+t.pos+". Skipping it!"}):(this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<100;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<100;r++){var i=this.chars[r].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),tz=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<15;t++)this.rows.push(new t$(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(tP.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(tP.INFO,function(){return"pacData = "+JSON.stringify(e)});var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<15;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var a=n.rows[i].cueStartTime,o=this.logger.time;if(a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(n.rows[i+s])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent;l.setCursor(e.indent),e.color=l.chars[Math.max(u-1,0)].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},t.setBkgData=function(e){this.logger.log(tP.INFO,function(){return"bkgData = "+JSON.stringify(e)}),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){var e=this;if(null!==this.nrRollUpRows){this.logger.log(tP.TEXT,function(){return e.getDisplayText()});var t=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(t,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(tP.INFO,"Rolling up")}else this.logger.log(tP.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",i=-1,n=0;n<15;n++){var a=this.rows[n].getTextString();a&&(i=n+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),tX=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new tz(r),this.nonDisplayedMemory=new tz(r),this.lastOutputScreen=new tz(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(tP.INFO,function(){return"MODE="+e}),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=this,r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(tP.INFO,function(){return i+": "+t.writeScreen.getDisplayText(!0)}),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(tP.TEXT,function(){return"DISPLAYED: "+t.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(tP.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(tP.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(tP.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(tP.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(tP.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(tP.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(tP.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(tP.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(tP.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(tP.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(tP.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){var e=this;if(this.logger.log(tP.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(tP.TEXT,function(){return"DISP: "+e.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(tP.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};(t.underline=e%2==1,t.italics=e>=46,t.italics)?t.foreground="white":t.foreground=["white","green","blue","cyan","red","yellow","magenta"][Math.floor(e/2)-16],this.logger.log(tP.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),tQ=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new tG;this.channels=[null,new tX(e,t,i),new tX(e+1,r,i)],this.cmdHistory={a:null,b:null},this.logger=i}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,i,n,a=!1;this.logger.time=e;for(var o=0;o<t.length;o+=2)if(i=127&t[o],n=127&t[o+1],0!==i||0!==n){if(this.logger.log(tP.DATA,"["+tW([t[o],t[o+1]])+"] -> ("+tW([i,n])+")"),(r=this.parseCmd(i,n))||(r=this.parseMidrow(i,n)),r||(r=this.parsePAC(i,n)),r||(r=this.parseBackgroundAttributes(i,n)),!r&&(a=this.parseChars(i,n))){var s=this.currentChannel;s&&s>0?this.channels[s].insertChars(a):this.logger.log(tP.WARNING,"No channel found yet. TEXT-MODE?")}r||a||this.logger.log(tP.WARNING,"Couldn't parse cleaned data "+tW([i,n])+" orig: "+tW([t[o],t[o+1]]))}},t.parseCmd=function(e,t){var r=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(tJ(e,t,r))return tZ(null,null,r),this.logger.log(tP.DEBUG,"Repeated command ("+tW([e,t])+") is dropped"),!0;var i=20===e||21===e||23===e?1:2,n=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),tZ(e,t,r),this.currentChannel=i,!0},t.parseMidrow=function(e,t){var r=0;if((17===e||25===e)&&t>=32&&t<=47){if((r=17===e?1:2)!==this.currentChannel)return this.logger.log(tP.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[r];return!!i&&(i.ccMIDROW(t),this.logger.log(tP.DEBUG,"MIDROW ("+tW([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var r,i=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(tJ(e,t,i))return tZ(null,null,i),!0;var n=e<=23?1:2;r=t>=64&&t<=95?1===n?tB[e]:tH[e]:1===n?tj[e]:tV[e];var a=this.channels[n];return!!a&&(a.setPAC(this.interpretPAC(r,t)),tZ(e,t,i),this.currentChannel=n,!0)},t.interpretPAC=function(e,t){var r,i={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,i.underline=1==(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},t.parseChars=function(e,t){var r,i,n=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19?(i=17===a?t+80:18===a?t+112:t+144,this.logger.log(tP.INFO,"Special char '"+tF(i)+"' in channel "+r),n=[i]):e>=32&&e<=127&&(n=0===t?[e]:[e,t]),n){var o=tW(n);this.logger.log(tP.DEBUG,"Char codes =  "+o.join(",")),tZ(e,t,this.cmdHistory)}return n},t.parseBackgroundAttributes=function(e,t){if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var r={};return 16===e||24===e?(r.background=tK[Math.floor((t-32)/2)],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),this.channels[e<=23?1:2].setBkgData(r),tZ(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e)}},e}();function tZ(e,t,r){r.a=e,r.b=t}function tJ(e,t,r){return r.a===e&&r.b===t}var t0=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[],this.startTime=null},e}();let t1=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var e=["","lr","rl"],t=["start","middle","end","left","right"];function r(e,t){if("string"!=typeof t||!Array.isArray(e))return!1;var r=t.toLowerCase();return!!~e.indexOf(r)&&r}function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var o in a)e[o]=a[o]}return e}function n(n,a,o){var s=this,l={enumerable:!0};s.hasBeenReset=!1;var u="",d=!1,c=n,h=a,f=o,p=null,m="",v=!0,g="auto",y="start",b=50,E="middle",T=50,_="middle";Object.defineProperty(s,"id",i({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",i({},l,{get:function(){return c},set:function(e){if("number"!=typeof e)throw TypeError("Start time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},l,{get:function(){return m},set:function(t){var i=r(e,t);if(!1===i)throw SyntaxError("An invalid or illegal string was specified.");m=i,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},l,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},l,{get:function(){return g},set:function(e){if("number"!=typeof e&&"auto"!==e)throw SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},l,{get:function(){return y},set:function(e){var i=r(t,e);if(!i)throw SyntaxError("An invalid or illegal string was specified.");y=i,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},l,{get:function(){return E},set:function(e){var i=r(t,e);if(!i)throw SyntaxError("An invalid or illegal string was specified.");E=i,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},l,{get:function(){return _},set:function(e){var i=r(t,e);if(!i)throw SyntaxError("An invalid or illegal string was specified.");_=i,this.hasBeenReset=!0}})),s.displayState=void 0}return n.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},n}();var t2=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}();function t5(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+parseFloat(i||0)}var r=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?t(r[2],r[3],0,r[4]):t(r[1],r[2],r[3],r[4]):null}var t4=function(){function e(){this.values=Object.create(null)}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1},e}();function t3(e,t,r,i){var n=i?e.split(i):[e];for(var a in n)if("string"==typeof n[a]){var o=n[a].split(r);2===o.length&&t(o[0],o[1])}}var t8=new t1(0,0,""),t6="middle"===t8.align?"middle":"center";function t7(e){return e.replace(/<br(?: \/)?>/gi,"\n")}var t9=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new t2,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=e.prototype;return t.parse=function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=t7(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var i=e.slice(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.slice(r),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var n=(i=r()).match(/^()?WEBVTT([ \t].*)?$/);if(!n||!n[0])throw Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer&&/\r\n|\n/.test(t.buffer);)switch(a?a=!1:i=r(),t.state){case"HEADER":/:/.test(i)?t3(i,function(e,t){},/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new t1(0,0,""),t.state="CUE",-1===i.indexOf("-->")){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{(function(e,t,r){var i,n,a,o,s,l=e;function u(){var t=t5(e);if(null===t)throw Error("Malformed timestamp: "+l);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function d(){e=e.replace(/^\s+/,"")}if(d(),t.startTime=u(),d(),"-->"!==e.slice(0,3))throw Error("Malformed time stamp (time stamps must be separated by '-->'): "+l);e=e.slice(3),d(),t.endTime=u(),d(),i=e,n=t,a=new t4,t3(i,function(e,t){var i;switch(e){case"region":for(var n=r.length-1;n>=0;n--)if(r[n].id===t){a.set(e,r[n].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),a.integer(e,i[0]),a.percent(e,i[0])&&a.set("snapToLines",!1),a.alt(e,i[0],["auto"]),2===i.length&&a.alt("lineAlign",i[1],["start",t6,"end"]);break;case"position":i=t.split(","),a.percent(e,i[0]),2===i.length&&a.alt("positionAlign",i[1],["start",t6,"end","line-left","line-right","auto"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start",t6,"end","left","right"])}},/:/,/\s/),n.region=a.get("region",null),n.vertical=a.get("vertical",""),"auto"===(o=a.get("line","auto"))&&-1===t8.line&&(o=-1),n.line=o,n.lineAlign=a.get("lineAlign","start"),n.snapToLines=a.get("snapToLines",!0),n.size=a.get("size",100),n.align=a.get("align",t6),"auto"===(s=a.get("position","auto"))&&50===t8.position&&(s="start"===n.align||"left"===n.align?0:"end"===n.align||"right"===n.align?100:50),n.position=s})(i,t.cue,t.regionList)}catch(o){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("-->");if(!i||s&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID")}}catch(l){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){var e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this},e}(),re=r(673),rt=r(524),rr=/\r\n|\n\r|\n|\r/g,ri=function(e,t,r){return void 0===r&&(r=0),e.slice(r,r+t.length)===t},rn=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()};function ra(e,t,r){return rn(e.toString())+rn(t.toString())+rn(r)}function ro(){return(ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var rs="stpp.ttml.im1t",rl=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ru=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,rd={left:"start",center:"center",right:"end",start:"start",end:"end"};function rc(e,t,r,i,n){var a=(0,C.findBox)(new Uint8Array(e),["mdat"]);if(0!==a.length){var o=a.map(function(e){return(0,et.utf8ArrayToStr)(e)}),s=(0,re.toTimescaleFromScale)(t,1,r);try{o.forEach(function(e){return i(function(e,t){var r=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!r)throw Error("Invalid ttml");var i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},n=Object.keys(i).reduce(function(e,t){return e[t]=r.getAttribute("ttp:"+t)||i[t],e},{}),a="preserve"!==r.getAttribute("xml:space"),o=rf(rh(r,"styling","style")),s=rf(rh(r,"layout","region")),l=rh(r,"body","[begin]");return[].map.call(l,function(e){var r,i,l,u,d,c=function e(t,r){return[].slice.call(t.childNodes).reduce(function(t,i,n){var a;return"br"===i.nodeName&&n?t+"\n":null!==(a=i.childNodes)&&void 0!==a&&a.length?e(i,r):r?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}(e,a);if(!c||!e.hasAttribute("begin"))return null;var h=rv(e.getAttribute("begin"),n),f=rv(e.getAttribute("dur"),n),p=rv(e.getAttribute("end"),n);if(null===h)throw rm(e);if(null===p){if(null===f)throw rm(e);p=h+f}var m=new t1(h-t,p-t,c);m.id=ra(m.startTime,m.endTime,m.text);var v=(r=s[e.getAttribute("region")],i=o[e.getAttribute("style")],l="http://www.w3.org/ns/ttml#styling",u=null,(d=null!=r&&r.hasAttribute("style")?r.getAttribute("style"):null)&&o.hasOwnProperty(d)&&(u=o[d]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(e,t){var n=rp(i,l,t)||rp(r,l,t)||rp(u,l,t);return n&&(e[t]=n),e},{})),g=v.textAlign;if(g){var y=rd[g];y&&(m.lineAlign=y),m.align=g}return ro(m,v),m}).filter(function(e){return null!==e})}(e,s))})}catch(l){n(l)}}else n(Error("Could not parse IMSC1 mdat"))}function rh(e,t,r){var i=e.getElementsByTagName(t)[0];return i?[].slice.call(i.querySelectorAll(r)):[]}function rf(e){return e.reduce(function(e,t){var r=t.getAttribute("xml:id");return r&&(e[r]=t),e},{})}function rp(e,t,r){return e&&e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null}function rm(e){return Error("Could not parse ttml timestamp "+e)}function rv(e,t){if(!e)return null;var r,i,n=t5(e);return null===n&&(rl.test(e)?(i=(0|(r=rl.exec(e))[4])+(0|r[5])/t.subFrameRate,n=3600*(0|r[1])+60*(0|r[2])+(0|r[3])+i/t.frameRate):ru.test(e)&&(n=function(e,t){var r=ru.exec(e),i=Number(r[1]);switch(r[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/t.frameRate;case"t":return i/t.tickRate}return i}(e,t))),n}var rg=function(){function e(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var t=new t0(this,"textTrack1"),r=new t0(this,"textTrack2"),i=new t0(this,"textTrack3"),n=new t0(this,"textTrack4");this.cea608Parser1=new tQ(1,t,r),this.cea608Parser2=new tQ(3,i,n)}e.on(f.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(f.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(f.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(f.Events.FRAG_LOADING,this.onFragLoading,this),e.on(f.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(f.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(f.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(f.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(f.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(f.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(f.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(f.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(f.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(f.Events.FRAG_LOADING,this.onFragLoading,this),e.off(f.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(f.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(f.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(f.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(f.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(f.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},t.addCues=function(e,t,r,i,n){for(var a,o=!1,s=n.length;s--;){var l=n[s],u=(a=l[0],Math.min(l[1],r)-Math.max(a,t));if(u>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],r),o=!0,u/(r-t)>.5))return}if(o||n.push([t,r]),this.config.renderTextTracksNatively){var d=this.captionsTracks[e];this.Cues.newCue(d,t,r,i)}else{var c=this.Cues.newCue(null,t,r,i);this.hls.trigger(f.Events.CUES_PARSED,{type:"captions",cues:c,track:e})}},t.onInitPtsFound=function(e,t){var r=this,i=t.frag,n=t.id,a=t.initPTS,o=t.timescale,s=this.unparsedVttFrags;"main"===n&&(this.initPTS[i.cc]=a,this.timescale[i.cc]=o),s.length&&(this.unparsedVttFrags=[],s.forEach(function(e){r.onFragLoaded(f.Events.FRAG_LOADED,e)}))},t.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var i=t.textTracks[r];if(i[e])return i}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,r=this.captionsTracks,i=this.media,n=t[e],a=n.label,o=n.languageCode,s=this.getExistingTrack(e);if(s)r[e]=s,J(r[e]),Q(r[e],i);else{var l=this.createTextTrack("captions",a,o);l&&(l[e]=!0,r[e]=l)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(f.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},t.createTextTrack=function(e,t,r){var i=this.media;if(i)return i.addTextTrack(e,t,r)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){J(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)J(t[r])}},t.onSubtitleTracksUpdated=function(e,t){var r=this;this.textTracks=[];var i=t.subtitleTracks||[],n=i.some(function(e){return e.textCodec===rs});if(this.config.enableWebVTT||n&&this.config.enableIMSC1){var a=this.tracks&&i&&this.tracks.length===i.length;if(this.tracks=i||[],this.config.renderTextTracksNatively){var o=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,t){var i;if(t<o.length){for(var n,a=null,s=0;s<o.length;s++)if((n=o[s])&&n.label===e.name&&!(n.textTrack1||n.textTrack2)){a=o[s];break}a&&(i=a)}if(i)J(i);else{var l=r._captionsOrSubtitlesFromCharacteristics(e);(i=r.createTextTrack(l,e.name,e.lang))&&(i.mode="disabled")}i&&(i.groupId=e.groupId,r.textTracks.push(i))})}else if(!a&&this.tracks&&this.tracks.length){var s=this.tracks.map(function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}});this.hls.trigger(f.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:s})}}},t._captionsOrSubtitlesFromCharacteristics=function(e){var t;if(null!==(t=e.attrs)&&void 0!==t&&t.CHARACTERISTICS){var r=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),i=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(r&&i)return"captions"}return"subtitles"},t.onManifestLoaded=function(e,t){var r=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var i="textTrack"+t[1],n=r.captionsProperties[i];n&&(n.label=e.name,e.lang&&(n.languageCode=e.lang),n.media=e)}})},t.closedCaptionsForLevel=function(e){var t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]},t.onFragLoading=function(e,t){var r=this.cea608Parser1,i=this.cea608Parser2,n=this.lastSn,a=this.lastPartIndex;if(this.enabled&&r&&i&&t.frag.type===$.PlaylistLevelType.MAIN){var o,s,l=t.frag.sn,u=null!=(o=null==t||null===(s=t.part)||void 0===s?void 0:s.index)?o:-1;l===n+1||l===n&&u===a+1||(r.reset(),i.reset()),this.lastSn=l,this.lastPartIndex=u}},t.onFragLoaded=function(e,t){var r=t.frag,i=t.payload,n=this.initPTS,a=this.unparsedVttFrags;if(r.type===$.PlaylistLevelType.SUBTITLE){if(i.byteLength){if(!(0,h.isFiniteNumber)(n[r.cc]))return a.push(t),void(n.length&&this.hls.trigger(f.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:Error("Missing initial subtitle PTS")}));var o=r.decryptdata;if(null==o||!o.encrypted||"stats"in t){var s=this.tracks[r.level],l=this.vttCCs;l[r.cc]||(l[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),s&&s.textCodec===rs?this._parseIMSC1(r,i):this._parseVTTs(r,i,l)}}else this.hls.trigger(f.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:Error("Empty subtitle payload")})}},t._parseIMSC1=function(e,t){var r=this,i=this.hls;rc(t,this.initPTS[e.cc],this.timescale[e.cc],function(t){r._appendCues(t,e.level),i.trigger(f.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){m.logger.log("Failed to parse IMSC1: "+t),i.trigger(f.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})})},t._parseVTTs=function(e,t,r){var i,n,a,o,s,l,u,d,c,p,v,g,y,b,E,T,_,A,S=this,k=this.hls;i=null!==(A=e.initSegment)&&void 0!==A&&A.data?(0,C.appendUint8Array)(e.initSegment.data,new Uint8Array(t)):t,n=this.initPTS[e.cc],a=this.timescale[e.cc],o=r,s=e.cc,l=e.start,u=function(t){S._appendCues(t,e.level),k.trigger(f.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},d=function(r){S._fallbackToIMSC1(e,t),m.logger.log("Failed to parse VTT cue: "+r),k.trigger(f.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})},p=new t9,v=(0,et.utf8ArrayToStr)(new Uint8Array(i)).trim().replace(rr,"\n").split("\n"),g=[],y=(0,re.toMpegTsClockFromTimescale)(n,a),b="00:00.000",E=0,T=0,_=!0,p.oncue=function(e){var t=o[s],r=o.ccOffset,i=(E-y)/9e4;null!=t&&t.new&&(void 0!==T?r=o.ccOffset=t.start:function(e,t,r){var i,n=e[t],a=e[n.prevCC];if(!a||!a.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;null!==(i=a)&&void 0!==i&&i.new;)e.ccOffset+=n.start-a.start,n.new=!1,a=e[(n=a).prevCC];e.presentationOffset=r}(o,s,i)),i&&(r=i-o.presentationOffset);var n=e.endTime-e.startTime,a=(0,rt.normalizePts)(9e4*(e.startTime+r-T),9e4*l)/9e4;e.startTime=Math.max(a,0),e.endTime=Math.max(a+n,0);var u=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(u)),e.id||(e.id=ra(e.startTime,e.endTime,u)),e.endTime>0&&g.push(e)},p.onparsingerror=function(e){c=e},p.onflush=function(){c?d(c):u(g)},v.forEach(function(e){if(_){if(ri(e,"X-TIMESTAMP-MAP=")){_=!1,e.slice(16).split(",").forEach(function(e){ri(e,"LOCAL:")?b=e.slice(6):ri(e,"MPEGTS:")&&(E=parseInt(e.slice(7)))});try{T=function(e){var t=parseInt(e.slice(-3)),r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),n=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!((0,h.isFiniteNumber)(t)&&(0,h.isFiniteNumber)(r)&&(0,h.isFiniteNumber)(i)&&(0,h.isFiniteNumber)(n)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return(t=1e3*r+6e4*i)+36e5*n}(b)/1e3}catch(t){c=t}return}""===e&&(_=!1)}p.parse(e+"\n")}),p.flush()},t._fallbackToIMSC1=function(e,t){var r=this,i=this.tracks[e.level];i.textCodec||rc(t,this.initPTS[e.cc],this.timescale[e.cc],function(){i.textCodec=rs,r._parseIMSC1(e,t)},function(){i.textCodec="wvtt"})},t._appendCues=function(e,t){var r=this.hls;if(this.config.renderTextTracksNatively){var i=this.textTracks[t];if(!i||"disabled"===i.mode)return;e.forEach(function(e){return Z(i,e)})}else{var n=this.tracks[t];if(!n)return;var a=n.default?"default":"subtitles"+t;r.trigger(f.Events.CUES_PARSED,{type:"subtitles",cues:e,track:a})}},t.onFragDecrypted=function(e,t){var r=t.frag;if(r.type===$.PlaylistLevelType.SUBTITLE){if(!(0,h.isFiniteNumber)(this.initPTS[r.cc]))return void this.unparsedVttFrags.push(t);this.onFragLoaded(f.Events.FRAG_LOADED,t)}},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){var r=this.cea608Parser1,i=this.cea608Parser2;if(this.enabled&&r&&i){var n=t.frag,a=t.samples;if(n.type!==$.PlaylistLevelType.MAIN||"NONE"!==this.closedCaptionsForLevel(n))for(var o=0;o<a.length;o++){var s=a[o].bytes;if(s){var l=this.extractCea608Data(s);r.addData(a[o].pts,l[0]),i.addData(a[o].pts,l[1])}}}},t.onBufferFlushing=function(e,t){var r=t.startOffset,i=t.endOffset,n=t.endOffsetSubtitles,a=t.type,o=this.media;if(o&&!(o.currentTime<i)){if(!a||"video"===a){var s=this.captionsTracks;Object.keys(s).forEach(function(e){return ee(s[e],r,i)})}if(this.config.renderTextTracksNatively&&0===r&&void 0!==n){var l=this.textTracks;Object.keys(l).forEach(function(e){return ee(l[e],r,n)})}}},t.extractCea608Data=function(e){for(var t=[[],[]],r=31&e[0],i=2,n=0;n<r;n++){var a=e[i++],o=127&e[i++],s=127&e[i++];if((0!==o||0!==s)&&0!=(4&a)){var l=3&a;0!==l&&1!==l||(t[l].push(o),t[l].push(s))}}return t},e}();let ry=function(){function e(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var t,r=e.prototype;return r.setStreamController=function(e){this.streamController=e},r.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},r.registerListeners=function(){var e=this.hls;e.on(f.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(f.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(f.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(f.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},r.unregisterListener=function(){var e=this.hls;e.off(f.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(f.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(f.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(f.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(f.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},r.onFpsDropLevelCapping=function(t,r){e.isLevelAllowed(r.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(r.droppedLevel)},r.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null},r.onManifestParsed=function(e,t){var r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()},r.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},r.onMediaDetaching=function(){this.stopCapping()},r.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var e=this.hls.levels;if(e.length){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.getMaxLevel=function(t){var r=this,i=this.hls.levels;if(!i.length)return -1;var n=i.filter(function(i,n){return e.isLevelAllowed(n,r.restrictedLevels)&&n<=t});return this.clientRect=null,e.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},r.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t},e.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},e.getMaxLevelByMediaSize=function(e,t,r){if(!e||!e.length)return -1;for(var i,n=e.length-1,a=0;a<e.length;a+=1){var o=e[a];if((o.width>=t||o.height>=r)&&(!(i=e[a+1])||o.width!==i.width||o.height!==i.height)){n=a;break}}return n},t=[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(t){}return e}}],function(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(),rb=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(f.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(f.Events.MEDIA_ATTACHING,this.onMediaAttaching)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var r=this.hls.config;if(r.capLevelOnFPSDrop){var i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,r){var i=performance.now();if(t){if(this.lastTime){var n=i-this.lastTime,a=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=this.hls;if(s.trigger(f.Events.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:r}),1e3*a/n>0&&a>s.config.fpsDroppedMonitoringThreshold*o){var l=s.currentLevel;m.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),l>0&&(-1===s.autoLevelCapping||s.autoLevelCapping>=l)&&(l-=1,s.trigger(f.Events.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:s.currentLevel}),s.autoLevelCapping=l,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e){if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},e}();var rE=r(300);function rT(e){var t="function"==typeof Map?new Map:void 0;return(rT=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return r_(e,arguments,rS(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),rA(r,e)})(e)}function r_(e,t,r){return(r_=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,r){var i=[null];i.push.apply(i,t);var n=new(Function.bind.apply(e,i));return r&&rA(n,r.prototype),n}:Reflect.construct.bind()).apply(null,arguments)}function rA(e,t){return(rA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rS(e){return(rS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rk="[eme]",rw=function(){function e(t){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=e.CDMCleanupPromise?[e.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=m.logger.debug.bind(m.logger,rk),this.log=m.logger.log.bind(m.logger,rk),this.warn=m.logger.warn.bind(m.logger,rk),this.error=m.logger.error.bind(m.logger,rk),this.hls=t,this.config=t.config,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},t.registerListeners=function(){this.hls.on(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(f.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(f.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},t.unregisterListeners=function(){this.hls.off(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(f.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(f.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},t.getLicenseServerUrl=function(e){var t=this.config,r=t.drmSystems,i=t.widevineLicenseUrl,n=r[e];if(n)return n.licenseUrl;if(e===T.WIDEVINE&&i)return i;throw Error('no license server URL configured for key-system "'+e+'"')},t.getServerCertificateUrl=function(e){var t=this.config.drmSystems[e];if(t)return t.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+e+'"]')},t.attemptKeySystemAccess=function(e){var t=this,r=this.hls.levels,i=function(e,t,r){return!!e&&r.indexOf(e)===t},n=r.map(function(e){return e.audioCodec}).filter(i),a=r.map(function(e){return e.videoCodec}).filter(i);return n.length+a.length===0&&a.push("avc1.42e01e"),new Promise(function(r,i){!function e(o){var s=o.shift();t.getMediaKeysPromise(s,n,a).then(function(e){return r({keySystem:s,mediaKeys:e})}).catch(function(t){o.length?e(o):i(t instanceof rL?t:new rL({type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))})}(e)})},t.requestMediaKeySystemAccess=function(e,t){var r=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof r){var i="Configured requestMediaKeySystemAccess is not a function "+r;return null===P&&"http:"===self.location.protocol&&(i="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(Error(i))}return r(e,t)},t.getMediaKeysPromise=function(e,t,r){var i=this,n=function(e,t,r,i){var n;switch(e){case T.FAIRPLAY:n=["cenc","sinf"];break;case T.WIDEVINE:case T.PLAYREADY:n=["cenc"];break;case T.CLEARKEY:n=["cenc","keyids"];break;default:throw Error("Unknown key-system: "+e)}return[{initDataTypes:n,persistentState:i.persistentState||"not-allowed",distinctiveIdentifier:i.distinctiveIdentifier||"not-allowed",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:t.map(function(e){return{contentType:'audio/mp4; codecs="'+e+'"',robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}}),videoCapabilities:r.map(function(e){return{contentType:'video/mp4; codecs="'+e+'"',robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}})}]}(e,t,r,this.config.drmSystemOptions),a=this.keySystemAccessPromises[e],o=null==a?void 0:a.keySystemAccess;if(!o){this.log('Requesting encrypted media "'+e+'" key-system access with config: '+JSON.stringify(n)),o=this.requestMediaKeySystemAccess(e,n);var s=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(function(t){i.log('Failed to obtain access to key-system "'+e+'": '+t)}),o.then(function(t){i.log('Access for key-system "'+t.keySystem+'" obtained');var r=i.fetchServerCertificate(e);return i.log('Create media-keys for "'+e+'"'),s.mediaKeys=t.createMediaKeys().then(function(t){return i.log('Media-keys created for "'+e+'"'),r.then(function(r){return r?i.setMediaKeysServerCertificate(t,e,r):t})}),s.mediaKeys.catch(function(t){i.error('Failed to create media-keys for "'+e+'"}: '+t)}),s.mediaKeys})}return o.then(function(){return a.mediaKeys})},t.createMediaKeySessionContext=function(e){var t=e.decryptdata,r=e.keySystem,i=e.mediaKeys;this.log('Creating key-system session "'+r+'" keyId: '+rE.default.hexDump(t.keyId||[]));var n=i.createSession(),a={decryptdata:t,keySystem:r,mediaKeys:i,mediaKeysSession:n,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a},t.renewKeySession=function(e){var t=e.decryptdata;if(t.pssh){var r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t);this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,"cenc",t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)},t.getKeyIdString=function(e){if(!e)throw Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw Error("keyId is null");return rE.default.hexDump(e.keyId)},t.updateKeySession=function(e,t){var r,i=e.mediaKeysSession;return this.log('Updating key-session "'+i.sessionId+'" for keyID '+rE.default.hexDump((null===(r=e.decryptdata)||void 0===r?void 0:r.keyId)||[])+"\n      } (data length: "+(t?t.byteLength:t)+")"),i.update(t)},t.selectKeySystemFormat=function(e){var t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+e.sn+" "+e.type+": "+e.level+") key formats "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise},t.getKeyFormatPromise=function(e){var t=this;return new Promise(function(r,i){var n=O(t.config),a=e.map(D).filter(function(e){return!!e&&-1!==n.indexOf(e)});return t.getKeySystemSelectionPromise(a).then(function(e){var t=e.keySystem,n=R(t);n?r(n):i(Error('Unable to find format for key-system "'+t+'"'))}).catch(i)})},t.loadKey=function(e){var t=this,r=e.keyInfo.decryptdata,i=this.getKeyIdString(r),n="(keyId: "+i+' format: "'+r.keyFormat+'" method: '+r.method+" uri: "+r.uri+")";this.log("Starting session for key "+n);var a=this.keyIdToKeySessionPromise[i];return a||(a=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(r).then(function(i){var a=i.keySystem,o=i.mediaKeys;return t.throwIfDestroyed(),t.log("Handle encrypted media sn: "+e.frag.sn+" "+e.frag.type+": "+e.frag.level+" using key "+n),t.attemptSetMediaKeys(a,o).then(function(){t.throwIfDestroyed();var e=t.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:r});return t.generateRequestWithPreferredKeySession(e,"cenc",r.pssh,"playlist-key")})})).catch(function(e){return t.handleError(e)}),a},t.throwIfDestroyed=function(e){if(void 0===e&&(e="Invalid state"),!this.hls)throw Error("invalid state")},t.handleError=function(e){this.hls&&(this.error(e.message),e instanceof rL?this.hls.trigger(f.Events.ERROR,e.data):this.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))},t.getKeySystemForKeyPromise=function(e){var t=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[t];if(!r){var i=D(e.keyFormat),n=i?[i]:O(this.config);return this.attemptKeySystemAccess(n)}return r},t.getKeySystemSelectionPromise=function(e){if(e.length||(e=O(this.config)),0===e.length)throw new rL({type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(e)},t._onMediaEncrypted=function(e){var t,r,i=this,n=e.initDataType,a=e.initData;if(this.debug('"'+e.type+'" event: init data type: "'+n+'"'),null!==a){if("sinf"===n&&this.config.drmSystems[T.FAIRPLAY]){var o=(0,C.bin2str)(new Uint8Array(a));try{var s=L(JSON.parse(o).sinf),l=(0,C.parseSinf)(new Uint8Array(s));if(!l)return;t=l.subarray(8,24),r=T.FAIRPLAY}catch(u){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var d=(0,C.parsePssh)(a);if(null===d)return;0===d.version&&d.systemId===A.WIDEVINE&&d.data&&(t=d.data.subarray(8,24)),r=function(e){if(e===A.WIDEVINE)return T.WIDEVINE}(d.systemId)}if(r&&t){for(var c=rE.default.hexDump(t),h=this.keyIdToKeySessionPromise,f=this.mediaKeySessions,p=h[c],m=0;m<f.length;m++){var v=function(e){var r=f[e],o=r.decryptdata;if(o.pssh||!o.keyId)return"continue";var s=rE.default.hexDump(o.keyId);return c===s||-1!==o.uri.replace(/-/g,"").indexOf(c)?(p=h[s],delete h[s],o.pssh=new Uint8Array(a),o.keyId=t,p=h[c]=p.then(function(){return i.generateRequestWithPreferredKeySession(r,n,a,"encrypted-event-key-match")}),"break"):void 0}(m);if("continue"!==v&&"break"===v)break}p||(p=h[c]=this.getKeySystemSelectionPromise([r]).then(function(e){var r,o=e.keySystem,s=e.mediaKeys;i.throwIfDestroyed();var l=new x("ISO-23001-7",c,null!=(r=R(o))?r:"");return l.pssh=new Uint8Array(a),l.keyId=t,i.attemptSetMediaKeys(o,s).then(function(){i.throwIfDestroyed();var e=i.createMediaKeySessionContext({decryptdata:l,keySystem:o,mediaKeys:s});return i.generateRequestWithPreferredKeySession(e,n,a,"encrypted-event-no-match")})})),p.catch(function(e){return i.handleError(e)})}}},t._onWaitingForKey=function(e){this.log('"'+e.type+'" event')},t.attemptSetMediaKeys=function(e,t){var r=this,i=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+e+'"');var n=Promise.all(i).then(function(){if(!r.media)throw Error("Attempted to set mediaKeys without media element attached");return r.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(n),n.then(function(){r.log('Media-keys set for "'+e+'"'),i.push(n),r.setMediaKeysQueue=r.setMediaKeysQueue.filter(function(e){return -1===i.indexOf(e)})})},t.generateRequestWithPreferredKeySession=function(e,t,r,i){var n,a,o,s=this,l=null===(a=this.config.drmSystems)||void 0===a||null===(o=a[e.keySystem])||void 0===o?void 0:o.generateRequest;if(l)try{var u=l.call(this.hls,t,r,e);if(!u)throw Error("Invalid response from configured generateRequest filter");t=u.initDataType,r=e.decryptdata.pssh=u.initData?new Uint8Array(u.initData):null}catch(d){if(this.warn(d.message),null!==(n=this.hls)&&void 0!==n&&n.config.debug)throw d}if(null===r)return this.log('Skipping key-session request for "'+i+'" (no initData)'),Promise.resolve(e);var c=this.getKeyIdString(e.decryptdata);this.log('Generating key-session request for "'+i+'": '+c+" (init data type: "+t+" length: "+(r?r.byteLength:null)+")");var h=new(td());e.mediaKeysSession.onmessage=function(t){var r=e.mediaKeysSession;if(r){var i=t.messageType,n=t.message;s.log('"'+i+'" message event for session "'+r.sessionId+'" message size: '+n.byteLength),"license-request"===i||"license-renewal"===i?s.renewLicense(e,n).catch(function(e){s.handleError(e),h.emit("error",e)}):"license-release"===i?e.keySystem===T.FAIRPLAY&&(s.updateKeySession(e,I("acknowledged")),s.removeSession(e)):s.warn('unhandled media key message type "'+i+'"')}else h.emit("error",Error("invalid state"))},e.mediaKeysSession.onkeystatuseschange=function(t){if(e.mediaKeysSession){s.onKeyStatusChange(e);var r=e.keyStatus;h.emit("keyStatus",r),"expired"===r&&(s.warn(e.keySystem+" expired for key "+c),s.renewKeySession(e))}else h.emit("error",Error("invalid state"))};var f=new Promise(function(e,t){h.on("error",t),h.on("keyStatus",function(r){r.startsWith("usable")?e():"output-restricted"===r?t(new rL({type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===r?t(new rL({type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+r+'"')):"expired"===r?t(Error("key expired while generating request")):s.warn('unhandled key status change "'+r+'"')})});return e.mediaKeysSession.generateRequest(t,r).then(function(){var t;s.log('Request generated for key-session "'+(null===(t=e.mediaKeysSession)||void 0===t?void 0:t.sessionId)+'" keyId: '+c)}).catch(function(e){throw new rL({type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},"Error generating key-session request: "+e)}).then(function(){return f}).catch(function(t){throw h.removeAllListeners(),s.removeSession(e),t}).then(function(){return h.removeAllListeners(),e})},t.onKeyStatusChange=function(e){var t=this;e.mediaKeysSession.keyStatuses.forEach(function(r,i){t.log('key status change "'+r+'" for keyStatuses keyId: '+rE.default.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))+" session keyId: "+rE.default.hexDump(new Uint8Array(e.decryptdata.keyId||[]))+" uri: "+e.decryptdata.uri),e.keyStatus=r})},t.fetchServerCertificate=function(e){var t=this;return new Promise(function(r,i){var n=t.getServerCertificateUrl(e);if(!n)return r();t.log('Fetching serverCertificate for "'+e+'"');var a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType="arraybuffer",a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&(200===a.status?r(a.response):i(new rL({type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:a},'"'+e+'" certificate request XHR failed ('+n+"). Status: "+a.status+" ("+a.statusText+")")))},a.send()})},t.setMediaKeysServerCertificate=function(e,t,r){var i=this;return new Promise(function(n,a){e.setServerCertificate(r).then(function(a){i.log("setServerCertificate "+(a?"success":"not supported by CDM")+" ("+(null==r?void 0:r.byteLength)+') on "'+t+'"'),n(e)}).catch(function(e){a(new rL({type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))})})},t.renewLicense=function(e,t){var r=this;return this.requestLicense(e,new Uint8Array(t)).then(function(t){return r.updateKeySession(e,new Uint8Array(t)).catch(function(e){throw new rL({type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)})})},t.setupLicenseXHR=function(e,t,r,i){var n=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then(function(){if(!r.decryptdata)throw Error("Key removed");return a.call(n.hls,e,t,r,i)}).catch(function(o){if(!r.decryptdata)throw o;return e.open("POST",t,!0),a.call(n.hls,e,t,r,i)}).then(function(r){return e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:r||i}}):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))},t.requestLicense=function(e,t){var r=this;return new Promise(function(i,n){var a=r.getLicenseServerUrl(e.keySystem);r.log("Sending license request to URL: "+a);var o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=function(){if(!r.hls||!e.mediaKeysSession)return n(Error("invalid state"));if(4===o.readyState){if(200===o.status){r._requestLicenseFailureCount=0;var s=o.response;r.log("License received "+(s instanceof ArrayBuffer?s.byteLength:s));var l=r.config.licenseResponseCallback;if(l)try{s=l.call(r.hls,o,a,e)}catch(u){r.error(u)}i(s)}else if(r._requestLicenseFailureCount++,r._requestLicenseFailureCount>3||o.status>=400&&o.status<500)n(new rL({type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o},"License Request XHR failed ("+a+"). Status: "+o.status+" ("+o.statusText+")"));else{var d=3-r._requestLicenseFailureCount+1;r.warn("Retrying license request, "+d+" attempts left"),r.requestLicense(e,t).then(i,n)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,r.setupLicenseXHR(o,a,e,t).then(function(e){var t=e.xhr,r=e.licenseChallenge;t.send(r)})})},t.onMediaAttached=function(e,t){if(this.config.emeEnabled){var r=t.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}},t.onMediaDetached=function(){var t=this,r=this.media,i=this.mediaKeySessions;r&&(r.removeEventListener("encrypted",this.onMediaEncrypted),r.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},x.clearKeyUriToKeyIdMap();var n=i.length;e.CDMCleanupPromise=Promise.all(i.map(function(e){return t.removeSession(e)}).concat(null==r?void 0:r.setMediaKeys(null).catch(function(e){t.log("Could not clear media keys: "+e+". media.src: "+(null==r?void 0:r.src))}))).then(function(){n&&(t.log("finished closing key sessions and clearing media keys"),i.length=0)}).catch(function(e){t.log("Could not close sessions and clear media keys: "+e+". media.src: "+(null==r?void 0:r.src))})},t.onManifestLoaded=function(e,t){var r=t.sessionKeys;if(r&&this.config.emeEnabled&&!this.keyFormatPromise){var i=r.reduce(function(e,t){return -1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e},[]);this.log("Selecting key-system from session-keys "+i.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(i)}},t.removeSession=function(e){var t=this,r=e.mediaKeysSession,i=e.licenseXhr;if(r){this.log("Remove licenses and keys and close session "+r.sessionId),r.onmessage=null,r.onkeystatuseschange=null,i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;var n=this.mediaKeySessions.indexOf(e);return n>-1&&this.mediaKeySessions.splice(n,1),r.remove().catch(function(e){t.log("Could not remove session: "+e)}).then(function(){return r.close()}).catch(function(e){t.log("Could not close session: "+e)})}},e}();rw.CDMCleanupPromise=void 0;var rL=function(e){var t;function r(t,r){var i;return(i=e.call(this,r)||this).data=void 0,i.data=t,t.err=t.error,i}return(t=r).prototype=Object.create(e.prototype),t.prototype.constructor=t,rA(t,e),r}(rT(Error));function rI(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}function rD(e,t,r){return t&&rI(e.prototype,t),r&&rI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rR(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return rO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rO(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function rP(){return(rP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}(n=s||(s={})).MANIFEST="m",n.AUDIO="a",n.VIDEO="v",n.MUXED="av",n.INIT="i",n.CAPTION="c",n.TIMED_TEXT="tt",n.KEY="k",n.OTHER="o",(a=l||(l={})).DASH="d",a.HLS="h",a.SMOOTH="s",a.OTHER="o",(o=u||(u={})).VOD="v",o.LIVE="l";var rC=function(){function e(t){var r=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){r.initialized&&(r.starved=!0),r.buffering=!0},this.onPlaying=function(){r.initialized||(r.initialized=!0),r.buffering=!1},this.applyPlaylistData=function(e){try{r.apply(e,{ot:s.MANIFEST,su:!r.initialized})}catch(t){m.logger.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=function(e){try{var t=e.frag,i=r.hls.levels[t.level],n=r.getObjectType(t),a={d:1e3*t.duration,ot:n};n!==s.VIDEO&&n!==s.AUDIO&&n!=s.MUXED||(a.br=i.bitrate/1e3,a.tb=r.getTopBandwidth(n)/1e3,a.bl=r.getBufferLength(n)),r.apply(e,a)}catch(o){m.logger.warn("Could not generate segment CMCD data.",o)}},this.hls=t;var i=this.config=t.config,n=i.cmcd;null!=n&&(i.pLoader=this.createPlaylistLoader(),i.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.uuid(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.registerListeners())}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(f.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.on(f.Events.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(f.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(f.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.off(f.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},t.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function(e,t){var r,i;this.audioBuffer=null===(r=t.tracks.audio)||void 0===r?void 0:r.buffer,this.videoBuffer=null===(i=t.tracks.video)||void 0===i?void 0:i.buffer},t.createData=function(){var e;return{v:1,sf:l.HLS,sid:this.sid,cid:this.cid,pr:null===(e=this.media)||void 0===e?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function(t,r){void 0===r&&(r={}),rP(r,this.createData());var i=r.ot===s.INIT||r.ot===s.VIDEO||r.ot===s.MUXED;if(this.starved&&i&&(r.bs=!0,r.su=!0,this.starved=!1),null==r.su&&(r.su=this.buffering),this.useHeaders){var n=e.toHeaders(r);if(!Object.keys(n).length)return;t.headers||(t.headers={}),rP(t.headers,n)}else{var a=e.toQuery(r);if(!a)return;t.url=e.appendQueryToUri(t.url,a)}},t.getObjectType=function(e){var t=e.type;return"subtitle"===t?s.TIMED_TEXT:"initSegment"===e.sn?s.INIT:"audio"===t?s.AUDIO:"main"===t?this.hls.audioTracks.length?s.VIDEO:s.MUXED:void 0},t.getTopBandwidth=function(e){var t,r=0,i=this.hls;if(e===s.AUDIO)t=i.audioTracks;else{var n=i.maxAutoLevel,a=n>-1?n+1:i.levels.length;t=i.levels.slice(0,a)}for(var o,l=rR(t);!(o=l()).done;){var u=o.value;u.bitrate>r&&(r=u.bitrate)}return r>0?r:NaN},t.getBufferLength=function(e){var t=this.hls.media,r=e===s.AUDIO?this.audioBuffer:this.videoBuffer;return r&&t?1e3*eH.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,r=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new r(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,r,i){t(e),this.loader.load(e,r,i)},rD(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},t.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,r=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new r(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,r,i){t(e),this.loader.load(e,r,i)},rD(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},e.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)},e.serialize=function(e){for(var t,r=[],i=function(e){return Math.round(e)},n=function(e){return 100*i(e/100)},a={br:i,d:i,bl:n,dl:n,mtp:n,nor:function(e){return encodeURIComponent(e)},rtp:n,tb:i},o=rR(Object.keys(e||{}).sort());!(t=o()).done;){var s=t.value,l=e[s];if(!Number.isNaN(d=l)&&null!=d&&""!==d&&!1!==d&&!("v"===s&&1===l||"pr"==s&&1===l)){var u=a[s];u&&(l=u(l));var d,c,h=typeof l;c="ot"===s||"sf"===s||"st"===s?s+"="+l:"boolean"===h?s:"number"===h?s+"="+l:s+"="+JSON.stringify(l),r.push(c)}}return r.join(",")},e.toHeaders=function(t){for(var r={},i=["Object","Request","Session","Status"],n=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=0,s=Object.keys(t);o<s.length;o++){var l=s[o];n[null!=a[l]?a[l]:1][l]=t[l]}for(var u=0;u<n.length;u++){var d=e.serialize(n[u]);d&&(r["CMCD-"+i[u]]=d)}return r},e.toQuery=function(t){return"CMCD="+encodeURIComponent(e.serialize(t))},e.appendQueryToUri=function(e,t){if(!t)return e;var r=e.includes("?")?"&":"?";return""+e+r+t},e}(),rM=r(408),rx=/^age:\s*[\d.]+\s*$/m;let rN=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new rM.LoadStats,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,r){if(this.stats.loading.start)throw Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e=this.config,t=this.context;if(e){var r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0;var n=this.xhrSetup;try{if(n)try{n(r,t.url)}catch(a){r.open("GET",t.url,!0),n(r,t.url)}r.readyState||r.open("GET",t.url,!0);var o=this.context.headers;if(o)for(var s in o)r.setRequestHeader(s,o[s])}catch(l){return void this.callbacks.onError({code:r.status,text:l.message},t,r)}t.rangeEnd&&r.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),r.onreadystatechange=this.readystatechange.bind(this),r.onprogress=this.loadprogress.bind(this),r.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),r.send()}},t.readystatechange=function(){var e=this.context,t=this.loader,r=this.stats;if(e&&t){var i=t.readyState,n=this.config;if(!r.aborted&&i>=2){if(self.clearTimeout(this.requestTimeout),0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start)),4===i){t.onreadystatechange=null,t.onprogress=null;var a=t.status,o="arraybuffer"===t.responseType;if(a>=200&&a<300&&(o&&t.response||null!==t.responseText)){if(r.loading.end=Math.max(self.performance.now(),r.loading.first),l=o?(s=t.response).byteLength:(s=t.responseText).length,r.loaded=r.total=l,!this.callbacks)return;var s,l,u=this.callbacks.onProgress;if(u&&u(r,e,s,t),!this.callbacks)return;var d={url:t.responseURL,data:s};this.callbacks.onSuccess(d,r,e,t)}else r.retry>=n.maxRetry||a>=400&&a<499?(m.logger.error(a+" while loading "+e.url),this.callbacks.onError({code:a,text:t.statusText},e,t)):(m.logger.warn(a+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,n.maxRetryDelay),r.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout)}}},t.loadtimeout=function(){m.logger.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&rx.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},e}();function rU(e){var t="function"==typeof Map?new Map:void 0;return(rU=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return rF(e,arguments,rj(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),rB(r,e)})(e)}function rF(e,t,r){return(rF=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,r){var i=[null];i.push.apply(i,t);var n=new(Function.bind.apply(e,i));return r&&rB(n,r.prototype),n}:Reflect.construct.bind()).apply(null,arguments)}function rB(e,t){return(rB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rj(e){return(rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rH(){return(rH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var rV=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||rK,this.controller=new self.AbortController,this.stats=new rM.LoadStats}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},t.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(e,t,r){var i,n=this,a=this.stats;if(a.loading.start)throw Error("Loader can only be used once.");a.loading.start=self.performance.now();var o=(i={method:"GET",mode:"cors",credentials:"same-origin",signal:this.controller.signal,headers:new self.Headers(rH({},e.headers))},e.rangeEnd&&i.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),i),s=r.onProgress,l="arraybuffer"===e.responseType,u=l?"byteLength":"length";this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){n.abortInternal(),r.onTimeout(a,e,n.response)},t.timeout),self.fetch(this.request).then(function(r){if(n.response=n.loader=r,!r.ok){var i=r.status,o=r.statusText;throw new rG(o||"fetch, bad network response",i,r)}return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(r.headers.get("Content-Length")||"0"),s&&(0,h.isFiniteNumber)(t.highWaterMark)?n.loadProgressively(r,a,e,t.highWaterMark,s):l?r.arrayBuffer():r.text()}).then(function(i){var o=n.response;self.clearTimeout(n.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first);var l=i[u];l&&(a.loaded=a.total=l);var d={url:o.url,data:i};s&&!(0,h.isFiniteNumber)(t.highWaterMark)&&s(a,e,i,o),r.onSuccess(d,a,e,o)}).catch(function(t){if(self.clearTimeout(n.requestTimeout),!a.aborted){var i=t&&t.code||0,o=t?t.message:null;r.onError({code:i,text:o},e,t?t.details:null)}})},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.loadProgressively=function(e,t,r,i,n){void 0===i&&(i=0);var a=new tb,o=e.body.getReader();return function s(){return o.read().then(function(o){if(o.done)return a.dataLength&&n(t,r,a.flush(),e),Promise.resolve(new ArrayBuffer(0));var l=o.value,u=l.length;return t.loaded+=u,u<i||a.dataLength?(a.push(l),a.dataLength>=i&&n(t,r,a.flush(),e)):n(t,r,l,e),s()}).catch(function(){return Promise.reject()})}()},e}();function rK(e,t){return new self.Request(e.url,t)}var rG=function(e){var t;function r(t,r,i){var n;return(n=e.call(this,t)||this).code=void 0,n.details=void 0,n.code=r,n.details=i,n}return(t=r).prototype=Object.create(e.prototype),t.prototype.constructor=t,rB(t,e),r}(rU(Error)),rW=/\s/;function rq(){return(rq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function rY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function r$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rY(Object(r),!0).forEach(function(t){!function(e,t,r){var i;(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rY(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rz=r$(r$({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:rN,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:ty,bufferController:tN,capLevelController:ry,fpsController:rb,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:P,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},{cueHandler:{newCue:function(e,t,r,i){for(var n,a,o,s,l,u=[],d=self.VTTCue||self.TextTrackCue,c=0;c<i.rows.length;c++)if(o=!0,s=0,l="",!(n=i.rows[c]).isEmpty()){for(var h=0;h<n.chars.length;h++)rW.test(n.chars[h].uchar)&&o?s++:(l+=n.chars[h].uchar,o=!1);n.cueStartTime=t,t===r&&(r+=1e-4),s>=16?s--:s++;var f=t7(l.trim()),p=ra(t,r,f);e&&e.cues&&e.cues.getCueById(p)||((a=new d(t,r,f)).id=p,a.line=c+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*s/32)),u.push(a))}return e&&u.length&&(u.sort(function(e,t){return"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line}),u.forEach(function(t){return Z(e,t)})),u}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:tw,subtitleTrackController:tR,timelineController:rg,audioStreamController:t_,audioTrackController:tS,emeController:rw,cmcdController:rC});function rX(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}var rQ=function(){function e(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new tu.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var r,i,n=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return rq({},e,t)}(e.DefaultConfig,t);this.userConfig=t,(0,m.enableLogs)(n.debug,"Hls instance"),this._autoLevelCapping=-1,n.progressive&&((i=(r=n).loader)!==rV&&i!==rN?(m.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),r.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}()&&(r.loader=rV,r.progressive=!0,r.enableSoftwareAES=!0,m.logger.log("[config]: Progressive streaming enabled, using FetchLoader")));var a=n.abrController,o=n.bufferController,s=n.capLevelController,l=n.fpsController,u=this.abrController=new a(this),d=this.bufferController=new o(this),c=this.capLevelController=new s(this),h=new l(this),f=new X(this),p=new eo(this),v=this.levelController=new eL(this),g=new eI(this),y=new eF(this.config),b=this.streamController=new tm(this,g,y);c.setStreamController(b),h.setStreamController(b);var E=[f,v,b];this.networkControllers=E;var T=[u,d,c,h,p,g];this.audioTrackController=this.createController(n.audioTrackController,E);var _=n.audioStreamController;_&&E.push(new _(this,g,y)),this.subtitleTrackController=this.createController(n.subtitleTrackController,E);var A=n.subtitleStreamController;A&&E.push(new A(this,g,y)),this.createController(n.timelineController,T),y.emeController=this.emeController=this.createController(n.emeController,T),this.cmcdController=this.createController(n.cmcdController,T),this.latencyController=this.createController(ed,T),this.coreComponents=T}e.isSupported=function(){return function(){var e=tr();if(!e)return!1;var t=ti(),r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!i}()};var t,r,i=e.prototype;return i.createController=function(e,t){if(e){var r=new e(this);return t&&t.push(r),r}return null},i.on=function(e,t,r){void 0===r&&(r=this),this._emitter.on(e,t,r)},i.once=function(e,t,r){void 0===r&&(r=this),this._emitter.once(e,t,r)},i.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},i.off=function(e,t,r,i){void 0===r&&(r=this),this._emitter.off(e,t,r,i)},i.listeners=function(e){return this._emitter.listeners(e)},i.emit=function(e,t,r){return this._emitter.emit(e,t,r)},i.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(r){m.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),this.trigger(f.Events.ERROR,{type:p.ErrorTypes.OTHER_ERROR,details:p.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,error:r})}return!1},i.listenerCount=function(e){return this._emitter.listenerCount(e)},i.destroy=function(){m.logger.log("destroy"),this.trigger(f.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(e){return e.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(e){return e.destroy()}),this.coreComponents.length=0},i.attachMedia=function(e){m.logger.log("attachMedia"),this._media=e,this.trigger(f.Events.MEDIA_ATTACHING,{media:e})},i.detachMedia=function(){m.logger.log("detachMedia"),this.trigger(f.Events.MEDIA_DETACHING,void 0),this._media=null},i.loadSource=function(e){this.stopLoad();var t=this.media,r=this.url,i=this.url=c.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});m.logger.log("loadSource:"+i),t&&r&&r!==i&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(f.Events.MANIFEST_LOADING,{url:e})},i.startLoad=function(e){void 0===e&&(e=-1),m.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},i.stopLoad=function(){m.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},i.swapAudioCodec=function(){m.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},i.recoverMediaError=function(){m.logger.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},i.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},r=[{key:"version",get:function(){return"1.3.1"}},{key:"Events",get:function(){return f.Events}},{key:"ErrorTypes",get:function(){return p.ErrorTypes}},{key:"ErrorDetails",get:function(){return p.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:rz},set:function(t){e.defaultConfig=t}}],t=[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){m.logger.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){m.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){m.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){m.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){m.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(m.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(e){ec.indexOf(e)>-1&&(this._maxHdcpLevel=e)}},{key:"autoLevelEnabled",get:function(){return -1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var r=e.length,i=0;i<r;i++)if(e[i].maxBitrate>=t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.levels,r=this.autoLevelCapping,i=this.maxHdcpLevel;if(e=-1===r&&t&&t.length?t.length-1:r,i)for(var n=e;n--;){var a=t[n].attrs["HDCP-LEVEL"];if(a&&a<=i)return n}return e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],rX(e.prototype,t),r&&rX(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}();rQ.defaultConfig=void 0},923:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BaseSegment:()=>h,ElementaryStreamTypes:()=>n,Fragment:()=>f,Part:()=>p});var i,n,a=r(965),o=r(945),s=r(408);function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u(e,t)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){for(var r,i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"))?r:String(r),n)}}function c(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(i=n||(n={})).AUDIO="audio",i.VIDEO="video",i.AUDIOVIDEO="audiovideo";var h=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[n.AUDIO]=null,t[n.VIDEO]=null,t[n.AUDIOVIDEO]=null,t),this.baseurl=e}return e.prototype.setByteRange=function(e,t){var r=e.split("@",2),i=[];1===r.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(r[1]),i[1]=parseInt(r[0])+i[0],this._byteRange=i},c(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),e}(),f=function(e){function t(t,r){var i;return(i=e.call(this,r)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkeys=void 0,i.type=void 0,i.loader=null,i.keyLoader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.appendedPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new s.LoadStats,i.urlId=0,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.endList=void 0,i.type=t,i}l(t,e);var r=t.prototype;return r.setKeyFormat=function(e){if(this.levelkeys){var t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}},r.abortRequests=function(){var e,t;null===(e=this.loader)||void 0===e||e.abort(),null===(t=this.keyLoader)||void 0===t||t.abort()},r.setElementaryStreamInfo=function(e,t,r,i,n,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,r),s.startDTS=Math.min(s.startDTS,i),s.endDTS=Math.max(s.endDTS,n)):o[e]={startPTS:t,endPTS:r,startDTS:i,endDTS:n,partial:a}},r.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[n.AUDIO]=null,e[n.VIDEO]=null,e[n.AUDIOVIDEO]=null},c(t,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{var t=Object.keys(this.levelkeys);if(1===t.length)return this._decryptdata=this.levelkeys[t[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime||!(0,a.isFiniteNumber)(this.programDateTime))return null;var e=(0,a.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;if(null!==(e=this._decryptdata)&&void 0!==e&&e.encrypted)return!0;if(this.levelkeys){var t=Object.keys(this.levelkeys),r=t.length;if(r>1||1===r&&this.levelkeys[t[0]].encrypted)return!0}return!1}}]),t}(h),p=function(e){function t(t,r,i,n,a){(o=e.call(this,i)||this).fragOffset=0,o.duration=0,o.gap=!1,o.independent=!1,o.relurl=void 0,o.fragment=void 0,o.index=void 0,o.stats=new s.LoadStats,o.duration=t.decimalFloatingPoint("DURATION"),o.gap=t.bool("GAP"),o.independent=t.bool("INDEPENDENT"),o.relurl=t.enumeratedString("URI"),o.fragment=r,o.index=n;var o,l=t.enumeratedString("BYTERANGE");return l&&o.setByteRange(l,a),a&&(o.fragOffset=a.fragOffset+a.duration),o}return l(t,e),c(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),t}(h)},408:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LoadStats:()=>i});var i=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},965:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MAX_SAFE_INTEGER:()=>n,isFiniteNumber:()=>i});var i=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},n=Number.MAX_SAFE_INTEGER||9007199254740991},524:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,flushTextTrackMetadataCueSamples:()=>v,flushTextTrackUserdataCueSamples:()=>g,normalizePts:()=>m});var i=r(965);let n=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}();var a=function(){function e(){}return e.init=function(){for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var t,r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:i};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,n))},e.box=function(e){for(var t=8,r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];for(var a=i.length,o=a;a--;)t+=i[a].byteLength;var s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),a=0,t=8;a<o;a++)s.set(i[a],t),t+=i[a].byteLength;return s},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){var i=Math.floor((r*=t)/4294967296),n=Math.floor(r%4294967296);return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,r))},e.moov=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,r){var i=Math.floor((r*=t)/4294967296),n=Math.floor(r%4294967296),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,i,n=t.samples||[],a=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)i=n[r].flags,a[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,i,n,a=[],o=[];for(r=0;r<t.sps.length;r++)n=(i=t.sps[r]).byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(i));for(r=0;r<t.pps.length;r++)n=(i=t.pps[r]).byteLength,o.push(n>>>8&255),o.push(255&n),o=o.concat(Array.prototype.slice.call(i));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,d=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,n=t.width,a=t.height,o=Math.floor(i/4294967296),s=Math.floor(i%4294967296);return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),n=t.id,a=Math.floor(r/4294967296),o=Math.floor(r%4294967296);return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var i,n,a,o,s,l,u=t.samples||[],d=u.length,c=12+16*d,h=new Uint8Array(c);for(r+=8+c,h.set(["video"===t.type?1:0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<d;i++)a=(n=u[i]).duration,o=n.size,s=n.flags,l=n.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var r=e.moov(t),i=new Uint8Array(e.FTYP.byteLength+r.byteLength);return i.set(e.FTYP),i.set(r,e.FTYP.byteLength),i},e}();a.types=void 0,a.HDLR_TYPES=void 0,a.STTS=void 0,a.STSC=void 0,a.STCO=void 0,a.STSZ=void 0,a.VMHD=void 0,a.SMHD=void 0,a.STSD=void 0,a.FTYP=void 0,a.DINF=void 0;var o=r(851),s=r(973),l=r(93),u=r(308),d=r(673);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var h=null,f=null,p=function(){function e(e,t,r,i){if(void 0===i&&(i=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===h){var n=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);h=n?parseInt(n[1]):0}if(null===f){var a=navigator.userAgent.match(/Safari\/(\d+)/i);f=a?parseInt(a[1]):0}}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){l.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){l.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){l.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,r=e.reduce(function(e,r){var i=r.pts-e;return i<-4294967296?(t=!0,m(e,r.pts)):i>0?e:r.pts},e[0].pts);return t&&l.logger.debug("PTS rollover detected"),r},t.remux=function(e,t,r,i,n,a,o,s){var d,c,h,f,p,y,b=n,E=n,T=e.pid>-1,_=t.pid>-1,A=t.samples.length,S=e.samples.length>0,k=o&&A>0||A>1;if((!T||S)&&(!_||k)||this.ISGenerated||o){this.ISGenerated||(h=this.generateIS(e,t,n));var w,L=this.isVideoContiguous,I=-1;if(k&&(I=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return -1}(t.samples),!L&&this.config.forceKeyFrameOnDiscontinuity)){if(y=!0,I>0){l.logger.warn("[mp4-remuxer]: Dropped "+I+" out of "+A+" video samples due to a missing keyframe");var D=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(I),t.dropped+=I,w=E+=(t.samples[0].pts-D)/t.inputTimeScale}else -1===I&&(l.logger.warn("[mp4-remuxer]: No keyframe found out of "+A+" video samples"),y=!1)}if(this.ISGenerated){if(S&&k){var R=this.getVideoStartPts(t.samples),O=(m(e.samples[0].pts,R)-R)/t.inputTimeScale;b+=Math.max(0,O),E+=Math.max(0,-O)}if(S){if(e.samplerate||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(e,t,n)),c=this.remuxAudio(e,b,this.isAudioContiguous,a,_||k||s===u.PlaylistLevelType.AUDIO?E:void 0),k){var P=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(e,t,n)),d=this.remuxVideo(t,E,L,P)}}else k&&(d=this.remuxVideo(t,E,L,0));d&&(d.firstKeyFrame=I,d.independent=-1!==I,d.firstKeyFramePTS=w)}}return this.ISGenerated&&(r.samples.length&&(p=v(r,n,this._initPTS,this._initDTS)),i.samples.length&&(f=g(i,n,this._initPTS))),{audio:c,video:d,initSegment:h,independent:y,text:f,id3:p}},t.generateIS=function(e,t,r){var n,o,s,l=e.samples,u=t.samples,d=this.typeSupported,c={},h=!(0,i.isFiniteNumber)(this._initPTS),f="audio/mp4";if(h&&(n=o=1/0),e.config&&l.length&&(e.timescale=e.samplerate,"mp3"===e.segmentCodec&&(d.mpeg?(f="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),c.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&d.mpeg?new Uint8Array(0):a.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(s=e.inputTimeScale,n=o=l[0].pts-Math.round(s*r))),t.sps&&t.pps&&u.length&&(t.timescale=t.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:a.initSegment([t]),metadata:{width:t.width,height:t.height}},h)){s=t.inputTimeScale;var p=this.getVideoStartPts(u),v=Math.round(s*r);o=Math.min(o,m(u[0].dts,p)-v),n=Math.min(n,p-v)}if(Object.keys(c).length)return this.ISGenerated=!0,h&&(this._initPTS=n,this._initDTS=o),{tracks:c,initPTS:n,timescale:s}},t.remuxVideo=function(e,t,r,i){var n,u,p=e.inputTimeScale,v=e.samples,g=[],b=v.length,E=this._initPTS,T=this.nextAvcDts,_=8,A=this.videoSampleDuration,S=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,w=!1;r&&null!==T||(T=t*p-(v[0].pts-m(v[0].dts,v[0].pts)));for(var L=0;L<b;L++){var I=v[L];I.pts=m(I.pts-E,T),I.dts=m(I.dts-E,T),I.dts<v[L>0?L-1:L].dts&&(w=!0)}w&&v.sort(function(e,t){var r=e.dts-t.dts,i=e.pts-t.pts;return r||i}),n=v[0].dts;var D=v[v.length-1].dts-n,R=D?Math.round(D/(b-1)):A||e.inputTimeScale/30;if(r){var O=n-T,P=O>R,C=O<-1;if((P||C)&&(P?l.logger.warn("AVC: "+(0,d.toMsFromMpegTsClock)(O,!0)+" ms ("+O+"dts) hole between fragments detected, filling it"):l.logger.warn("AVC: "+(0,d.toMsFromMpegTsClock)(-O,!0)+" ms ("+O+"dts) overlapping between fragments detected"),!C||T>v[0].pts)){n=T;var M=v[0].pts-O;v[0].dts=n,v[0].pts=M,l.logger.log("Video: First PTS/DTS adjusted: "+(0,d.toMsFromMpegTsClock)(M,!0)+"/"+(0,d.toMsFromMpegTsClock)(n,!0)+", delta: "+(0,d.toMsFromMpegTsClock)(O,!0)+" ms")}}n=Math.max(0,n);for(var x=0,N=0,U=0;U<b;U++){for(var F=v[U],B=F.units,j=B.length,H=0,V=0;V<j;V++)H+=B[V].data.length;N+=H,x+=j,F.length=H,F.dts=Math.max(F.dts,n),S=Math.min(F.pts,S),k=Math.max(F.pts,k)}u=v[b-1].dts;var K,G=N+4*x+8;try{K=new Uint8Array(G)}catch(W){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating video mdat "+G})}var q=new DataView(K.buffer);q.setUint32(0,G),K.set(a.types.mdat,4);for(var Y=!1,$=Number.POSITIVE_INFINITY,z=Number.POSITIVE_INFINITY,X=Number.NEGATIVE_INFINITY,Q=Number.NEGATIVE_INFINITY,Z=0;Z<b;Z++){for(var J=v[Z],ee=J.units,et=0,er=0,ei=ee.length;er<ei;er++){var en=ee[er],ea=en.data,eo=en.data.byteLength;q.setUint32(_,eo),_+=4,K.set(ea,_),_+=eo,et+=4+eo}var es=void 0;if(Z<b-1)A=v[Z+1].dts-J.dts,es=v[Z+1].pts-J.pts;else{var el=this.config,eu=Z>0?J.dts-v[Z-1].dts:R;if(es=Z>0?J.pts-v[Z-1].pts:R,el.stretchShortVideoTrack&&null!==this.nextAudioPts){var ed=Math.floor(el.maxBufferHole*p),ec=(i?S+i*p:this.nextAudioPts)-J.pts;ec>ed?((A=ec-eu)<0?A=eu:Y=!0,l.logger.log("[mp4-remuxer]: It is approximately "+ec/90+" ms to the next segment; using duration "+A/90+" ms for the last video frame.")):A=eu}else A=eu}var eh=Math.round(J.pts-J.dts);$=Math.min($,A),X=Math.max(X,A),z=Math.min(z,es),Q=Math.max(Q,es),g.push(new y(J.key,A,et,eh))}if(g.length){if(h){if(h<70){var ef=g[0].flags;ef.dependsOn=2,ef.isNonSync=0}}else if(f&&Q-z<X-$&&R/X<.025&&0===g[0].cts){l.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var ep=n,em=0,ev=g.length;em<ev;em++){var eg=ep+g[em].duration,ey=ep+g[em].cts;if(em<ev-1){var eb=eg+g[em+1].cts;g[em].duration=eb-ey}else g[em].duration=em?g[em-1].duration:R;g[em].cts=0,ep=eg}}}A=Y||!A?R:A,this.nextAvcDts=T=u+A,this.videoSampleDuration=A,this.isVideoContiguous=!0;var eE={data1:a.moof(e.sequenceNumber++,n,c({},e,{samples:g})),data2:K,startPTS:S/p,endPTS:(k+A)/p,startDTS:n/p,endDTS:T/p,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:e.dropped};return e.samples=[],e.dropped=0,eE},t.remuxAudio=function(e,t,r,i,u){var d=e.inputTimeScale,h=d/(e.samplerate?e.samplerate:d),f="aac"===e.segmentCodec?1024:1152,p=f*h,v=this._initPTS,g="mp3"===e.segmentCodec&&this.typeSupported.mpeg,b=[],E=void 0!==u,T=e.samples,_=g?0:8,A=this.nextAudioPts||-1,S=t*d;if(this.isAudioContiguous=r=r||T.length&&A>0&&(i&&9e3>Math.abs(S-A)||Math.abs(m(T[0].pts-v,S)-A)<20*p),T.forEach(function(e){e.pts=m(e.pts-v,S)}),!r||A<0){if(!(T=T.filter(function(e){return e.pts>=0})).length)return;A=0===u?0:i&&!E?Math.max(0,S):T[0].pts}if("aac"===e.segmentCodec)for(var k=this.config.maxAudioFramesDrift,w=0,L=A;w<T.length;w++){var I=T[w],D=I.pts,R=D-L,O=Math.abs(1e3*R/d);if(R<=-k*p&&E)0===w&&(l.logger.warn("Audio frame @ "+(D/d).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*R/d)+" ms."),this.nextAudioPts=A=L=D);else if(R>=k*p&&O<1e4&&E){var P=Math.round(R/p);(L=D-P*p)<0&&(P--,L+=p),0===w&&(this.nextAudioPts=A=L),l.logger.warn("[mp4-remuxer]: Injecting "+P+" audio frame @ "+(L/d).toFixed(3)+"s due to "+Math.round(1e3*R/d)+" ms gap.");for(var C=0;C<P;C++){var M=Math.max(L,0),x=n.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);x||(l.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),x=I.unit.subarray()),T.splice(w,0,{unit:x,pts:M}),L+=p,w++}}I.pts=L,L+=p}for(var N,U=null,F=null,B=0,j=T.length;j--;)B+=T[j].unit.byteLength;for(var H=0,V=T.length;H<V;H++){var K=T[H],G=K.unit,W=K.pts;if(null!==F)b[H-1].duration=Math.round((W-F)/h);else{if(r&&"aac"===e.segmentCodec&&(W=A),U=W,!(B>0))return;B+=_;try{N=new Uint8Array(B)}catch(q){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:B,reason:"fail allocating audio mdat "+B})}g||(new DataView(N.buffer).setUint32(0,B),N.set(a.types.mdat,4))}N.set(G,_);var Y=G.byteLength;_+=Y,b.push(new y(!0,f,Y,0)),F=W}var $=b.length;if($){var z=b[b.length-1];this.nextAudioPts=A=F+h*z.duration;var X=g?new Uint8Array(0):a.moof(e.sequenceNumber++,U/h,c({},e,{samples:b}));e.samples=[];var Q=U/d,Z=A/d,J={data1:X,data2:N,startPTS:Q,endPTS:Z,startDTS:Q,endDTS:Z,type:"audio",hasAudio:!0,hasVideo:!1,nb:$};return this.isAudioContiguous=!0,J}},t.remuxEmptyAudio=function(e,t,r,i){var a=e.inputTimeScale,o=a/(e.samplerate?e.samplerate:a),s=this.nextAudioPts,u=(null!==s?s:i.startDTS*a)+this._initDTS,d=i.endDTS*a+this._initDTS,c=1024*o,h=Math.ceil((d-u)/c),f=n.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(l.logger.warn("[mp4-remuxer]: remux empty Audio"),f){for(var p=[],m=0;m<h;m++){var v=u+m*c;p.push({unit:f,pts:v,dts:v})}return e.samples=p,this.remuxAudio(e,t,r,!1)}l.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e}();function m(e,t){var r;if(null===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}function v(e,t,r,i){var n=e.samples.length;if(n){for(var a=e.inputTimeScale,o=0;o<n;o++){var s=e.samples[o];s.pts=m(s.pts-r,t*a)/a,s.dts=m(s.dts-i,t*a)/a}var l=e.samples;return e.samples=[],{samples:l}}}function g(e,t,r){var i=e.samples.length;if(i){for(var n=e.inputTimeScale,a=0;a<i;a++){var o=e.samples[a];o.pts=m(o.pts-r,t*n)/n}e.samples.sort(function(e,t){return e.pts-t.pts});var s=e.samples;return e.samples=[],{samples:s}}}var y=function(e,t,r,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=r,this.cts=i,this.flags=new b(e)},b=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}},856:(e,t,r)=>{"use strict";var i,n;r.r(t),r.d(t,{MetadataSchema:()=>i}),(n=i||(i={})).audioId3="org.id3",n.dateRange="com.apple.quicktime.HLS",n.emsg="https://aomedia.org/emsg/ID3"},308:(e,t,r)=>{"use strict";var i,n,a,o;r.r(t),r.d(t,{PlaylistContextType:()=>i,PlaylistLevelType:()=>n}),(a=i||(i={})).MANIFEST="manifest",a.LEVEL="level",a.AUDIO_TRACK="audioTrack",a.SUBTITLE_TRACK="subtitleTrack",(o=n||(n={})).MAIN="main",o.AUDIO="audio",o.SUBTITLE="subtitle"},300:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i={hexDump:function(e){for(var t="",r=0;r<e.length;r++){var i=e[r].toString(16);i.length<2&&(i="0"+i),t+=i}return t}}},93:(e,t,r)=>{"use strict";r.r(t),r.d(t,{enableLogs:()=>o,logger:()=>s});var i=function(){},n={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=n;function o(e,t){if(self.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach(function(t){var r;a[t]=e[t]?e[t].bind(e):(r=self.console[t])?r.bind(self.console,"["+t+"] >"):i})}(e,"debug","log","info","warn","error");try{a.log('Debug logs enabled for "'+t+'"')}catch(r){a=n}}else a=n}var s=n},63:(e,t,r)=>{"use strict";r.r(t),r.d(t,{RemuxerTrackIdConfig:()=>u,appendUint8Array:()=>k,bin2str:()=>d,computeRawDurationFromSamples:()=>_,discardEPB:()=>I,findBox:()=>m,getDuration:()=>T,getStartDTS:()=>E,mp4Box:()=>R,mp4pssh:()=>O,offsetStartDTS:()=>A,parseEmsg:()=>D,parseInitSegment:()=>g,parsePssh:()=>P,parseSEIMessageFromNALu:()=>L,parseSamples:()=>w,parseSegmentIndex:()=>v,parseSinf:()=>b,patchEncyptionData:()=>y,readSint32:()=>f,readUint16:()=>c,readUint32:()=>h,segmentValidRange:()=>S,writeUint32:()=>p});var i=r(923),n=r(145),a=r(181),o=r(93),s=r(300),l=[].push,u={video:1,audio:2,id3:3,text:4};function d(e){return String.fromCharCode.apply(null,e)}function c(e,t){var r=e[t]<<8|e[t+1];return r<0?65536+r:r}function h(e,t){var r=f(e,t);return r<0?4294967296+r:r}function f(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function p(e,t,r){e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}function m(e,t){var r=[];if(!t.length)return r;for(var i=e.byteLength,n=0;n<i;){var a=h(e,n),o=a>1?n+a:i;if(d(e.subarray(n+4,n+8))===t[0]){if(1===t.length)r.push(e.subarray(n+8,o));else{var s=m(e.subarray(n+8,o),t.slice(1));s.length&&l.apply(r,s)}}n=o}return r}function v(e){var t=[],r=e[0],i=8,n=h(e,8);i=4+(0===r?8:16)+2;var a=e.length+0,o=c(e,i);i+=2;for(var s=0;s<o;s++){var l=i,u=h(e,l);l+=4;var d=2147483647&u;if(1==(2147483648&u)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var f=h(e,l);l+=4,t.push({referenceSize:d,subsegmentDuration:f,info:{duration:f/n,start:a,end:a+d-1}}),a+=d,i=l+=4}return{earliestPresentationTime:0,timescale:n,version:r,referencesCount:o,references:t}}function g(e){for(var t=[],r=m(e,["moov","trak"]),n=0;n<r.length;n++){var a=r[n],o=m(a,["tkhd"])[0];if(o){var s=o[0],l=0===s?12:20,u=h(o,l),c=m(a,["mdia","mdhd"])[0];if(c){var f=h(c,l=0===(s=c[0])?12:20),p=m(a,["mdia","hdlr"])[0];if(p){var v=d(p.subarray(8,12)),g={soun:i.ElementaryStreamTypes.AUDIO,vide:i.ElementaryStreamTypes.VIDEO}[v];if(g){var y=m(a,["mdia","minf","stbl","stsd"])[0],b=void 0;y&&(b=d(y.subarray(12,16))),t[u]={timescale:f,type:g},t[g]={timescale:f,id:u,codec:b}}}}}}return m(e,["moov","mvex","trex"]).forEach(function(e){var r=t[h(e,4)];r&&(r.default={duration:h(e,12),flags:h(e,20)})}),t}function y(e,t){if(!e||!t)return e;var r=t.keyId;return r&&t.isCommonEncryption&&m(e,["moov","trak"]).forEach(function(e){var t=m(e,["mdia","minf","stbl","stsd"])[0].subarray(8),i=m(t,["enca"]),n=i.length>0;n||(i=m(t,["encv"])),i.forEach(function(e){m(n?e.subarray(28):e.subarray(78),["sinf"]).forEach(function(e){var t=b(e);if(t){var i=t.subarray(8,24);i.some(function(e){return 0!==e})||(o.logger.log("[eme] Patching keyId in 'enc"+(n?"a":"v")+">sinf>>tenc' box: "+s.default.hexDump(i)+" -> "+s.default.hexDump(r)),t.set(r,8))}})})}),e}function b(e){var t=m(e,["schm"])[0];if(t){var r=d(t.subarray(4,8));if("cbcs"===r||"cenc"===r)return m(e,["schi","tenc"])[0]}return o.logger.error("[eme] missing 'schm' box"),null}function E(e,t){return m(t,["moof","traf"]).reduce(function(t,r){var i=m(r,["tfdt"])[0],n=i[0],a=m(r,["tfhd"]).reduce(function(t,r){var a=e[h(r,4)];if(a){var o=h(i,4);1===n&&(o*=4294967296,o+=h(i,8));var s=o/(a.timescale||9e4);if(isFinite(s)&&(null===t||s<t))return s}return t},null);return null!==a&&isFinite(a)&&(null===t||a<t)?a:t},null)||0}function T(e,t){for(var r=0,n=0,a=0,o=m(e,["moof","traf"]),s=0;s<o.length;s++){var l=o[s],u=m(l,["tfhd"])[0],d=t[h(u,4)];if(d){var c=d.default,f=h(u,0)|(null==c?void 0:c.flags),p=null==c?void 0:c.duration;8&f&&(p=h(u,2&f?12:8));for(var g=d.timescale||9e4,y=m(l,["trun"]),b=0;b<y.length;b++)(r=_(y[b]))||!p||(r=p*h(y[b],4)),d.type===i.ElementaryStreamTypes.VIDEO?n+=r/g:d.type===i.ElementaryStreamTypes.AUDIO&&(a+=r/g)}}if(0===n&&0===a){for(var E=0,T=m(e,["sidx"]),A=0;A<T.length;A++){var S=v(T[A]);null!=S&&S.references&&(E+=S.references.reduce(function(e,t){return e+t.info.duration||0},0))}return E}return n||a}function _(e){var t=h(e,0),r=8;1&t&&(r+=4),4&t&&(r+=4);for(var i=0,n=h(e,4),a=0;a<n;a++)256&t&&(i+=h(e,r),r+=4),512&t&&(r+=4),1024&t&&(r+=4),2048&t&&(r+=4);return i}function A(e,t,r){m(t,["moof","traf"]).forEach(function(t){m(t,["tfhd"]).forEach(function(i){var n=e[h(i,4)];if(n){var a=n.timescale||9e4;m(t,["tfdt"]).forEach(function(e){var t=e[0],i=h(e,4);if(0===t)i-=r*a,p(e,4,i=Math.max(i,0));else{i*=4294967296,i+=h(e,8),i-=r*a;var n=Math.floor((i=Math.max(i,0))/4294967296),o=Math.floor(i%4294967296);p(e,4,n),p(e,8,o)}})}})})}function S(e){var t={valid:null,remainder:null},r=m(e,["moof"]);if(!r)return t;if(r.length<2)return t.remainder=e,t;var i=r[r.length-1];return t.valid=(0,n.sliceUint8)(e,0,i.byteOffset-8),t.remainder=(0,n.sliceUint8)(e,i.byteOffset-8),t}function k(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function w(e,t){var r=[],n=t.samples,a=t.timescale,o=t.id,s=!1;return m(n,["moof"]).map(function(l){var u=l.byteOffset-8;m(l,["traf"]).map(function(l){var d=m(l,["tfdt"]).map(function(e){var t=e[0],r=h(e,4);return 1===t&&(r*=4294967296,r+=h(e,8)),r/a})[0];return void 0!==d&&(e=d),m(l,["tfhd"]).map(function(d){var c=h(d,4),p=16777215&h(d,0),v=0,g=0,y=8;c===o&&(0!=(1&p)&&(y+=8),0!=(2&p)&&(y+=4),0!=(8&p)&&(v=h(d,y),y+=4),0!=(16&p)&&(g=h(d,y),y+=4),0!=(32&p)&&(y+=4),"video"===t.type&&(s=function(e){if(!e)return!1;var t=e.indexOf("."),r=t<0?e:e.substring(0,t);return"hvc1"===r||"hev1"===r||"dvh1"===r||"dvhe"===r}(t.codec)),m(l,["trun"]).map(function(o){var l=o[0],d=16777215&h(o,0),c=0,p=0!=(256&d),m=0,y=0!=(512&d),b=0,E=0!=(1024&d),T=0!=(2048&d),_=0,A=h(o,4),S=8;0!=(1&d)&&(c=h(o,S),S+=4),0!=(4&d)&&(S+=4);for(var k=c+u,w=0;w<A;w++){if(p?(m=h(o,S),S+=4):m=v,y?(b=h(o,S),S+=4):b=g,E&&(S+=4),T&&(_=0===l?h(o,S):f(o,S),S+=4),t.type===i.ElementaryStreamTypes.VIDEO)for(var I=0;I<b;){var D=h(n,k);(function(e,t){if(e){var r=t>>1&63;return 39===r||40===r}return 6==(31&t)})(s,n[k+=4])&&L(n.subarray(k,k+D),s?2:1,e+_/a,r),k+=D,I+=D+4}e+=m/a}}))})})}),r}function L(e,t,r,i){var n,o=I(e);n=0+t;for(var s=0,l=0,u=!1,d=0;n<o.length;){s=0;do{if(n>=o.length)break;s+=d=o[n++]}while(255===d);l=0;do{if(n>=o.length)break;l+=d=o[n++]}while(255===d);var f=o.length-n;if(!u&&4===s&&n<o.length){if(u=!0,181===o[n++]){var p=c(o,n);if(n+=2,49===p){var m=h(o,n);if(n+=4,1195456820===m){var v=o[n++];if(3===v){var g=o[n++],y=64&g,b=y?2+3*(31&g):0,E=new Uint8Array(b);if(y){E[0]=g;for(var T=1;T<b;T++)E[T]=o[n++]}i.push({type:v,payloadType:s,pts:r,bytes:E})}}}}}else if(5===s&&l<f){if(u=!0,l>16){for(var _=[],A=0;A<16;A++){var S=o[n++].toString(16);_.push(1==S.length?"0"+S:S),3!==A&&5!==A&&7!==A&&9!==A||_.push("-")}for(var k=l-16,w=new Uint8Array(k),L=0;L<k;L++)w[L]=o[n++];i.push({payloadType:s,pts:r,uuid:_.join(""),userData:(0,a.utf8ArrayToStr)(w),userDataBytes:w})}}else if(l<f)n+=l;else if(l>f)break}}function I(e){for(var t=e.byteLength,r=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return e;var n=t-r.length,a=new Uint8Array(n),o=0;for(i=0;i<n;o++,i++)o===r[0]&&(o++,r.shift()),a[i]=e[o];return a}function D(e){var t=e[0],r="",i="",n=0,a=0,o=0,s=0,l=0,u=0;if(0===t){for(;"\0"!==d(e.subarray(u,u+1));)r+=d(e.subarray(u,u+1)),u+=1;for(r+=d(e.subarray(u,u+1)),u+=1;"\0"!==d(e.subarray(u,u+1));)i+=d(e.subarray(u,u+1)),u+=1;i+=d(e.subarray(u,u+1)),u+=1,n=h(e,12),a=h(e,16),s=h(e,20),l=h(e,24),u=28}else if(1===t){n=h(e,u+=4);var c=h(e,u+=4),f=h(e,u+=4);for(u+=4,Number.isSafeInteger(o=4294967296*c+f)||(o=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=h(e,u),l=h(e,u+=4),u+=4;"\0"!==d(e.subarray(u,u+1));)r+=d(e.subarray(u,u+1)),u+=1;for(r+=d(e.subarray(u,u+1)),u+=1;"\0"!==d(e.subarray(u,u+1));)i+=d(e.subarray(u,u+1)),u+=1;i+=d(e.subarray(u,u+1)),u+=1}return{schemeIdUri:r,value:i,timeScale:n,presentationTime:o,presentationTimeDelta:a,eventDuration:s,id:l,payload:e.subarray(u,e.byteLength)}}function R(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(var n=r.length,a=8,o=n;o--;)a+=r[o].byteLength;var s=new Uint8Array(a);for(s[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=255&a,s.set(e,4),o=0,a=8;o<n;o++)s.set(r[o],a),a+=r[o].byteLength;return s}function O(e,t,r){if(16!==e.byteLength)throw RangeError("Invalid system id");if(t){i=1,n=new Uint8Array(16*t.length);for(var i,n,a,o=0;o<t.length;o++){var s=t[o];if(16!==s.byteLength)throw RangeError("Invalid key");n.set(s,16*o)}}else i=0,n=new Uint8Array;i>0?(a=new Uint8Array(4),t.length>0&&new DataView(a.buffer).setUint32(0,t.length,!1)):a=new Uint8Array;var l=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(l.buffer).setUint32(0,r.byteLength,!1),R([112,115,115,104],new Uint8Array([i,0,0,0]),e,a,n,l,r||new Uint8Array)}function P(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;var t={version:0,systemId:"",kids:null,data:null},r=new DataView(e),i=r.getUint32(0);if(e.byteLength!==i&&i>44||1886614376!==r.getUint32(4)||(t.version=r.getUint32(8)>>>24,t.version>1))return null;t.systemId=s.default.hexDump(new Uint8Array(e,12,16));var n=r.getUint32(28);if(0===t.version){if(i-32<n)return null;t.data=new Uint8Array(e,32,n)}else if(1===t.version){t.kids=[];for(var a=0;a<n;a++)t.kids.push(new Uint8Array(e,32+16*a,16))}return t}},673:(e,t,r)=>{"use strict";function i(e,t,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);var n=e*t*r;return i?Math.round(n):n}function n(e,t,r,n){return void 0===r&&(r=1),void 0===n&&(n=!1),i(e,t,1/r,n)}function a(e,t){return void 0===t&&(t=!1),i(e,1e3,1/9e4,t)}function o(e,t){return void 0===t&&(t=1),i(e,9e4,1/t)}r.r(t),r.d(t,{toMpegTsClockFromTimescale:()=>o,toMsFromMpegTsClock:()=>a,toTimescaleFromBase:()=>i,toTimescaleFromScale:()=>n})},145:(e,t,r)=>{"use strict";function i(e,t,r){return Uint8Array.prototype.slice?e.slice(t,r):new Uint8Array(Array.prototype.slice.call(e,t,r))}r.r(t),r.d(t,{sliceUint8:()=>i})},729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,i,a,o){if("function"!=typeof i)throw TypeError("The listener must be a function");var s=new n(i,a||e,o),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,a=i.length,o=Array(a);n<a;n++)o[n]=i[n].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},s.prototype.emit=function(e,t,i,n,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var l,u,d=this._events[s],c=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),c){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,n),!0;case 5:return d.fn.call(d.context,t,i,n,a),!0;case 6:return d.fn.call(d.context,t,i,n,a,o),!0}for(u=1,l=Array(c-1);u<c;u++)l[u-1]=arguments[u];d.fn.apply(d.context,l)}else{var h,f=d.length;for(u=0;u<f;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),c){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,i);break;case 4:d[u].fn.call(d[u].context,t,i,n);break;default:if(!l)for(h=1,l=Array(c-1);h<c;h++)l[h-1]=arguments[h];d[u].fn.apply(d[u].context,l)}}return!0},s.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,i,n){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||n&&!s.once||i&&s.context!==i||o(this,a);else{for(var l=0,u=[],d=s.length;l<d;l++)(s[l].fn!==t||n&&!s[l].once||i&&s[l].context!==i)&&u.push(s[l]);u.length?this._events[a]=1===u.length?u[0]:u:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},945:function(e){var t,r,i,n,a;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=a.parseURL(e);if(!n)throw Error("Error trying to parse base URL.");return n.path=a.normalizePath(n.path),a.buildURLFromParts(n)}var o=a.parseURL(t);if(!o)throw Error("Error trying to parse relative URL.");if(o.scheme)return i.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var s=a.parseURL(e);if(!s)throw Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=r.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=s.netLoc,"/"!==o.path[0])){if(o.path){var d=s.path,c=d.substring(0,d.lastIndexOf("/")+1)+o.path;u.path=a.normalizePath(c)}else u.path=s.path,o.params||(u.params=s.params,o.query||(u.query=s.query))}return null===u.path&&(u.path=i.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(u)},parseURL:function(e){var r=t.exec(e);return r?{scheme:r[1]||"",netLoc:r[2]||"",path:r[3]||"",params:r[4]||"",query:r[5]||"",fragment:r[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(n,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=a}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,r),a.exports}return r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(76).default})())},49090:function(e){function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(Error("Failed to load "+this.src),e)}}function r(e,t){e.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,i,n){var a=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");"function"==typeof i&&(n=i,i={}),i=i||{},n=n||function(){},o.type=i.type||"text/javascript",o.charset=i.charset||"utf8",o.async=!("async"in i)||!!i.async,o.src=e,i.attrs&&function(e,t){for(var r in t)e.setAttribute(r,t[r])}(o,i.attrs),i.text&&(o.text=""+i.text),("onload"in o?t:r)(o,n),o.onload||t(o,n),a.appendChild(o)}},30845:function(e,t,r){"use strict";r.r(t);var i=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function n(e,t){if(e.length!==t.length)return!1;for(var r,n,a=0;a<e.length;a++)if(!((r=e[a])===(n=t[a])||i(r)&&i(n)))return!1;return!0}t.default=function(e,t){void 0===t&&(t=n);var r,i,a=[],o=!1;return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return o&&r===this&&t(n,a)||(i=e.apply(this,n),o=!0,r=this,a=n),i}}},54125:function(e){e.exports=function(){var e={80:function(e,t,r){e.exports=r(728).default},728:function(e,t,r){"use strict";r.d(t,{default:function(){return tC}});var i=r(48),n=r.n(i),a=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},o=function(){return("000000"+(2176782336*Math.random()<<0).toString(36)).slice(-6)},s=function(e){return e&&void 0!==e.nodeName?(e.muxId||(e.muxId=e.id||o()),e.muxId):e},l=function(e){e&&void 0!==e.nodeName?e=s(t=e):t=document.querySelector(e);var t,r=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,r]},u=r(640),d=r.n(u),c=d().methodFactory;d().methodFactory=function(e,t,r){var i=c(e,t,r);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);i.apply(void 0,e)}},d().setLevel(d().getLevel());var h=d();function f(){return"1"===(n().doNotTrack||n().navigator&&n().navigator.doNotTrack)}var p={now:function(){var e=n().performance,t=e&&e.timing,r=t&&t.navigationStart;return Math.round("number"==typeof r&&"function"==typeof e.now?r+e.now():Date.now())}},m=function(e){return v(e)[0]},v=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,r=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return r&&(t=(r.match(/[^\.]+\.[^\.]+$/)||[])[0]),[r,t]},g={exists:function(){var e=n().performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=n().performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=n().performance,t=e&&e.timing;return t&&t.navigationStart}};function y(e,t,r){r=void 0===r?1:r,e[t]=e[t]||0,e[t]+=r}var b=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],E=["x-cdn","content-type"].concat(b);function T(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach(function(e){if(e){var r=e.split(": "),i=r.shift();i&&(E.indexOf(i.toLowerCase())>=0||0===i.toLowerCase().indexOf("x-litix-"))&&(t[i]=r.join(": "))}}),t}function _(e){if(e){var t=b.find(function(t){return void 0!==e[t]});return t?e[t]:void 0}}var A=function(e){var t={};for(var r in e){var i=e[r];-1!==i["DATA-ID"].search("io.litix.data.")&&(t[i["DATA-ID"].replace("io.litix.data.","")]=i.VALUE)}return t};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach(function(t){var i,n;i=e,n=r[t],t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var w=function(e){if(!e)return{};var t=g.navigationStart(),r=e.loading,i=r?r.start:e.trequest,n=r?r.first:e.tfirst,a=r?r.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+i),responseStart:Math.round(t+n),responseEnd:Math.round(t+a)}},L=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return T(e.getAllResponseHeaders())};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){var i,n;i=e,n=r[t],t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var R=function(e,t){if(!e||"function"!=typeof e.getRequests)return{};var r=e.getRequests({state:"executed"});if(0===r.length)return{};var i,n=r[r.length-1],a=m(n.url),o=n.url,s=n.bytesLoaded,l=new Date(n.requestStartDate).getTime(),u=new Date(n.firstByteDate).getTime(),d=new Date(n.requestEndDate).getTime(),c=isNaN(n.duration)?0:n.duration,h="function"==typeof t.getMetricsFor?t.getMetricsFor(n.mediaType).HttpList:t.getDashMetrics().getHttpRequests(n.mediaType);return h.length>0&&(i=T(h[h.length-1]._responseHeaders||"")),{requestStart:l,requestResponseStart:u,requestResponseEnd:d,requestBytesLoaded:s,requestResponseHeaders:i,requestMediaDuration:c,requestHostname:a,requestUrl:o,requestId:i?_(i):void 0}},O=function(e,t){var r=t.getQualityFor(e),i=t.getCurrentTrackFor(e).bitrateList;return i?{currentLevel:r,renditionWidth:i[r].width||null,renditionHeight:i[r].height||null,renditionBitrate:i[r].bandwidth}:{}},P=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]};function C(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var M=0,x=function(){var e,t;function r(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r)}return e=[{key:"on",value:function(e,t,r){return t._eventEmitterGuid=t._eventEmitterGuid||++M,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],r&&(t=t.bind(r)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var r=this._listeners&&this._listeners[e];r&&r.forEach(function(e,i){e._eventEmitterGuid===t._eventEmitterGuid&&r.splice(i,1)})}},{key:"one",value:function(e,t,r){var i=this;t._eventEmitterGuid=t._eventEmitterGuid||++M;var n=function n(){i.off(e,n),t.apply(r||this,arguments)};n._eventEmitterGuid=t._eventEmitterGuid,this.on(e,n)}},{key:"emit",value:function(e,t){var r=this;if(this._listeners){t=t||{};var i=this._listeners["before*"]||[],n=this._listeners[e]||[],a=this._listeners["after"+e]||[],o=function(t,i){(t=t.slice()).forEach(function(t){t.call(r,{type:e},i)})};o(i,t),o(n,t),o(a,t)}}}],C(r.prototype,e),t&&C(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function N(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U=function(){var e;function t(e){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){r._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("seeking",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?r._stopPlaybackHeartbeatInterval():r._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){null!==r._playbackHeartbeatInterval&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(t,i){null!==r._playbackHeartbeatInterval&&(n().clearInterval(r._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),r._playbackHeartbeatInterval=null)})}return N(t.prototype,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=n().setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(n().clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e&&N(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function F(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var B=(e2=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t.on("viewinit",function(){r.viewErrored=!1}),t.on("error",function(e,i){try{var n=t.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context});n?(t.data.player_error_code=n.player_error_code||i.player_error_code,t.data.player_error_message=n.player_error_message||i.player_error_message,t.data.player_error_context=n.player_error_context||i.player_error_context,r.viewErrored=!0):(delete t.data.player_error_code,delete t.data.player_error_message,delete t.data.player_error_context)}catch(a){t.mux.log.warn("Exception in error translator callback.",a),r.viewErrored=!0}})},e5&&F(e2.prototype,e5),e4&&F(e2,e4),Object.defineProperty(e2,"prototype",{writable:!1}),e2);function j(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var H=function(){var e;function t(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return j(t.prototype,[{key:"_updateWatchTime",value:function(e,t){var r=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=r),y(this.pm.data,"view_watch_time",r-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=r}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e&&j(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function V(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var K=function(){var e;function t(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,e.on("playbackheartbeat",this._updatePlaybackTime.bind(this)),e.on("playbackheartbeatend",this._clearPlaybackTimeState.bind(this)),e.on("seeking",this._clearPlaybackTimeState.bind(this))}return V(t.prototype,[{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time;if(this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition){var t=e-this._playbackTimeTrackerLastPlayheadPosition;t<=1e3&&y(this.pm.data,"view_content_playback_time",t)}this._playbackTimeTrackerLastPlayheadPosition=e}},{key:"_clearPlaybackTimeState",value:function(){this._updatePlaybackTime(),this._playbackTimeTrackerLastPlayheadPosition=-1}}]),e&&V(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function G(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var W=function(){var e,t;function r(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.pm=e;var t=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",t),e.on("playbackheartbeatend",t),e.on("timeupdate",t),e.on("destroy",function(){e.off("timeupdate",t)})}return e=[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var r=this,i=function(){r.pm.currentFragmentPDT&&r.pm.currentFragmentStart&&(r.pm.data.player_program_time=r.pm.currentFragmentPDT+r.pm.data.player_playhead_time-r.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,i(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var n=this.pm.getPlayheadTime();void 0!==n&&(this.pm.data.player_playhead_time=n,i(),this._updateMaxPlayheadPosition())}}}],G(r.prototype,e),t&&G(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function q(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Y=(e3=function e(t){if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t.disableRebufferTracking){var r,i=function(e,t){n(t),r=void 0},n=function(e){if(r){var i=e.viewer_time-r;y(t.data,"view_rebuffer_duration",i),r=e.viewer_time,t.data.view_rebuffer_duration>3e5&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(3e5,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",function(e,t){return n(t)}),t.on("rebufferstart",function(e,n){r||(y(t.data,"view_rebuffer_count",1),r=n.viewer_time,t.one("rebufferend",i))}),t.on("viewinit",function(){r=void 0,t.off("rebufferend",i)})}},e8&&q(e3.prototype,e8),e6&&q(e3,e6),Object.defineProperty(e3,"prototype",{writable:!1}),e3);function $(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var z=function(){var e;function t(e){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,e.disableRebufferTracking||e.disablePlayheadRebufferTracking||(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){r._cleanupRebufferTracker(null,{viewer_time:p.now()})}))}return $(t.prototype,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime){if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&r>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0)}else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var i=this.pm.data.player_playhead_time-this._lastPlayheadTime,n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&i>0&&n-i>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+n-i}))}r?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e&&$(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function X(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Q=function(){var e;function t(e){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,e.on("viewinit",function(){var t=e.data,i=t.view_id;if(!t.view_program_changed){var n=function(t,n){var a=n.viewer_time;"playing"===t.type&&void 0===e.data.view_time_to_first_frame?r.calculateTimeToFirstFrame(a||p.now(),i):"adplaying"===t.type&&(void 0===e.data.view_time_to_first_frame||r._inPrerollPosition())&&r.calculateTimeToFirstFrame(a||p.now(),i)};e.one("playing",n),e.one("adplaying",n),e.one("viewend",function(){e.off("playing",n),e.off("adplaying",n)})}})}return X(t.prototype,[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),e&&X(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function Z(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var J=(e7=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t.on("viewinit",function(){r._lastPlayheadPosition=-1}),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach(function(e){t.on(e,function(){if(r._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&r._lastPlayerWidth>=0&&r._lastSourceWidth>0&&r._lastPlayerHeight>=0&&r._lastSourceHeight>0){var e=t.data.player_playhead_time-r._lastPlayheadPosition;if(e<0)return void(r._lastPlayheadPosition=-1);var i=Math.min(r._lastPlayerWidth/r._lastSourceWidth,r._lastPlayerHeight/r._lastSourceHeight),n=Math.max(0,i-1),a=Math.max(0,1-i);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,n),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,a),y(t.data,"view_total_content_playback_time",e),y(t.data,"view_total_upscaling",n*e),y(t.data,"view_total_downscaling",a*e)}r._lastPlayheadPosition=-1})}),["playing","hb"].forEach(function(e){t.on(e,function(){r._lastPlayheadPosition=t.data.player_playhead_time,r._lastPlayerWidth=t.data.player_width,r._lastPlayerHeight=t.data.player_height,r._lastSourceWidth=t.data.video_source_width,r._lastSourceHeight=t.data.video_source_height})})},e9&&Z(e7.prototype,e9),te&&Z(e7,te),Object.defineProperty(e7,"prototype",{writable:!1}),e7);function ee(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var et=(tt=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.isSeeking=!1,t.on("seeking",function(e,i){Object.assign(t.data,i),r._lastSeekingTime=p.now(),!1===r.isSeeking&&(r.isSeeking=!0,t.send("seeking"))}),t.on("seeked",function(){r.isSeeking=!1;var e=r._lastSeekingTime||p.now(),i=p.now()-e;y(t.data,"view_seek_count",1),y(t.data,"view_seek_duration",i);var n=t.data.view_max_seek_time||0;t.data.view_max_seek_time=Math.max(n,i)}),t.on("viewend",function(){r.isSeeking=!1})},tr&&ee(tt.prototype,tr),ti&&ee(tt,ti),Object.defineProperty(tt,"prototype",{writable:!1}),tt);function er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(l){s=!0,n=l}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ei(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ei(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function en(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ea=function(e,t){e.push(t),e.sort(function(e,t){return e.viewer_time-t.viewer_time})},eo=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror"],es=function(){var e,t;function r(e){var t=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.pm=e,e.on("viewinit",function(){t.isAdBreak=!1,t._currentAdRequestNumber=0,t._currentAdResponseNumber=0,t._adRequests=[],t._adResponses=[],t._adHasPlayed=!1,t._wouldBeNewAdPlay=!0,t._prerollPlayTime=void 0}),eo.forEach(function(r){return e.on(r,t._updateAdData.bind(t))});var i=function(){t.isAdBreak=!1};e.on("adbreakstart",function(){t.isAdBreak=!0}),e.on("play",i),e.on("playing",i),e.on("viewend",i),e.on("adrequest",function(r,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdRequestNumber++},i),ea(t._adRequests,i),y(e.data,"view_ad_request_count"),t.inPrerollPosition()&&(e.data.view_preroll_requested=!0,t._adHasPlayed||y(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(r,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdResponseNumber++},i),ea(t._adResponses,i);var n=t.findAdRequest(i.ad_request_id);n&&y(e.data,"view_ad_request_time",Math.max(0,i.viewer_time-n.viewer_time))}),e.on("adplay",function(r,i){t._adHasPlayed=!0,t._wouldBeNewAdPlay&&(t._wouldBeNewAdPlay=!1,y(e.data,"view_ad_played_count")),t.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,t._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,i.viewer_time-t._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,i.viewer_time-e.data.view_start)),t._prerollPlayTime=i.viewer_time)}),e.on("adplaying",function(r,i){t.inPrerollPosition()&&void 0===e.data.view_preroll_load_time&&void 0!==t._prerollPlayTime&&(e.data.view_preroll_load_time=i.viewer_time-t._prerollPlayTime,e.data.view_startup_preroll_load_time=i.viewer_time-t._prerollPlayTime)}),e.on("adended",function(){t._wouldBeNewAdPlay=!0}),e.on("aderror",function(){t._wouldBeNewAdPlay=!0})}return e=[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var r=er(v(t.ad_tag_url),2),i=r[0],n=r[1];this.pm.data.view_preroll_ad_tag_domain=n,this.pm.data.view_preroll_ad_tag_hostname=i}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var a=er(v(t.ad_asset_url),2),o=a[0],s=a[1];this.pm.data.view_preroll_ad_asset_domain=s,this.pm.data.view_preroll_ad_asset_hostname=o}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}],en(r.prototype,e),t&&en(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function el(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var eu=(tn=function e(t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e);var r,i,a=function(){t.disableRebufferTracking||r&&(y(t.data,"view_waiting_rebuffer_duration",p.now()-r),r=!1,n().clearInterval(i))},o=!1,s=function(){o=!1,a()};t.on("waiting",function(){o&&(t.disableRebufferTracking||(y(t.data,"view_waiting_rebuffer_count",1),r=p.now(),i=n().setInterval(function(){if(r){var e=p.now();y(t.data,"view_waiting_rebuffer_duration",e-r),r=e}},250)))}),t.on("playing",function(){a(),o=!0}),t.on("pause",s),t.on("seeking",s)},ta&&el(tn.prototype,ta),to&&el(tn,to),Object.defineProperty(tn,"prototype",{writable:!1}),tn);function ed(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ec=(ts=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e);var i=function(){r.lastWallClockTime=p.now(),t.on("before*",n)},n=function(e){var i=p.now(),n=r.lastWallClockTime;r.lastWallClockTime=i,i-n>3e4&&(t.emit("devicesleep",{viewer_time:n}),Object.assign(t.data,{viewer_time:n}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicewake"))};t.one("playbackheartbeat",i),t.on("playbackheartbeatend",function(){t.off("before*",n),t.one("playbackheartbeat",i)})},tl&&ed(ts.prototype,tl),tu&&ed(ts,tu),Object.defineProperty(ts,"prototype",{writable:!1}),ts),eh=r(375),ef=r(655),ep=r.n(ef),em="muxData",ev=function(){var e;try{e=eh.parse(ep().get(em)||"")}catch(t){e={}}return e},eg=function(e){try{ep().set(em,eh.stringify(e),{expires:7300})}catch(t){}},ey=function(){var e=ev();return e.mux_viewer_id=e.mux_viewer_id||a(),e.msn=e.msn||Math.random(),eg(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},eb=function(){var e;switch(eE()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},eE=function(){var e=n().navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};eb.getConnectionFromAPI=eE;var eT=eA({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),e_=eA({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ep:"experiments",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function eA(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function eS(e){var t={},r={};return Object.keys(e).forEach(function(i){var n=!1;if(e.hasOwnProperty(i)&&void 0!==e[i]){var a=i.split("_"),o=a[0],s=eT[o];s||(h.info("Data key word `"+a[0]+"` not expected in "+i),s=o+"_"),a.splice(1).forEach(function(e){"url"===e&&(n=!0),e_[e]?s+=e_[e]:Number(e)&&Math.floor(Number(e))===Number(e)?s+=e:(h.info("Data key word `"+e+"` not expected in "+i),s+="_"+e+"_")}),n?r[s]=e[i]:t[s]=e[i]}}),Object.assign(t,r)}var ek={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},ew=["hb","requestcompleted","requestfailed","requestcanceled"],eL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},ek,t)};eL.prototype.queueEvent=function(e,t){var r=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(r),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},eL.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},eL.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),n().clearTimeout(this._sendTimeout)},eL.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],eS({mux_view_message:"event queue truncated"}));var r=this._createPayload(t);eI(this._beaconUrl,r,!0,function(){})},eL.prototype._sendBeaconQueue=function(){var e=this;if(!this._postInFlight){var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var r=this._createPayload(t),i=p.now();eI(this._beaconUrl,r,!1,function(r,n){n?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,h.info("Error sending beacon: "+n)):e._failureCount=0,e._roundTripTime=p.now()-i,e._postInFlight=!1})}},eL.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},eL.prototype._startBeaconSending=function(){var e=this;n().clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=n().setTimeout(function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()},this._getNextBeaconTime()))},eL.prototype._createPayload=function(e){var t,r,i,n=this,a={transmission_timestamp:Math.round(p.now())};this._roundTripTime&&(a.rtt_ms=Math.round(this._roundTripTime));var o=function(){i=(t=JSON.stringify({metadata:a,events:r||e})).length/1024},s=function(){return i<=n._options.maxPayloadKBSize};return o(),s()||(h.info("Payload size is too big ("+i+" kb). Removing unnecessary events."),r=e.filter(function(e){return -1===ew.indexOf(e.e)}),o()),s()||(h.info("Payload size still too big ("+i+" kb). Cropping fields.."),r.forEach(function(e){for(var t in e){var r=e[t];"string"==typeof r&&r.length>51200&&(e[t]=r.substring(0,51200))}}),o()),t};var eI=function(e,t,r,i){if(r&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))i();else if(n().fetch)n().fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:t.length<=57344}).then(function(e){return i(null,e.ok?null:"Error")}).catch(function(e){return i(null,e)});else{if(n().XMLHttpRequest){var a=new(n()).XMLHttpRequest;return a.onreadystatechange=function(){if(4===a.readyState)return i(null,200!==a.status?"error":void 0)},a.open("POST",e),a.setRequestHeader("Content-Type","text/plain"),void a.send(t)}i()}};function eD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function eR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function eO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(r),!0).forEach(function(t){eM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eP(e){return(eP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eC(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function eM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ex=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],eN=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse"],eU=["viewstart","error","ended","viewend"],eF=function(){var e,t;function r(e,t){var i,a,o,s,l,u,d,c,h,f,p,m,v,g,y,b,E,T,_,A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),eM(this,"previousBeaconData",null),eM(this,"lastEventTime",0),eM(this,"rateLimited",!1),this.mux=e,this.envKey=t,this.options=A,this.eventQueue=new eL((i=this.envKey,o=(a=this.options).beaconCollectionDomain,s=a.beaconDomain,o?"https://"+o:(i=i||"inferred").match(/^[a-z0-9]+$/)?"https://"+i+"."+(s||"litix.io"):"https://img.litix.io/a.gif")),this.sampleRate=null!==(l=this.options.sampleRate)&&void 0!==l?l:1,this.disableCookies=null!==(u=this.options.disableCookies)&&void 0!==u&&u,this.respectDoNotTrack=null!==(d=this.options.respectDoNotTrack)&&void 0!==d&&d,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(c=this.options.platform)||void 0===c?void 0:c.name,viewer_application_version:null===(h=this.options.platform)||void 0===h?void 0:h.version,viewer_application_engine:null===(f=this.options.platform)||void 0===f?void 0:f.layout,viewer_device_name:null===(p=this.options.platform)||void 0===p?void 0:p.product,viewer_device_category:"",viewer_device_manufacturer:null===(m=this.options.platform)||void 0===m?void 0:m.manufacturer,viewer_os_family:null===(v=this.options.platform)||void 0===v||null===(g=v.os)||void 0===g?void 0:g.family,viewer_os_architecture:null===(y=this.options.platform)||void 0===y||null===(b=y.os)||void 0===b?void 0:b.architecture,viewer_os_version:null===(E=this.options.platform)||void 0===E||null===(T=E.os)||void 0===T?void 0:T.version,viewer_connection_type:eb(),page_url:null===n()||void 0===n()||null===(_=n().location)||void 0===_?void 0:_.href},this.viewerData=this.disableCookies?{}:ey()}return e=[{key:"send",value:function(e,t){var r;if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&f())return h.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!==eP(t))return h.error("A data object was expected in send() but was not provided");var i,n,o=this.disableCookies?{}:(i=ev(),n=p.now(),i.session_start&&(i.sst=i.session_start,delete i.session_start),i.session_id&&(i.sid=i.session_id,delete i.session_id),i.session_expires&&(i.sex=i.session_expires,delete i.session_expires),(!i.sex||i.sex<n)&&(i.sid=a(),i.sst=n),i.sex=n+15e5,eg(i),{session_id:i.sid,session_start:i.sst,session_expires:i.sex}),s=eO(eO(eO(eO(eO({},this.pageLevelData),t),o),this.viewerData),{},{event:e,env_key:this.envKey});s.user_id&&(s.viewer_user_id=s.user_id,delete s.user_id);var l=(null!==(r=s.mux_sample_number)&&void 0!==r?r:0)>=this.sampleRate,u=eS(this._deduplicateBeaconData(e,s));if(this.lastEventTime=this.mux.utils.now(),l)return h.info("Not sending event due to sample rate restriction",e,s,u);if(this.envKey||h.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,s,u),!this.rateLimited){if(h.info("Sending event",e,s,u),this.rateLimited=!this.eventQueue.queueEvent(e,u),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):eU.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return s.event="eventrateexceeded",u=eS(s),this.eventQueue.queueEvent(s.event,u),h.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var r=this,i={},n=t.view_id;if("-1"===n||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)i=eO({},t),n&&(this.previousBeaconData=i),n&&"viewend"===e&&(this.previousBeaconData=null);else{var a=0===e.indexOf("request");Object.entries(t).forEach(function(t){var n=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(l){s=!0,n=l}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eD(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=n[0],s=n[1];r.previousBeaconData&&(s!==r.previousBeaconData[o]||ex.indexOf(o)>-1||r.objectHasChanged(a,o,s,r.previousBeaconData[o])||r.eventRequiresKey(e,o))&&(i[o]=s,r.previousBeaconData[o]=s)})}return i}},{key:"objectHasChanged",value:function(e,t,r,i){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"===eP(r)&&"object"===eP(i)&&Object.keys(r||{}).length===Object.keys(i||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return"renditionchange"===e&&0===t.indexOf("video_source_")||!(0!==t.indexOf("ad_id")||!eN.includes(e))}}],eC(r.prototype,e),t&&eC(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function eB(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ej=(td=function e(t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e);var r=0,i=0,n=0,a=0,o=0,s=0,l=0;t.on("requestcompleted",function(e,s){var l,u,d=s.request_start,c=s.request_response_start,h=s.request_response_end,f=s.request_bytes_loaded;if(a++,c?(l=c-(null!=d?d:0),u=(null!=h?h:0)-c):u=(null!=h?h:0)-(null!=d?d:0),u>0&&f&&f>0){var p=f/u*8e3;o++,i+=f,n+=u,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,p),t.data.view_average_request_throughput=i/n*8e3,t.data.view_request_count=a,l>0&&(r+=l,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,l),t.data.view_average_request_latency=r/o)}}),t.on("requestfailed",function(e,r){a++,s++,t.data.view_request_count=a,t.data.view_request_failed_count=s}),t.on("requestcanceled",function(e,r){a++,l++,t.data.view_request_count=a,t.data.view_request_canceled_count=l})},tc&&eB(td.prototype,tc),th&&eB(td,th),Object.defineProperty(td,"prototype",{writable:!1}),td);function eH(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var eV=(tf=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t.on("before*",function(e,i){var n=i.viewer_time,a=p.now(),o=r._lastEventTime;if(r._lastEventTime=a,o&&a-o>36e5){var s=Object.keys(t.data).reduce(function(e,r){var i,n;return 0===r.indexOf("video_")?Object.assign(e,(i={},n=t.data[r],r in i?Object.defineProperty(i,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[r]=n,i)):e},{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view"),t.emit("viewinit",Object.assign({viewer_time:n},s)),t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:n}),"playing"!==e.type&&t.emit("playing",{viewer_time:n}))}})},tp&&eH(tf.prototype,tp),tm&&eH(tf,tm),Object.defineProperty(tf,"prototype",{writable:!1}),tf);function eK(e){return(eK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function eW(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function eq(e,t){return(eq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eY(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e$(e){return(e$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ez=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],eX=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eq(e,t)}(o,e);var t,r,i,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=e$(o);if(t){var i=e$(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===eK(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eY(e)}(this,e)});function o(e,t,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,o),(i=n.call(this)).DOM_CONTENT_LOADED_EVENT_END=g.domContentLoadedEventEnd(),i.NAVIGATION_START=g.navigationStart(),i.mux=e,i.id=t,(r=Object.assign({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e}},r)).data=r.data||{},r.data.property_key&&(r.data.env_key=r.data.property_key,delete r.data.property_key),h.setLevel(r.debug?"debug":"warn"),i.getPlayheadTime=r.getPlayheadTime,i.getStateData=r.getStateData||function(){return{}},i.getAdData=r.getAdData||function(){},i.minimumRebufferDuration=r.minimumRebufferDuration,i.sustainedRebufferThreshold=r.sustainedRebufferThreshold,i.playbackHeartbeatTime=r.playbackHeartbeatTime,i.disableRebufferTracking=r.disableRebufferTracking,i.disableRebufferTracking&&i.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),i.disablePlayheadRebufferTracking=r.disablePlayheadRebufferTracking,i.errorTranslator=r.errorTranslator,i.playbackEventDispatcher=new eF(e,r.data.env_key,r),i.data={player_instance_id:a(),mux_sample_rate:r.sampleRate,beacon_domain:r.beaconCollectionDomain?r.beaconCollectionDomain:r.beaconDomain},i.data.view_sequence_number=1,i.data.player_sequence_number=1,i.oldEmit=i.emit,i.emit=function(e,t){t=Object.assign({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var i,s=(function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}).bind(eY(i));i.on("viewinit",function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)});var l=(function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}).bind(eY(i));if(i.on("videochange",function(e,t){l(t)}),i.on("programchange",function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),l(Object.assign(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")}),i.on("fragmentchange",function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart}),i.on("destroy",i.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var u=function(){var e=void 0!==i.data.view_start;i.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&i.mux.WINDOW_HIDDEN&&(i.data.player_is_paused||i.emit("hb"))};window.addEventListener("visibilitychange",u,!1);var d=function(e){e.persisted||i.destroy()};window.addEventListener("pagehide",d,!1),i.on("destroy",function(){window.removeEventListener("visibilitychange",u),window.removeEventListener("pagehide",d)})}return i.on("playerready",function(e,t){Object.assign(this.data,t)}),ez.forEach(function(e){i.on(e,function(t,r){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,r),this._sanitizeData()}),i.on("after"+e,function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)})}),i.on("viewend",function(e,t){Object.assign(i.data,t)}),i.one("playerready",function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time}),i.longResumeTracker=new eV(eY(i)),i.errorTracker=new B(eY(i)),new ec(eY(i)),i.seekingTracker=new et(eY(i)),i.playheadTime=new W(eY(i)),i.playbackHeartbeat=new U(eY(i)),new J(eY(i)),i.watchTimeTracker=new H(eY(i)),new K(eY(i)),i.adTracker=new es(eY(i)),new z(eY(i)),new Y(eY(i)),new Q(eY(i)),new eu(eY(i)),new ej(eY(i)),r.hlsjs&&i.addHLSJS(r),r.dashjs&&i.addDashJS(r),i.emit("viewinit",r.data),i}return r=[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach(function(e){t[e]=void 0}),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var r,i=function(e){if(Array.isArray(e))return e}(r=v(t.video_source_url))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(l){s=!0,n=l}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return a}}(r,2)||function(e,t){if(e){if("string"==typeof e)return eG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eG(e,t):void 0}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=i[0],a=i[1];t.video_source_domain=a,t.video_source_hostname=n}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach(function(t){var r=parseInt(e.data[t],10);e.data[t]=isNaN(r)?void 0:r}),["player_source_url","video_source_url"].forEach(function(t){if(e.data[t]){var r=e.data[t].toLowerCase();0!==r.indexOf("data:")&&0!==r.indexOf("blob:")||(e.data[t]="MSE style URL")}})}},{key:"_resetVideoData",value:function(e,t){var r=this;Object.keys(this.data).forEach(function(e){0===e.indexOf("video_")&&delete r.data[e]})}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("view_")&&delete e.data[t]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(e,t){delete this.data.player_error_code,delete this.data.player_error_message}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=a(),r=function(){t===e.data.view_id&&y(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",r):r()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this.errorTracker.viewErrored||(this._heartBeatTimeout=window.setTimeout(function(){e.data.player_is_paused||e.emit("hb")},1e4))}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,r){var i=arguments.length>4?arguments[4]:void 0,n=e.log,a=e.utils.secondsToMs,o=function(e){var t,r=parseInt(i.version);return 1===r&&null!==e.programDateTime&&(t=e.programDateTime),0===r&&null!==e.pdt&&(t=e.pdt),t};if(g.exists()){var s=function(r,i){return e.emit(t,r,i)},l=function(e,t){var r=t.levels,i=t.audioTracks,n=t.url,a=t.stats,o=t.networkDetails,l=t.sessionData,u={},d={};r.forEach(function(e,t){u[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}}),i.forEach(function(e,t){d[t]={name:e.name,language:e.lang,bitrate:e.bitrate}});var c=w(a),h=c.bytesLoaded,f=c.requestStart,p=c.responseStart,v=c.responseEnd;s("requestcompleted",k(k({},A(l)),{},{request_event_type:e,request_bytes_loaded:h,request_start:f,request_response_start:p,request_response_end:v,request_type:"manifest",request_hostname:m(n),request_response_headers:L(o),request_rendition_lists:{media:u,audio:d,video:{}}}))};r.on(i.Events.MANIFEST_LOADED,l);var u=function(e,t){var r=t.details,i=t.level,n=t.networkDetails,l=w(t.stats),u=l.bytesLoaded,d=l.requestStart,c=l.responseStart,h=l.responseEnd,f=r.fragments[r.fragments.length-1],p=o(f)+a(f.duration);s("requestcompleted",{request_event_type:e,request_bytes_loaded:u,request_start:d,request_response_start:c,request_response_end:h,request_current_level:i,request_type:"manifest",request_hostname:m(r.url),request_response_headers:L(n),video_holdback:r.holdBack&&a(r.holdBack),video_part_holdback:r.partHoldBack&&a(r.partHoldBack),video_part_target_duration:r.partTarget&&a(r.partTarget),video_target_duration:r.targetduration&&a(r.targetduration),video_source_is_live:r.live,player_manifest_newest_program_time:isNaN(p)?void 0:p})};r.on(i.Events.LEVEL_LOADED,u);var d=function(e,t){var r=t.details,i=t.networkDetails,n=w(t.stats);s("requestcompleted",{request_event_type:e,request_bytes_loaded:n.bytesLoaded,request_start:n.requestStart,request_response_start:n.responseStart,request_response_end:n.responseEnd,request_type:"manifest",request_hostname:m(r.url),request_response_headers:L(i)})};r.on(i.Events.AUDIO_TRACK_LOADED,d);var c=function(e,t){var i=t.stats,n=t.networkDetails,a=t.frag,o=w(i=i||a.stats),l=o.bytesLoaded,u=o.requestStart,d=o.responseStart,c=o.responseEnd,h=n?L(n):void 0,f={request_event_type:e,request_bytes_loaded:l,request_start:u,request_response_start:d,request_response_end:c,request_hostname:n?m(n.responseURL):void 0,request_id:h?_(h):void 0,request_response_headers:h,request_media_duration:a.duration,request_url:null==n?void 0:n.responseURL};"main"===a.type?(f.request_type="media",f.request_current_level=a.level,f.request_video_width=(r.levels[a.level]||{}).width,f.request_video_height=(r.levels[a.level]||{}).height,f.request_labeled_bitrate=(r.levels[a.level]||{}).bitrate):f.request_type=a.type,s("requestcompleted",f)};r.on(i.Events.FRAG_LOADED,c);var h=function(e,t){var r=t.frag,i=r.start;s("fragmentchange",{currentFragmentPDT:o(r),currentFragmentStart:a(i)})};r.on(i.Events.FRAG_CHANGED,h);var f=function(e,t){var r,n=t.type,a=t.details,o=t.response,l=t.fatal,u=t.frag,d=t.networkDetails,c=(null==u?void 0:u.url)||t.url||"",h=d?L(d):void 0;a!==i.ErrorDetails.MANIFEST_LOAD_ERROR&&a!==i.ErrorDetails.MANIFEST_LOAD_TIMEOUT&&a!==i.ErrorDetails.FRAG_LOAD_ERROR&&a!==i.ErrorDetails.FRAG_LOAD_TIMEOUT&&a!==i.ErrorDetails.LEVEL_LOAD_ERROR&&a!==i.ErrorDetails.LEVEL_LOAD_TIMEOUT&&a!==i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&a!==i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT&&a!==i.ErrorDetails.SUBTITLE_LOAD_ERROR&&a!==i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT&&a!==i.ErrorDetails.KEY_LOAD_ERROR&&a!==i.ErrorDetails.KEY_LOAD_TIMEOUT||s("requestfailed",{request_error:a,request_url:c,request_hostname:m(c),request_id:h?_(h):void 0,request_type:a===i.ErrorDetails.FRAG_LOAD_ERROR||a===i.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":a===i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||a===i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":a===i.ErrorDetails.SUBTITLE_LOAD_ERROR||a===i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":a===i.ErrorDetails.KEY_LOAD_ERROR||a===i.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==o?void 0:o.code,request_error_text:null==o?void 0:o.text}),l&&s("error",{player_error_code:n,player_error_message:a,player_error_context:"".concat(c?"url: ".concat(c,"\n"):"")+"".concat(o&&(o.code||o.text)?"response: ".concat(o.code,", ").concat(o.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(r=t.err)||void 0===r?void 0:r.message,"\n"):"")})};r.on(i.Events.ERROR,f);var p=function(e,t){var r=t.frag,i=r&&r._url||"";s("requestcanceled",{request_event_type:e,request_url:i,request_type:"media",request_hostname:m(i)})};r.on(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,p);var v=function(e,t){var i=t.level,a=r.levels[i];if(a&&a.attrs&&a.attrs.BANDWIDTH){var o,l=a.attrs.BANDWIDTH,u=parseFloat(a.attrs["FRAME-RATE"]);isNaN(u)||(o=u),l?s("renditionchange",{video_source_fps:o,video_source_bitrate:l,video_source_width:a.width,video_source_height:a.height,video_source_rendition_name:a.name,video_source_codec:null==a?void 0:a.videoCodec}):n.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};r.on(i.Events.LEVEL_SWITCHED,v),r._stopMuxMonitor=function(){r.off(i.Events.MANIFEST_LOADED,l),r.off(i.Events.LEVEL_LOADED,u),r.off(i.Events.AUDIO_TRACK_LOADED,d),r.off(i.Events.FRAG_LOADED,c),r.off(i.Events.FRAG_CHANGED,h),r.off(i.Events.ERROR,f),r.off(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,p),r.off(i.Events.LEVEL_SWITCHED,v),r.off(i.Events.DESTROYING,r._stopMuxMonitor),delete r._stopMuxMonitor},r.on(i.Events.DESTROYING,r._stopMuxMonitor)}else n.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){var e;this.hlsjs&&((e=this.hlsjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,function(e,t,r){var i=e.log;if(r&&r.on){var n=function(r,i){return e.emit(t,r,i)},a=function(e){var t=e.type,r=(e.data||{}).url;n("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:m(r),request_url:r})};r.on("manifestLoaded",a);var o={},s=function(e){var t=e.type,i=e.fragmentModel,a=(e.chunk||{}).mediaInfo||{},s=a.type,l=a.bitrateList,u={};(l=l||[]).forEach(function(e,t){u[t]={},u[t].width=e.width,u[t].height=e.height,u[t].bitrate=e.bandwidth,u[t].attrs={}}),"video"===s?o.video=u:"audio"===s?o.audio=u:o.media=u;var d=R(i,r),c=d.requestStart,h=d.requestResponseStart,f=d.requestResponseEnd,p=d.requestResponseHeaders,m=d.requestMediaDuration,v=d.requestHostname,g=d.requestUrl;n("requestcompleted",{request_event_type:t,request_start:c,request_response_start:h,request_response_end:f,request_bytes_loaded:-1,request_type:s+"_init",request_response_headers:p,request_hostname:v,request_id:d.requestId,request_url:g,request_media_duration:m,request_rendition_lists:o})};r.on("initFragmentLoaded",s);var l=function(e){var t=e.type,i=e.fragmentModel,a=e.chunk||{},o=a.mediaInfo,s=a.start,l=(o||{}).type,u=R(i,r),d=u.requestStart,c=u.requestResponseStart,h=u.requestResponseEnd,f=u.requestBytesLoaded,p=u.requestResponseHeaders,m=u.requestMediaDuration,v=u.requestHostname,g=u.requestUrl,y=u.requestId,b=O(l,r),E=b.currentLevel,T=b.renditionWidth,_=b.renditionHeight,A=b.renditionBitrate;n("requestcompleted",{request_event_type:t,request_start:d,request_response_start:c,request_response_end:h,request_bytes_loaded:f,request_type:l,request_response_headers:p,request_hostname:v,request_id:y,request_url:g,request_media_start_time:s,request_media_duration:m,request_current_level:E,request_labeled_bitrate:A,request_video_width:T,request_video_height:_})};r.on("mediaFragmentLoaded",l);var u={video:void 0,audio:void 0,totalBitrate:void 0},d=function(){if(u.video&&"number"==typeof u.video.bitrate){if(u.video.width&&u.video.height){var e=u.video.bitrate;return u.audio&&"number"==typeof u.audio.bitrate&&(e+=u.audio.bitrate),e!==u.totalBitrate?(u.totalBitrate=e,{video_source_bitrate:e,video_source_height:u.video.height,video_source_width:u.video.width,video_source_codec:P(u.video.codec)}):void 0}i.warn("have bitrate info for video but missing width/height")}},c=function(e,t,a){if("number"==typeof e.newQuality){var o=e.mediaType;if("audio"===o||"video"===o){var s=r.getBitrateInfoListFor(o).find(function(t){return t.qualityIndex===e.newQuality});if(s&&"number"==typeof s.bitrate){u[o]=D(D({},s),{},{codec:r.getCurrentTrackFor(o).codec});var l=d();l&&n("renditionchange",l)}else i.warn("missing bitrate info for ".concat(o))}}else i.warn("missing evt.newQuality in qualityChangeRendered event",e)};r.on("qualityChangeRendered",c);var h=function(e){var t=e.request,r=e.mediaType;n("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:r,request_hostname:m(t.url)})};r.on("fragmentLoadingAbandoned",h);var f=function(e){var t,r,i=e.error,a=(null==i||null===(t=i.data)||void 0===t?void 0:t.request)||{},o=(null==i||null===(r=i.data)||void 0===r?void 0:r.response)||{};27===(null==i?void 0:i.code)&&n("requestfailed",{request_error:a.type+"_"+a.action,request_url:a.url,request_hostname:m(a.url),request_type:a.mediaType,request_error_code:o.status,request_error_text:o.statusText});var s="".concat(null!=a&&a.url?"url: ".concat(a.url,"\n"):"")+"".concat(null!=o&&o.status||null!=o&&o.statusText?"response: ".concat(null==o?void 0:o.status,", ").concat(null==o?void 0:o.statusText,"\n"):"");n("error",{player_error_code:null==i?void 0:i.code,player_error_message:null==i?void 0:i.message,player_error_context:s})};r.on("error",f),r._stopMuxMonitor=function(){r.off("manifestLoaded",a),r.off("initFragmentLoaded",s),r.off("mediaFragmentLoaded",l),r.off("qualityChangeRendered",c),r.off("error",f),r.off("fragmentLoadingAbandoned",h),delete r._stopMuxMonitor}}else i.warn("Invalid dash.js player reference. Monitoring blocked.")}(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){var e;this.dashjs&&((e=this.dashjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.dashjs=void 0)}}],eW(o.prototype,r),i&&eW(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(x),eQ=r(153),eZ=r.n(eQ);function eJ(e){return(eJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(l){s=!0,n=l}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e1(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}var e2,e5,e4,e3,e8,e6,e7,e9,te,tt,tr,ti,tn,ta,to,ts,tl,tu,td,tc,th,tf,tp,tm,tv,tg=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],ty={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};n()&&n().WeakMap&&(tv=new WeakMap);var tb=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};tb.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},tb.prototype.processLine=function(e){var t=e.indexOf(":"),r=tw(e,t),i=r[0],n=2===r.length?t_(r[1]):void 0;if("#"!==i[0])this.currentUri.uri=i,this.manifest.segments.push(this.currentUri),!this.manifest.targetDuration||"duration"in this.currentUri||(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(i){case"#EXT-X-TARGETDURATION":if(!isFinite(n)||n<0)return;this.manifest.targetDuration=n,this.setHoldBack();break;case"#EXT-X-PART-INF":tE(this.manifest,r),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case"#EXT-X-SERVER-CONTROL":tE(this.manifest,r),this.setHoldBack();break;case"#EXTINF":0===n?this.currentUri.duration=.01:n>0&&(this.currentUri.duration=n);break;case"#EXT-X-PROGRAM-DATE-TIME":var a=new Date(n);this.manifest.dateTimeString||(this.manifest.dateTimeString=n,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=n,this.currentUri.dateTimeObject=a;break;case"#EXT-X-VERSION":tE(this.manifest,r);break;case"#EXT-X-SESSION-DATA":var o=A(tL(r[1]));Object.assign(this.manifest.sessionData,o)}},tb.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,r=e.targetDuration,i=e.partTargetDuration;if(t){var n="holdBack",a="partHoldBack",o=r&&3*r,s=i&&2*i;r&&!t.hasOwnProperty(n)&&(t[n]=o),o&&t[n]<o&&(t[n]=o),i&&!t.hasOwnProperty(a)&&(t[a]=3*i),i&&t[a]<s&&(t[a]=s)}};var tE=function(e,t){var r,i=tT(t[0].replace("#EXT-X-",""));tk(t[1])?(r={},r=Object.assign(tS(t[1]),r)):r=t_(t[1]),e[i]=r},tT=function(e){return e.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},t_=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},tA=function(e){var t={},r=e.split("=");return r.length>1&&(t[tT(r[0])]=t_(r[1])),t},tS=function(e){for(var t=e.split(","),r={},i=0;t.length>i;i++)r=Object.assign(tA(t[i]),r);return r},tk=function(e){return e.indexOf("=")>-1},tw=function(e,t){return -1===t?[e]:[e.substring(0,t),e.substring(t+1)]},tL=function(e){var t={};if(e){var r=e.search(",");return[e.slice(0,r),e.slice(r+1)].forEach(function(e,r){for(var i=e.replace(/['"]+/g,"").split("="),n=0;n<i.length;n++)"DATA-ID"===i[n]&&(t["DATA-ID"]=i[1-n]),"VALUE"===i[n]&&(t.VALUE=i[1-n])}),{data:t}}},tI={safeCall:function(e,t,r,i){var n=i;if(e&&"function"==typeof e[t])try{n=e[t].apply(e,r)}catch(a){h.info("safeCall error",a)}return n},safeIncrement:y,getComputedStyle:function(e,t){var r;if(e&&t&&n()&&"function"==typeof n().getComputedStyle)return tv&&tv.has(e)&&(r=tv.get(e)),r||(r=n().getComputedStyle(e,null),tv&&tv.set(e,r)),r.getPropertyValue(t)},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:T,cdnHeadersToRequestId:_,extractHostnameAndDomain:v,extractHostname:m,manifestParser:tb,generateShortID:o,generateUUID:a,now:p.now};function tD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}var tR={},tO=function e(t){var r=arguments;"string"==typeof t?e.hasOwnProperty(t)?n().setTimeout(function(){r=Array.prototype.splice.call(r,1),e[t].apply(null,r)},0):h.warn("`"+t+"` is an unknown task"):"function"==typeof t?n().setTimeout(function(){t(e)},0):h.warn("`"+t+"` is invalid.")},tP={loaded:p.now(),NAME:"mux-embed",VERSION:"4.24.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,r){var i=e0(l(t),3),n=i[0],a=i[1],o=i[2],s=e.log,u=e.utils.getComputedStyle,d=e.utils.secondsToMs;if(!n)return s.error("No element was found with the `"+a+"` query selector.");if("video"!==o&&"audio"!==o)return s.error("The element of `"+a+"` was not a media element.");n.mux&&(n.mux.destroy(),delete n.mux,s.warn("Already monitoring this video element, replacing existing event listeners")),(r=Object.assign({automaticErrorTracking:!0},r)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},r.data),r.getPlayheadTime=function(){return d(n.currentTime)},r.getStateData=function(){var e,t,i=this.hlsjs&&this.hlsjs.url,a=this.dashjs&&eJ("function"===this.dashjs.getSource)&&this.dashjs.getSource(),o={player_is_paused:n.paused,player_playhead_time:d(n.currentTime),player_width:parseInt(u(n,"width")),player_height:parseInt(u(n,"height")),player_autoplay_on:n.autoplay,player_preload_on:n.preload,player_language_code:n.lang,player_is_fullscreen:eZ()&&!!(eZ().fullscreenElement||eZ().webkitFullscreenElement||eZ().mozFullScreenElement||eZ().msFullscreenElement),video_poster_url:n.poster,video_source_url:i||a||n.currentSrc,video_source_duration:d(n.duration),video_source_height:n.videoHeight,video_source_width:n.videoWidth,view_dropped_frame_count:null===(e=n)||void 0===e||null===(t=e.getVideoPlaybackQuality)||void 0===t?void 0:t.call(e).droppedVideoFrames},s=r.getPlayheadTime();if(n.getStartDate&&s>0){var l=n.getStartDate();if(l&&"function"==typeof l.getTime&&l.getTime()){var c=l.getTime();if(o.player_program_time=c+s,n.seekable.length>0){var h=c+n.seekable.end(n.seekable.length-1);o.player_live_edge_program_time=h}}}return o},n.mux=n.mux||{},n.mux.deleted=!1,n.mux.emit=function(t,r){e.emit(a,t,r)};var c=function(){s.error("The monitor for this video element has already been destroyed.")};n.mux.destroy=function(){Object.keys(n.mux.listeners).forEach(function(e){n.removeEventListener(e,n.mux.listeners[e],!1)}),delete n.mux.listeners,n.mux.destroy=c,n.mux.swapElement=c,n.mux.emit=c,n.mux.addHLSJS=c,n.mux.addDashJS=c,n.mux.removeHLSJS=c,n.mux.removeDashJS=c,n.mux.deleted=!0,e.emit(a,"destroy")},n.mux.swapElement=function(t){var r=e0(l(t),3),i=r[0],a=r[1],o=r[2];return i?"video"!==o&&"audio"!==o?e.log.error("The element of `"+a+"` was not a media element."):(i.muxId=n.muxId,delete n.muxId,i.mux=i.mux||{},i.mux.listeners=Object.assign({},n.mux.listeners),delete n.mux.listeners,Object.keys(i.mux.listeners).forEach(function(e){n.removeEventListener(e,i.mux.listeners[e],!1),i.addEventListener(e,i.mux.listeners[e],!1)}),i.mux.swapElement=n.mux.swapElement,i.mux.destroy=n.mux.destroy,delete n.mux,void(n=i)):e.log.error("No element was found with the `"+a+"` query selector.")},n.mux.addHLSJS=function(t){e.addHLSJS(a,t)},n.mux.addDashJS=function(t){e.addDashJS(a,t)},n.mux.removeHLSJS=function(){e.removeHLSJS(a)},n.mux.removeDashJS=function(){e.removeDashJS(a)},e.init(a,r),e.emit(a,"playerready"),n.paused||(e.emit(a,"play"),n.readyState>2&&e.emit(a,"playing")),n.mux.listeners={},tg.forEach(function(t){("error"!==t||r.automaticErrorTracking)&&(n.mux.listeners[t]=function(){var r={};if("error"===t){if(!n.error||1===n.error.code)return;r.player_error_code=n.error.code,r.player_error_message=ty[n.error.code]||n.error.message}e.emit(a,t,r)},n.addEventListener(t,n.mux.listeners[t],!1))})}(tO,e,t)},destroyMonitor:function(e){var t,r=(function(e){if(Array.isArray(e))return e}(t=l(e))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(l){s=!0,n=l}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return a}}(t,1)||function(e,t){if(e){if("string"==typeof e)return tD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tD(e,t):void 0}}(t,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];r&&r.mux&&"function"==typeof r.mux.destroy?r.mux.destroy():h.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var r=s(e);tR[r]?tR[r].addHLSJS(t):h.error("A monitor for `"+r+"` has not been initialized.")},addDashJS:function(e,t){var r=s(e);tR[r]?tR[r].addDashJS(t):h.error("A monitor for `"+r+"` has not been initialized.")},removeHLSJS:function(e){var t=s(e);tR[t]?tR[t].removeHLSJS():h.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=s(e);tR[t]?tR[t].removeDashJS():h.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){f()&&t&&t.respectDoNotTrack&&h.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var r=s(e);tR[r]=new eX(tO,r,t)},emit:function(e,t,r){var i=s(e);tR[i]?(tR[i].emit(t,r),"destroy"===t&&delete tR[i]):h.error("A monitor for `"+i+"` has not been initialized.")},checkDoNotTrack:f,log:h,utils:tI,events:{PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled"},WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(tO,tP),void 0!==n()&&"function"==typeof n().addEventListener&&n().addEventListener("pagehide",function(e){e.persisted||(tO.WINDOW_UNLOADING=!0)},!1);var tC=tO},655:function(e,t,r){var i;function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e);/*!
 * JavaScript Cookie v2.1.3
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */ }!function(a){var o=!1;if(void 0===(i="function"==typeof a?a.call(t,r,t,e):a)||(e.exports=i),o=!0,"object"===n(t)&&(e.exports=a(),o=!0),!o){var s=window.Cookies,l=window.Cookies=a();l.noConflict=function(){return window.Cookies=s,l}}}(function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var i in r)t[i]=r[i]}return t};return function t(r){function i(t,n,a){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},i.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}try{o=JSON.stringify(n),/^[\{\[]/.test(o)&&(n=o)}catch(l){}return n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",n,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}t||(o={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,c=0;c<u.length;c++){var h=u[c].split("="),f=h.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var p=h[0].replace(d,decodeURIComponent);if(f=r.read?r.read(f,p):r(f,p)||f.replace(d,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(m){}if(t===p){o=f;break}t||(o[p]=f)}catch(v){}}return o}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,r){i(t,"",e(r,{expires:-1}))},i.withConverter=t,i}(function(){})})},153:function(e,t,r){var i,n=void 0!==r.g?r.g:"undefined"!=typeof window?window:{},a=r(558);"undefined"!=typeof document?i=document:(i=n["__GLOBAL_DOCUMENT_CACHE@4"])||(i=n["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=i},48:function(e,t,r){var i;i="undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},e.exports=i},640:function(e,t,r){var i,n;void 0===(n="function"==typeof(i=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function n(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(i){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(t,r){for(var n=0;n<i.length;n++){var a=i[n];this[a]=n<t?e:this.methodFactory(a,t,r)}this.log=this.debug}function s(e,r,i){return function(){typeof console!==t&&(o.call(this,r,i),this[e].apply(this,arguments))}}function l(i,o,l){var u;return"debug"===(u=i)&&(u="log"),typeof console!==t&&("trace"===u&&r?a:void 0!==console[u]?n(console,u):void 0!==console.log?n(console,"log"):e)||s.apply(this,arguments)}function u(e,r,n){var a,s=this;r=null==r?"WARN":r;var u="loglevel";function d(){var e;if(typeof window!==t&&u){try{e=window.localStorage[u]}catch(r){}if(typeof e===t)try{var i=window.document.cookie,n=i.indexOf(encodeURIComponent(u)+"=");-1!==n&&(e=/^([^;]+)/.exec(i.slice(n))[1])}catch(a){}return void 0===s.levels[e]&&(e=void 0),e}}"string"==typeof e?u+=":"+e:"symbol"==typeof e&&(u=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=n||l,s.getLevel=function(){return a},s.setLevel=function(r,n){if("string"==typeof r&&void 0!==s.levels[r.toUpperCase()]&&(r=s.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(a=r,!1!==n&&function(e){var r=(i[e]||"silent").toUpperCase();if(typeof window!==t&&u){try{return void(window.localStorage[u]=r)}catch(n){}try{window.document.cookie=encodeURIComponent(u)+"="+r+";"}catch(a){}}}(r),o.call(s,r,e),typeof console===t&&r<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){r=e,d()||s.setLevel(e,!1)},s.resetLevel=function(){s.setLevel(r,!1),function(){if(typeof window!==t&&u){try{return void window.localStorage.removeItem(u)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(r){}}}()},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var c=d();null==c&&(c=r),s.setLevel(c,!1)}var d=new u,c={};d.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=c[e];return t||(t=c[e]=new u(e,d.getLevel(),d.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=h),d},d.getLoggers=function(){return c},d.default=d,d})?i.call(t,r,t,e):i)||(e.exports=n)},375:function(e,t){"use strict";var r=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function n(e){try{return encodeURIComponent(e)}catch(t){return null}}t.stringify=function(e,t){var i,a,o=[];for(a in"string"!=typeof(t=t||"")&&(t="?"),e)if(r.call(e,a)){if((i=e[a])||null!=i&&!isNaN(i)||(i=""),a=n(a),i=n(i),null===a||null===i)continue;o.push(a+"="+i)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,n={};t=r.exec(e);){var a=i(t[1]),o=i(t[2]);null===a||null===o||a in n||(n[a]=o)}return n}},558:function(){}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,r),a.exports}return r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r(80)}()},60722:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),o=(n=r(69590))&&n.__esModule?n:{default:n},s=r(85741),l=r(38045);function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,e);var t,r,n,s=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=p(u);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:f(this)});function u(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return m(f(e=s.call.apply(s,[this].concat(r))),"mounted",!1),m(f(e),"isReady",!1),m(f(e),"isPlaying",!1),m(f(e),"isLoading",!0),m(f(e),"loadOnReady",null),m(f(e),"startOnPlay",!0),m(f(e),"seekOnPlay",null),m(f(e),"onDurationCalled",!1),m(f(e),"handlePlayerMount",function(t){if(e.player){e.progress();return}e.player=t,e.player.load(e.props.url),e.progress()}),m(f(e),"getInternalPlayer",function(t){return e.player?e.player[t]:null}),m(f(e),"progress",function(){if(e.props.url&&e.player&&e.isReady){var t=e.getCurrentTime()||0,r=e.getSecondsLoaded(),i=e.getDuration();if(i){var n={playedSeconds:t,played:t/i};null!==r&&(n.loadedSeconds=r,n.loaded=r/i),(n.playedSeconds!==e.prevPlayed||n.loadedSeconds!==e.prevLoaded)&&e.props.onProgress(n),e.prevPlayed=n.playedSeconds,e.prevLoaded=n.loadedSeconds}}e.progressTimeout=setTimeout(e.progress,e.props.progressFrequency||e.props.progressInterval)}),m(f(e),"handleReady",function(){if(e.mounted){e.isReady=!0,e.isLoading=!1;var t=e.props,r=t.onReady,i=t.playing,n=t.volume,a=t.muted;r(),a||null===n||e.player.setVolume(n),e.loadOnReady?(e.player.load(e.loadOnReady,!0),e.loadOnReady=null):i&&e.player.play(),e.handleDurationCheck()}}),m(f(e),"handlePlay",function(){e.isPlaying=!0,e.isLoading=!1;var t=e.props,r=t.onStart,i=t.onPlay,n=t.playbackRate;e.startOnPlay&&(e.player.setPlaybackRate&&1!==n&&e.player.setPlaybackRate(n),r(),e.startOnPlay=!1),i(),e.seekOnPlay&&(e.seekTo(e.seekOnPlay),e.seekOnPlay=null),e.handleDurationCheck()}),m(f(e),"handlePause",function(t){e.isPlaying=!1,e.isLoading||e.props.onPause(t)}),m(f(e),"handleEnded",function(){var t=e.props,r=t.activePlayer,i=t.loop,n=t.onEnded;r.loopOnEnded&&i&&e.seekTo(0),i||(e.isPlaying=!1,n())}),m(f(e),"handleError",function(){var t;e.isLoading=!1,(t=e.props).onError.apply(t,arguments)}),m(f(e),"handleDurationCheck",function(){clearTimeout(e.durationCheckTimeout);var t=e.getDuration();t?e.onDurationCalled||(e.props.onDuration(t),e.onDurationCalled=!0):e.durationCheckTimeout=setTimeout(e.handleDurationCheck,100)}),m(f(e),"handleLoaded",function(){e.isLoading=!1}),e}return r=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.player){var r=this.props,i=r.url,n=r.playing,a=r.volume,s=r.muted,u=r.playbackRate,d=r.pip,c=r.loop,h=r.activePlayer,f=r.disableDeferredLoading;if(!(0,o.default)(e.url,i)){if(this.isLoading&&!h.forceLoad&&!f&&!(0,l.isMediaStream)(i)){console.warn("ReactPlayer: the attempt to load ".concat(i," is being deferred until the player has loaded")),this.loadOnReady=i;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(i,this.isReady)}e.playing||!n||this.isPlaying||this.player.play(),e.playing&&!n&&this.isPlaying&&this.player.pause(),!e.pip&&d&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!d&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==a&&null!==a&&this.player.setVolume(a),e.muted!==s&&(s?this.player.mute():(this.player.unmute(),null!==a&&setTimeout(function(){return t.player.setVolume(a)}))),e.playbackRate!==u&&this.player.setPlaybackRate&&this.player.setPlaybackRate(u),e.loop!==c&&this.player.setLoop&&this.player.setLoop(c)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(e,t){var r=this;if(!this.isReady){0!==e&&(this.seekOnPlay=e,setTimeout(function(){r.seekOnPlay=null},5e3));return}if(t?"fraction"===t:e>0&&e<1){var i=this.player.getDuration();if(!i){console.warn("ReactPlayer: could not seek using fraction \xa0duration not yet available");return}this.player.seekTo(i*e);return}this.player.seekTo(e)}},{key:"render",value:function(){var e=this.props.activePlayer;return e?a.default.createElement(e,d({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}],c(u.prototype,r),n&&c(u,n),u}(a.Component);t.default=v,m(v,"displayName","Player"),m(v,"propTypes",s.propTypes),m(v,"defaultProps",s.defaultProps)},83855:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(r(67294));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f="64px",p={},m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(m,e);var t,r,a,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=c(m);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:d(this)});function m(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,m);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return h(d(e=o.call.apply(o,[this].concat(r))),"mounted",!1),h(d(e),"state",{image:null}),h(d(e),"handleKeyPress",function(t){("Enter"===t.key||" "===t.key)&&e.props.onClick()}),e}return r=[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.url,i=t.light;(e.url!==r||e.light!==i)&&this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(e){var t=this,r=e.url,i=e.light,a=e.oEmbedUrl;if(!n.default.isValidElement(i)){if("string"==typeof i){this.setState({image:i});return}if(p[r]){this.setState({image:p[r]});return}return this.setState({image:null}),window.fetch(a.replace("{url}",r)).then(function(e){return e.json()}).then(function(e){if(e.thumbnail_url&&t.mounted){var i=e.thumbnail_url.replace("height=100","height=480");t.setState({image:i}),p[r]=i}})}}},{key:"render",value:function(){var e=this.props,t=e.light,r=e.onClick,i=e.playIcon,a=e.previewTabIndex,o=this.state.image,l=n.default.isValidElement(t),u={display:"flex",alignItems:"center",justifyContent:"center"},d={preview:s({width:"100%",height:"100%",backgroundImage:o&&!l?"url(".concat(o,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},u),shadow:s({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:f,width:f,height:f,position:l?"absolute":void 0},u),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},c=n.default.createElement("div",{style:d.shadow,className:"react-player__shadow"},n.default.createElement("div",{style:d.playIcon,className:"react-player__play-icon"}));return n.default.createElement("div",{style:d.preview,className:"react-player__preview",onClick:r,tabIndex:a,onKeyPress:this.handleKeyPress},l?t:null,i||c)}}],l(m.prototype,r),a&&l(m,a),m}(n.Component);t.default=m},70390:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createReactPlayer=void 0;var i=A(r(67294)),n=d(r(9996)),a=d(r(30845)),o=d(r(69590)),s=r(85741),l=r(38045),u=d(r(60722));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){T(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function m(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function g(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _=function(){return e},e}function A(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=_();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=i?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}var S=(0,i.lazy)(function(){return Promise.resolve().then(function(){return A(r(83855))})}),k="undefined"!=typeof window&&window.document,w=void 0!==r.g&&r.g.window&&r.g.window.document,L=Object.keys(s.propTypes),I=k||w?i.Suspense:function(){return null},D=[];t.createReactPlayer=function(e,t){var r,d;return d=r=function(r){(function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)})(A,r);var d,h,v,_=(d=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t,r=E(A);if(d){var i=E(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return(e=t)&&("object"===c(e)||"function"==typeof e)?e:b(this)});function A(){var r;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,A);for(var o=arguments.length,d=Array(o),c=0;c<o;c++)d[c]=arguments[c];return T(b(r=_.call.apply(_,[this].concat(d))),"state",{showPreview:!!r.props.light}),T(b(r),"references",{wrapper:function(e){r.wrapper=e},player:function(e){r.player=e}}),T(b(r),"handleClickPreview",function(e){r.setState({showPreview:!1}),r.props.onClickPreview(e)}),T(b(r),"showPreview",function(){r.setState({showPreview:!0})}),T(b(r),"getDuration",function(){return r.player?r.player.getDuration():null}),T(b(r),"getCurrentTime",function(){return r.player?r.player.getCurrentTime():null}),T(b(r),"getSecondsLoaded",function(){return r.player?r.player.getSecondsLoaded():null}),T(b(r),"getInternalPlayer",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return r.player?r.player.getInternalPlayer(e):null}),T(b(r),"seekTo",function(e,t){if(!r.player)return null;r.player.seekTo(e,t)}),T(b(r),"handleReady",function(){r.props.onReady(b(r))}),T(b(r),"getActivePlayer",(0,a.default)(function(r){for(var i=0,n=[].concat(D,m(e));i<n.length;i++){var a=n[i];if(a.canPlay(r))return a}return t||null})),T(b(r),"getConfig",(0,a.default)(function(e,t){var i=r.props.config;return n.default.all([s.defaultProps.config,s.defaultProps.config[t]||{},i,i[t]||{}])})),T(b(r),"getAttributes",(0,a.default)(function(e){return(0,l.omit)(r.props,L)})),T(b(r),"renderActivePlayer",function(e){if(!e)return null;var t=r.getActivePlayer(e);if(!t)return null;var n=r.getConfig(e,t.key);return i.default.createElement(u.default,p({},r.props,{key:t.key,ref:r.references.player,config:n,activePlayer:t.lazyPlayer||t,onReady:r.handleReady}))}),r}return h=[{key:"shouldComponentUpdate",value:function(e,t){return!(0,o.default)(this.props,e)||!(0,o.default)(this.state,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props.light;!e.light&&t&&this.setState({showPreview:!0}),e.light&&!t&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(e){if(!e)return null;var t=this.props,r=t.light,n=t.playIcon,a=t.previewTabIndex,o=t.oEmbedUrl;return i.default.createElement(S,{url:e,light:r,playIcon:n,previewTabIndex:a,oEmbedUrl:o,onClick:this.handleClickPreview})}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.style,n=e.width,a=e.height,o=e.fallback,s=e.wrapper,l=this.state.showPreview,u=this.getAttributes(t),d="string"==typeof s?this.references.wrapper:void 0;return i.default.createElement(s,p({ref:d,style:f(f({},r),{},{width:n,height:a})},u),i.default.createElement(I,{fallback:o},l?this.renderPreview(t):this.renderActivePlayer(t)))}}],g(A.prototype,h),v&&g(A,v),A}(i.Component),T(r,"displayName","ReactPlayer"),T(r,"propTypes",s.propTypes),T(r,"defaultProps",s.defaultProps),T(r,"addCustomPlayer",function(e){D.push(e)}),T(r,"removeCustomPlayers",function(){D.length=0}),T(r,"canPlay",function(t){for(var r=0,i=[].concat(D,m(e));r<i.length;r++)if(i[r].canPlay(t))return!0;return!1}),T(r,"canEnablePIP",function(t){for(var r=0,i=[].concat(D,m(e));r<i.length;r++){var n=i[r];if(n.canEnablePIP&&n.canEnablePIP(t))return!0}return!1}),d}},22004:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n=(i=r(86497))&&i.__esModule?i:{default:i},a=r(70390),o=n.default[n.default.length-1],s=(0,a.createReactPlayer)(n.default,o);t.default=s},71776:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canPlay=t.FLV_EXTENSIONS=t.DASH_EXTENSIONS=t.HLS_EXTENSIONS=t.VIDEO_EXTENSIONS=t.AUDIO_EXTENSIONS=t.MATCH_URL_KALTURA=t.MATCH_URL_VIDYARD=t.MATCH_URL_MIXCLOUD=t.MATCH_URL_DAILYMOTION=t.MATCH_URL_TWITCH_CHANNEL=t.MATCH_URL_TWITCH_VIDEO=t.MATCH_URL_WISTIA=t.MATCH_URL_STREAMABLE=t.MATCH_URL_FACEBOOK_WATCH=t.MATCH_URL_FACEBOOK=t.MATCH_URL_VIMEO=t.MATCH_URL_SOUNDCLOUD=t.MATCH_URL_YOUTUBE=void 0;var i=r(38045);function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}var a=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;t.MATCH_URL_YOUTUBE=a;var o=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;t.MATCH_URL_SOUNDCLOUD=o;var s=/vimeo\.com\/(?!progressive_redirect).+/;t.MATCH_URL_VIMEO=s;var l=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;t.MATCH_URL_FACEBOOK=l;var u=/^https?:\/\/fb\.watch\/.+$/;t.MATCH_URL_FACEBOOK_WATCH=u;var d=/streamable\.com\/([a-z0-9]+)$/;t.MATCH_URL_STREAMABLE=d;var c=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?(.*)$/;t.MATCH_URL_WISTIA=c;var h=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;t.MATCH_URL_TWITCH_VIDEO=h;var f=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;t.MATCH_URL_TWITCH_CHANNEL=f;var p=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?$/;t.MATCH_URL_DAILYMOTION=p;var m=/mixcloud\.com\/([^/]+\/[^/]+)/;t.MATCH_URL_MIXCLOUD=m;var v=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;t.MATCH_URL_VIDYARD=v;var g=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;t.MATCH_URL_KALTURA=g;var y=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;t.AUDIO_EXTENSIONS=y;var b=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;t.VIDEO_EXTENSIONS=b;var E=/\.(m3u8)($|\?)/i;t.HLS_EXTENSIONS=E;var T=/\.(mpd)($|\?)/i;t.DASH_EXTENSIONS=T;var _=/\.(flv)($|\?)/i;t.FLV_EXTENSIONS=_,t.canPlay={youtube:function(e){return e instanceof Array?e.every(function(e){return a.test(e)}):a.test(e)},soundcloud:function(e){return o.test(e)&&!y.test(e)},vimeo:function(e){return s.test(e)&&!b.test(e)&&!E.test(e)},facebook:function(e){return l.test(e)||u.test(e)},streamable:function(e){return d.test(e)},wistia:function(e){return c.test(e)},twitch:function(e){return h.test(e)||f.test(e)},dailymotion:function(e){return p.test(e)},mixcloud:function(e){return m.test(e)},vidyard:function(e){return v.test(e)},kaltura:function(e){return g.test(e)},file:function e(t){if(t instanceof Array){var r,a=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}}(e))){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,s=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw o}}}}(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;if("string"==typeof o&&e(o)||e(o.src))return!0}}catch(s){a.e(s)}finally{a.f()}return!1}return!!((0,i.isMediaStream)(t)||(0,i.isBlobUrl)(t))||y.test(t)||b.test(t)||E.test(t)||T.test(t)||_.test(t)}}},36807:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function d(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(v,e);var t,r,s,m=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=f(v);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:h(this)});function v(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,v);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return p(h(e=m.call.apply(m,[this].concat(r))),"callPlayer",a.callPlayer),p(h(e),"onDurationChange",function(){var t=e.getDuration();e.props.onDuration(t)}),p(h(e),"mute",function(){e.callPlayer("setMuted",!0)}),p(h(e),"unmute",function(){e.callPlayer("setMuted",!1)}),p(h(e),"ref",function(t){e.container=t}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t,r=this,i=this.props,n=i.controls,s=i.config,d=i.onError,c=i.playing,h=(function(e){if(Array.isArray(e))return e}(t=e.match(o.MATCH_URL_DAILYMOTION))||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(l){n=!0,a=l}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];if(this.player){this.player.load(h,{start:(0,a.parseStartTime)(e),autoplay:c});return}(0,a.getSDK)("https://api.dmcdn.net/all.js","DM","dmAsyncInit",function(e){return e.player}).then(function(t){if(r.container){var i=t.player;r.player=new i(r.container,{width:"100%",height:"100%",video:h,params:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({controls:n,autoplay:r.props.playing,mute:r.props.muted,start:(0,a.parseStartTime)(e),origin:window.location.origin},s.params),events:{apiready:r.props.onReady,seeked:function(){return r.props.onSeek(r.player.currentTime)},video_end:r.props.onEnded,durationchange:r.onDurationChange,pause:r.props.onPause,playing:r.props.onPlay,waiting:r.props.onBuffer,error:function(e){return d(e)}}})}},d)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.player.duration||null}},{key:"getCurrentTime",value:function(){return this.player.currentTime}},{key:"getSecondsLoaded",value:function(){return this.player.bufferedTime}},{key:"render",value:function(){var e=this.props.display;return n.default.createElement("div",{style:{width:"100%",height:"100%",display:e}},n.default.createElement("div",{ref:this.ref}))}}],d(v.prototype,r),s&&d(v,s),v}(n.Component);t.default=m,p(m,"displayName","DailyMotion"),p(m,"canPlay",o.canPlay.dailymotion),p(m,"loopOnEnded",!0)},31972:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p="https://connect.facebook.net/en_US/sdk.js",m="fbAsyncInit",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(v,e);var t,r,o,s=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=h(v);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:c(this)});function v(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,v);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return f(c(e=s.call.apply(s,[this].concat(r))),"callPlayer",a.callPlayer),f(c(e),"playerID",e.props.config.playerId||"".concat("facebook-player-").concat((0,a.randomString)())),f(c(e),"mute",function(){e.callPlayer("mute")}),f(c(e),"unmute",function(){e.callPlayer("unmute")}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var r=this;if(t){(0,a.getSDK)(p,"FB",m).then(function(e){return e.XFBML.parse()});return}(0,a.getSDK)(p,"FB",m).then(function(e){e.init({appId:r.props.config.appId,xfbml:!0,version:r.props.config.version}),e.Event.subscribe("xfbml.render",function(e){r.props.onLoaded()}),e.Event.subscribe("xfbml.ready",function(e){"video"===e.type&&e.id===r.playerID&&(r.player=e.instance,r.player.subscribe("startedPlaying",r.props.onPlay),r.player.subscribe("paused",r.props.onPause),r.player.subscribe("finishedPlaying",r.props.onEnded),r.player.subscribe("startedBuffering",r.props.onBuffer),r.player.subscribe("finishedBuffering",r.props.onBufferEnd),r.player.subscribe("error",r.props.onError),r.props.muted?r.callPlayer("mute"):r.callPlayer("unmute"),r.props.onReady(),document.getElementById(r.playerID).querySelector("iframe").style.visibility="visible")})})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentPosition")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props.config.attributes;return n.default.createElement("div",l({style:{width:"100%",height:"100%"},id:this.playerID,className:"fb-video","data-href":this.props.url,"data-autoplay":this.props.playing?"true":"false","data-allowfullscreen":"true","data-controls":this.props.controls?"true":"false"},e))}}],u(v.prototype,r),o&&u(v,o),v}(n.Component);t.default=v,f(v,"displayName","Facebook"),f(v,"canPlay",o.canPlay.facebook),f(v,"loopOnEnded",!0)},14926:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p="undefined"!=typeof navigator,m=p&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,v=p&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||m)&&!window.MSStream,g=/www\.dropbox\.com\/.+/,y=/https:\/\/watch\.cloudflarestream\.com\/([a-z0-9]+)/,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(m,e);var t,r,s,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=h(m);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:c(this)});function m(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,m);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return f(c(e=p.call.apply(p,[this].concat(r))),"onReady",function(){var t;return(t=e.props).onReady.apply(t,arguments)}),f(c(e),"onPlay",function(){var t;return(t=e.props).onPlay.apply(t,arguments)}),f(c(e),"onBuffer",function(){var t;return(t=e.props).onBuffer.apply(t,arguments)}),f(c(e),"onBufferEnd",function(){var t;return(t=e.props).onBufferEnd.apply(t,arguments)}),f(c(e),"onPause",function(){var t;return(t=e.props).onPause.apply(t,arguments)}),f(c(e),"onEnded",function(){var t;return(t=e.props).onEnded.apply(t,arguments)}),f(c(e),"onError",function(){var t;return(t=e.props).onError.apply(t,arguments)}),f(c(e),"onPlayBackRateChange",function(t){return e.props.onPlaybackRateChange(t.target.playbackRate)}),f(c(e),"onEnablePIP",function(){var t;return(t=e.props).onEnablePIP.apply(t,arguments)}),f(c(e),"onDisablePIP",function(t){var r=e.props,i=r.onDisablePIP,n=r.playing;i(t),n&&e.play()}),f(c(e),"onPresentationModeChange",function(t){if(e.player&&(0,a.supportsWebKitPresentationMode)(e.player)){var r=e.player.webkitPresentationMode;"picture-in-picture"===r?e.onEnablePIP(t):"inline"===r&&e.onDisablePIP(t)}}),f(c(e),"onSeek",function(t){e.props.onSeek(t.target.currentTime)}),f(c(e),"mute",function(){e.player.muted=!0}),f(c(e),"unmute",function(){e.player.muted=!1}),f(c(e),"renderSourceElement",function(e,t){return"string"==typeof e?n.default.createElement("source",{key:t,src:e}):n.default.createElement("source",l({key:t},e))}),f(c(e),"renderTrack",function(e,t){return n.default.createElement("track",l({key:t},e))}),f(c(e),"ref",function(t){e.player&&(e.prevPlayer=e.player),e.player=t}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this),this.addListeners(this.player),v&&this.player.load()}},{key:"componentDidUpdate",value:function(e){this.shouldUseAudio(this.props)!==this.shouldUseAudio(e)&&(this.removeListeners(this.prevPlayer,e.url),this.addListeners(this.player)),this.props.url===e.url||(0,a.isMediaStream)(this.props.url)||(this.player.srcObject=null)}},{key:"componentWillUnmount",value:function(){this.player.src="",this.removeListeners(this.player),this.hls&&this.hls.destroy()}},{key:"addListeners",value:function(e){var t=this.props,r=t.url,i=t.playsinline;e.addEventListener("play",this.onPlay),e.addEventListener("waiting",this.onBuffer),e.addEventListener("playing",this.onBufferEnd),e.addEventListener("pause",this.onPause),e.addEventListener("seeked",this.onSeek),e.addEventListener("ended",this.onEnded),e.addEventListener("error",this.onError),e.addEventListener("ratechange",this.onPlayBackRateChange),e.addEventListener("enterpictureinpicture",this.onEnablePIP),e.addEventListener("leavepictureinpicture",this.onDisablePIP),e.addEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(r)||e.addEventListener("canplay",this.onReady),i&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("x5-playsinline",""))}},{key:"removeListeners",value:function(e,t){e.removeEventListener("canplay",this.onReady),e.removeEventListener("play",this.onPlay),e.removeEventListener("waiting",this.onBuffer),e.removeEventListener("playing",this.onBufferEnd),e.removeEventListener("pause",this.onPause),e.removeEventListener("seeked",this.onSeek),e.removeEventListener("ended",this.onEnded),e.removeEventListener("error",this.onError),e.removeEventListener("ratechange",this.onPlayBackRateChange),e.removeEventListener("enterpictureinpicture",this.onEnablePIP),e.removeEventListener("leavepictureinpicture",this.onDisablePIP),e.removeEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(t)||e.removeEventListener("canplay",this.onReady)}},{key:"shouldUseAudio",value:function(e){return!e.config.forceVideo&&!e.config.attributes.poster&&(o.AUDIO_EXTENSIONS.test(e.url)||e.config.forceAudio)}},{key:"shouldUseHLS",value:function(e){return!!this.props.config.forceHLS||!v&&(o.HLS_EXTENSIONS.test(e)||y.test(e))}},{key:"shouldUseDASH",value:function(e){return o.DASH_EXTENSIONS.test(e)||this.props.config.forceDASH}},{key:"shouldUseFLV",value:function(e){return o.FLV_EXTENSIONS.test(e)||this.props.config.forceFLV}},{key:"load",value:function(e){var t=this,r=this.props.config,i=r.hlsVersion,n=r.hlsOptions,o=r.dashVersion,s=r.flvVersion;if(this.hls&&this.hls.destroy(),this.dash&&this.dash.reset(),this.shouldUseHLS(e)&&(0,a.getSDK)("https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js".replace("VERSION",i),"Hls").then(function(r){if(t.hls=new r(n),t.hls.on(r.Events.MANIFEST_PARSED,function(){t.props.onReady()}),t.hls.on(r.Events.ERROR,function(e,i){t.props.onError(e,i,t.hls,r)}),y.test(e)){var i=e.match(y)[1];t.hls.loadSource("https://videodelivery.net/{id}/manifest/video.m3u8".replace("{id}",i))}else t.hls.loadSource(e);t.hls.attachMedia(t.player),t.props.onLoaded()}),this.shouldUseDASH(e)&&(0,a.getSDK)("https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js".replace("VERSION",o),"dashjs").then(function(r){t.dash=r.MediaPlayer().create(),t.dash.initialize(t.player,e,t.props.playing),t.dash.on("error",t.props.onError),3>parseInt(o)?t.dash.getDebug().setLogToBrowserConsole(!1):t.dash.updateSettings({debug:{logLevel:r.Debug.LOG_LEVEL_NONE}}),t.props.onLoaded()}),this.shouldUseFLV(e)&&(0,a.getSDK)("https://cdn.jsdelivr.net/npm/flv.js@VERSION/dist/flv.min.js".replace("VERSION",s),"flvjs").then(function(r){t.flv=r.createPlayer({type:"flv",url:e}),t.flv.attachMediaElement(t.player),t.flv.on(r.Events.ERROR,function(e,i){t.props.onError(e,i,t.flv,r)}),t.flv.load(),t.props.onLoaded()}),e instanceof Array)this.player.load();else if((0,a.isMediaStream)(e))try{this.player.srcObject=e}catch(l){this.player.src=window.URL.createObjectURL(e)}}},{key:"play",value:function(){var e=this.player.play();e&&e.catch(this.props.onError)}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src"),this.dash&&this.dash.reset()}},{key:"seekTo",value:function(e){this.player.currentTime=e}},{key:"setVolume",value:function(e){this.player.volume=e}},{key:"enablePIP",value:function(){this.player.requestPictureInPicture&&document.pictureInPictureElement!==this.player?this.player.requestPictureInPicture():(0,a.supportsWebKitPresentationMode)(this.player)&&"picture-in-picture"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("picture-in-picture")}},{key:"disablePIP",value:function(){document.exitPictureInPicture&&document.pictureInPictureElement===this.player?document.exitPictureInPicture():(0,a.supportsWebKitPresentationMode)(this.player)&&"inline"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("inline")}},{key:"setPlaybackRate",value:function(e){try{this.player.playbackRate=e}catch(t){this.props.onError(t)}}},{key:"getDuration",value:function(){if(!this.player)return null;var e=this.player,t=e.duration,r=e.seekable;return t===1/0&&r.length>0?r.end(r.length-1):t}},{key:"getCurrentTime",value:function(){return this.player?this.player.currentTime:null}},{key:"getSecondsLoaded",value:function(){if(!this.player)return null;var e=this.player.buffered;if(0===e.length)return 0;var t=e.end(e.length-1),r=this.getDuration();return t>r?r:t}},{key:"getSource",value:function(e){var t=this.shouldUseHLS(e),r=this.shouldUseDASH(e),i=this.shouldUseFLV(e);return e instanceof Array||(0,a.isMediaStream)(e)||t||r||i?void 0:g.test(e)?e.replace("www.dropbox.com","dl.dropboxusercontent.com"):e}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.playing,i=e.loop,a=e.controls,o=e.muted,s=e.config,u=e.width,d=e.height,c=this.shouldUseAudio(this.props);return n.default.createElement(c?"audio":"video",l({ref:this.ref,src:this.getSource(t),style:{width:"auto"===u?u:"100%",height:"auto"===d?d:"100%"},preload:"auto",autoPlay:r||void 0,controls:a,muted:o,loop:i},s.attributes),t instanceof Array&&t.map(this.renderSourceElement),s.tracks.map(this.renderTrack))}}],u(m.prototype,r),s&&u(m,s),m}(n.Component);t.default=b,f(b,"displayName","FilePlayer"),f(b,"canPlay",o.canPlay.file)},73911:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,r,o,s=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=c(f);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:d(this)});function f(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,f);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return h(d(e=s.call.apply(s,[this].concat(r))),"callPlayer",a.callPlayer),h(d(e),"duration",null),h(d(e),"currentTime",null),h(d(e),"secondsLoaded",null),h(d(e),"mute",function(){e.callPlayer("mute")}),h(d(e),"unmute",function(){e.callPlayer("unmute")}),h(d(e),"ref",function(t){e.iframe=t}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,a.getSDK)("https://cdn.embed.ly/player-0.1.0.min.js","playerjs").then(function(e){t.iframe&&(t.player=new e.Player(t.iframe),t.player.on("ready",function(){setTimeout(function(){t.player.isReady=!0,t.player.setLoop(t.props.loop),t.props.muted&&t.player.mute(),t.addListeners(t.player,t.props),t.props.onReady()},500)}))},this.props.onError)}},{key:"addListeners",value:function(e,t){var r=this;e.on("play",t.onPlay),e.on("pause",t.onPause),e.on("ended",t.onEnded),e.on("error",t.onError),e.on("timeupdate",function(e){var t=e.duration,i=e.seconds;r.duration=t,r.currentTime=i})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){return n.default.createElement("iframe",{ref:this.ref,src:this.props.url,frameBorder:"0",scrolling:"no",style:{width:"100%",height:"100%"},allow:"encrypted-media; autoplay; fullscreen;",referrerPolicy:"no-referrer-when-downgrade"})}}],l(f.prototype,r),o&&l(f,o),f}(n.Component);t.default=f,h(f,"displayName","Kaltura"),h(f,"canPlay",o.canPlay.kaltura)},50143:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(m,e);var t,r,s,l=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=f(m);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:h(this)});function m(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,m);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return p(h(e=l.call.apply(l,[this].concat(r))),"callPlayer",a.callPlayer),p(h(e),"duration",null),p(h(e),"currentTime",null),p(h(e),"secondsLoaded",null),p(h(e),"mute",function(){}),p(h(e),"unmute",function(){}),p(h(e),"ref",function(t){e.iframe=t}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,a.getSDK)("https://widget.mixcloud.com/media/js/widgetApi.js","Mixcloud").then(function(e){t.player=e.PlayerWidget(t.iframe),t.player.ready.then(function(){t.player.events.play.on(t.props.onPlay),t.player.events.pause.on(t.props.onPause),t.player.events.ended.on(t.props.onEnded),t.player.events.error.on(t.props.error),t.player.events.progress.on(function(e,r){t.currentTime=e,t.duration=r}),t.props.onReady()})},this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.config,i=t.match(o.MATCH_URL_MIXCLOUD)[1],s=(0,a.queryString)(u(u({},r.options),{},{feed:"/".concat(i,"/")}));return n.default.createElement("iframe",{key:i,ref:this.ref,style:{width:"100%",height:"100%"},src:"https://www.mixcloud.com/widget/iframe/?".concat(s),frameBorder:"0",allow:"autoplay"})}}],d(m.prototype,r),s&&d(m,s),m}(n.Component);t.default=m,p(m,"displayName","Mixcloud"),p(m,"canPlay",o.canPlay.mixcloud),p(m,"loopOnEnded",!0)},72648:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,r,o,s=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=f(l);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:h(this)});function l(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return p(h(e=s.call.apply(s,[this].concat(r))),"callPlayer",a.callPlayer),p(h(e),"duration",null),p(h(e),"currentTime",null),p(h(e),"fractionLoaded",null),p(h(e),"mute",function(){e.setVolume(0)}),p(h(e),"unmute",function(){null!==e.props.volume&&e.setVolume(e.props.volume)}),p(h(e),"ref",function(t){e.iframe=t}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var r=this;(0,a.getSDK)("https://w.soundcloud.com/player/api.js","SC").then(function(i){if(r.iframe){var n=i.Widget.Events,a=n.PLAY,o=n.PLAY_PROGRESS,s=n.PAUSE,l=n.FINISH,d=n.ERROR;t||(r.player=i.Widget(r.iframe),r.player.bind(a,r.props.onPlay),r.player.bind(s,function(){r.duration-r.currentTime<.05||r.props.onPause()}),r.player.bind(o,function(e){r.currentTime=e.currentPosition/1e3,r.fractionLoaded=e.loadedProgress}),r.player.bind(l,function(){return r.props.onEnded()}),r.player.bind(d,function(e){return r.props.onError(e)})),r.player.load(e,u(u({},r.props.config.options),{},{callback:function(){r.player.getDuration(function(e){r.duration=e/1e3,r.props.onReady()})}}))}})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",1e3*e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.fractionLoaded*this.duration}},{key:"render",value:function(){var e=this.props.display;return n.default.createElement("iframe",{ref:this.ref,src:"https://w.soundcloud.com/player/?url=".concat(encodeURIComponent(this.props.url)),style:{width:"100%",height:"100%",display:e},frameBorder:0,allow:"autoplay"})}}],d(l.prototype,r),o&&d(l,o),l}(n.Component);t.default=m,p(m,"displayName","SoundCloud"),p(m,"canPlay",o.canPlay.soundcloud),p(m,"loopOnEnded",!0)},50993:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(p,e);var t,r,s,f=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=c(p);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:d(this)});function p(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return h(d(e=f.call.apply(f,[this].concat(r))),"callPlayer",a.callPlayer),h(d(e),"duration",null),h(d(e),"currentTime",null),h(d(e),"secondsLoaded",null),h(d(e),"mute",function(){e.callPlayer("mute")}),h(d(e),"unmute",function(){e.callPlayer("unmute")}),h(d(e),"ref",function(t){e.iframe=t}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,a.getSDK)("https://cdn.embed.ly/player-0.1.0.min.js","playerjs").then(function(e){t.iframe&&(t.player=new e.Player(t.iframe),t.player.setLoop(t.props.loop),t.player.on("ready",t.props.onReady),t.player.on("play",t.props.onPlay),t.player.on("pause",t.props.onPause),t.player.on("seeked",t.props.onSeek),t.player.on("ended",t.props.onEnded),t.player.on("error",t.props.onError),t.player.on("timeupdate",function(e){var r=e.duration,i=e.seconds;t.duration=r,t.currentTime=i}),t.player.on("buffered",function(e){var r=e.percent;t.duration&&(t.secondsLoaded=t.duration*r)}),t.props.muted&&t.player.mute())},this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var e=this.props.url.match(o.MATCH_URL_STREAMABLE)[1];return n.default.createElement("iframe",{ref:this.ref,src:"https://streamable.com/o/".concat(e),frameBorder:"0",scrolling:"no",style:{width:"100%",height:"100%"},allow:"encrypted-media; autoplay; fullscreen;"})}}],l(p.prototype,r),s&&l(p,s),p}(n.Component);t.default=f,h(f,"displayName","Streamable"),h(f,"canPlay",o.canPlay.streamable)},29482:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(m,e);var t,r,s,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=h(m);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:c(this)});function m(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,m);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return f(c(e=p.call.apply(p,[this].concat(r))),"callPlayer",a.callPlayer),f(c(e),"playerID",e.props.config.playerId||"".concat("twitch-player-").concat((0,a.randomString)())),f(c(e),"mute",function(){e.callPlayer("setMuted",!0)}),f(c(e),"unmute",function(){e.callPlayer("setMuted",!1)}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var r=this,i=this.props,n=i.playsinline,s=i.onError,u=i.config,d=i.controls,c=o.MATCH_URL_TWITCH_CHANNEL.test(e),h=c?e.match(o.MATCH_URL_TWITCH_CHANNEL)[1]:e.match(o.MATCH_URL_TWITCH_VIDEO)[1];if(t){c?this.player.setChannel(h):this.player.setVideo("v"+h);return}(0,a.getSDK)("https://player.twitch.tv/js/embed/v1.js","Twitch").then(function(t){r.player=new t.Player(r.playerID,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({video:c?"":h,channel:c?h:"",height:"100%",width:"100%",playsinline:n,autoplay:r.props.playing,muted:r.props.muted,controls:!!c||d,time:(0,a.parseStartTime)(e)},u.options));var i=t.Player,o=i.READY,s=i.PLAYING,p=i.PAUSE,m=i.ENDED,v=i.ONLINE,g=i.OFFLINE,y=i.SEEK;r.player.addEventListener(o,r.props.onReady),r.player.addEventListener(s,r.props.onPlay),r.player.addEventListener(p,r.props.onPause),r.player.addEventListener(m,r.props.onEnded),r.player.addEventListener(y,r.props.onSeek),r.player.addEventListener(v,r.props.onLoaded),r.player.addEventListener(g,r.props.onLoaded)},s)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("pause")}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){return n.default.createElement("div",{style:{width:"100%",height:"100%"},id:this.playerID})}}],u(m.prototype,r),s&&u(m,s),m}(n.Component);t.default=p,f(p,"displayName","Twitch"),f(p,"canPlay",o.canPlay.twitch),f(p,"loopOnEnded",!0)},36596:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(m,e);var t,r,s,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=h(m);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:c(this)});function m(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,m);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return f(c(e=p.call.apply(p,[this].concat(r))),"callPlayer",a.callPlayer),f(c(e),"mute",function(){e.setVolume(0)}),f(c(e),"unmute",function(){null!==e.props.volume&&e.setVolume(e.props.volume)}),f(c(e),"ref",function(t){e.container=t}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this,r=this.props,i=r.playing,n=r.config,s=r.onError,u=r.onDuration,d=e&&e.match(o.MATCH_URL_VIDYARD)[1];this.player&&this.stop(),(0,a.getSDK)("https://play.vidyard.com/embed/v4.js","VidyardV4","onVidyardAPI").then(function(e){t.container&&(e.api.addReadyListener(function(e,r){t.player||(t.player=r,t.player.on("ready",t.props.onReady),t.player.on("play",t.props.onPlay),t.player.on("pause",t.props.onPause),t.player.on("seek",t.props.onSeek),t.player.on("playerComplete",t.props.onEnded))},d),e.api.renderPlayer(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({uuid:d,container:t.container,autoplay:i?1:0},n.options)),e.api.getPlayerMetadata(d).then(function(e){t.duration=e.length_in_seconds,u(e.length_in_seconds)}))},s)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){window.VidyardV4.api.destroyPlayer(this.player)}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackSpeed",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.callPlayer("currentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props.display;return n.default.createElement("div",{style:{width:"100%",height:"100%",display:e}},n.default.createElement("div",{ref:this.ref}))}}],u(m.prototype,r),s&&u(m,s),m}(n.Component);t.default=p,f(p,"displayName","Vidyard"),f(p,"canPlay",o.canPlay.vidyard)},80868:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(p,e);var t,r,o,s=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=h(p);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:c(this)});function p(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return f(c(e=s.call.apply(s,[this].concat(r))),"callPlayer",a.callPlayer),f(c(e),"duration",null),f(c(e),"currentTime",null),f(c(e),"secondsLoaded",null),f(c(e),"mute",function(){e.setVolume(0)}),f(c(e),"unmute",function(){null!==e.props.volume&&e.setVolume(e.props.volume)}),f(c(e),"ref",function(t){e.container=t}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;this.duration=null,(0,a.getSDK)("https://player.vimeo.com/api/player.js","Vimeo").then(function(r){if(t.container){var i=t.props.config,n=i.playerOptions,a=i.title;t.player=new r.Player(t.container,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({url:e,autoplay:t.props.playing,muted:t.props.muted,loop:t.props.loop,playsinline:t.props.playsinline,controls:t.props.controls},n)),t.player.ready().then(function(){var e=t.container.querySelector("iframe");e.style.width="100%",e.style.height="100%",a&&(e.title=a)}).catch(t.props.onError),t.player.on("loaded",function(){t.props.onReady(),t.refreshDuration()}),t.player.on("play",function(){t.props.onPlay(),t.refreshDuration()}),t.player.on("pause",t.props.onPause),t.player.on("seeked",function(e){return t.props.onSeek(e.seconds)}),t.player.on("ended",t.props.onEnded),t.player.on("error",t.props.onError),t.player.on("timeupdate",function(e){var r=e.seconds;t.currentTime=r}),t.player.on("progress",function(e){var r=e.seconds;t.secondsLoaded=r}),t.player.on("bufferstart",t.props.onBuffer),t.player.on("bufferend",t.props.onBufferEnd),t.player.on("playbackratechange",function(e){return t.props.onPlaybackRateChange(e.playbackRate)})}},this.props.onError)}},{key:"refreshDuration",value:function(){var e=this;this.player.getDuration().then(function(t){e.duration=t})}},{key:"play",value:function(){var e=this.callPlayer("play");e&&e.catch(this.props.onError)}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("unload")}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var e=this.props.display;return n.default.createElement("div",{key:this.props.url,ref:this.ref,style:{width:"100%",height:"100%",overflow:"hidden",display:e}})}}],u(p.prototype,r),o&&u(p,o),p}(n.Component);t.default=p,f(p,"displayName","Vimeo"),f(p,"canPlay",o.canPlay.vimeo),f(p,"forceLoad",!0)},8018:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(m,e);var t,r,s,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=h(m);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:c(this)});function m(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,m);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return f(c(e=p.call.apply(p,[this].concat(r))),"callPlayer",a.callPlayer),f(c(e),"playerID",e.props.config.playerId||"".concat("wistia-player-").concat((0,a.randomString)())),f(c(e),"onPlay",function(){var t;return(t=e.props).onPlay.apply(t,arguments)}),f(c(e),"onPause",function(){var t;return(t=e.props).onPause.apply(t,arguments)}),f(c(e),"onSeek",function(){var t;return(t=e.props).onSeek.apply(t,arguments)}),f(c(e),"onEnded",function(){var t;return(t=e.props).onEnded.apply(t,arguments)}),f(c(e),"onPlaybackRateChange",function(){var t;return(t=e.props).onPlaybackRateChange.apply(t,arguments)}),f(c(e),"mute",function(){e.callPlayer("mute")}),f(c(e),"unmute",function(){e.callPlayer("unmute")}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this,r=this.props,i=r.playing,n=r.muted,o=r.controls,s=r.onReady,u=r.config,d=r.onError;(0,a.getSDK)("https://fast.wistia.com/assets/external/E-v1.js","Wistia").then(function(e){u.customControls&&u.customControls.forEach(function(t){return e.defineControl(t)}),window._wq=window._wq||[],window._wq.push({id:t.playerID,options:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({autoPlay:i,silentAutoPlay:"allow",muted:n,controlsVisibleOnLoad:o,fullscreenButton:o,playbar:o,playbackRateControl:o,qualityControl:o,volumeControl:o,settingsControl:o,smallPlayButton:o},u.options),onReady:function(e){t.player=e,t.unbind(),t.player.bind("play",t.onPlay),t.player.bind("pause",t.onPause),t.player.bind("seek",t.onSeek),t.player.bind("end",t.onEnded),t.player.bind("playbackratechange",t.onPlaybackRateChange),s()}})},d)}},{key:"unbind",value:function(){this.player.unbind("play",this.onPlay),this.player.unbind("pause",this.onPause),this.player.unbind("seek",this.onSeek),this.player.unbind("end",this.onEnded),this.player.unbind("playbackratechange",this.onPlaybackRateChange)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.unbind(),this.callPlayer("remove")}},{key:"seekTo",value:function(e){this.callPlayer("time",e)}},{key:"setVolume",value:function(e){this.callPlayer("volume",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("playbackRate",e)}},{key:"getDuration",value:function(){return this.callPlayer("duration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("time")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props.url,t=e&&e.match(o.MATCH_URL_WISTIA)[1];return n.default.createElement("div",{id:this.playerID,key:t,className:"wistia_embed wistia_async_".concat(t),style:{width:"100%",height:"100%"}})}}],u(m.prototype,r),s&&u(m,s),m}(n.Component);t.default=p,f(p,"displayName","Wistia"),f(p,"canPlay",o.canPlay.wistia),f(p,"loopOnEnded",!0)},60356:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(r(67294)),a=r(38045),o=r(71776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(l){n=!0,a=l}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,y=/user\/([a-zA-Z0-9_-]+)\/?/,b=/youtube-nocookie\.com/,E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(c,e);var t,r,s,l=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r,n=m(c);if(t){var a=m(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(e=r)&&("object"===i(e)||"function"==typeof e)?e:p(this)});function c(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return v(p(e=l.call.apply(l,[this].concat(r))),"callPlayer",a.callPlayer),v(p(e),"parsePlaylist",function(t){return t instanceof Array?{listType:"playlist",playlist:t.map(e.getID).join(",")}:g.test(t)?{listType:"playlist",list:d(t.match(g),2)[1].replace(/^UC/,"UU")}:y.test(t)?{listType:"user_uploads",list:d(t.match(y),2)[1]}:{}}),v(p(e),"onStateChange",function(t){var r=t.data,i=e.props,n=i.onPlay,a=i.onPause,o=i.onBuffer,s=i.onBufferEnd,l=i.onEnded,u=i.onReady,d=i.loop,c=i.config,h=c.playerVars,f=c.onUnstarted,p=window.YT.PlayerState,m=p.UNSTARTED,v=p.PLAYING,g=p.PAUSED,y=p.BUFFERING,b=p.ENDED,E=p.CUED;if(r===m&&f(),r===v&&(n(),s()),r===g&&a(),r===y&&o(),r===b){var T=!!e.callPlayer("getPlaylist");d&&!T&&(h.start?e.seekTo(h.start):e.play()),l()}r===E&&u()}),v(p(e),"mute",function(){e.callPlayer("mute")}),v(p(e),"unmute",function(){e.callPlayer("unMute")}),v(p(e),"ref",function(t){e.container=t}),e}return r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(e){return!e||e instanceof Array||g.test(e)?null:e.match(o.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(e,t){var r=this,i=this.props,n=i.playing,o=i.muted,s=i.playsinline,l=i.controls,d=i.loop,c=i.config,h=i.onError,f=c.playerVars,p=c.embedOptions,m=this.getID(e);if(t){if(g.test(e)||y.test(e)||e instanceof Array){this.player.loadPlaylist(this.parsePlaylist(e));return}this.player.cueVideoById({videoId:m,startSeconds:(0,a.parseStartTime)(e)||f.start,endSeconds:(0,a.parseEndTime)(e)||f.end});return}(0,a.getSDK)("https://www.youtube.com/iframe_api","YT","onYouTubeIframeAPIReady",function(e){return e.loaded}).then(function(t){r.container&&(r.player=new t.Player(r.container,u({width:"100%",height:"100%",videoId:m,playerVars:u(u({autoplay:n?1:0,mute:o?1:0,controls:l?1:0,start:(0,a.parseStartTime)(e),end:(0,a.parseEndTime)(e),origin:window.location.origin,playsinline:s?1:0},r.parsePlaylist(e)),f),events:{onReady:function(){d&&r.player.setLoop(!0),r.props.onReady()},onPlaybackRateChange:function(e){return r.props.onPlaybackRateChange(e.data)},onStateChange:r.onStateChange,onError:function(e){return h(e.data)}},host:b.test(e)?"https://www.youtube-nocookie.com":void 0},p)))},h),p.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayers callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",e),this.props.playing||this.pause()}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var e=this.props.display;return n.default.createElement("div",{style:{width:"100%",height:"100%",display:e}},n.default.createElement("div",{ref:this.ref}))}}],h(c.prototype,r),s&&h(c,s),c}(n.Component);t.default=E,v(E,"displayName","YouTube"),v(E,"canPlay",o.canPlay.youtube)},86497:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(67294),n=r(38045),a=r(71776);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=i?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}var u=[{key:"youtube",name:"YouTube",canPlay:a.canPlay.youtube,lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(60356))})})},{key:"soundcloud",name:"SoundCloud",canPlay:a.canPlay.soundcloud,lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(72648))})})},{key:"vimeo",name:"Vimeo",canPlay:a.canPlay.vimeo,lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(80868))})})},{key:"facebook",name:"Facebook",canPlay:a.canPlay.facebook,lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(31972))})})},{key:"streamable",name:"Streamable",canPlay:a.canPlay.streamable,lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(50993))})})},{key:"wistia",name:"Wistia",canPlay:a.canPlay.wistia,lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(8018))})})},{key:"twitch",name:"Twitch",canPlay:a.canPlay.twitch,lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(29482))})})},{key:"dailymotion",name:"DailyMotion",canPlay:a.canPlay.dailymotion,lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(36807))})})},{key:"mixcloud",name:"Mixcloud",canPlay:a.canPlay.mixcloud,lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(50143))})})},{key:"vidyard",name:"Vidyard",canPlay:a.canPlay.vidyard,lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(36596))})})},{key:"kaltura",name:"Kaltura",canPlay:a.canPlay.kaltura,lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(73911))})})},{key:"file",name:"FilePlayer",canPlay:a.canPlay.file,canEnablePIP:function(e){return a.canPlay.file(e)&&(document.pictureInPictureEnabled||(0,n.supportsWebKitPresentationMode)())&&!a.AUDIO_EXTENSIONS.test(e)},lazyPlayer:(0,i.lazy)(function(){return Promise.resolve().then(function(){return l(r(14926))})})}];t.default=u},85741:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=t.propTypes=void 0;var i,n=(i=r(45697))&&i.__esModule?i:{default:i},a=n.default.string,o=n.default.bool,s=n.default.number,l=n.default.array,u=n.default.oneOfType,d=n.default.shape,c=n.default.object,h=n.default.func,f=n.default.node,p={url:u([a,l,c]),playing:o,loop:o,controls:o,volume:s,muted:o,playbackRate:s,width:u([a,s]),height:u([a,s]),style:c,progressInterval:s,playsinline:o,pip:o,stopOnUnmount:o,light:u([o,a,c]),playIcon:f,previewTabIndex:s,fallback:f,oEmbedUrl:a,wrapper:u([a,h,d({render:h.isRequired})]),config:d({soundcloud:d({options:c}),youtube:d({playerVars:c,embedOptions:c,onUnstarted:h}),facebook:d({appId:a,version:a,playerId:a,attributes:c}),dailymotion:d({params:c}),vimeo:d({playerOptions:c,title:a}),file:d({attributes:c,tracks:l,forceVideo:o,forceAudio:o,forceHLS:o,forceDASH:o,forceFLV:o,hlsOptions:c,hlsVersion:a,dashVersion:a,flvVersion:a}),wistia:d({options:c,playerId:a,customControls:l}),mixcloud:d({options:c}),twitch:d({options:c,playerId:a}),vidyard:d({options:c})}),onReady:h,onStart:h,onPlay:h,onPause:h,onBuffer:h,onBufferEnd:h,onEnded:h,onError:h,onDuration:h,onSeek:h,onPlaybackRateChange:h,onProgress:h,onClickPreview:h,onEnablePIP:h,onDisablePIP:h};t.propTypes=p;var m=function(){};t.defaultProps={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:m},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0"},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:m,onStart:m,onPlay:m,onPause:m,onBuffer:m,onBufferEnd:m,onEnded:m,onError:m,onDuration:m,onSeek:m,onPlaybackRateChange:m,onProgress:m,onClickPreview:m,onEnablePIP:m,onDisablePIP:m}},38045:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStartTime=function(e){return c(e,s)},t.parseEndTime=function(e){return c(e,l)},t.randomString=function(){return Math.random().toString(36).substr(2,5)},t.queryString=function(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&")},t.getSDK=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.default,o=h(t);return o&&n(o)?Promise.resolve(o):new Promise(function(i,n){if(f[e]){f[e].push({resolve:i,reject:n});return}f[e]=[{resolve:i,reject:n}];var o=function(t){f[e].forEach(function(e){return e.resolve(t)})};if(r){var s=window[r];window[r]=function(){s&&s(),o(h(t))}}a(e,function(i){i?(f[e].forEach(function(e){return e.reject(i)}),f[e]=null):r||o(h(t))})})},t.getConfig=function(e,t){return(0,n.default)(t.config,e.config)},t.omit=function(e){for(var t,r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];for(var a=(t=[]).concat.apply(t,i),o={},s=Object.keys(e),l=0;l<s.length;l++){var u=s[l];-1===a.indexOf(u)&&(o[u]=e[u])}return o},t.callPlayer=function(e){var t;if(!this.player||!this.player[e]){var r="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(e,"%c  ");return this.player?this.player[e]||(r+="The method was not available"):r+="The player was not available",console.warn(r,"font-weight: bold",""),null}for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return(t=this.player)[e].apply(t,n)},t.isMediaStream=function(e){return"undefined"!=typeof window&&void 0!==window.MediaStream&&e instanceof window.MediaStream},t.isBlobUrl=function(e){return/^blob:/.test(e)},t.supportsWebKitPresentationMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("video"),t=!1===/iPhone|iPod/.test(navigator.userAgent);return e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSetPresentationMode&&t};var i=a(r(49090)),n=a(r(9996));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}var s=/[?&#](?:start|t)=([0-9hms]+)/,l=/[?&#]end=([0-9hms]+)/,u=/(\d+)(h|m|s)/g,d=/^\d+$/;function c(e,t){if(!(e instanceof Array)){var r=e.match(t);if(r){var i=r[1];if(i.match(u))return function(e){for(var t=0,r=u.exec(e);null!==r;){var i,n=function(e){if(Array.isArray(e))return e}(i=r)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(l){n=!0,a=l}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}}(i,3)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(i,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=n[1],s=n[2];"h"===s&&(t+=3600*parseInt(a,10)),"m"===s&&(t+=60*parseInt(a,10)),"s"===s&&(t+=parseInt(a,10)),r=u.exec(e)}return t}(i);if(d.test(i))return parseInt(i)}}}function h(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}var f={}},52845:function(e,t,r){"use strict";let i,n;r.r(t),r.d(t,{MediaError:function(){return rN},default:function(){return lY}});var a=r(67294);let o={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_CAPTIONS_REQUEST:"mediashowcaptionsrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_CAPTIONS_REQUEST:"mediadisablecaptionsrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},s={MEDIA_AIRPLAY_UNAVAILABLE:"mediaairplayunavailablechange",MEDIA_PIP_UNAVAILABLE:"mediapipunavailablechange",MEDIA_PAUSED:"mediapausedchange",MEDIA_HAS_PLAYED:"mediahasplayedchange",MEDIA_MUTED:"mediamutedchange",MEDIA_VOLUME_LEVEL:"mediavolumelevelchange",MEDIA_VOLUME:"mediavolumechange",MEDIA_VOLUME_UNAVAILABLE:"mediavolumeunavailablechange",MEDIA_IS_PIP:"mediaispipchange",MEDIA_IS_CASTING:"mediaiscastingchange",MEDIA_CAPTIONS_LIST:"mediacaptionslistchange",MEDIA_SUBTITLES_LIST:"mediasubtitleslistchange",MEDIA_CAPTIONS_SHOWING:"mediacaptionsshowingchange",MEDIA_SUBTITLES_SHOWING:"mediasubtitlesshowingchange",MEDIA_IS_FULLSCREEN:"mediaisfullscreenchange",MEDIA_PLAYBACK_RATE:"mediaplaybackratechange",MEDIA_CURRENT_TIME:"mediacurrenttimechange",MEDIA_DURATION:"mediadurationchange",MEDIA_SEEKABLE:"mediaseekablechange",MEDIA_PREVIEW_IMAGE:"mediapreviewimagechange",MEDIA_PREVIEW_COORDS:"mediapreviewcoordschange",MEDIA_LOADING:"medialoadingchange",USER_INACTIVE:"userinactivechange"},l={MEDIA_CHROME_ATTRIBUTES:"media-chrome-attributes",MEDIA_CONTROLLER:"media-controller"},u={MEDIA_AIRPLAY_UNAVAILABLE:"media-airplay-unavailable",MEDIA_FULLSCREEN_UNAVAILABLE:"media-fullscreen-unavailable",MEDIA_PIP_UNAVAILABLE:"media-pip-unavailable",MEDIA_CAST_UNAVAILABLE:"media-cast-unavailable",MEDIA_PAUSED:"media-paused",MEDIA_HAS_PLAYED:"media-has-played",MEDIA_MUTED:"media-muted",MEDIA_VOLUME_LEVEL:"media-volume-level",MEDIA_VOLUME:"media-volume",MEDIA_VOLUME_UNAVAILABLE:"media-volume-unavailable",MEDIA_IS_PIP:"media-is-pip",MEDIA_IS_CASTING:"media-is-casting",MEDIA_CAPTIONS_LIST:"media-captions-list",MEDIA_SUBTITLES_LIST:"media-subtitles-list",MEDIA_CAPTIONS_SHOWING:"media-captions-showing",MEDIA_SUBTITLES_SHOWING:"media-subtitles-showing",MEDIA_IS_FULLSCREEN:"media-is-fullscreen",MEDIA_PLAYBACK_RATE:"media-playback-rate",MEDIA_CURRENT_TIME:"media-current-time",MEDIA_DURATION:"media-duration",MEDIA_SEEKABLE:"media-seekable",MEDIA_PREVIEW_TIME:"media-preview-time",MEDIA_PREVIEW_IMAGE:"media-preview-image",MEDIA_PREVIEW_COORDS:"media-preview-coords",MEDIA_LOADING:"media-loading",MEDIA_BUFFERED:"media-buffered",MEDIA_STREAM_TYPE:"media-stream-type",MEDIA_TIME_IS_LIVE:"media-time-is-live"};Object.entries(s).reduce((e,[t,r])=>{let i=u[t];return i&&(e[r]=i),e},{userinactivechange:"user-inactive"});let d=Object.entries(u).reduce((e,[t,r])=>{let i=s[t];return i&&(e[r]=i),e},{"user-inactive":"userinactivechange"}),c={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",CHAPTERS:"chapters",METADATA:"metadata"},h={DISABLED:"disabled",HIDDEN:"hidden",SHOWING:"showing"},f={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"},p={UNAVAILABLE:"unavailable",UNSUPPORTED:"unsupported"},m={LIVE:"live",ON_DEMAND:"on-demand"},v={AUDIO_PLAYER:()=>"audio player",VIDEO_PLAYER:()=>"video player",VOLUME:()=>"volume",SEEK:()=>"seek",CLOSED_CAPTIONS:()=>"closed captions",PLAYBACK_RATE:({playbackRate:e=1}={})=>`current playback rate ${e}`,PLAYBACK_TIME:()=>"playback time",MEDIA_LOADING:()=>"media loading"},g={PLAY:()=>"play",PAUSE:()=>"pause",MUTE:()=>"mute",UNMUTE:()=>"unmute",AIRPLAY:()=>"air play",ENTER_CAST:()=>"start casting",EXIT_CAST:()=>"stop casting",ENTER_FULLSCREEN:()=>"enter fullscreen mode",EXIT_FULLSCREEN:()=>"exit fullscreen mode",ENTER_PIP:()=>"enter picture in picture mode",EXIT_PIP:()=>"exit picture in picture mode",SEEK_FORWARD_N_SECS:({seekOffset:e=30}={})=>`seek forward ${e} seconds`,SEEK_BACK_N_SECS:({seekOffset:e=30}={})=>`seek back ${e} seconds`};function y(e,t=!1){return e.split("_").map(function(e,r){return(r||t?e[0].toUpperCase():e[0].toLowerCase())+e.slice(1).toLowerCase()}).join("")}let b=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],E=(e,t)=>{let r=1===e?b[t].singular:b[t].plural;return`${e} ${r}`},T=e=>{if(!("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e)))return"";let t=Math.abs(e),r=new Date(0,0,0,0,0,t,0),i=[r.getHours(),r.getMinutes(),r.getSeconds()],n=i.map((e,t)=>e&&E(e,t)).filter(e=>e).join(", ");return`${n}${t!==e?" remaining":""}`};function _(e,t){let r=!1;e<0&&(r=!0,e=0-e);let i=Math.floor((e=e<0?0:e)%60),n=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(e)||e===1/0)&&(a=n=i="-"),n=(((a=a>0||Math.floor(t/3600)>0?a+":":"")||Math.floor(t/60%60)>=10)&&n<10?"0"+n:n)+":",(r?"-":"")+a+n+(i=i<10?"0"+i:i)}class A{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}}let S={ResizeObserver:class{observe(){}},HTMLElement:class extends A{},DocumentFragment:class extends A{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},CustomEvent:function(){}},k="undefined"==typeof window||void 0===window.customElements,w=k?S:window,L=k?{createElement:function(){return new S.HTMLElement}}:window.document;var I=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},D=(e,t,r)=>{return I(e,t,"read from private field"),r?r.call(e):t.get(e)},R=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)};let O=L.createElement("template");O.innerHTML=`
<style>
  :host {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    vertical-align: middle;
    box-sizing: border-box;
    background: var(--media-control-background, rgba(20,20,30, 0.7));

    padding: var(--media-control-padding, 10px);

    
    font-size: 14px;
    line-height: var(--media-text-content-height, var(--media-control-height, 24px));
    font-weight: bold;
    color: #fff;

    transition: background 0.15s linear;

    pointer-events: auto;
    cursor: pointer;
    font-family: Arial, sans-serif;
  }

  
  :host(:focus-visible) {
    box-shadow: inset 0 0 0 2px rgba(27, 127, 204, 0.9);
    outline: 0;
  }
  
  :host(:where(:focus)) {
    box-shadow: none;
    outline: 0;
  }

  :host(:hover) {
    background: var(--media-control-hover-background, rgba(50,50,70, 0.7));
  }

  svg, img, ::slotted(svg), ::slotted(img) {
    width: var(--media-button-icon-width);
    height: var(--media-button-icon-height, var(--media-control-height, 24px));
    transform: var(--media-button-icon-transform);
    transition: var(--media-button-icon-transition);
    fill: var(--media-icon-color, #eee);
    vertical-align: middle;
    max-width: 100%;
    max-height: 100%;
    min-width: 100%;
  }
</style>
`;class P extends w.HTMLElement{constructor(e={}){super(),R(this,r9,e=>{this.handleClick(e)}),R(this,ie,e=>{let{key:t}=e;if(!this.keysUsed.includes(t)){this.removeEventListener("keyup",D(this,ie));return}this.handleClick(e)}),R(this,it,e=>{let{metaKey:t,altKey:r,key:i}=e;if(t||r||!this.keysUsed.includes(i)){this.removeEventListener("keyup",D(this,ie));return}this.addEventListener("keyup",D(this,ie),{once:!0})});let t=this.attachShadow({mode:"open"}),r=O.content.cloneNode(!0);this.nativeEl=r;let i=e.slotTemplate;i||((i=L.createElement("template")).innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(i.content.cloneNode(!0)),t.appendChild(r)}static get observedAttributes(){return["disabled",l.MEDIA_CONTROLLER]}enable(){this.addEventListener("click",D(this,r9)),this.addEventListener("keydown",D(this,it)),this.setAttribute("tabindex","0")}disable(){this.removeEventListener("click",D(this,r9)),this.removeEventListener("keyup",D(this,ie)),this.removeAttribute("tabindex")}attributeChangedCallback(e,t,r){var i,n;if(e===l.MEDIA_CONTROLLER){if(t){let a=L.getElementById(t);null==(i=null==a?void 0:a.unassociateElement)||i.call(a,this)}if(r){let o=L.getElementById(r);null==(n=null==o?void 0:o.associateElement)||n.call(o,this)}}else"disabled"===e&&r!==t&&(null==r?this.enable():this.disable())}connectedCallback(){var e;this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","button");let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.associateElement)||e.call(r,this)}}disconnectedCallback(){var e;this.disable();let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.unassociateElement)||e.call(r,this)}}get keysUsed(){return["Enter"," "]}handleClick(e){}}r9=new WeakMap,ie=new WeakMap,it=new WeakMap,w.customElements.get("media-chrome-button")||w.customElements.define("media-chrome-button",P);var C=P;let M=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>
</svg>
`,x=L.createElement("template");x.innerHTML=`
  <slot name="airplay">${M}</slot>
`,w.customElements.get("media-airplay-button")||w.customElements.define("media-airplay-button",class extends C{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_AIRPLAY_UNAVAILABLE]}constructor(e={}){super({slotTemplate:x,...e})}connectedCallback(){this.setAttribute("aria-label",g.AIRPLAY()),super.connectedCallback()}handleClick(){let e=new w.CustomEvent(o.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}});let N=L.createElement("template");N.innerHTML=`
  <style>
  :host([${u.MEDIA_IS_CASTING}]) slot:not([name=exit]) > *,
  :host([${u.MEDIA_IS_CASTING}]) ::slotted(:not([slot=exit])) {
    display: none !important;
  }

  
  :host(:not([${u.MEDIA_IS_CASTING}])) slot:not([name=enter]) > *,
  :host(:not([${u.MEDIA_IS_CASTING}])) ::slotted(:not([slot=enter])) {
    display: none !important;
  }
  </style>

  <slot name="enter"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg></slot>
  <slot name="exit"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg></slot>
`;let U=e=>{let t=null!=e.getAttribute(u.MEDIA_IS_CASTING),r=t?g.EXIT_CAST():g.ENTER_CAST();e.setAttribute("aria-label",r)};w.customElements.get("media-cast-button")||w.customElements.define("media-cast-button",class extends C{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_IS_CASTING,u.MEDIA_CAST_UNAVAILABLE]}constructor(e={}){super({slotTemplate:N,...e})}connectedCallback(){U(this),super.connectedCallback()}attributeChangedCallback(e,t,r){e===u.MEDIA_IS_CASTING&&U(this),super.attributeChangedCallback(e,t,r)}handleClick(){let e=null!=this.getAttribute(u.MEDIA_IS_CASTING)?o.MEDIA_EXIT_CAST_REQUEST:o.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new w.CustomEvent(e,{composed:!0,bubbles:!0}))}});let F=(e,t,r=".value")=>{let i=e.querySelector(r);i&&(i.textContent=t)},B=(e,t)=>{let r=`slot[name="${t}"]`,i=e.shadowRoot.querySelector(r);return i?i.children:[]},j=(e,t)=>B(e,t)[0],H=(e,t)=>{return!!e&&!!t&&(!!e.contains(t)||H(e,t.getRootNode().host))},V=(e,t)=>{if(!e)return null;let r=e.closest(t);return r||V(e.getRootNode().host,t)};function K(e,t){var r;let i;for(i of e.querySelectorAll("style")){let n;try{n=null==(r=i.sheet)?void 0:r.cssRules}catch{continue}for(let a of null!=n?n:[])if(a.selectorText===t)return a}return(null==i?void 0:i.sheet)?(i.sheet.insertRule(`${t}{}`,i.sheet.cssRules.length),i.sheet.cssRules[i.sheet.cssRules.length-1]):{style:{setProperty:()=>{}}}}let G=L.createElement("template");G.innerHTML=`
<style>
  :host {
    display: inline-block;
    box-sizing: border-box;
  }
</style>
`;class W extends w.HTMLElement{static get observedAttributes(){return[l.MEDIA_CONTROLLER,u.MEDIA_PAUSED]}constructor(e={}){super();let t=this.attachShadow({mode:"open"}),r=G.content.cloneNode(!0);this.nativeEl=r;let i=e.slotTemplate;i||((i=L.createElement("template")).innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(i.content.cloneNode(!0)),t.appendChild(r)}attributeChangedCallback(e,t,r){var i,n;if(e===l.MEDIA_CONTROLLER){if(t){let a=L.getElementById(t);null==(i=null==a?void 0:a.unassociateElement)||i.call(a,this)}if(r){let o=L.getElementById(r);null==(n=null==o?void 0:o.associateElement)||n.call(o,this)}}}connectedCallback(){var e;this.setAttribute("tabindex",-1),this.setAttribute("aria-hidden",!0);let t=q(this);this.getAttribute(l.MEDIA_CONTROLLER)&&(null==(e=null==t?void 0:t.associateElement)||e.call(t,this)),null==t||t.addEventListener("pointerdown",this),null==t||t.addEventListener("click",this)}disconnectedCallback(){var e;let t=q(this);this.getAttribute(l.MEDIA_CONTROLLER)&&(null==(e=null==t?void 0:t.unassociateElement)||e.call(t,this)),null==t||t.removeEventListener("pointerdown",this),null==t||t.removeEventListener("click",this)}handleEvent(e){var t;let r=null==(t=e.composedPath())?void 0:t[0];if(["video","media-controller"].includes(null==r?void 0:r.localName)){if("pointerdown"===e.type)this._pointerType=e.pointerType;else if("click"===e.type){let{clientX:i,clientY:n}=e,{left:a,top:o,width:s,height:l}=this.getBoundingClientRect(),u=i-a,d=n-o;if(u<0||d<0||u>s||d>l||0===s&&0===l)return;let{pointerType:c=this._pointerType}=e;if(this._pointerType=void 0,c===f.TOUCH){this.handleTap(e);return}if(c===f.MOUSE){this.handleMouseClick(e);return}}}}handleTap(e){}handleMouseClick(e){let t=null!=this.getAttribute(u.MEDIA_PAUSED)?o.MEDIA_PLAY_REQUEST:o.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new w.CustomEvent(t,{composed:!0,bubbles:!0}))}}function q(e){let t=e.getAttribute(l.MEDIA_CONTROLLER);return t?L.getElementById(t):V(e,"media-controller")}w.customElements.get("media-gesture-receiver")||w.customElements.define("media-gesture-receiver",W);let Y=L.createElement("template");Y.innerHTML=`
  <style>
    
    :host([media-is-fullscreen])  ::slotted([slot=media]) {
      outline: none;
    }

    :host {
      box-sizing: border-box;
      position: relative;
      display: inline-block;
      line-height: 0;
      background-color: var(--media-background-color, #000);
    }

    :host(:not([audio])) [part~=layer]:not([part~=media-layer]) {
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      display: flex;
      flex-flow: column nowrap;
      align-items: start;
      pointer-events: none;
      background: none;
    }

    
    :host([audio]) [part~=layer][part~=gesture-layer] {
      height: 0;
      display: block;
    }

    
    :host(:not([audio])[gestures-disabled]) ::slotted([slot=gestures-chrome]),
    :host(:not([audio])[gestures-disabled]) media-gesture-receiver[slot=gestures-chrome] {
      display: none;
    }

    
    ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator)) {
      pointer-events: auto;
    }

    :host(:not([audio])) *[part~=layer][part~=centered-layer] {
      align-items: center;
      justify-content: center;
    }

    :host(:not([audio])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),
    :host(:not([audio])) media-gesture-receiver[slot=gestures-chrome] {
      align-self: stretch;
      flex-grow: 1;
    }

    slot[name=middle-chrome] {
      display: inline;
      flex-grow: 1;
      pointer-events: none;
      background: none;
    }

    
    ::slotted([slot=media]),
    ::slotted([slot=poster]) {
      width: 100%;
      height: 100%;
    }

    
    :host(:not([audio])) .spacer {
      flex-grow: 1;
    }

    
    :host(:-webkit-full-screen) {
      
      width: 100% !important;
      height: 100% !important;
    }

    
    ::slotted(:not([slot=media]):not([no-auto-hide])) {
      opacity: 1;
      transition: opacity 0.25s;
    }

    
    :host([user-inactive]:not([${u.MEDIA_PAUSED}]):not([${u.MEDIA_IS_CASTING}]):not([audio])) ::slotted(:not([slot=media]):not([no-auto-hide])) {
      opacity: 0;
      transition: opacity 1s;
    }

    ::slotted(media-control-bar)  {
      align-self: stretch;
    }

    :host([${u.MEDIA_HAS_PLAYED}]) ::slotted([slot=poster]) {
      display: none;
    }
  </style>

  <slot name="media" part="layer media-layer"></slot>
  <slot name="poster" part="layer poster-layer"></slot>
  <slot name="gestures-chrome" part="layer gesture-layer">
    <media-gesture-receiver slot="gestures-chrome"></media-gesture-receiver>
  </slot>
  <span part="layer vertical-layer">
    <slot name="top-chrome" part="top chrome"></slot>
    <slot name="middle-chrome" part="middle chrome"></slot>
    <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>
    
    <slot part="bottom chrome"></slot>
  </span>
`;let $=Object.values(u),z=e=>{var t;for(let r of e){let i=r.target;if(!i.isConnected)continue;let n=null!=(t=i.getAttribute("breakpoints"))?t:"sm:384 md:576 lg:768 xl:960",a=function(e){let t=e.split(/\s+/);return Object.fromEntries(t.map(e=>e.split(":")))}(n),o=function(e,t){return Object.keys(e).filter(r=>{return t.width>=e[r]})}(a,r.contentRect);Object.keys(a).forEach(e=>{if(o.includes(e)){i.hasAttribute(`breakpoint-${e}`)||i.setAttribute(`breakpoint-${e}`,"");return}i.removeAttribute(`breakpoint-${e}`)})}};class X extends w.HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Y.content.cloneNode(!0));let e=e=>{let t=this.media;for(let r of e)"childList"===r.type&&(r.removedNodes.forEach(e=>{if("media"==e.slot&&r.target==this){let i=r.previousSibling&&r.previousSibling.previousElementSibling;if(i&&t){let n="media"!==i.slot;for(;null!==(i=i.previousSibling);)"media"==i.slot&&(n=!1);n&&this.mediaUnsetCallback(e)}else this.mediaUnsetCallback(e)}}),t&&r.addedNodes.forEach(e=>{e==t&&this.handleMediaUpdated(t).then(e=>this.mediaSetCallback(e))}))},t=new MutationObserver(e);t.observe(this,{childList:!0,subtree:!0});let r=new ResizeObserver(z);r.observe(this);let i=this.media,n=this.querySelector(":scope > slot[slot=media]");n&&n.addEventListener("slotchange",()=>{let e=n.assignedElements({flatten:!0});if(!e.length){this.mediaUnsetCallback(i);return}this.media&&(i=this.media,this.handleMediaUpdated(this.media).then(e=>this.mediaSetCallback(e)))})}static get observedAttributes(){return["autohide","gestures-disabled"].concat($)}attributeChangedCallback(e,t,r){"autohide"==e.toLowerCase()&&(this.autohide=r)}get media(){let e=this.querySelector(":scope > [slot=media]");return(null==e?void 0:e.nodeName)=="SLOT"&&(e=e.assignedElements({flatten:!0})[0]),e}mediaSetCallback(e){this._mediaClickPlayToggle=()=>{let t=e.paused?o.MEDIA_PLAY_REQUEST:o.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new w.CustomEvent(t,{composed:!0,bubbles:!0}))}}handleMediaUpdated(e){let t=e=>{return Promise.resolve(e)};if(!e)return console.error('<media-chrome>: Media element set with slot="media" does not appear to be compatible.',e),Promise.reject(e);let r=e.nodeName.toLowerCase();return r.includes("-")?w.customElements.whenDefined(r).then(()=>{return t(e)}):t(e)}mediaUnsetCallback(e){}connectedCallback(){let e=null!=this.getAttribute("audio"),t=e?v.AUDIO_PLAYER():v.VIDEO_PLAYER();this.setAttribute("role","region"),this.setAttribute("aria-label",t),this.media&&this.handleMediaUpdated(this.media).then(e=>this.mediaSetCallback(e)),this.setAttribute("user-inactive","user-inactive");let r=()=>{if(this.autohide<0)return;this.setAttribute("user-inactive","user-inactive");let e=new w.CustomEvent(s.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(e)},i=()=>{this.removeAttribute("user-inactive");let e=new w.CustomEvent(s.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(e)},n=()=>{i(),w.clearTimeout(this._inactiveTimeout),this.autohide<0||(this._inactiveTimeout=w.setTimeout(()=>{r()},1e3*this.autohide))};this.addEventListener("keyup",()=>{n()}),this.addEventListener("pointerup",e=>{"touch"===e.pointerType?[this,this.media].includes(e.target)&&!this.hasAttribute("user-inactive")?r():n():e.composedPath().some(e=>{var t;return["media-play-button","media-fullscreen-button"].includes(null==(t=null==e?void 0:e.nodeName)?void 0:t.toLowerCase())})&&n()}),this.addEventListener("pointermove",e=>{"mouse"===e.pointerType&&e.target!==this&&(i(),w.clearTimeout(this._inactiveTimeout),[this,this.media].includes(e.target)&&n())}),this.addEventListener("mouseleave",()=>{r()}),this.addEventListener("keyup",()=>{this.setAttribute("media-keyboard-control","")}),this.addEventListener("mouseup",()=>{this.removeAttribute("media-keyboard-control")})}set autohide(e){e=Number(e),this._autohide=isNaN(e)?0:e}get autohide(){return void 0===this._autohide?2:this._autohide}}w.customElements.get("media-container-temp")||w.customElements.define("media-container-temp",X);var Q=X,Z=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},J=(e,t,r)=>{return Z(e,t,"read from private field"),r?r.call(e):t.get(e)},ee=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},et=(e,t,r,i)=>{return Z(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r};class er{constructor(e,t){ee(this,ir,void 0),ee(this,ii,void 0),ee(this,ia,new Set),et(this,ir,e),et(this,ii,t)}[Symbol.iterator](){return J(this,ia).values()}get length(){return J(this,ia).size}get value(){var e;return null!=(e=[...J(this,ia)].join(" "))?e:""}set value(e){var t;e!==this.value&&(et(this,ia,new Set),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return[...J(this,ia)][e]}values(){return J(this,ia).values()}keys(){return J(this,ia).keys()}forEach(e){J(this,ia).forEach(e)}add(...e){var t,r;e.forEach(e=>J(this,ia).add(e)),(""!==this.value||(null==(t=J(this,ir))?void 0:t.hasAttribute(`${J(this,ii)}`)))&&(null==(r=J(this,ir))||r.setAttribute(`${J(this,ii)}`,`${this.value}`))}remove(...e){var t;e.forEach(e=>J(this,ia).delete(e)),null==(t=J(this,ir))||t.setAttribute(`${J(this,ii)}`,`${this.value}`)}contains(e){return J(this,ia).has(e)}toggle(e,t){return void 0!==t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){this.remove(e),this.add(t)}}ir=new WeakMap,ii=new WeakMap,ia=new WeakMap;let ei={enter:"requestFullscreen",exit:"exitFullscreen",event:"fullscreenchange",element:"fullscreenElement",error:"fullscreenerror",enabled:"fullscreenEnabled"};void 0===L.fullscreenElement&&(ei.enter="webkitRequestFullScreen",ei.exit=null!=L.webkitExitFullscreen?"webkitExitFullscreen":"webkitCancelFullScreen",ei.event="webkitfullscreenchange",ei.element="webkitFullscreenElement",ei.error="webkitfullscreenerror",ei.enabled="webkitFullscreenEnabled");let en=(e="")=>e.split(/\s+/),ea=(e="")=>{let[t,r]=e.split(":"),i=r?decodeURIComponent(r):void 0;return{language:t,label:i}},eo=(e="",t={})=>{return en(e).map(e=>{let r=ea(e);return{...t,...r}})},es=e=>{return Array.isArray(e)?e.map(e=>{return"string"==typeof e?ea(e):e}):"string"==typeof e?eo(e):[e]},el=({label:e,language:t}={})=>{return e?`${t}:${encodeURIComponent(e)}`:t},eu=(e=[])=>{return Array.prototype.map.call(e,el).join(" ")},ed=(e,t)=>r=>r[e]===t,ec=e=>{let t=Object.entries(e).map(([e,t])=>{return ed(e,t)});return e=>t.every(t=>t(e))},eh=(e,t=[],r=[])=>{let i=es(r).map(ec),n=e=>{return i.some(t=>t(e))};Array.from(t).filter(n).forEach(t=>{t.mode=e})},ef=(e,t=()=>!0)=>{if(!(null==e?void 0:e.textTracks))return[];let r="function"==typeof t?t:ec(t);return Array.from(e.textTracks).filter(r)},ep=e=>{let t=!!e.getAttribute(u.MEDIA_CAPTIONS_SHOWING),r=!e.hasAttribute("no-subtitles-fallback")&&!!e.getAttribute(u.MEDIA_SUBTITLES_SHOWING);return t||r},em=e=>{var t,r,i,n;let a=ep(e);if(a){let s=e.getAttribute(u.MEDIA_CAPTIONS_SHOWING);if(s){let l=new window.CustomEvent(o.MEDIA_DISABLE_CAPTIONS_REQUEST,{composed:!0,bubbles:!0,detail:s});e.dispatchEvent(l)}let d=e.getAttribute(u.MEDIA_SUBTITLES_SHOWING);if(d&&!e.hasAttribute("no-subtitles-fallback")){let c=new window.CustomEvent(o.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:d});e.dispatchEvent(c)}}else{let[h]=null!=(r=en(null!=(t=e.getAttribute(u.MEDIA_CAPTIONS_LIST))?t:""))?r:[];if(h){let f=new window.CustomEvent(o.MEDIA_SHOW_CAPTIONS_REQUEST,{composed:!0,bubbles:!0,detail:h});e.dispatchEvent(f)}else if(e.hasAttribute("no-subtitles-fallback"))console.error("Attempting to enable closed captions but none are available! Please verify your media content if this is unexpected.");else{let[p]=null!=(n=en(null!=(i=e.getAttribute(u.MEDIA_SUBTITLES_LIST))?i:""))?n:[];if(p){let m=new window.CustomEvent(o.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:p});e.dispatchEvent(m)}}}};var ev=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},eg=(e,t,r)=>{return ev(e,t,"read from private field"),r?r.call(e):t.get(e)},ey=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},eb=(e,t,r,i)=>{return ev(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r},eE=(e,t,r)=>{return ev(e,t,"access private method"),r};let eT=Object.values(m),e_=["ArrowLeft","ArrowRight","Enter"," ","f","m","k","c"];class eA extends Q{constructor(){super(),ey(this,il),ey(this,id),ey(this,io,new er(this,"hotkeys")),ey(this,is,void 0),eX||(this._airplayUnavailable=p.UNSUPPORTED),eZ||(this._fullscreenUnavailable=p.UNAVAILABLE),eQ||(this._castUnavailable=p.UNSUPPORTED),e$||(this._pipUnavailable=p.UNSUPPORTED),void 0!==n?n||(this._volumeUnavailable=p.UNSUPPORTED):ez.then(()=>{n||(this._volumeUnavailable=p.UNSUPPORTED,this.propagateMediaState(u.MEDIA_VOLUME_UNAVAILABLE,this._volumeUnavailable))}),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,this.associateElement(this);let e={MEDIA_PLAY_REQUEST:(t,r)=>{let i=eS[u.MEDIA_STREAM_TYPE](this),n=null===this.getAttribute("noautoseektolive");i==m.LIVE&&n&&e.MEDIA_SEEK_TO_LIVE_REQUEST(t,r),this.media.play()},MEDIA_PAUSE_REQUEST:()=>this.media.pause(),MEDIA_MUTE_REQUEST:()=>this.media.muted=!0,MEDIA_UNMUTE_REQUEST:()=>{let e=this.media;e.muted=!1,0===e.volume&&(e.volume=.25)},MEDIA_VOLUME_REQUEST:e=>{let t=this.media,r=e.detail;t.volume=r,r>0&&t.muted&&(t.muted=!1);try{w.localStorage.setItem("media-chrome-pref-volume",r.toString())}catch(i){}},MEDIA_ENTER_FULLSCREEN_REQUEST:()=>{if(!eZ){console.warn("Fullscreen support is unavailable; not entering fullscreen");return}let e=this.media;L.pictureInPictureElement&&L.exitPictureInPicture(),super[ei.enter]?this.fullscreenElement[ei.enter]():e.webkitEnterFullscreen?e.webkitEnterFullscreen():e.requestFullscreen?e.requestFullscreen():console.warn("MediaChrome: Fullscreen not supported")},MEDIA_EXIT_FULLSCREEN_REQUEST:()=>{L[ei.exit]()},MEDIA_ENTER_PIP_REQUEST:()=>{let e=this.media;if(!L.pictureInPictureEnabled){console.warn("MediaChrome: Picture-in-picture is not enabled");return}if(!e.requestPictureInPicture){console.warn("MediaChrome: The current media does not support picture-in-picture");return}L[ei.element]&&L[ei.exit]();let t=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};e.requestPictureInPicture().catch(r=>{if(11===r.code){if(0===e.readyState&&"none"===e.preload){let i=()=>{e.removeEventListener("loadedmetadata",n),e.preload="none"},n=()=>{e.requestPictureInPicture().catch(t),i()};e.addEventListener("loadedmetadata",n),e.preload="metadata",setTimeout(()=>{0===e.readyState&&t(),i()},1e3)}else throw r}else throw r})},MEDIA_EXIT_PIP_REQUEST:()=>{L.pictureInPictureElement&&L.exitPictureInPicture()},MEDIA_ENTER_CAST_REQUEST:()=>{var e;let t=this.media;(null==(e=globalThis.CastableVideoElement)?void 0:e.castEnabled)&&(L[ei.element]&&L[ei.exit](),t.requestCast())},MEDIA_EXIT_CAST_REQUEST:async()=>{var e;(null==(e=globalThis.CastableVideoElement)?void 0:e.castElement)&&globalThis.CastableVideoElement.exitCast()},MEDIA_SEEK_REQUEST:e=>{let t=this.media,r=e.detail;(t.readyState>0||void 0===t.readyState)&&(t.currentTime=r)},MEDIA_PLAYBACK_RATE_REQUEST:e=>{this.media.playbackRate=e.detail},MEDIA_PREVIEW_REQUEST:e=>{var t;let r=this.media;if(!r)return;let i=e.detail;null===i&&this.propagateMediaState(u.MEDIA_PREVIEW_TIME,void 0),this.propagateMediaState(u.MEDIA_PREVIEW_TIME,i);let[n]=ef(r,{kind:c.METADATA,label:"thumbnails"});if(!(n&&n.cues))return;if(null===i){this.propagateMediaState(u.MEDIA_PREVIEW_IMAGE,void 0),this.propagateMediaState(u.MEDIA_PREVIEW_COORDS,void 0);return}let a=Array.prototype.find.call(n.cues,e=>e.startTime>=i);if(!a)return;let o=/'^(?:[a-z]+:)?\/\//i.test(a.text)?void 0:null==(t=r.querySelector('track[label="thumbnails"]'))?void 0:t.src,s=new URL(a.text,o),l=new URLSearchParams(s.hash).get("#xywh");this.propagateMediaState(u.MEDIA_PREVIEW_IMAGE,s.href),this.propagateMediaState(u.MEDIA_PREVIEW_COORDS,l.split(",").join(" "))},MEDIA_SHOW_CAPTIONS_REQUEST:e=>{let t=eM(this),{detail:r=[]}=e;eh(h.SHOWING,t,r)},MEDIA_DISABLE_CAPTIONS_REQUEST:e=>{let t=eM(this),{detail:r=[]}=e;eh(h.DISABLED,t,r)},MEDIA_SHOW_SUBTITLES_REQUEST:e=>{let t=eC(this),{detail:r=[]}=e;eh(h.SHOWING,t,r)},MEDIA_DISABLE_SUBTITLES_REQUEST:e=>{let t=eC(this),{detail:r=[]}=e;eh(h.DISABLED,t,r)},MEDIA_AIRPLAY_REQUEST:()=>{let{media:e}=this;if(e){if(!(e.webkitShowPlaybackTargetPicker&&w.WebKitPlaybackTargetAvailabilityEvent)){console.warn("received a request to select AirPlay but AirPlay is not supported in this environment");return}e.webkitShowPlaybackTargetPicker()}},MEDIA_SEEK_TO_LIVE_REQUEST:(e,t)=>{let r=t.seekable;if(!r){console.warn("MediaController: Media element does not support seeking to live.");return}if(!r.length){console.warn("MediaController: Media is unable to seek to live.");return}t.currentTime=r.end(r.length-1)}};if(Object.keys(e).forEach(t=>{let r=`_handle${y(t,!0)}`;this[r]=r=>{if(r.stopPropagation(),!this.media){console.warn("MediaController: No media available.");return}e[t](r,this.media)},this.addEventListener(o[t],this[r])}),this._mediaStatePropagators={"play,pause,emptied":()=>{this.propagateMediaState(u.MEDIA_PAUSED,ek(this))},"playing,emptied":()=>{var e;this.propagateMediaState(u.MEDIA_HAS_PLAYED,!(null==(e=this.media)?void 0:e.paused))},volumechange:()=>{this.propagateMediaState(u.MEDIA_MUTED,ew(this)),this.propagateMediaState(u.MEDIA_VOLUME,eL(this)),this.propagateMediaState(u.MEDIA_VOLUME_LEVEL,eI(this))},[ei.event]:e=>{let t=!!L[ei.element],r=t&&(null==e?void 0:e.target),i=H(this.fullscreenElement,r);this.propagateMediaState(u.MEDIA_IS_FULLSCREEN,i)},"enterpictureinpicture,leavepictureinpicture":e=>{var t;let r;if(e)r="enterpictureinpicture"==e.type;else{let i=null!=(t=this.getRootNode().pictureInPictureElement)?t:L.pictureInPictureElement;r=this.media&&H(this.media,i)}this.propagateMediaState(u.MEDIA_IS_PIP,r)},"entercast,leavecast,castchange":e=>{var t;let r=null==(t=globalThis.CastableVideoElement)?void 0:t.castElement,i=this.media&&H(this.media,r);(null==e?void 0:e.type)==="castchange"&&(null==e?void 0:e.detail)==="CONNECTING"&&(i="connecting"),this.propagateMediaState(u.MEDIA_IS_CASTING,i)},"timeupdate,loadedmetadata":()=>{this.propagateMediaState(u.MEDIA_CURRENT_TIME,eD(this))},"durationchange,loadedmetadata,emptied":()=>{this.propagateMediaState(u.MEDIA_DURATION,eR(this)),this.propagateMediaState(u.MEDIA_STREAM_TYPE)},"loadedmetadata,emptied,progress":()=>{var e;this.propagateMediaState(u.MEDIA_SEEKABLE,null==(e=eO(this))?void 0:e.join(":"))},"progress,emptied":()=>{var e;this.propagateMediaState(u.MEDIA_BUFFERED,function(e=eJ){return Array.from(e).map((t,r)=>[Number(e.start(r).toFixed(3)),Number(e.end(r).toFixed(3))].join(":")).join(" ")}(null==(e=this.media)?void 0:e.buffered))},"ratechange,loadstart":()=>{this.propagateMediaState(u.MEDIA_PLAYBACK_RATE,eP(this))},"waiting,playing,emptied":()=>{var e;let t=(null==(e=this.media)?void 0:e.readyState)<3;this.propagateMediaState(u.MEDIA_LOADING,t)},"playing,timeupdate,progress,waiting,emptied":()=>{this.propagateMediaState(u.MEDIA_TIME_IS_LIVE)}},this._airplayUnavailable!==p.UNSUPPORTED){let t=e=>{(null==e?void 0:e.availability)==="available"?this._airplayUnavailable=void 0:(null==e?void 0:e.availability)==="not-available"&&(this._airplayUnavailable=p.UNAVAILABLE),this.propagateMediaState(u.MEDIA_AIRPLAY_UNAVAILABLE,this._airplayUnavailable)};this._mediaStatePropagators.webkitplaybacktargetavailabilitychanged=t}if(this._castUnavailable!==p.UNSUPPORTED){let r=()=>{var e;let t=null==(e=globalThis.CastableVideoElement)?void 0:e.castState;(null==t?void 0:t.includes("CONNECT"))?this._castUnavailable=void 0:this._castUnavailable=p.UNAVAILABLE,this.propagateMediaState(u.MEDIA_CAST_UNAVAILABLE,this._castUnavailable)};this._mediaStatePropagators.castchange=r}this._textTrackMediaStatePropagators={"addtrack,removetrack,loadstart":()=>{this.propagateMediaState(u.MEDIA_CAPTIONS_LIST,eu(eM(this))||void 0),this.propagateMediaState(u.MEDIA_SUBTITLES_LIST,eu(eC(this))||void 0),this.propagateMediaState(u.MEDIA_CAPTIONS_SHOWING,eu(eN(this))||void 0),this.propagateMediaState(u.MEDIA_SUBTITLES_SHOWING,eu(ex(this))||void 0)},change:()=>{this.propagateMediaState(u.MEDIA_CAPTIONS_SHOWING,eu(eN(this))||void 0),this.propagateMediaState(u.MEDIA_SUBTITLES_SHOWING,eu(ex(this))||void 0)}},this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat("nohotkeys","hotkeys","default-stream-type")}get fullscreenElement(){var e;return null!=(e=eg(this,is))?e:this}set fullscreenElement(e){this.hasAttribute("fullscreen-element")&&this.removeAttribute("fullscreen-element"),eb(this,is,e)}attributeChangedCallback(e,t,r){var i;if("nohotkeys"===e)r!==t&&""===r?(this.hasAttribute("hotkeys")&&console.warn("Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):r!==t&&null===r&&this.enableHotkeys();else if("hotkeys"===e)eg(this,io).value=r;else if("default-stream-type"===e)this.propagateMediaState(u.MEDIA_STREAM_TYPE);else if("fullscreen-element"===e){let n=r?null==(i=this.getRootNode())?void 0:i.getElementById(r):void 0;eb(this,is,n)}super.attributeChangedCallback(e,t,r)}mediaSetCallback(e){super.mediaSetCallback(e),e.hasAttribute("tabindex")||e.setAttribute("tabindex",-1),Object.keys(this._mediaStatePropagators).forEach(t=>{let r=t.split(","),i=this._mediaStatePropagators[t];r.forEach(t=>{let r=t==ei.event?this.getRootNode():e;r.addEventListener(t,i)}),i()}),Object.entries(this._textTrackMediaStatePropagators).forEach(([t,r])=>{let i=t.split(",");i.forEach(t=>{e.textTracks&&e.textTracks.addEventListener(t,r)}),r()});try{let t=w.localStorage.getItem("media-chrome-pref-volume");null!==t&&(e.volume=t)}catch(r){console.debug("Error getting volume pref",r)}}mediaUnsetCallback(e){super.mediaUnsetCallback(e),Object.keys(this._mediaStatePropagators).forEach(t=>{let r=t.split(","),i=this._mediaStatePropagators[t];r.forEach(t=>{let r=t==ei.event?this.getRootNode():e;r.removeEventListener(t,i)})}),Object.entries(this._textTrackMediaStatePropagators).forEach(([t,r])=>{let i=t.split(",");i.forEach(t=>{e.textTracks&&e.textTracks.removeEventListener(t,r)}),r()}),this.propagateMediaState(u.MEDIA_PAUSED,!0)}propagateMediaState(e,t){1==arguments.length&&(t=eS[e](this)),eK(this.mediaStateReceivers,e,t);let r=new w.CustomEvent(d[e],{composed:!0,bubbles:!0,detail:t});this.dispatchEvent(r)}associateElement(e){if(!e)return;let{associatedElementSubscriptions:t}=this;if(t.has(e))return;let r=this.registerMediaStateReceiver.bind(this),i=this.unregisterMediaStateReceiver.bind(this),n=eG(e,r,i);Object.keys(o).forEach(t=>{e.addEventListener(o[t],this[`_handle${y(t,!0)}`])}),t.set(e,n)}unassociateElement(e){if(!e)return;let{associatedElementSubscriptions:t}=this;if(!t.has(e))return;let r=t.get(e);r(),t.delete(e),Object.keys(o).forEach(t=>{e.removeEventListener(o[t],this[`_handle${y(t,!0)}`])})}registerMediaStateReceiver(e){if(!e)return;let t=this.mediaStateReceivers,r=t.indexOf(e);!(r>-1)&&(t.push(e),eK([e],u.MEDIA_VOLUME_UNAVAILABLE,this._volumeUnavailable),eK([e],u.MEDIA_AIRPLAY_UNAVAILABLE,this._airplayUnavailable),eK([e],u.MEDIA_FULLSCREEN_UNAVAILABLE,this._fullscreenUnavailable),eK([e],u.MEDIA_CAST_UNAVAILABLE,this._castUnavailable),eK([e],u.MEDIA_PIP_UNAVAILABLE,this._pipUnavailable),this.media&&Object.keys(u).forEach(t=>{t.includes("UNAVAILABLE")||eK([e],u[t],eS[u[t]]?eS[u[t]](this):eS.default(this,u[t]))}))}unregisterMediaStateReceiver(e){let t=this.mediaStateReceivers,r=t.indexOf(e);r<0||t.splice(r,1)}enableHotkeys(){this.addEventListener("keydown",eE(this,id,ic))}disableHotkeys(){this.removeEventListener("keydown",eE(this,id,ic)),this.removeEventListener("keyup",eE(this,il,iu))}get hotkeys(){return eg(this,io)}keyboardShortcutHandler(e){var t,r,i,n;let a,s,l,d;let c=(null!=(n=null!=(i=null==(t=e.target.getAttribute("keysused"))?void 0:t.split(" "))?i:null==(r=e.target)?void 0:r.keysUsed)?n:[]).map(e=>"Space"===e?" ":e).filter(Boolean);if(!c.includes(e.key)&&!eg(this,io).contains(`no${e.key.toLowerCase()}`)&&!(" "===e.key&&eg(this,io).contains("nospace")))switch(e.key){case" ":case"k":a=null!=this.getAttribute(u.MEDIA_PAUSED)?o.MEDIA_PLAY_REQUEST:o.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new w.CustomEvent(a,{composed:!0,bubbles:!0}));break;case"m":a="off"===this.getAttribute(u.MEDIA_VOLUME_LEVEL)?o.MEDIA_UNMUTE_REQUEST:o.MEDIA_MUTE_REQUEST,this.dispatchEvent(new w.CustomEvent(a,{composed:!0,bubbles:!0}));break;case"f":a=null!=this.getAttribute(u.MEDIA_IS_FULLSCREEN)?o.MEDIA_EXIT_FULLSCREEN_REQUEST:o.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new w.CustomEvent(a,{composed:!0,bubbles:!0}));break;case"c":em(this);break;case"ArrowLeft":l=Math.max(((s=this.getAttribute(u.MEDIA_CURRENT_TIME))&&!Number.isNaN(+s)?+s:0)-10,0),d=new w.CustomEvent(o.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(d);break;case"ArrowRight":l=Math.max(((s=this.getAttribute(u.MEDIA_CURRENT_TIME))&&!Number.isNaN(+s)?+s:0)+10,0),d=new w.CustomEvent(o.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(d)}}}io=new WeakMap,is=new WeakMap,il=new WeakSet,iu=function(e){let{key:t}=e;if(!e_.includes(t)){this.removeEventListener("keyup",eE(this,il,iu));return}this.keyboardShortcutHandler(e)},id=new WeakSet,ic=function(e){let{metaKey:t,altKey:r,key:i}=e;if(t||r||!e_.includes(i)){this.removeEventListener("keyup",eE(this,il,iu));return}[" ","ArrowLeft","ArrowRight"].includes(i)&&!(eg(this,io).contains(`no${i.toLowerCase()}`)||" "===i&&eg(this,io).contains("nospace"))&&e.preventDefault(),this.addEventListener("keyup",eE(this,il,iu),{once:!0})};let eS={default(e,t){return e.getAttribute(t)},[u.MEDIA_CAPTIONS_LIST](e){return eu(eM(e))||void 0},[u.MEDIA_SUBTITLES_LIST](e){return eu(eC(e))||void 0},[u.MEDIA_SUBTITLES_LIST](e){return eu(eC(e))||void 0},[u.MEDIA_CAPTIONS_SHOWING](e){return eu(eN(e))||void 0},[u.MEDIA_PAUSED](e){return ek(e)},[u.MEDIA_MUTED](e){return ew(e)},[u.MEDIA_VOLUME](e){return eL(e)},[u.MEDIA_VOLUME_LEVEL](e){return eI(e)},[u.MEDIA_CURRENT_TIME](e){return eD(e)},[u.MEDIA_DURATION](e){return eR(e)},[u.MEDIA_SEEKABLE](e){var t;return null==(t=eO(e))?void 0:t.join(":")},[u.MEDIA_PLAYBACK_RATE](e){return eP(e)},[u.MEDIA_STREAM_TYPE](e){let t=e.media;if(!t)return null;let r=t.duration;if(r===1/0)return m.LIVE;if(Number.isFinite(r))return m.ON_DEMAND;{let i=e.getAttribute("default-stream-type");if(eT.includes(i))return i}return null},[u.MEDIA_TIME_IS_LIVE](e){let t=e.media;if(!t)return!1;let r="live"===e.getAttribute(u.MEDIA_STREAM_TYPE),i=t.seekable;if(r&&!i)return!0;if(!(null==i?void 0:i.length))return!1;let n=10,a=e.getAttribute("livethreshold");null===a||Number.isNaN(a=Number(a))||(n=a);let o=t.currentTime,s=i.end(i.length-1);return o>s-n}},ek=e=>{return!e.media||e.media.paused},ew=e=>{return!!(e.media&&e.media.muted)},eL=e=>{let t=e.media;return t?t.volume:1},eI=e=>{let t="high";if(!e.media)return t;let{muted:r,volume:i}=e.media;return 0===i||r?t="off":i<.5?t="low":i<.75&&(t="medium"),t},eD=e=>{let t=e.media;return t?t.currentTime:0},eR=e=>{let t=null==e?void 0:e.media;return Number.isFinite(null==t?void 0:t.duration)?t.duration:NaN},eO=e=>{var t;let r=null==e?void 0:e.media;if(!(null==(t=null==r?void 0:r.seekable)?void 0:t.length))return;let i=r.seekable.start(0),n=r.seekable.end(r.seekable.length-1);if(i||n)return[Number(i.toFixed(3)),Number(n.toFixed(3))]},eP=e=>{let t=e.media;return t?t.playbackRate:1},eC=e=>{return ef(e.media,{kind:c.SUBTITLES})},eM=e=>{return ef(e.media,{kind:c.CAPTIONS})},ex=e=>{return ef(e.media,{kind:c.SUBTITLES,mode:h.SHOWING})},eN=e=>{return ef(e.media,{kind:c.CAPTIONS,mode:h.SHOWING})},eU=Object.values(u),eF=e=>{var t,r,i,n;let{observedAttributes:a}=e.constructor;!a&&(null==(t=e.nodeName)?void 0:t.includes("-"))&&(w.customElements.upgrade(e),{observedAttributes:a}=e.constructor);let o=null==(n=null==(i=null==(r=null==e?void 0:e.getAttribute)?void 0:r.call(e,l.MEDIA_CHROME_ATTRIBUTES))?void 0:i.split)?void 0:n.call(i,/\s+/);return Array.isArray(a||o)?(a||o).filter(e=>eU.includes(e)):[]},eB=e=>{return!!eF(e).length},ej=async(e,t,r)=>{return(e.isConnected||await eY(0),void 0==r)?e.removeAttribute(t):"boolean"==typeof r?r?e.setAttribute(t,""):e.removeAttribute(t):Number.isNaN(r)?e.removeAttribute(t):e.setAttribute(t,r)},eH=e=>{var t;return!!(null==(t=e.closest)?void 0:t.call(e,'*[slot="media"]'))},eV=(e,t)=>{if(eH(e))return;let r=(e,t)=>{var r,i;eB(e)&&t(e);let{children:n=[]}=null!=e?e:{},a=null!=(i=null==(r=null==e?void 0:e.shadowRoot)?void 0:r.children)?i:[],o=[...n,...a];o.forEach(e=>eV(e,t))},i=null==e?void 0:e.nodeName.toLowerCase();if(i.includes("-")&&!eB(e)){w.customElements.whenDefined(i).then(()=>{r(e,t)});return}r(e,t)},eK=(e,t,r)=>{e.forEach(e=>{let i=eF(e);i.includes(t)&&ej(e,t,r)})},eG=(e,t,r)=>{eV(e,t);let i=e=>{var r;let i=null!=(r=null==e?void 0:e.composedPath()[0])?r:e.target;t(i)},n=e=>{var t;let i=null!=(t=null==e?void 0:e.composedPath()[0])?t:e.target;r(i)};e.addEventListener(o.REGISTER_MEDIA_STATE_RECEIVER,i),e.addEventListener(o.UNREGISTER_MEDIA_STATE_RECEIVER,n);let a=e=>{e.forEach(e=>{let{addedNodes:i=[],removedNodes:n=[],type:a,target:o,attributeName:s}=e;"childList"===a?(Array.prototype.forEach.call(i,e=>eV(e,t)),Array.prototype.forEach.call(n,e=>eV(e,r))):"attributes"===a&&s===l.MEDIA_CHROME_ATTRIBUTES&&(eB(o)?t(o):r(o))})},s=new MutationObserver(a);s.observe(e,{childList:!0,attributes:!0,subtree:!0});let u=()=>{eV(e,r),s.disconnect(),e.removeEventListener(o.REGISTER_MEDIA_STATE_RECEIVER,i),e.removeEventListener(o.UNREGISTER_MEDIA_STATE_RECEIVER,n)};return u},eW=()=>{var e;return i||(i=null==(e=null==L?void 0:L.createElement)?void 0:e.call(L,"video"))},eq=async(e=eW())=>{if(!e)return!1;let t=e.volume;return e.volume=t/2+.1,await eY(0),e.volume!==t},eY=e=>new Promise(t=>setTimeout(t,e)),e$=((e=eW())=>"function"==typeof(null==e?void 0:e.requestPictureInPicture))(),ez=eq().then(e=>{return n=e}),eX=!!w.WebKitPlaybackTargetAvailabilityEvent,eQ=!!w.chrome,eZ=((e=eW())=>{let t=L[ei.enabled];return!t&&e&&(t="webkitSupportsFullscreen"in e),t})(),eJ=Object.freeze({length:0,start(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}});w.customElements.get("media-controller")||w.customElements.define("media-controller",eA);var e0=eA,e1=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},e2=(e,t,r)=>{return e1(e,t,"read from private field"),r?r.call(e):t.get(e)},e5=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},e4=(e,t,r,i)=>{return e1(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r};let e3=L.createElement("template"),e8=`
  height: var(--thumb-height);
  width: var(--media-range-thumb-width, 10px);
  border: var(--media-range-thumb-border, none);
  border-radius: var(--media-range-thumb-border-radius, 10px);
  background: var(--media-range-thumb-background, #fff);
  box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);
  cursor: pointer;
  transition: var(--media-range-thumb-transition, none);
  transform: var(--media-range-thumb-transform, none);
  opacity: var(--media-range-thumb-opacity, 1);
`,e6=`
  width: var(--media-range-track-width, 100%);
  min-width: 40px;
  height: var(--track-height);
  border: var(--media-range-track-border, none);
  outline: var(--media-range-track-outline);
  outline-offset: var(--media-range-track-outline-offset);
  border-radius: var(--media-range-track-border-radius, 0);
  background: var(--media-range-track-progress-internal, var(--media-range-track-background, #eee));
  box-shadow: var(--media-range-track-box-shadow, none);
  transition: var(--media-range-track-transition, none);
  transform: translate(var(--media-range-track-translate-x, 0), var(--media-range-track-translate-y, 0));
  cursor: pointer;
`;e3.innerHTML=`
  <style>
    :host {
      --thumb-height: var(--media-range-thumb-height, 10px);
      --track-height: var(--media-range-track-height, 4px);
      --media-range-padding: var(--media-control-padding, 10px);
      --_media-range-padding: var(--media-range-padding, 10px);

      vertical-align: middle;
      box-sizing: border-box;
      display: inline-block;
      position: relative;
      background: var(--media-control-background, rgba(20,20,30, 0.7));
      transition: background 0.15s linear;
      width: 100px;
      height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));
      padding-left: var(--media-range-padding-left, var(--_media-range-padding));
      padding-right: var(--media-range-padding-right, var(--_media-range-padding));
      pointer-events: auto;
      
      font-size: 0;
    }

    :host(:hover) {
      background: var(--media-control-hover-background, rgba(50,50,60, 0.7));
    }

    #container {
      position: relative;
      height: 100%;
    }

    input[type=range] {
      
      -webkit-appearance: none; 
      background: transparent; 

      
      min-height: 100%;
      width: var(--media-range-track-width, 100%); 

      box-sizing: border-box;
      padding: 0;
      margin: 0;
    }

    
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      ${e8}
      
      margin-top: calc(calc(0px - var(--thumb-height) + var(--track-height)) / 2);
    }

    
    input[type=range]::-moz-range-thumb {
      ${e8}
      translate: var(--media-range-track-translate-x, 0) var(--media-range-track-translate-y, 0);
    }

    input[type=range]::-webkit-slider-runnable-track { ${e6} }
    input[type=range]::-moz-range-track { ${e6} }
    input[type=range]::-ms-track {
      
      width: 100%;
      cursor: pointer;
      
      background: transparent;
      border-color: transparent;
      color: transparent;

      ${e6}
    }

    #background,
    #pointer {
      min-width: 40px;
      width: var(--media-range-track-width, 100%);
      height: var(--track-height);
      border-radius: var(--media-range-track-border-radius, 0);
      position: absolute;
      top: 50%;
      transform: translate(var(--media-range-track-translate-x, 0px), calc(var(--media-range-track-translate-y, 0px) - 50%));
      background: var(--media-range-track-background, #333);
    }

    #pointer {
      min-width: auto;
      background: var(--media-range-track-pointer-background);
      border-right: var(--media-range-track-pointer-border-right);
      transition: visibility .25s, opacity .25s;
      visibility: hidden;
      opacity: 0;
    }

    :host(:hover) #pointer {
      transition: visibility .5s, opacity .5s;
      visibility: visible;
      opacity: 1;
    }

    #hoverzone {
      
      z-index: 1;
      display: var(--media-time-range-hover-display, none);
      position: absolute;
      width: 100%;
      bottom: var(--media-time-range-hover-bottom, -5px);
      height: var(--media-time-range-hover-height, max(calc(100% + 5px), 20px));
    }

    #range {
      z-index: 2;
      position: relative;
      height: var(--media-range-track-height, 4px);
    }

    
    :host-context([media-keyboard-control]):host(:focus),
    :host-context([media-keyboard-control]):host(:focus-within) {
      box-shadow: inset 0 0 0 2px rgba(27, 127, 204, 0.9);
    }
    :host-context([media-keyboard-control]) input[type=range]:focus-visible {
      box-shadow: none;
    }
    input[type=range]:focus-visible {
      box-shadow: inset 0 0 0 2px rgba(27, 127, 204, 0.9);
    }
    input[type=range]:focus {
      outline: 0;
    }
    input[type=range]:focus::-webkit-slider-runnable-track {
      outline: 0;
    }

    input[type=range]:disabled::-webkit-slider-thumb {
      background-color: #777;
    }

    input[type=range]:disabled::-webkit-slider-runnable-track {
      background-color: #777;
    }
  </style>
  <div id="container">
    <div id="background"></div>
    <div id="pointer"></div>
    <div id="hoverzone"></div>
    <input id="range" type="range" min="0" max="1000" step="any" value="0">
  </div>
`;class e7 extends w.HTMLElement{constructor(){super(),e5(this,ih,void 0),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e3.content.cloneNode(!0)),this.container=this.shadowRoot.querySelector("#container"),this.range=this.shadowRoot.querySelector("#range"),this.range.addEventListener("input",this.updateBar.bind(this)),e4(this,ih,parseInt(getComputedStyle(this).getPropertyValue("--media-range-thumb-width")||"10",10))}static get observedAttributes(){return["disabled","aria-disabled",l.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,r){var i,n;if(e===l.MEDIA_CONTROLLER){if(t){let a=L.getElementById(t);null==(i=null==a?void 0:a.unassociateElement)||i.call(a,this)}if(r){let o=L.getElementById(r);null==(n=null==o?void 0:o.associateElement)||n.call(o,this)}}else("disabled"===e||"aria-disabled"===e&&t!==r)&&(null==r?this.range.removeAttribute(e):this.range.setAttribute(e,r))}connectedCallback(){var e;let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.associateElement)||e.call(r,this)}this.updateBar()}disconnectedCallback(){var e;let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.unassociateElement)||e.call(r,this)}}updatePointerBar(e){let t=this.range.getBoundingClientRect(),r=(e.clientX-t.left)/t.width;r=Math.max(0,Math.min(1,r));let{style:i}=K(this.shadowRoot,"#pointer");i.setProperty("width",`${r*t.width}px`)}updateBar(){let e=this.getBarColors(),t="linear-gradient(to right, ",r=0;e.forEach(e=>{e[1]<r||(t+=`${e[0]} ${r}%, ${e[0]} ${e[1]}%,`,r=e[1])}),t=t.slice(0,t.length-1)+")";let{style:i}=K(this.shadowRoot,"#range");i.setProperty("--media-range-track-progress-internal",t)}getBarColors(){let e=this.range,t=e.value-e.min,r=e.max-e.min,i=t/r*100,n=0;if(e.value>e.min&&e.value<e.max){let a=e2(this,ih)*(.5-i/100);n=a/e.offsetWidth*100}return[["var(--media-range-bar-color, #fff)",i+n],["transparent",100]]}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}ih=new WeakMap,w.customElements.get("media-chrome-range")||w.customElements.define("media-chrome-range",e7);var e9=e7;let te=L.createElement("template");te.innerHTML=`
  <style>
    :host {
      
      box-sizing: border-box;
      display: inline-flex;
      color: var(--media-icon-color, #eee);
      --media-loading-icon-width: 44px;
    }

    media-time-range,
    ::slotted(media-time-range),
    ::slotted(media-progress-range),
    ::slotted(media-clip-selector) {
      flex-grow: 1;
    }
  </style>

  <slot></slot>
`;class tt extends w.HTMLElement{static get observedAttributes(){return[l.MEDIA_CONTROLLER]}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(te.content.cloneNode(!0))}attributeChangedCallback(e,t,r){var i,n;if(e===l.MEDIA_CONTROLLER){if(t){let a=L.getElementById(t);null==(i=null==a?void 0:a.unassociateElement)||i.call(a,this)}if(r){let o=L.getElementById(r);null==(n=null==o?void 0:o.associateElement)||n.call(o,this)}}}connectedCallback(){var e;let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.associateElement)||e.call(r,this)}}disconnectedCallback(){var e;let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.unassociateElement)||e.call(r,this)}}}w.customElements.get("media-control-bar")||w.customElements.define("media-control-bar",tt);let tr=L.createElement("template");tr.innerHTML=`
  <style>
    :host {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      vertical-align: middle;
      box-sizing: border-box;
      background: var(--media-control-background, rgba(20,20,30, 0.7));
  
      padding: var(--media-control-padding, 10px);

      font-size: 14px;
      line-height: var(--media-text-content-height, var(--media-control-height, 24px));
      font-family: Arial, sans-serif;
      text-align: center;
      color: #ffffff;
      pointer-events: auto;
    }

    
    :host(:focus-visible) {
      box-shadow: inset 0 0 0 2px rgba(27, 127, 204, 0.9);
      outline: 0;
    }

    
    :host(:where(:focus)) {
      box-shadow: none;
      outline: 0;
    }
  </style>
  <span id="container">
  <slot></slot>
  </span>
`;class ti extends w.HTMLElement{static get observedAttributes(){return[l.MEDIA_CONTROLLER]}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(tr.content.cloneNode(!0)),this.container=this.shadowRoot.querySelector("#container")}attributeChangedCallback(e,t,r){var i,n;if(e===l.MEDIA_CONTROLLER){if(t){let a=L.getElementById(t);null==(i=null==a?void 0:a.unassociateElement)||i.call(a,this)}if(r){let o=L.getElementById(r);null==(n=null==o?void 0:o.associateElement)||n.call(o,this)}}}connectedCallback(){var e;let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.associateElement)||e.call(r,this)}}disconnectedCallback(){var e;let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.unassociateElement)||e.call(r,this)}}}w.customElements.get("media-text-display")||w.customElements.define("media-text-display",ti);var tn=ti;w.customElements.get("media-current-time-display")||w.customElements.define("media-current-time-display",class extends tn{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_CURRENT_TIME]}constructor(){super(),this.container.innerHTML=_(0)}attributeChangedCallback(e,t,r){e===u.MEDIA_CURRENT_TIME&&(this.container.innerHTML=_(r)),super.attributeChangedCallback(e,t,r)}}),w.customElements.get("media-duration-display")||w.customElements.define("media-duration-display",class extends tn{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_DURATION]}constructor(){super(),this.container.innerHTML=_(0)}attributeChangedCallback(e,t,r){e===u.MEDIA_DURATION&&(this.container.innerHTML=_(r)),super.attributeChangedCallback(e,t,r)}});let ta=(e,{timesSep:t="&nbsp;/&nbsp;"}={})=>{var r,i,n;let a=null!=e.getAttribute("remaining"),o=null!=e.getAttribute("show-duration"),s=null!=(r=e.mediaCurrentTime)?r:0,l=null!=(n=null!=(i=e.mediaDuration)?i:e.mediaSeekableEnd)?n:0,u=a?_(0-(l-s)):_(s);return o?`${u}${t}${_(l)}`:u},to=e=>{let t=e.mediaCurrentTime,r=e.mediaDuration||e.mediaSeekableEnd;if(null==t||null==r){e.setAttribute("aria-valuetext","video not loaded, unknown time.");return}let i=e.hasAttribute("remaining"),n=e.hasAttribute("show-duration"),a=i?T(0-(r-t)):T(t);if(!n){e.setAttribute("aria-valuetext",a);return}let o=T(r),s=`${a} of ${o}`;e.setAttribute("aria-valuetext",s)};w.customElements.get("media-time-display")||w.customElements.define("media-time-display",class extends tn{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_CURRENT_TIME,u.MEDIA_DURATION,u.MEDIA_SEEKABLE,"remaining","show-duration","disabled"]}constructor(){super(),this.container.innerHTML=ta(this)}connectedCallback(){this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",v.PLAYBACK_TIME()),super.connectedCallback()}disconnectedCallback(){this.disable()}attributeChangedCallback(e,t,r){if([u.MEDIA_CURRENT_TIME,u.MEDIA_DURATION,u.MEDIA_SEEKABLE,"remaining","show-duration"].includes(e)){let i=ta(this);to(this),this.container.innerHTML=i}else"disabled"===e&&r!==t&&(null==r?this.enable():this.disable());super.attributeChangedCallback(e,t,r)}enable(){this.setAttribute("tabindex",0)}disable(){this.removeAttribute("tabindex")}get mediaDuration(){let e=this.getAttribute(u.MEDIA_DURATION);return null!=e?+e:void 0}get mediaCurrentTime(){let e=this.getAttribute(u.MEDIA_CURRENT_TIME);return null!=e?+e:void 0}get mediaSeekable(){let e=this.getAttribute(u.MEDIA_SEEKABLE);if(e)return e.split(":").map(e=>+e)}get mediaSeekableEnd(){var e;let[,t]=null!=(e=this.mediaSeekable)?e:[];return t}get mediaSeekableStart(){var e;let[t]=null!=(e=this.mediaSeekable)?e:[];return t}});let ts=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,tl=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`,tu=L.createElement("template");tu.innerHTML=`
  <style>
  :host([aria-checked="true"]) slot:not([name=on]) > *,
  :host([aria-checked="true"]) ::slotted(:not([slot=on])) {
    display: none !important;
  }

  
  :host(:not([aria-checked="true"])) slot:not([name=off]) > *, 
  :host(:not([aria-checked="true"])) ::slotted(:not([slot=off])) {
    display: none !important;
  }
  </style>

  <slot name="on">${ts}</slot>
  <slot name="off">${tl}</slot>
`;let td=e=>{e.setAttribute("aria-checked",ep(e))};w.customElements.get("media-captions-button")||w.customElements.define("media-captions-button",class extends C{static get observedAttributes(){return[...super.observedAttributes,"no-subtitles-fallback","default-showing",u.MEDIA_CAPTIONS_LIST,u.MEDIA_CAPTIONS_SHOWING,u.MEDIA_SUBTITLES_LIST,u.MEDIA_SUBTITLES_SHOWING]}constructor(e={}){super({slotTemplate:tu,...e}),this._captionsReady=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",v.CLOSED_CAPTIONS()),td(this)}attributeChangedCallback(e,t,r){if([u.MEDIA_CAPTIONS_SHOWING,u.MEDIA_SUBTITLES_SHOWING].includes(e)&&td(this),this.hasAttribute("default-showing")&&"true"!==this.getAttribute("aria-checked")){let i=!this.hasAttribute("no-subtitles-fallback"),n=i?[u.MEDIA_CAPTIONS_LIST,u.MEDIA_SUBTITLES_LIST]:[u.MEDIA_CAPTIONS_LIST];if(n.includes(e)){let a=!!this.getAttribute(u.MEDIA_CAPTIONS_LIST)||!!(i&&this.getAttribute(u.MEDIA_SUBTITLES_LIST));this._captionsReady!==a&&(this._captionsReady=a,this._captionsReady&&this.handleClick())}}super.attributeChangedCallback(e,t,r)}handleClick(){em(this)}});let tc=L.createElement("template");tc.innerHTML=`  
  <slot name="forward"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(8.9 19.87)">30</text><path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/></svg></slot>
`;let th=e=>{let t=Math.abs(+e.getAttribute("seek-offset")),r=g.SEEK_FORWARD_N_SECS({seekOffset:t});e.setAttribute("aria-label",r)},tf=e=>{let t=j(e,"forward"),r=e.getAttribute("seek-offset");F(t,r)};w.customElements.get("media-seek-forward-button")||w.customElements.define("media-seek-forward-button",class extends C{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_CURRENT_TIME,"seek-offset"]}constructor(e={}){super({slotTemplate:tc,...e})}connectedCallback(){this.hasAttribute("seek-offset")||this.setAttribute("seek-offset","30"),th(this),tf(this),super.connectedCallback()}attributeChangedCallback(e,t,r){"seek-offset"===e&&(void 0==r&&this.setAttribute("seek-offset","30"),tf(this),th(this)),super.attributeChangedCallback(e,t,r)}handleClick(){let e=this.getAttribute(u.MEDIA_CURRENT_TIME),t=+this.getAttribute("seek-offset"),r=e&&!Number.isNaN(+e)?+e:0,i=new w.CustomEvent(o.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:r+t});this.dispatchEvent(i)}});let tp=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>
</svg>`,tm=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>
</svg>`,tv=L.createElement("template");tv.innerHTML=`
  <style>
  :host([${u.MEDIA_IS_FULLSCREEN}]) slot:not([name=exit]) > *,
  :host([${u.MEDIA_IS_FULLSCREEN}]) ::slotted(:not([slot=exit])) {
    display: none !important;
  }

  
  :host(:not([${u.MEDIA_IS_FULLSCREEN}])) slot:not([name=enter]) > *,
  :host(:not([${u.MEDIA_IS_FULLSCREEN}])) ::slotted(:not([slot=enter])) {
    display: none !important;
  }
  </style>

  <slot name="enter">${tp}</slot>
  <slot name="exit">${tm}</slot>
`;let tg=e=>{let t=null!=e.getAttribute(u.MEDIA_IS_FULLSCREEN),r=t?g.EXIT_FULLSCREEN():g.ENTER_FULLSCREEN();e.setAttribute("aria-label",r)};w.customElements.get("media-fullscreen-button")||w.customElements.define("media-fullscreen-button",class extends C{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_IS_FULLSCREEN,u.MEDIA_FULLSCREEN_UNAVAILABLE]}constructor(e={}){super({slotTemplate:tv,...e})}connectedCallback(){tg(this),super.connectedCallback()}attributeChangedCallback(e,t,r){e===u.MEDIA_IS_FULLSCREEN&&tg(this),super.attributeChangedCallback(e,t,r)}handleClick(){let e=null!=this.getAttribute(u.MEDIA_IS_FULLSCREEN)?o.MEDIA_EXIT_FULLSCREEN_REQUEST:o.MEDIA_ENTER_FULLSCREEN_REQUEST;this.dispatchEvent(new w.CustomEvent(e,{composed:!0,bubbles:!0}))}});let{MEDIA_TIME_IS_LIVE:ty,MEDIA_PAUSED:tb}=u,{MEDIA_SEEK_TO_LIVE_REQUEST:tE,MEDIA_PLAY_REQUEST:tT}=o,t_=L.createElement("template");t_.innerHTML=`
  <style>

  slot[name=indicator] > *,
  :host ::slotted([slot=indicator]) {
    /* Override styles for icon-only buttons */
    min-width: auto;
    fill: var(--media-live-button-icon-color, rgb(140, 140, 140));
    color: var(--media-live-button-icon-color, rgb(140, 140, 140));
  }

  :host([${ty}]) slot[name=indicator] > *,
  :host([${ty}]) ::slotted([slot=indicator]) {
    fill: var(--media-live-indicator-color, rgb(255, 0, 0));
    color: var(--media-live-indicator-color, rgb(255, 0, 0));
  }

  :host([${ty}]) {
    cursor: not-allowed;
  }

  </style>

  <slot name="indicator"><svg viewBox="0 0 8 16"><circle cx="4" cy="8" r="2"></circle></svg></slot>
  <!-- 
    A new line between spacer and text creates inconsistent spacing
    between slotted items and default slots.
  -->
  <slot name="spacer">&nbsp;</slot><slot name="text">LIVE</slot>
`,w.customElements.get("media-live-button")||w.customElements.define("media-live-button",class extends C{static get observedAttributes(){return[...super.observedAttributes,tb,ty]}constructor(e={}){super({slotTemplate:t_,...e}),this.setAttribute("aria-label","Seek to Live")}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r)}handleClick(){null===this.getAttribute(ty)&&(this.dispatchEvent(new w.CustomEvent(tE,{composed:!0,bubbles:!0})),null!==this.getAttribute(tb)&&this.dispatchEvent(new w.CustomEvent(tT,{composed:!0,bubbles:!0})))}});let tA=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>
</svg>`,tS=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>
</svg>`,tk=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>
</svg>`,tw=L.createElement("template");tw.innerHTML=`
  <style>
  
  :host(:not([${u.MEDIA_VOLUME_LEVEL}])) slot:not([name=high]) > *, 
  :host(:not([${u.MEDIA_VOLUME_LEVEL}])) ::slotted(:not([slot=high])),
  :host([${u.MEDIA_VOLUME_LEVEL}=high]) slot:not([name=high]) > *, 
  :host([${u.MEDIA_VOLUME_LEVEL}=high]) ::slotted(:not([slot=high])) {
    display: none !important;
  }

  :host([${u.MEDIA_VOLUME_LEVEL}=off]) slot:not([name=off]) > *, 
  :host([${u.MEDIA_VOLUME_LEVEL}=off]) ::slotted(:not([slot=off])) {
    display: none !important;
  }

  :host([${u.MEDIA_VOLUME_LEVEL}=low]) slot:not([name=low]) > *, 
  :host([${u.MEDIA_VOLUME_LEVEL}=low]) ::slotted(:not([slot=low])) {
    display: none !important;
  }

  :host([${u.MEDIA_VOLUME_LEVEL}=medium]) slot:not([name=medium]) > *, 
  :host([${u.MEDIA_VOLUME_LEVEL}=medium]) ::slotted(:not([slot=medium])) {
    display: none !important;
  }
  </style>

  <slot name="off">${tA}</slot>
  <slot name="low">${tS}</slot>
  <slot name="medium">${tS}</slot>
  <slot name="high">${tk}</slot>
`;let tL=e=>{let t="off"===e.getAttribute(u.MEDIA_VOLUME_LEVEL),r=t?g.UNMUTE():g.MUTE();e.setAttribute("aria-label",r)};w.customElements.get("media-mute-button")||w.customElements.define("media-mute-button",class extends C{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_VOLUME_LEVEL]}constructor(e={}){super({slotTemplate:tw,...e})}connectedCallback(){tL(this),super.connectedCallback()}attributeChangedCallback(e,t,r){e===u.MEDIA_VOLUME_LEVEL&&tL(this),super.attributeChangedCallback(e,t,r)}handleClick(){let e="off"===this.getAttribute(u.MEDIA_VOLUME_LEVEL)?o.MEDIA_UNMUTE_REQUEST:o.MEDIA_MUTE_REQUEST;this.dispatchEvent(new w.CustomEvent(e,{composed:!0,bubbles:!0}))}});let tI=`<svg aria-hidden="true" viewBox="0 0 28 24">
  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>
</svg>`,tD=L.createElement("template");tD.innerHTML=`
  <style>
  :host([${u.MEDIA_IS_PIP}]) slot:not([name=exit]) > *, 
  :host([${u.MEDIA_IS_PIP}]) ::slotted(:not([slot=exit])) {
    display: none !important;
  }

  
  :host(:not([${u.MEDIA_IS_PIP}])) slot:not([name=enter]) > *, 
  :host(:not([${u.MEDIA_IS_PIP}])) ::slotted(:not([slot=enter])) {
    display: none !important;
  }
  </style>

  <slot name="enter">${tI}</slot>
  <slot name="exit">${tI}</slot>
`;let tR=e=>{let t=null!=e.getAttribute(u.MEDIA_IS_PIP),r=t?g.EXIT_PIP():g.ENTER_PIP();e.setAttribute("aria-label",r)};w.customElements.get("media-pip-button")||w.customElements.define("media-pip-button",class extends C{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_IS_PIP,u.MEDIA_PIP_UNAVAILABLE]}constructor(e={}){super({slotTemplate:tD,...e})}connectedCallback(){tR(this),super.connectedCallback()}attributeChangedCallback(e,t,r){e===u.MEDIA_IS_PIP&&tR(this),super.attributeChangedCallback(e,t,r)}handleClick(){let e=null!=this.getAttribute(u.MEDIA_IS_PIP)?o.MEDIA_EXIT_PIP_REQUEST:o.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new w.CustomEvent(e,{composed:!0,bubbles:!0}))}});let tO=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="m6 21 15-9L6 3v18Z"/>
</svg>`,tP=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>
</svg>`,tC=L.createElement("template");tC.innerHTML=`
  <style>
  :host([${u.MEDIA_PAUSED}]) slot[name=pause] > *, 
  :host([${u.MEDIA_PAUSED}]) ::slotted([slot=pause]) {
    display: none !important;
  }

  :host(:not([${u.MEDIA_PAUSED}])) slot[name=play] > *, 
  :host(:not([${u.MEDIA_PAUSED}])) ::slotted([slot=play]) {
    display: none !important;
  }
  </style>

  <slot name="play">${tO}</slot>
  <slot name="pause">${tP}</slot>
`;let tM=e=>{let t=null!=e.getAttribute(u.MEDIA_PAUSED),r=t?g.PLAY():g.PAUSE();e.setAttribute("aria-label",r)};w.customElements.get("media-play-button")||w.customElements.define("media-play-button",class extends C{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_PAUSED]}constructor(e={}){super({slotTemplate:tC,...e})}connectedCallback(){tM(this),super.connectedCallback()}attributeChangedCallback(e,t,r){e===u.MEDIA_PAUSED&&tM(this),super.attributeChangedCallback(e,t,r)}handleClick(){let e=null!=this.getAttribute(u.MEDIA_PAUSED)?o.MEDIA_PLAY_REQUEST:o.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new w.CustomEvent(e,{composed:!0,bubbles:!0}))}});let tx=[1,1.25,1.5,1.75,2],tN=L.createElement("template");tN.innerHTML=`
  <span id="container"></span>
`,w.customElements.get("media-playback-rate-button")||w.customElements.define("media-playback-rate-button",class extends C{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_PLAYBACK_RATE,"rates"]}constructor(e={}){super({slotTemplate:tN,...e}),this._rates=tx,this.container=this.shadowRoot.querySelector("#container"),this.container.innerHTML="1x"}attributeChangedCallback(e,t,r){if("rates"===e){let i=(null!=r?r:"").trim().split(/\s*,?\s+/).map(e=>Number(e)).filter(e=>!Number.isNaN(e)).sort((e,t)=>e-t);this._rates=i.length?i:tx;return}if(e===u.MEDIA_PLAYBACK_RATE){let n=r?+r:Number.NaN,a=Number.isNaN(n)?1:n;this.container.innerHTML=`${a}x`,this.setAttribute("aria-label",v.PLAYBACK_RATE({playbackRate:a}));return}super.attributeChangedCallback(e,t,r)}handleClick(){var e,t;let r=+this.getAttribute(u.MEDIA_PLAYBACK_RATE)||1,i=null!=(t=null!=(e=this._rates.find(e=>e>r))?e:this._rates[0])?t:1,n=new w.CustomEvent(o.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:i});this.dispatchEvent(n)}});let tU=L.createElement("template");tU.innerHTML=`
  <style>
    :host {
      pointer-events: none;
      display: inline-block;
      box-sizing: border-box;
    }

    img {
      max-width: 100%;
      max-height: 100%;
      min-width: 100%;
      min-height: 100%;
      background-repeat: no-repeat;
      background-position: var(--media-background-position, var(--media-object-position, center));
      background-size: var(--media-background-size, var(--media-object-fit, contain));
      object-fit: var(--media-object-fit, contain);
      object-position: var(--media-object-position, center);
    }
  </style>

  <img aria-hidden="true" id="image"/>
`;let tF=e=>{e.style.removeProperty("background-image")},tB=(e,t)=>{e.style["background-image"]=`url('${t}')`};class tj extends w.HTMLElement{static get observedAttributes(){return["placeholder-src","src"]}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(tU.content.cloneNode(!0)),this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,t,r){"src"===e&&(null==r?this.image.removeAttribute("src"):this.image.setAttribute("src",r)),"placeholder-src"===e&&(null==r?tF(this.image):tB(this.image,r))}}w.customElements.get("media-poster-image")||w.customElements.define("media-poster-image",tj);var tH=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},tV=(e,t,r)=>{return tH(e,t,"read from private field"),r?r.call(e):t.get(e)},tK=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},tG=(e,t,r,i)=>{return tH(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r},tW=(e,t,r)=>{return tH(e,t,"access private method"),r};let tq=e=>{let t=e.range,r=T(+t.value),i=T(+t.max),n=r&&i?`${r} of ${i}`:"video not loaded, unknown time.";t.setAttribute("aria-valuetext",n)},tY=L.createElement("template");tY.innerHTML=`
  <style>
    :host {
      --media-preview-background-color: rgba(20,20,30, .5);
      --media-preview-background: var(--media-control-background,
        var(--media-preview-background-color));
      --media-preview-border-radius: 3px;
      --media-box-padding-left: 10px;
      --media-box-padding-right: 10px;
      color: #fff;
    }

    #preview-rail,
    #current-rail {
      
      width: 1%;
      position: absolute;
      left: 0;
      bottom: 100%;
      pointer-events: none;
    }

    [part~="box"] {
      
      position: absolute;
      bottom: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      transform: translateX(-50%);
    }

    [part~="preview-box"] {
      transition: visibility .25s, opacity .25s;
      visibility: hidden;
      opacity: 0;
    }

    media-preview-thumbnail,
    ::slotted(media-preview-thumbnail) {
      visibility: hidden;
      transition: visibility 0s .25s;
      background: var(--media-preview-time-background, var(--media-preview-background));
      box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgba(0,0,0, .2));
      max-width: var(--media-preview-thumbnail-max-width, 180px);
      max-height: var(--media-preview-thumbnail-max-height, 160px);
      min-width: var(--media-preview-thumbnail-min-width, 120px);
      min-height: var(--media-preview-thumbnail-min-height, 80px);
      border: var(--media-preview-thumbnail-border);
      border-radius: var(--media-preview-thumbnail-border-radius,
        var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);
    }

    :host([${u.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,
    :host([${u.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {
      transition-delay: 0s;
      visibility: visible;
    }

    media-preview-time-display,
    ::slotted(media-preview-time-display) {
      color: unset;
      min-width: 0;
      
      transition: min-width 0s .25s, border-radius 0s .25s;
      background: var(--media-preview-time-background, var(--media-preview-background));
      border-radius: var(--media-preview-time-border-radius,
        var(--media-preview-border-radius) var(--media-preview-border-radius)
        var(--media-preview-border-radius) var(--media-preview-border-radius));
      padding: var(--media-preview-time-padding, 1px 10px 0);
      margin: var(--media-preview-time-margin, 0 0 10px);
      text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgba(0,0,0, .75));
    }

    :host([${u.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,
    :host([${u.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {
      transition-delay: 0s;
      min-width: 100%;
      border-radius: var(--media-preview-time-border-radius,
        0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));
    }

    :host([${u.MEDIA_PREVIEW_IMAGE}]:hover) [part~="preview-box"],
    :host([${u.MEDIA_PREVIEW_TIME}]:hover) [part~="preview-box"] {
      transition: visibility .5s, opacity .5s;
      visibility: visible;
      opacity: 1;
    }

    :host([${u.MEDIA_PREVIEW_TIME}]:hover) {
      --media-time-range-hover-display: block;
    }
  </style>
  <div id="preview-rail">
    <slot name="preview" part="box preview-box">
      <media-preview-thumbnail></media-preview-thumbnail>
      <media-preview-time-display></media-preview-time-display>
    </slot>
  </div>
  <div id="current-rail">
    <slot name="current" part="box current-box">
      
    </slot>
  </div>
`;class t$ extends e9{constructor(){super(),tK(this,ib),tK(this,iL),tK(this,iD),tK(this,ip,void 0),tK(this,im,void 0),tK(this,iv,void 0),tK(this,ig,void 0),tK(this,iy,void 0),tK(this,iT,e=>{if([...tV(this,ip)].some(t=>e.composedPath().includes(t)))return;this.updatePointerBar(e);let t=+this.getAttribute(u.MEDIA_DURATION);if(!t)return;let r=this.range.getBoundingClientRect(),i=(e.clientX-r.left)/r.width;i=Math.max(0,Math.min(1,i));let n=tW(this,ib,iE).call(this,tV(this,im),i),{style:a}=K(this.shadowRoot,"#preview-rail");a.transform=`translateX(${n})`;let s=i*t,l=new w.CustomEvent(o.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:s});this.dispatchEvent(l)}),tK(this,i_,!1),tK(this,iA,e=>{(!e.composedPath().includes(this)||[...tV(this,ip)].some(t=>e.composedPath().includes(t)))&&(w.removeEventListener("pointermove",tV(this,iA)),tG(this,i_,!1),tV(this,ik).call(this))}),tK(this,iS,()=>{w.addEventListener("pointermove",tV(this,iT),!1)}),tK(this,ik,()=>{w.removeEventListener("pointermove",tV(this,iT));let e=new w.CustomEvent(o.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:null});this.dispatchEvent(e)}),tK(this,iw,()=>{let e=this.getAttribute(u.MEDIA_DURATION);!tV(this,i_)&&e&&(tG(this,i_,!0),tV(this,iS).call(this),w.addEventListener("pointermove",tV(this,iA),!1))}),this.container.appendChild(tY.content.cloneNode(!0)),this.range.addEventListener("input",()=>{cancelAnimationFrame(this._refreshId);let e=this.range.value,t=new w.CustomEvent(o.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}),this._refreshBar=()=>{let e=(performance.now()-this._updateTimestamp)/1e3;this.range.value=this.mediaCurrentTime+e*this.mediaPlaybackRate,this.updateBar(),this.updateCurrentBox(),this._refreshId=requestAnimationFrame(this._refreshBar)},tG(this,ip,this.shadowRoot.querySelectorAll('[part~="box"]')),tG(this,im,this.shadowRoot.querySelector('[part~="preview-box"]')),tG(this,iv,this.shadowRoot.querySelector('[part~="current-box"]'));let e=getComputedStyle(this);tG(this,ig,parseInt(e.getPropertyValue("--media-box-padding-left"))),tG(this,iy,parseInt(e.getPropertyValue("--media-box-padding-right"))),tW(this,iL,iI).call(this)}static get observedAttributes(){return[...super.observedAttributes,"thumbnails","disabled",u.MEDIA_PAUSED,u.MEDIA_DURATION,u.MEDIA_SEEKABLE,u.MEDIA_CURRENT_TIME,u.MEDIA_PREVIEW_IMAGE,u.MEDIA_PREVIEW_TIME,u.MEDIA_BUFFERED,u.MEDIA_PLAYBACK_RATE,u.MEDIA_LOADING]}connectedCallback(){this.range.setAttribute("aria-label",v.SEEK()),super.connectedCallback()}disconnectedCallback(){cancelAnimationFrame(this._refreshId),super.disconnectedCallback()}attributeChangedCallback(e,t,r){var i,n,a,o,s;e!==u.MEDIA_CURRENT_TIME&&e!==u.MEDIA_PAUSED&&e!==u.MEDIA_LOADING||(this._updateTimestamp=performance.now(),this.range.value=this.mediaCurrentTime,tq(this),this.updateBar(),this.updateCurrentBox(),cancelAnimationFrame(this._refreshId),this.mediaPaused||this.mediaLoading||(this._refreshId=requestAnimationFrame(this._refreshBar))),e===u.MEDIA_DURATION&&(this.range.max=null!=(n=null!=(i=this.mediaSeekableEnd)?i:this.mediaDuration)?n:1e3,tq(this),this.updateBar(),this.updateCurrentBox()),e===u.MEDIA_SEEKABLE&&(this.range.min=null!=(a=this.mediaSeekableStart)?a:0,this.range.max=null!=(s=null!=(o=this.mediaSeekableEnd)?o:this.mediaDuration)?s:1e3,tq(this),this.updateBar()),e===u.MEDIA_BUFFERED&&this.updateBar(),"disabled"===e&&(null==r?tW(this,iL,iI).call(this):tW(this,iD,iR).call(this)),super.attributeChangedCallback(e,t,r)}get mediaPaused(){return this.hasAttribute(u.MEDIA_PAUSED)}get mediaLoading(){return this.hasAttribute(u.MEDIA_LOADING)}get mediaDuration(){let e=this.getAttribute(u.MEDIA_DURATION);return null!=e?+e:void 0}get mediaCurrentTime(){let e=this.getAttribute(u.MEDIA_CURRENT_TIME);return null!=e?+e:void 0}get mediaPlaybackRate(){let e=this.getAttribute(u.MEDIA_PLAYBACK_RATE);return null!=e?+e:1}get mediaBuffered(){let e=this.getAttribute(u.MEDIA_BUFFERED);return e?e.split(" ").map(e=>e.split(":").map(e=>+e)):[]}get mediaSeekable(){let e=this.getAttribute(u.MEDIA_SEEKABLE);if(e)return e.split(":").map(e=>+e)}get mediaSeekableEnd(){var e;let[,t]=null!=(e=this.mediaSeekable)?e:[];return t}get mediaSeekableStart(){var e;let[t]=null!=(e=this.mediaSeekable)?e:[];return t}getBarColors(){var e;let t=super.getBarColors(),{range:r}=this,i=r.max-r.min,n=this.mediaBuffered;if(!n.length||!Number.isFinite(i)||i<=0)return t;let a=this.mediaCurrentTime,[,o=r.min]=null!=(e=n.find(([e,t])=>e<=a&&a<=t))?e:[],s=o-r.min;return t.splice(1,0,["var(--media-time-buffered-color, rgba(255,255,255, .4))",s/i*100]),t}updateCurrentBox(){if(!tV(this,iv).assignedElements().length)return;let e=this.range.value/(this.range.max-this.range.min),t=tW(this,ib,iE).call(this,tV(this,iv),e),{style:r}=K(this.shadowRoot,"#current-rail");r.transform=`translateX(${t})`}}ip=new WeakMap,im=new WeakMap,iv=new WeakMap,ig=new WeakMap,iy=new WeakMap,ib=new WeakSet,iE=function(e,t){var r;let i=`${1e4*t}%`,n=e.offsetWidth;if(!n)return i;let a=null!=(r=this.getAttribute("bounds")?V(this,`#${this.getAttribute("bounds")}`):this.parentElement)?r:this,o=this.range.getBoundingClientRect(),s=a.getBoundingClientRect(),l=(tV(this,ig)-(o.left-s.left-n/2))/o.width*100,u=(s.right-o.left-n/2-tV(this,iy))/o.width*100;return Number.isNaN(l)||(i=`max(${100*l}%, ${i})`),Number.isNaN(u)||(i=`min(${i}, ${100*u}%)`),i},iT=new WeakMap,i_=new WeakMap,iA=new WeakMap,iS=new WeakMap,ik=new WeakMap,iw=new WeakMap,iL=new WeakSet,iI=function(){this.addEventListener("pointermove",tV(this,iw),!1)},iD=new WeakSet,iR=function(){w.removeEventListener("pointermove",tV(this,iA)),this.removeEventListener("pointermove",tV(this,iw)),tG(this,i_,!1),tV(this,ik).call(this)},w.customElements.get("media-time-range")||w.customElements.define("media-time-range",t$);var tz=t$;w.customElements.get("media-progress-range")||w.customElements.define("media-progress-range",class extends tz{constructor(){super(),console.warn("MediaChrome: <media-progress-range> is deprecated. Use <media-time-range> instead.")}});let tX=L.createElement("template");tX.innerHTML=`  
  <slot name="backward"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(2.18 19.87)">30</text><path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/></svg></slot>
`;let tQ=e=>{let t=Math.abs(+e.getAttribute("seek-offset")),r=g.SEEK_BACK_N_SECS({seekOffset:t});e.setAttribute("aria-label",r)},tZ=e=>{let t=j(e,"backward"),r=e.getAttribute("seek-offset");F(t,r)};w.customElements.get("media-seek-backward-button")||w.customElements.define("media-seek-backward-button",class extends C{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_CURRENT_TIME]}constructor(e={}){super({slotTemplate:tX,...e})}connectedCallback(){this.hasAttribute("seek-offset")||this.setAttribute("seek-offset","30"),tQ(this),tZ(this),super.connectedCallback()}attributeChangedCallback(e,t,r){"seek-offset"===e&&(void 0==r&&this.setAttribute("seek-offset","30"),tZ(this),tQ(this)),super.attributeChangedCallback(e,t,r)}handleClick(){let e=this.getAttribute(u.MEDIA_CURRENT_TIME),t=+this.getAttribute("seek-offset"),r=e&&!Number.isNaN(+e)?+e:0,i=new w.CustomEvent(o.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:Math.max(r-t,0)});this.dispatchEvent(i)}}),w.customElements.get("media-preview-time-display")||w.customElements.define("media-preview-time-display",class extends tn{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,t,r){e===u.MEDIA_PREVIEW_TIME&&null!=r&&(this.container.textContent=_(r)),super.attributeChangedCallback(e,t,r)}});let tJ=L.createElement("template");tJ.innerHTML=`
  <style>
    :host {
      box-sizing: border-box;
      display: inline-block;
      overflow: hidden;
    }

    img {
      display: none;
      position: relative;
    }
  </style>
  <img crossorigin loading="eager" decoding="async" />
`;class t0 extends w.HTMLElement{static get observedAttributes(){return[l.MEDIA_CONTROLLER,"time",u.MEDIA_PREVIEW_IMAGE,u.MEDIA_PREVIEW_COORDS]}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(tJ.content.cloneNode(!0))}connectedCallback(){var e;let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.associateElement)||e.call(r,this)}}disconnectedCallback(){var e;let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.unassociateElement)||e.call(r,this)}}attributeChangedCallback(e,t,r){var i,n;if(["time",u.MEDIA_PREVIEW_IMAGE,u.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===l.MEDIA_CONTROLLER){if(t){let a=L.getElementById(t);null==(i=null==a?void 0:a.unassociateElement)||i.call(a,this)}if(r){let o=L.getElementById(r);null==(n=null==o?void 0:o.associateElement)||n.call(o,this)}}}update(){let e=this.getAttribute(u.MEDIA_PREVIEW_COORDS),t=this.getAttribute(u.MEDIA_PREVIEW_IMAGE);if(!(e&&t))return;let[r,i,n,a]=e.split(/\s+/).map(e=>+e),o=t.split("#")[0],s=getComputedStyle(this),{maxWidth:l,maxHeight:d,minWidth:c,minHeight:h}=s,f=Math.min(parseInt(l)/n,parseInt(d)/a),p=Math.max(parseInt(c)/n,parseInt(h)/a),m=f<1,v=m?f:p>1?p:1,{style:g}=K(this.shadowRoot,":host"),y=K(this.shadowRoot,"img").style,b=this.shadowRoot.querySelector("img"),E=m?"min":"max";g.setProperty(`${E}-width`,"initial","important"),g.setProperty(`${E}-height`,"initial","important"),g.width=`${n*v}px`,g.height=`${a*v}px`;let T=()=>{y.width=`${this.imgWidth*v}px`,y.height=`${this.imgHeight*v}px`,y.display="block"};b.src!==o&&(b.onload=()=>{this.imgWidth=b.naturalWidth,this.imgHeight=b.naturalHeight,T()},b.src=o,T()),T(),y.transform=`translate(-${r*v}px, -${i*v}px)`}}w.customElements.get("media-preview-thumbnail")||w.customElements.define("media-preview-thumbnail",t0);let t1=L.createElement("template"),t2=`
<svg aria-hidden="true" viewBox="0 0 100 100">
  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
    <animateTransform
       attributeName="transform"
       attributeType="XML"
       type="rotate"
       dur="1s"
       from="0 50 50"
       to="360 50 50"
       repeatCount="indefinite" />
  </path>
</svg>
`;t1.innerHTML=`
<style>
:host {
  display: inline-block;
  vertical-align: middle;
  box-sizing: border-box;
}

#status {
  color: rgba(0,0,0,0);
  width: 0px;
  height: 0px;
}

:host slot[name=loading] > *,
:host ::slotted([slot=loading]) {
  opacity: 1;
  transition: opacity 0.15s;
}

:host(:not([is-loading])) slot[name=loading] > *, 
:host(:not([is-loading])) ::slotted([slot=loading]) {
  opacity: 0;
}

:host(:not([is-loading])) #status {
  display: none;
}

svg, img, ::slotted(svg), ::slotted(img) {
  width: var(--media-loading-icon-width, 100px);
  height: var(--media-loading-icon-height);
  fill: var(--media-icon-color, #fff);
  vertical-align: middle;
}
</style>

<slot name="loading">${t2}</slot>
<div id="status" role="status" aria-live="polite">${v.MEDIA_LOADING()}</div>
`;class t5 extends w.HTMLElement{static get observedAttributes(){return[l.MEDIA_CONTROLLER,u.MEDIA_PAUSED,u.MEDIA_LOADING,"loading-delay"]}constructor(){super();let e=this.attachShadow({mode:"open"}),t=t1.content.cloneNode(!0);e.appendChild(t)}attributeChangedCallback(e,t,r){var i,n,a;if(e===u.MEDIA_LOADING||e===u.MEDIA_PAUSED){let o=void 0!=this.getAttribute(u.MEDIA_PAUSED),s=void 0!=this.getAttribute(u.MEDIA_LOADING),d=!o&&s;if(d){if(!this.loadingDelayHandle&&d){let c=+(null!=(i=this.getAttribute("loading-delay"))?i:500);this.loadingDelayHandle=setTimeout(()=>{this.setAttribute("is-loading",""),this.loadingDelayHandle=void 0},c)}}else this.loadingDelayHandle&&(clearTimeout(this.loadingDelayHandle),this.loadingDelayHandle=void 0),this.removeAttribute("is-loading")}else if(e===l.MEDIA_CONTROLLER){if(t){let h=L.getElementById(t);null==(n=null==h?void 0:h.unassociateElement)||n.call(h,this)}if(r){let f=L.getElementById(r);null==(a=null==f?void 0:f.associateElement)||a.call(f,this)}}}connectedCallback(){var e;let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.associateElement)||e.call(r,this)}}disconnectedCallback(){var e;this.loadingDelayHandle&&(clearTimeout(this.loadingDelayHandle),this.loadingDelayHandle=void 0);let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.unassociateElement)||e.call(r,this)}}}w.customElements.get("media-loading-indicator")||w.customElements.define("media-loading-indicator",t5);let t4=L.createElement("template");t4.innerHTML=`
  <style>
    :host {
    }
  </style>
  <slot></slot>
`;class t3 extends w.HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t4.content.cloneNode(!0))}}w.customElements.get("media-title-bar")||w.customElements.define("media-title-bar",t3);let t8=e=>{var t;let r=null!=e.getAttribute(u.MEDIA_MUTED);if(r)return 0;let i=+(null!=(t=e.getAttribute(u.MEDIA_VOLUME))?t:1);return Math.round(i*e.range.max)},t6=({value:e,max:t})=>`${Math.round(e/t*100)}%`;w.customElements.get("media-volume-range")||w.customElements.define("media-volume-range",class extends e9{static get observedAttributes(){return[...super.observedAttributes,u.MEDIA_VOLUME,u.MEDIA_MUTED,u.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.max=100,this.range.addEventListener("input",()=>{let e=this.range.value/this.range.max,t=new w.CustomEvent(o.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)})}connectedCallback(){this.range.setAttribute("aria-label",v.VOLUME()),super.connectedCallback()}attributeChangedCallback(e,t,r){if(e===u.MEDIA_VOLUME||e===u.MEDIA_MUTED){let i=t8(this);this.range.value=i,this.range.setAttribute("aria-valuetext",t6(this.range)),this.updateBar()}super.attributeChangedCallback(e,t,r)}}),w.customElements.get("media-chrome")||w.customElements.define("media-chrome",class extends e0{}),w.customElements.get("media-container")||w.customElements.define("media-container",class extends e0{constructor(){super(),console.warn("MediaChrome: <media-container> is deprecated. Use <media-controller>.")}});var t7=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},t9=(e,t,r)=>{return t7(e,t,"read from private field"),r?r.call(e):t.get(e)},re=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},rt=(e,t,r,i)=>{return t7(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r},rr=(e,t,r)=>{return t7(e,t,"access private method"),r};let ri=L.createElement("template");ri.innerHTML=`
<style>
  :host ul {
    list-style: none;
    display: inline-flex;
    flex-direction: column;
    gap: 0.5em;
    margin: 0;
    padding: 0.5em;
    background-color: var(--media-listbox-background, var(--media-control-background, rgba(10,10,15, .8)));
    color: var(--media-text-color, white);
    font-family: Arial, sans-serif;
  }

  ::slotted(media-chrome-listitem[tabindex="0"]:focus-visible) {
    box-shadow: inset 0 0 0 2px rgba(27, 127, 204, 0.9);
    outline: 0;
  }

  ::slotted(media-chrome-listitem[aria-selected="true"]) {
    background-color: var(--media-listbox-selected-background, rgba(122,122,184, .8));
  }

  ::slotted(media-chrome-listitem:hover) {
    background-color: var(--media-listbox-hover-background, rgba(82,82,122, .8));
    outline: var(--media-listbox-hover-outline, none);
  }
</style>
<ul tabindex="0">
  <slot></slot>
</ul>
`;class rn extends w.HTMLElement{constructor(e={}){super(),re(this,ix),re(this,ij),re(this,iV),re(this,iG),re(this,iO,""),re(this,iP,null),re(this,iC,void 0),re(this,iM,void 0),re(this,iU,e=>{this.handleClick(e)}),re(this,iF,e=>{let{key:t}=e;if("Escape"===t){this.removeEventListener("keyup",t9(this,iF));return}"Enter"===t||" "===t?this.handleSelection(e):this.handleMovement(e)}),re(this,iB,e=>{let{metaKey:t,altKey:r}=e;if(t||r){this.removeEventListener("keyup",t9(this,iF));return}e.preventDefault(),this.addEventListener("keyup",t9(this,iF),{once:!0})});let t=this.attachShadow({mode:"open"}),r=ri.content.cloneNode(!0);this.nativeEl=r;let i=e.slotTemplate;i||((i=L.createElement("template")).innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(i.content.cloneNode(!0)),t.appendChild(r),rt(this,iC,this.shadowRoot.querySelector("slot")),t9(this,iC).addEventListener("slotchange",()=>{rt(this,iM,t9(this,iC).assignedElements()),1===t9(this,iM).length&&"slot"===t9(this,iM)[0].nodeName.toLowerCase()&&rt(this,iM,t9(this,iM)[0].assignedElements());let e=t9(this,ix,iN),t=e.some(e=>"0"===e.getAttribute("tabindex"));if(t)return;let r=e.filter(e=>"true"===e.getAttribute("aria-selected"))[0];r||(r=e[0]),r&&(r.setAttribute("tabindex",0),r.setAttribute("aria-selected","true"))})}static get observedAttributes(){return["disabled",l.MEDIA_CONTROLLER]}get selectedOptions(){return t9(this,ix,iN).filter(e=>"true"===e.getAttribute("aria-selected"))}focus(){var e;null==(e=this.selectedOptions[0])||e.focus()}enable(){this.addEventListener("click",t9(this,iU)),this.addEventListener("keydown",t9(this,iB))}disable(){this.removeEventListener("click",t9(this,iU)),this.removeEventListener("keyup",t9(this,iF))}attributeChangedCallback(e,t,r){var i,n;if(e===l.MEDIA_CONTROLLER){if(t){let a=L.getElementById(t);null==(i=null==a?void 0:a.unassociateElement)||i.call(a,this)}if(r){let o=L.getElementById(r);null==(n=null==o?void 0:o.associateElement)||n.call(o,this)}}else"disabled"===e&&r!==t&&(null==r?this.enable():this.disable())}connectedCallback(){var e;this.hasAttribute("disabled")||this.enable(),this.hasAttribute("role")||this.setAttribute("role","listbox");let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.associateElement)||e.call(r,this)}}disconnectedCallback(){var e;this.disable();let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.unassociateElement)||e.call(r,this)}}get keysUsed(){return["Enter"," ","ArrowDown","ArrowUp","Home","End"]}handleSelection(e){let t=rr(this,ij,iH).call(this,e);if(!t)return;let r="true"===t.getAttribute("aria-selected");"true"!==this.getAttribute("aria-multiselectable")&&t9(this,iM).forEach(e=>e.setAttribute("aria-selected","false")),r?t.setAttribute("aria-selected","false"):t.setAttribute("aria-selected","true"),this.dispatchEvent(new Event("change"))}handleMovement(e){let t;let{key:r}=e,i=t9(this,ix,iN),n=rr(this,ij,iH).call(this,e);switch(n||(n=i.filter(e=>"0"===e.getAttribute("tabindex"))[0]),r){case"ArrowDown":(null==(t=n.nextElementSibling)?void 0:t.hasAttribute("disabled"))&&(t=t.nextElementSibling);break;case"ArrowUp":(null==(t=n.previousElementSibling)?void 0:t.hasAttribute("disabled"))&&(t=t.previousElementSibling);break;case"Home":t=i[0];break;case"End":t=i[i.length-1];break;default:t=rr(this,iV,iK).call(this,r)}t&&(i.forEach(e=>e.setAttribute("tabindex","-1")),t.setAttribute("tabindex","0"),t.focus())}handleClick(e){let t=rr(this,ij,iH).call(this,e);!t||t.hasAttribute("disabled")||(t9(this,ix,iN).forEach(e=>e.setAttribute("tabindex","-1")),t.setAttribute("tabindex","0"),this.handleSelection(e))}}iO=new WeakMap,iP=new WeakMap,iC=new WeakMap,iM=new WeakMap,ix=new WeakSet,iN=function(){return t9(this,iM).filter(e=>!e.hasAttribute("disabled"))},iU=new WeakMap,iF=new WeakMap,iB=new WeakMap,ij=new WeakSet,iH=function(e){if(e.target===this)return;let t=e.composedPath(),r=t.findIndex(e=>"MEDIA-CHROME-LISTITEM"===e.nodeName);return t[r]},iV=new WeakSet,iK=function(e){rr(this,iG,iW).call(this);let t=t9(this,ix,iN),r=t.findIndex(e=>"0"===e.getAttribute("tabindex"));rt(this,iO,t9(this,iO)+e);let i=t9(this,iO).split("").every(t=>t===e),n=t.slice(r+(i?1:0)).filter(e=>e.textContent.toLowerCase().startsWith(t9(this,iO))),a=t.slice(0,r-(i?1:0)).filter(e=>e.textContent.toLowerCase().startsWith(t9(this,iO))),o=[],s=[];i&&(o=t.slice(r+(i?1:0)).filter(t=>t.textContent.startsWith(e)),s=t.slice(0,r-(i?1:0)).filter(t=>t.textContent.startsWith(e)));let l=[...n,...a,...o,...s];return l[0]},iG=new WeakSet,iW=function(){w.clearTimeout(t9(this,iP)),rt(this,iP,null),rt(this,iP,w.setTimeout(()=>{rt(this,iO,""),rt(this,iP,null)},500))},w.customElements.get("media-chrome-listbox")||w.customElements.define("media-chrome-listbox",rn);var ra=rn,ro=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},rs=(e,t,r)=>{return ro(e,t,"read from private field"),r?r.call(e):t.get(e)},rl=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ru=(e,t,r,i)=>{return ro(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r},rd=(e,t,r)=>{return ro(e,t,"access private method"),r};let rc=L.createElement("template");rc.innerHTML=`
  <style>
  :host {
    display: inline-block;
  }

  media-chrome-button:not(:focus-visible) {
    outline: none;
  }
  </style>

  <media-chrome-button aria-haspopup="listbox">
    <slot name="button-content"></slot>
  </media-chrome-button>
  <slot name="listbox" hidden>
    <media-chrome-listbox id="listbox" part="listbox">
      <slot></slot>
    </media-chrome-listbox>
  </slot>
`;class rh extends w.HTMLElement{constructor(){super(),rl(this,iZ),rl(this,i0),rl(this,i2),rl(this,i4),rl(this,iq,void 0),rl(this,iY,void 0),rl(this,i$,void 0),rl(this,iz,void 0),rl(this,iX,void 0),rl(this,iQ,!1);let e=this.attachShadow({mode:"open"}),t=rc.content.cloneNode(!0);this.nativeEl=t,e.appendChild(t),ru(this,iq,rd(this,iZ,iJ).bind(this)),ru(this,iY,rd(this,i0,i1).bind(this)),ru(this,i$,this.shadowRoot.querySelector("media-chrome-button")),ru(this,iz,this.shadowRoot.querySelector("media-chrome-listbox")),ru(this,iX,this.shadowRoot.querySelector("slot[name=listbox]")),rs(this,iX).addEventListener("slotchange",()=>{rs(this,iz).removeEventListener("change",rs(this,iY)),ru(this,iz,rs(this,iX).assignedElements()[0]||rs(this,iz)),rs(this,iz).addEventListener("change",rs(this,iY))})}static get observedAttributes(){return["disabled",l.MEDIA_CONTROLLER]}enable(){rs(this,i$).removeAttribute("disabled"),rs(this,i$).handleClick=rs(this,iq),rd(this,i4,i3).call(this),rs(this,iz).addEventListener("change",rs(this,iY))}disable(){rs(this,i$).setAttribute("disabled",""),rs(this,i$).handleClick=()=>{},rs(this,iz).addEventListener("change",rs(this,iY))}attributeChangedCallback(e,t,r){var i,n;if(e===l.MEDIA_CONTROLLER){if(t){let a=L.getElementById(t);null==(i=null==a?void 0:a.unassociateElement)||i.call(a,this),rs(this,iz).removeAttribute(l.MEDIA_CONTROLLER)}if(r){let o=L.getElementById(r);null==(n=null==o?void 0:o.associateElement)||n.call(o,this),rs(this,iz).setAttribute(l.MEDIA_CONTROLLER,r)}}else"disabled"===e&&r!==t&&(null==r?this.enable():this.disable())}connectedCallback(){var e;this.hasAttribute("disabled")||this.enable();let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.associateElement)||e.call(r,this),rs(this,iz).setAttribute(l.MEDIA_CONTROLLER,t)}}disconnectedCallback(){var e;this.disable();let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.unassociateElement)||e.call(r,this),rs(this,iz).removeAttribute(l.MEDIA_CONTROLLER)}}}iq=new WeakMap,iY=new WeakMap,i$=new WeakMap,iz=new WeakMap,iX=new WeakMap,iQ=new WeakMap,iZ=new WeakSet,iJ=function(){rd(this,i2,i5).call(this)},i0=new WeakSet,i1=function(){rd(this,i2,i5).call(this)},i2=new WeakSet,i5=function(){rs(this,iX).hidden=!rs(this,iX).hidden,rd(this,i4,i3).call(this),rs(this,iX).hidden?rs(this,i$).focus():rs(this,iz).focus()},i4=new WeakSet,i3=function(){rs(this,i$).setAttribute("aria-expanded",rs(this,iQ)),ru(this,iQ,!rs(this,iQ))},w.customElements.get("media-chrome-menu-button")||w.customElements.define("media-chrome-menu-button",rh);let rf=L.createElement("template");rf.innerHTML=`
<style>
  :host {
    display: list-item;
    line-height: 1em;
    padding: 0.5em;
    margin: 0em;
    cursor: pointer;
  }

  ::slotted:not(:focus-visible) {
    outline: none;
  }
</style>
<li>
  <slot></slot>
</li>
`;class rp extends w.HTMLElement{static get observedAttributes(){return["disabled","aria-selected","value",l.MEDIA_CONTROLLER]}constructor(){super();let e=this.attachShadow({mode:"open"}),t=rf.content.cloneNode(!0);this.nativeEl=t,e.appendChild(t)}set value(e){this.setAttribute("value",e)}get value(){return this.getAttribute("value")}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex",-1),this.hasAttribute("aria-selected")||this.setAttribute("aria-selected","false")}disable(){this.removeAttribute("tabindex")}attributeChangedCallback(e,t,r){var i,n;if(e===l.MEDIA_CONTROLLER){if(t){let a=L.getElementById(t);null==(i=null==a?void 0:a.unassociateElement)||i.call(a,this)}if(r){let o=L.getElementById(r);null==(n=null==o?void 0:o.associateElement)||n.call(o,this)}}else"disabled"===e&&r!==t&&(null==r?this.enable():this.disable())}connectedCallback(){var e;this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","option");let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.associateElement)||e.call(r,this)}}disconnectedCallback(){var e;this.disable();let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.unassociateElement)||e.call(r,this)}}handleClick(){}}w.customElements.get("media-chrome-listitem")||w.customElements.define("media-chrome-listitem",rp);var rm=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},rv=(e,t,r)=>{return rm(e,t,"read from private field"),r?r.call(e):t.get(e)},rg=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ry=(e,t,r,i)=>{return rm(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r},rb=(e,t,r)=>{return rm(e,t,"access private method"),r};let rE=`
  fill: var(--media-icon-color, #eee);
  height: var(--media-captions-indicator-height, 1em);
  vertical-align: var(--media-captions-indicator-vertical-align, bottom);
  margin-inline-start: 1ch;
`,rT=`
<svg style="${rE}" aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,r_=L.createElement("template");r_.innerHTML=`
  <slot hidden name="captions-indicator">${rT}</slot>
`;let rA=(e,t)=>{return e.label===t.label&&e.language===t.language};i8=new WeakMap,i6=new WeakMap,i7=new WeakMap,i9=new WeakMap,ne=new WeakSet,nt=function(e,t){let r=e?eo(null!=e?e:""):[],i=[],n=[];return t.forEach(e=>{r.some(t=>rA(t,e))||i.push(e)}),r.forEach(e=>{t.some(t=>rA(t,e))||n.push(e)}),i.forEach(e=>e.el.remove()),t.filter(e=>!i.includes(e)).concat(n)},nr=new WeakSet,ni=function(e,t){e.forEach(e=>{let r=e.el,i=!0;r||(r=L.createElement("media-chrome-listitem"),i=!1,r.value=t+"!"+el(e),r.textContent=e.label,"cc"===t&&r.append(rv(this,i9).cloneNode(!0))),e.selected?r.setAttribute("aria-selected","true"):r.setAttribute("aria-selected","false"),i||(this.append(r),e.el=r)})},nn=new WeakSet,na=function(){this.contains(rv(this,i7))||this.append(rv(this,i7)),this.hasAttribute(u.MEDIA_CAPTIONS_SHOWING)||this.hasAttribute(u.MEDIA_SUBTITLES_SHOWING)?(rv(this,i7).setAttribute("aria-selected","false"),rv(this,i7).setAttribute("tabindex","-1")):(rv(this,i7).setAttribute("aria-selected","true"),rv(this,i7).setAttribute("tabindex","0")),rb(this,nr,ni).call(this,rv(this,i6),"cc"),rb(this,nr,ni).call(this,rv(this,i8),"subs")},no=new WeakSet,ns=function(){var e,t,r;let[i,n]=null!=(r=null==(t=null==(e=this.selectedOptions[0])?void 0:e.value)?void 0:t.split("!"))?r:[];if(em(this),!n)return;let a=new w.CustomEvent("cc"===i?o.MEDIA_SHOW_CAPTIONS_REQUEST:o.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:n});this.dispatchEvent(a)},w.customElements.get("media-captions-listbox")||w.customElements.define("media-captions-listbox",class extends ra{constructor(){super({slotTemplate:r_}),rg(this,ne),rg(this,nr),rg(this,nn),rg(this,no),rg(this,i8,[]),rg(this,i6,[]),rg(this,i7,void 0),rg(this,i9,void 0);let e=L.createElement("media-chrome-listitem");e.value="off",e.textContent="Off",ry(this,i7,e);let t=this.shadowRoot.querySelector('[name="captions-indicator"]');ry(this,i9,t.firstElementChild),t.addEventListener("slotchange",()=>{let e=t.assignedElements();if(1===e.length&&"slot"===e[0].nodeName.toLowerCase()){let r=e[0].assignedElements();0===r.length?ry(this,i9,e[0].firstElementChild):1===r.length&&ry(this,i9,r[0])}rv(this,i9)||ry(this,i9,t.firstElementChild),ry(this,i9,rv(this,i9).cloneNode(!0)),rv(this,i9).removeAttribute("slot"),rv(this,i9).setAttribute("style",rE)})}static get observedAttributes(){return[...super.observedAttributes,"aria-multiselectable",u.MEDIA_CAPTIONS_LIST,u.MEDIA_CAPTIONS_SHOWING,u.MEDIA_SUBTITLES_LIST,u.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,t,r){if(e===u.MEDIA_SUBTITLES_LIST&&t!==r)ry(this,i8,rb(this,ne,nt).call(this,r,rv(this,i8))),rb(this,nn,na).call(this);else if(e===u.MEDIA_CAPTIONS_LIST&&t!==r)ry(this,i6,rb(this,ne,nt).call(this,r,rv(this,i6))),rb(this,nn,na).call(this);else if(e===u.MEDIA_SUBTITLES_SHOWING&&t!==r){let i=eo(null!=r?r:"")[0];rv(this,i8).forEach(e=>{e.selected=e.language===i.language&&e.label===i.label}),rb(this,nn,na).call(this)}else if(e===u.MEDIA_CAPTIONS_SHOWING&&t!==r){let n=eo(null!=r?r:"")[0];rv(this,i6).forEach(e=>{e.selected=e.language===n.language&&e.label===n.label}),rb(this,nn,na).call(this)}else"aria-multiselectable"===e&&(this.removeAttribute("aria-multiselectable"),console.warn("Captions List doesn't currently support multiple selections. You can enable multiple items via the media.textTrack API."));super.attributeChangedCallback(e,t,r)}connectedCallback(){rb(this,nn,na).call(this),this.addEventListener("change",rb(this,no,ns)),super.connectedCallback()}disconnectedCallback(){this.removeEventListener("change",rb(this,no,ns)),super.disconnectedCallback()}});var rS=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},rk=(e,t,r)=>{return rS(e,t,"read from private field"),r?r.call(e):t.get(e)},rw=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},rL=(e,t,r,i)=>{return rS(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r},rI=(e,t,r)=>{return rS(e,t,"access private method"),r};let rD=`
<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,rR=`
<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`,rO=L.createElement("template");rO.innerHTML=`
<style>
  :host,
  media-chrome-menu-button {
    display: contents;
    fill: var(--media-icon-color, #eee);
  }

  media-captions-listbox {
    position: absolute;
    bottom: 44px;
    max-height: 300px;
    overflow: auto;
  }
  :host([media-controller]) media-captions-listbox {
    z-index: 1;
    bottom: unset;
  }

  /* copied from media-chrome-button */
  media-chrome-menu-button slot svg {
    width: var(--media-button-icon-width);
    height: var(--media-button-icon-height, var(--media-control-height, 24px));
    transform: var(--media-button-icon-transform);
    transition: var(--media-button-icon-transition);
    fill: var(--media-icon-color, #eee);
    vertical-align: middle;
    max-width: 100%;
    max-height: 100%;
    min-width: 100%;
  }
</style>

<media-chrome-menu-button aria-label="captions menu button">
  <slot slot="button-content" class="enabled" name="on">${rD}</slot>
  <slot slot="button-content" class="disabled" name="off" hidden>${rR}</slot>
  <media-captions-listbox slot="listbox" part="listbox">
    <slot slot="captions-indicator" name="captions-indicator">${rD}</slot>
  </media-captions-listbox>
</media-chrome-menu-button>
`;class rP extends w.HTMLElement{constructor(){super(),rw(this,nf),rw(this,nm),rw(this,ng),rw(this,nb),rw(this,nl,void 0),rw(this,nu,void 0),rw(this,nd,void 0),rw(this,nc,void 0),rw(this,nh,void 0);let e=this.attachShadow({mode:"open"}),t=rO.content.cloneNode(!0);this.nativeEl=t,e.append(t),rL(this,nl,this.shadowRoot.querySelector("media-chrome-menu-button")),rL(this,nu,rk(this,nl).querySelector(".enabled")),rL(this,nd,rk(this,nl).querySelector(".disabled")),rL(this,nc,rk(this,nl).querySelector("media-captions-listbox")),rL(this,nh,rI(this,nf,np).bind(this)),this._captionsReady=!1,rI(this,nb,nE).call(this)}static get observedAttributes(){return["disabled",l.MEDIA_CONTROLLER,"no-subtitles-fallback","default-showing",u.MEDIA_CAPTIONS_LIST,u.MEDIA_CAPTIONS_SHOWING,u.MEDIA_SUBTITLES_LIST,u.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,t,r){var i,n;if(e===l.MEDIA_CONTROLLER){if(t){let a=L.getElementById(t);null==(i=null==a?void 0:a.unassociateElement)||i.call(a,this)}if(r){let o=L.getElementById(r);null==(n=null==o?void 0:o.associateElement)||n.call(o,this)}}else e===u.MEDIA_CAPTIONS_SHOWING||e===u.MEDIA_SUBTITLES_SHOWING&&r!==t?r?rI(this,ng,ny).call(this):rI(this,nb,nE).call(this):"disabled"===e&&r!==t&&(null==r?this.enable():this.disable());if(this.hasAttribute("default-showing")&&rk(this,nu).hidden){let s=!this.hasAttribute("no-subtitles-fallback"),d=s?[u.MEDIA_CAPTIONS_LIST,u.MEDIA_SUBTITLES_LIST]:[u.MEDIA_CAPTIONS_LIST];if(d.includes(e)){let c=!!this.getAttribute(u.MEDIA_CAPTIONS_LIST)||!!(s&&this.getAttribute(u.MEDIA_SUBTITLES_LIST));this._captionsReady!==c&&(this._captionsReady=c,this._captionsReady&&em(this))}}}enable(){this.addEventListener("click",rk(this,nh)),rk(this,nl).removeAttribute("disabled")}disable(){this.removeEventListener("click",rk(this,nh)),rk(this,nl).setAttribute("disabled","")}connectedCallback(){var e;this.hasAttribute("disabled")||this.enable(),ep(this)&&rI(this,ng,ny).call(this);let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.associateElement)||e.call(r,this)}}disconnectedCallback(){var e;this.disable();let t=this.getAttribute(l.MEDIA_CONTROLLER);if(t){let r=L.getElementById(t);null==(e=null==r?void 0:r.unassociateElement)||e.call(r,this)}}get keysUsed(){return["Enter"," ","ArrowUp","ArrowDown","f","c","k","m"]}}nl=new WeakMap,nu=new WeakMap,nd=new WeakMap,nc=new WeakMap,nh=new WeakMap,nf=new WeakSet,np=function(){rI(this,nm,nv).call(this)},nm=new WeakSet,nv=function(){var e,t,r;if(0===rk(this,nc).offsetWidth)return;let i=this.shadowRoot.querySelectorAll("svg"),n=(null!=(e=rk(this,nu).assignedElements()[0])?e:i[0]).getBoundingClientRect(),a=(null!=(t=rk(this,nd).assignedElements()[0])?t:i[1]).getBoundingClientRect();if(this.hasAttribute("media-controller")){let o=n.width,s=a.width,l=n.height,u=a.height;rk(this,nc).style.marginLeft=`calc(-${o>0?o:s>0?s:0}px - 10px * 2)`,rk(this,nc).style.marginTop=`calc(${l>0?l:u>0?u:0}px + 10px * 2)`}else{let d=n.x,c=a.x,h=d>0?d:c>0?c:0,f=null!=(r=this.getAttribute("bounds")?V(this,`#${this.getAttribute("bounds")}`):this.parentElement)?r:this,p=f.getBoundingClientRect().x;rk(this,nc).offsetWidth+h-p>f.offsetWidth?rk(this,nc).style.translate=f.offsetWidth-rk(this,nc).offsetWidth+"px":rk(this,nc).style.translate=`calc(${h}px - ${p}px - 10px)`}},ng=new WeakSet,ny=function(){rk(this,nu).hidden=!1,rk(this,nd).hidden=!0},nb=new WeakSet,nE=function(){rk(this,nu).hidden=!0,rk(this,nd).hidden=!1},w.customElements.get("media-captions-menu-button")||w.customElements.define("media-captions-menu-button",rP);var rC=r(54125),rM=r(64560),rx=class extends Error{constructor(e,t=rx.MEDIA_ERR_CUSTOM,r){var i;super(e),this.name="MediaError",this.code=t,this.fatal=null!=r?r:t>=rx.MEDIA_ERR_NETWORK&&t<=rx.MEDIA_ERR_ENCRYPTED,this.message||(this.message=null!=(i=rx.defaultMessages[this.code])?i:"")}},rN=rx;rN.MEDIA_ERR_ABORTED=1,rN.MEDIA_ERR_NETWORK=2,rN.MEDIA_ERR_DECODE=3,rN.MEDIA_ERR_SRC_NOT_SUPPORTED=4,rN.MEDIA_ERR_ENCRYPTED=5,rN.MEDIA_ERR_CUSTOM=100,rN.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var rU=e=>null==e,rF=(e,t)=>!rU(t)&&e in t,rB={ANY:"any",MUTED:"muted"},rj={VOD:"on-demand",ON_DEMAND:"on-demand",LIVE:"live",LL_LIVE:"ll-live",DVR:"live:dvr",LL_DVR:"ll-live:dvr"},rH={MSE:"mse",NATIVE:"native"},rV={HEADER:"header",QUERY:"query",NONE:"none"},rK=Object.values(rV),rG={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},rW={HLS:rG.M3U8};Object.keys(rW),[...Object.values(rG)];var rq=(e,t,r,i,n=e)=>{n.addEventListener(t,r,i),e.addEventListener("teardown",()=>{n.removeEventListener(t,r)},{once:!0})},rY=e=>{let t=e.indexOf("?");return t<0?[e]:[e.slice(0,t),e.slice(t)]},r$=e=>{let t=e.type;if(t){let r=t.toUpperCase();return rF(r,rW)?rW[r]:t}let{src:i}=e;return i?rz(i):""},rz=e=>{let t="";try{t=new URL(e).pathname}catch{console.error("invalid url")}let r=t.lastIndexOf(".");if(r<0)return"";let i=t.slice(r+1).toUpperCase();return rF(i,rG)?rG[i]:""},rX=Object.values(rB),rQ=e=>"boolean"==typeof e||"string"==typeof e&&rX.includes(e),rZ=({autoplay:e},t,r)=>{let i=!1,n=!1,a=rQ(e)?e:!!e,o=()=>{i||rq(t,"playing",()=>{i=!0},{once:!0})};if(o(),rq(t,"loadstart",()=>{i=!1,o(),rJ(t,a)},{once:!0}),rq(t,"loadstart",()=>{r||(n=!Number.isFinite(t.duration)),rJ(t,a)},{once:!0}),r&&r.once(rM.Events.LEVEL_LOADED,(e,t)=>{var r;n=null!=(r=t.details.live)&&r}),!a){let s=()=>{!n||(null!=r&&r.liveSyncPosition?t.currentTime=r.liveSyncPosition:Number.isFinite(t.seekable.end(0))&&(t.currentTime=t.seekable.end(0)))};r&&rq(t,"play",()=>{"metadata"===t.preload?r.once(rM.Events.LEVEL_UPDATED,s):s()},{once:!0})}return e=>{i||rJ(t,a=rQ(e)?e:!!e)}},rJ=(e,t)=>{if(!t)return;let r=e.muted,i=()=>e.muted=r;switch(t){case rB.ANY:e.play().catch(()=>{e.muted=!0,e.play().catch(i)});break;case rB.MUTED:e.muted=!0,e.play().catch(i);break;default:e.play().catch(()=>{})}},r0=({preload:e,src:t},r,i)=>{let n=e=>{null!=e&&["","none","metadata","auto"].includes(e)?r.setAttribute("preload",e):r.removeAttribute("preload")};if(!i)return n(e),n;let a=!1,o=!1,s=i.config.maxBufferLength,l=i.config.maxBufferSize,u=e=>{n(e);let t=null!=e?e:r.preload;o||"none"===t||("metadata"===t?(i.config.maxBufferLength=1,i.config.maxBufferSize=1):(i.config.maxBufferLength=s,i.config.maxBufferSize=l),d())},d=()=>{!a&&t&&(a=!0,i.loadSource(t))};return rq(r,"play",()=>{o=!0,i.config.maxBufferLength=s,i.config.maxBufferSize=l,d()},{once:!0}),u(e),u};function r1(e,t,r,i,n){let a=document.createElement("track");return a.kind=t,a.label=r,i&&(a.srclang=i),n&&(a.id=n),a.track.mode=["subtitles","captions"].includes(t)?"disabled":"hidden",a.setAttribute("data-removeondestroy",""),e.append(a),a.track}var r2="cuepoints",r5=Object.freeze({label:r2}),r4=(e,{label:t=r2}=r5)=>{var r;return null==(r=Array.from(e.querySelectorAll("track")).find(e=>e.track.label===t&&"metadata"===e.track.kind))?void 0:r.track};async function r3(e,t,r=r5){let i=r4(e,r);if(!i){let{label:n=r2}=r;(i=r1(e,"metadata",n)).mode="hidden",await new Promise(e=>setTimeout(()=>e(void 0),0))}return"hidden"!==i.mode&&(i.mode="hidden"),[...t].sort(({time:e},{time:t})=>t-e).forEach(({time:t,value:r})=>{var n,a;let o=Array.prototype.findIndex.call(null==i?void 0:i.cues,e=>e.startTime>=t),s=null==(n=null==i?void 0:i.cues)?void 0:n[o],l=s?s.startTime:Number.isFinite(e.duration)?e.duration:Number.MAX_SAFE_INTEGER,u=null==(a=null==i?void 0:i.cues)?void 0:a[o-1];u&&(u.endTime=t);let d=new VTTCue(t,l,JSON.stringify(null!=r?r:null));i.addCue(d)}),i}var r8=e=>({time:e.startTime,value:JSON.parse(e.text)});function r6(e,t={label:r2}){var r;let i=r4(e,t);if(null!=(r=null==i?void 0:i.activeCues)&&r.length)return r8(i.activeCues[0])}async function r7(e,t=r5){return new Promise(r=>{rq(e,"loadstart",async()=>{let i=await r3(e,[],t);rq(e,"cuechange",()=>{let t=r6(e);if(t){let r=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(r)}},{},i),r(i)})})}var r9,ie,it,ir,ii,ia,io,is,il,iu,id,ic,ih,ip,im,iv,ig,iy,ib,iE,iT,i_,iA,iS,ik,iw,iL,iI,iD,iR,iO,iP,iC,iM,ix,iN,iU,iF,iB,ij,iH,iV,iK,iG,iW,iq,iY,i$,iz,iX,iQ,iZ,iJ,i0,i1,i2,i5,i4,i3,i8,i6,i7,i9,ne,nt,nr,ni,nn,na,no,ns,nl,nu,nd,nc,nh,nf,np,nm,nv,ng,ny,nb,nE,nT,n_,nA,nS=-1!==(null!=(n_=null==(nT=null==globalThis?void 0:globalThis.navigator)?void 0:nT.userAgent)?n_:"").toLowerCase().indexOf("android"),nk=new WeakMap,nw="mux.com",nL=null==(nA=rM.isSupported)?void 0:nA.call(rM),nI=()=>rC.utils.now(),nD=rC.utils.generateUUID,nR=(e,{domain:t=nw,maxResolution:r=""}={})=>{if(!e)return;let[i,n=""]=rY(e),a=new URL(`https://stream.${t}/${i}.m3u8${n}`);return r&&a.searchParams.set("max_resolution",r),a.toString()},nO=e=>{if(!e)return;let[t]=e.split("?");return t||void 0},nP=e=>{if(!e||!e.startsWith("https://stream."))return;let[t]=new URL(e).pathname.slice(1).split(".m3u8");return t||void 0},nC=e=>{var t,r,i;return null!=(t=null==e?void 0:e.metadata)&&t.video_id?e.metadata.video_id:nj(e)&&null!=(i=null!=(r=nO(e.playbackId))?r:nP(e.src))?i:e.src},nM=e=>{var t;return null==(t=nk.get(e))?void 0:t.error},nx=(e,t,r)=>{nN(t,r);let{metadata:i={}}=e,{view_session_id:n=nD()}=i,a=nC(e);i.view_session_id=n,i.video_id=a,e.metadata=i,nk.set(t,{});let o=nF(e,t);nH(e,t,o),nV(e,t,o),r7(t);let s=rZ(e,t,o),l=r0(e,t,o);return{engine:o,setAutoplay:s,setPreload:l}},nN=(e,t)=>{let r=null==t?void 0:t.engine;r&&(r.detachMedia(),r.destroy()),(null==e?void 0:e.mux)&&!e.mux.deleted&&(e.mux.destroy(),delete e.mux),e&&(e.removeAttribute("src"),e.load(),e.removeEventListener("error",nG),e.removeEventListener("error",nW),e.removeEventListener("durationchange",nK),nk.delete(e),e.dispatchEvent(new Event("teardown")))};function nU(e,t){var r;let i=r$(e);if(i!==rG.M3U8)return!0;let n=!i||null==(r=t.canPlayType(i))||r,{preferPlayback:a}=e,o=a===rH.MSE,s=a===rH.NATIVE;return n&&(s||!(nL&&(o||nS)))}var nF=(e,t)=>{let{debug:r,streamType:i,startTime:n=-1,metadata:a,preferCmcd:o}=e,s=r$(e)===rG.M3U8,l=nU(e,t);if(s&&!l&&nL){let u=nB(i),d=o!==rV.NONE?{useHeaders:o===rV.HEADER,sessionId:a.view_session_id,contentId:a.video_id}:void 0;return new rM({debug:r,startPosition:n,cmcd:d,backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,...u})}},nB=e=>[rj.LIVE,rj.DVR].includes(e)?{backBufferLength:8}:[rj.LL_LIVE,rj.LL_DVR].includes(e)?{backBufferLength:4,maxFragLookUpTolerance:.001}:{},nj=({playbackId:e,src:t,customDomain:r})=>{if(e)return!0;if("string"!=typeof t)return!1;let i=null==window?void 0:window.location.href,n=new URL(t,i).hostname.toLocaleLowerCase();return n.includes(nw)||!!r&&n.includes(r.toLocaleLowerCase())},nH=(e,t,r)=>{var i;let{envKey:n}=e,a=nj(e);if(n||a){let{playerInitTime:o,playerSoftwareName:s,playerSoftwareVersion:l,beaconCollectionDomain:u,debug:d,disableCookies:c}=e,h={...e.metadata,video_title:(null==(i=null==e?void 0:e.metadata)?void 0:i.video_title)||void 0},f=t=>"string"!=typeof t.player_error_code&&("function"==typeof e.errorTranslator?e.errorTranslator(t):t);rC.monitor(t,{debug:d,beaconCollectionDomain:u,hlsjs:r,Hls:r?rM:void 0,automaticErrorTracking:!1,errorTranslator:f,disableCookies:c,data:{...n?{env_key:n}:{},player_software_name:s,player_software:s,player_software_version:l,player_init_time:o,...h}})}},nV=(e,t,r)=>{var i;let n=nU(e,t),{src:a}=e;t&&n?("string"==typeof a?(t.setAttribute("src",a),e.startTime&&((null!=(i=nk.get(t))?i:{}).startTime=e.startTime,t.addEventListener("durationchange",nK,{once:!0}))):t.removeAttribute("src"),t.addEventListener("error",nG),t.addEventListener("error",nW),t.addEventListener("emptied",()=>{t.querySelectorAll("track[data-removeondestroy]").forEach(e=>{e.remove()})},{once:!0})):r&&a?(r.on(rM.Events.ERROR,(e,r)=>{let i={[rM.ErrorTypes.NETWORK_ERROR]:rN.MEDIA_ERR_NETWORK,[rM.ErrorTypes.MEDIA_ERROR]:rN.MEDIA_ERR_DECODE},n=new rN("",i[r.type]);n.fatal=r.fatal,n.data=r,t.dispatchEvent(new CustomEvent("error",{detail:n}))}),t.addEventListener("error",nW),function(e,t){t.on(rM.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(r,{tracks:i})=>{i.forEach(r=>{var i;let n=null!=(i=r.subtitleTrack)?i:r.closedCaptions,a=t.subtitleTracks.findIndex(({lang:e,name:t,type:i})=>e==(null==n?void 0:n.lang)&&t===r.label&&i.toLowerCase()===r.kind);r1(e,r.kind,r.label,null==n?void 0:n.lang,`${r.kind}${a}`)})});let r=()=>{var r;if(!t.subtitleTracks.length)return;let i=Array.from(e.textTracks).find(e=>e.id&&"showing"===e.mode&&["subtitles","captions"].includes(e.kind)),n=`${null==(r=t.subtitleTracks[t.subtitleTrack])?void 0:r.type.toLowerCase()}${t.subtitleTrack}`;if(i&&(t.subtitleTrack<0||(null==i?void 0:i.id)!==n)){let a=t.subtitleTracks.findIndex(({lang:e,name:t,type:r})=>e==i.language&&t===i.label&&r.toLowerCase()===i.kind);t.subtitleTrack=a}i&&(null==i?void 0:i.id)===n&&i.cues&&Array.from(i.cues).forEach(e=>{i.addCue(e)})};e.textTracks.addEventListener("change",r),t.on(rM.Events.CUES_PARSED,(t,{track:r,cues:i})=>{let n=e.textTracks.getTrackById(r);if(!n)return;let a="disabled"===n.mode;a&&(n.mode="hidden"),i.forEach(e=>{var t;null!=(t=n.cues)&&t.getCueById(e.id)||n.addCue(e)}),a&&(n.mode="disabled")}),t.once(rM.Events.DESTROYING,()=>{e.textTracks.removeEventListener("change",r),e.querySelectorAll("track[data-removeondestroy]").forEach(e=>{e.remove()})});let i=()=>{Array.from(e.textTracks).forEach(t=>{var r,i;if(!["subtitles","caption"].includes(t.kind)&&"thumbnails"===t.label){if(!(null!=(r=t.cues)&&r.length)){let n=e.querySelector('track[label="thumbnails"]'),a=null!=(i=null==n?void 0:n.getAttribute("src"))?i:"";null==n||n.removeAttribute("src"),setTimeout(()=>{null==n||n.setAttribute("src",a)},0)}"hidden"!==t.mode&&(t.mode="hidden")}})};t.once(rM.Events.MANIFEST_LOADED,i),t.once(rM.Events.MEDIA_ATTACHED,i)}(t,r),r.attachMedia(t)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function nK(e){var t;let r=e.target,i=null==(t=nk.get(r))?void 0:t.startTime;if(i&&function(e,t,r){t&&r>t&&(r=t);for(let i=0;i<e.length;i++)if(e.start(i)<=r&&e.end(i)>=r)return!0;return!1}(r.seekable,r.duration,i)){let n="auto"===r.preload;n&&(r.preload="none"),r.currentTime=i,n&&(r.preload="auto")}}async function nG(e){if(!e.isTrusted)return;e.stopImmediatePropagation();let t=e.target;if(!(null!=t&&t.error))return;let{message:r,code:i}=t.error,n=new rN(r,i);if(t.src&&(i!==rN.MEDIA_ERR_DECODE||void 0!==i))try{let{status:a}=await fetch(t.src);n.data={response:{code:a}}}catch{}t.dispatchEvent(new CustomEvent("error",{detail:n}))}function nW(e){var t,r;if(!(e instanceof CustomEvent)||!(e.detail instanceof rN))return;let i=e.target,n=e.detail;n&&n.fatal&&((null!=(t=nk.get(i))?t:{}).error=n,null==(r=i.mux)||r.emit("error",{player_error_code:n.code,player_error_message:n.message}))}var nq=Object.defineProperty,nY=(e,t,r)=>t in e?nq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,n$=(e,t,r)=>(nY(e,"symbol"!=typeof t?t+"":t,r),r),nz=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},nX=(e,t,r)=>(nz(e,t,"read from private field"),r?r.call(e):t.get(e)),nQ=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},nZ=(e,t,r,i)=>(nz(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),nJ=(e,t,r)=>(nz(e,t,"access private method"),r),n0=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};"undefined"==typeof DocumentFragment&&(globalThis.DocumentFragment=class extends n0{});var n1,n2=class extends n0{},n5=class{constructor(e,t={}){nQ(this,n1,void 0),nZ(this,n1,null==t?void 0:t.detail)}get detail(){return nX(this,n1)}initCustomEvent(){}};n1=new WeakMap;var n4={document:{createElement:function(e,t){return new n2}},DocumentFragment,customElements:{get(e){},define(e,t,r){},upgrade(e){},whenDefined(e){return Promise.resolve(n2)}},CustomEvent:n5,EventTarget:n0,HTMLElement:n2,HTMLVideoElement:class extends n0{}},n3="undefined"==typeof window||void 0===globalThis.customElements,n8=n3?n4:globalThis,n6=n3?n4.document:globalThis.document,n7=(()=>{try{return"0.14.0"}catch{}return"UNKNOWN"})(),n9=class extends Set{add(e){super.add(new WeakRef(e))}forEach(e){super.forEach(t=>{let r=t.deref();r&&e(r)})}};if(globalThis.HTMLVideoElement&&globalThis.customElements){let ae=(ai=HTMLVideoElement,an=class extends ai{constructor(){super(),nQ(this,aR),nQ(this,aP),nQ(this,aM),nQ(this,aN),nQ(this,aF),nQ(this,aj),nQ(this,aV),n$(this,"castEnabled",!1),nQ(this,aS,{paused:!1}),nQ(this,ak,void 0),nQ(this,aw,{}),nQ(this,aL,void 0),nQ(this,aI,void 0),nQ(this,aD,void 0),an.instances.add(this),nJ(this,aF,aB).call(this)}static get castElement(){return nX(an,aa)}static get castEnabled(){return nX(an,ao)}static get castState(){var e;return null==(e=nX(an,ah,af))?void 0:e.getCastState()}static async exitCast(){try{await nX(an,ah,af).endCurrentSession(!0)}catch(e){console.error(e);return}}get castPlayer(){if(an.castElement===this)return nX(this,ak)}attributeChangedCallback(e){if(this.castPlayer)switch(e){case"cast-stream-type":case"cast-src":this.load()}}async requestCast(e={}){nJ(an,a_,aA).call(an,e),nZ(an,aa,this),Object.entries(nX(this,aw)).forEach(([e,t])=>{nX(this,ak).controller.addEventListener(e,t)});try{await nX(an,ah,af).requestSession()}catch{nZ(an,aa,void 0);return}nX(this,aS).paused=super.paused,super.pause(),this.muted=super.muted;try{await this.load()}catch(t){console.error(t)}}async load(){var e,t;if(!this.castPlayer)return super.load();let r=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType),i=[...this.querySelectorAll("track")].filter(({kind:e,src:t})=>t&&("subtitles"===e||"captions"===e)),n=[],a=0;i.length&&(r.tracks=i.map(e=>{let t=++a;0===n.length&&"showing"===e.track.mode&&n.push(t);let r=new chrome.cast.media.Track(t,chrome.cast.media.TrackType.TEXT);return r.trackContentId=e.src,r.trackContentType="text/vtt",r.subtype="captions"===e.kind?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,r.name=e.label,r.language=e.srclang,r})),"live"===this.castStreamType?r.streamType=chrome.cast.media.StreamType.LIVE:r.streamType=chrome.cast.media.StreamType.BUFFERED,r.metadata=new chrome.cast.media.GenericMediaMetadata,r.metadata.title=this.title,r.metadata.images=[{url:this.poster}];let o=new chrome.cast.media.LoadRequest(r);o.currentTime=null!=(e=super.currentTime)?e:0,o.autoplay=!nX(this,aS).paused,o.activeTrackIds=n,await (null==(t=nX(an,ap,am))?void 0:t.loadMedia(o)),this.dispatchEvent(new Event("volumechange"))}play(){var e;if(this.castPlayer){this.castPlayer.isPaused&&(null==(e=this.castPlayer.controller)||e.playOrPause());return}return super.play()}pause(){var e;if(this.castPlayer){this.castPlayer.isPaused||null==(e=this.castPlayer.controller)||e.playOrPause();return}super.pause()}get castSrc(){var e,t,r;return null!=(r=null!=(t=this.getAttribute("cast-src"))?t:null==(e=this.querySelector("source"))?void 0:e.src)?r:this.currentSrc}set castSrc(e){this.castSrc!=e&&this.setAttribute("cast-src",`${e}`)}get castContentType(){var e;return null!=(e=this.getAttribute("cast-content-type"))?e:void 0}set castContentType(e){this.setAttribute("cast-content-type",`${e}`)}get castStreamType(){var e;return null!=(e=this.getAttribute("cast-stream-type"))?e:void 0}set castStreamType(e){this.setAttribute("cast-stream-type",`${e}`)}get readyState(){if(this.castPlayer)switch(this.castPlayer.playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return this.castPlayer?this.castPlayer.isPaused:super.paused}get muted(){var e;return this.castPlayer?null==(e=this.castPlayer)?void 0:e.isMuted:super.muted}set muted(e){var t;if(this.castPlayer){(e&&!this.castPlayer.isMuted||!e&&this.castPlayer.isMuted)&&(null==(t=this.castPlayer.controller)||t.muteOrUnmute());return}super.muted=e}get volume(){var e,t;return this.castPlayer?null!=(t=null==(e=this.castPlayer)?void 0:e.volumeLevel)?t:1:super.volume}set volume(e){var t;if(this.castPlayer){this.castPlayer.volumeLevel=e,null==(t=this.castPlayer.controller)||t.setVolumeLevel();return}super.volume=e}get duration(){var e,t;return this.castPlayer&&nX(this,aR,aO)?null!=(t=null==(e=this.castPlayer)?void 0:e.duration)?t:NaN:super.duration}get currentTime(){var e,t;return this.castPlayer&&nX(this,aR,aO)?null!=(t=null==(e=this.castPlayer)?void 0:e.currentTime)?t:0:super.currentTime}set currentTime(e){var t;if(this.castPlayer){this.castPlayer.currentTime=e,null==(t=this.castPlayer.controller)||t.seek();return}super.currentTime=e}get onentercast(){return nX(this,aL)}set onentercast(e){nX(this,aL)&&(this.removeEventListener("entercast",nX(this,aL)),nZ(this,aL,null)),"function"==typeof e&&(nZ(this,aL,e),this.addEventListener("entercast",e))}get onleavecast(){return nX(this,aI)}set onleavecast(e){nX(this,aI)&&(this.removeEventListener("leavecast",nX(this,aI)),nZ(this,aI,null)),"function"==typeof e&&(nZ(this,aI,e),this.addEventListener("leavecast",e))}get oncastchange(){return nX(this,aD)}set oncastchange(e){nX(this,aD)&&(this.removeEventListener("castchange",nX(this,aD)),nZ(this,aD,null)),"function"==typeof e&&(nZ(this,aD,e),this.addEventListener("castchange",e))}},aa=new WeakMap,ao=new WeakMap,as=new WeakMap,al=new WeakSet,au=function(){return"undefined"!=typeof chrome&&chrome.cast&&chrome.cast.isAvailable},ad=new WeakSet,ac=function(){return"undefined"!=typeof cast&&cast.framework},ah=new WeakSet,af=function(){if(nX(an,ad,ac))return cast.framework.CastContext.getInstance()},ap=new WeakSet,am=function(){var e;return null==(e=nX(an,ah,af))?void 0:e.getCurrentSession()},av=new WeakSet,ag=function(){var e;return null==(e=nX(an,ap,am))?void 0:e.getSessionObj().media[0]},ay=new WeakSet,ab=function(e){return new Promise((t,r)=>{nX(an,av,ag).editTracksInfo(e,t,r)})},aE=new WeakSet,aT=function(e){return new Promise((t,r)=>{nX(an,av,ag).getStatus(e,t,r)})},a_=new WeakSet,aA=function(e){return nX(an,ah,af).setOptions({receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0,...e})},aS=new WeakMap,ak=new WeakMap,aw=new WeakMap,aL=new WeakMap,aI=new WeakMap,aD=new WeakMap,aR=new WeakSet,aO=function(){var e;return null==(e=this.castPlayer)?void 0:e.isMediaLoaded},aP=new WeakSet,aC=function(){nX(an,aa)===this&&(Object.entries(nX(this,aw)).forEach(([e,t])=>{nX(this,ak).controller.removeEventListener(e,t)}),nZ(an,aa,void 0),this.muted=nX(this,ak).isMuted,this.currentTime=nX(this,ak).savedPlayerState.currentTime,!1===nX(this,ak).savedPlayerState.isPaused&&this.play())},aM=new WeakSet,ax=function(){this.dispatchEvent(new CustomEvent("castchange",{detail:nX(an,ah,af).getCastState()}))},aN=new WeakSet,aU=async function(){var e;let{SESSION_RESUMED:t}=cast.framework.SessionState;if(nX(an,ah,af).getSessionState()===t&&this.castSrc===(null==(e=nX(an,av,ag))?void 0:e.media.contentId)){nZ(an,aa,this),Object.entries(nX(this,aw)).forEach(([e,t])=>{nX(this,ak).controller.addEventListener(e,t)});try{await nJ(an,aE,aT).call(an,new chrome.cast.media.GetStatusRequest)}catch(r){console.error(r)}nX(this,aw)[cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED](),nX(this,aw)[cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},aF=new WeakSet,aB=function(){!nX(an,ad,ac)||this.castEnabled||(this.castEnabled=!0,nJ(an,a_,aA).call(an),this.textTracks.addEventListener("change",nJ(this,aV,aK).bind(this)),nJ(this,aM,ax).call(this),nZ(this,ak,new cast.framework.RemotePlayer),new cast.framework.RemotePlayerController(nX(this,ak)),nZ(this,aw,{[cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:e})=>{!1===e&&nJ(this,aP,aC).call(this),this.dispatchEvent(new Event(e?"entercast":"leavecast"))},[cast.framework.RemotePlayerEventType.DURATION_CHANGED]:()=>{this.dispatchEvent(new Event("durationchange"))},[cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{this.dispatchEvent(new Event("volumechange"))},[cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{this.dispatchEvent(new Event("volumechange"))},[cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{nX(this,aR,aO)&&this.dispatchEvent(new Event("timeupdate"))},[cast.framework.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{this.dispatchEvent(new Event("resize"))},[cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{this.dispatchEvent(new Event(this.paused?"pause":"play"))},[cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var e,t;(null==(e=this.castPlayer)?void 0:e.playerState)!==chrome.cast.media.PlayerState.PAUSED&&this.dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[null==(t=this.castPlayer)?void 0:t.playerState]))},[cast.framework.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{nX(this,aR,aO)&&(await Promise.resolve(),nJ(this,aj,aH).call(this))}}))},aj=new WeakSet,aH=function(){nJ(this,aV,aK).call(this)},aV=new WeakSet,aK=async function(){var e,t,r,i,n,a;if(!this.castPlayer)return;let o=(null!=(t=null==(e=nX(this,ak).mediaInfo)?void 0:e.tracks)?t:[]).filter(({type:e})=>e===chrome.cast.media.TrackType.TEXT),s=[...this.textTracks].filter(({kind:e})=>"subtitles"===e||"captions"===e),l=o.map(({language:e,name:t,trackId:r})=>{var i;let{mode:n}=null!=(i=s.find(r=>r.language===e&&r.label===t))?i:{};return!!n&&{mode:n,trackId:r}}).filter(Boolean),u=l.filter(({mode:e})=>"showing"!==e).map(({trackId:e})=>e),d=l.find(({mode:e})=>"showing"===e),c=null!=(n=null==(i=null==(r=nX(an,ap,am))?void 0:r.getSessionObj().media[0])?void 0:i.activeTrackIds)?n:[],h=c;if(c.length&&(h=h.filter(e=>!u.includes(e))),null!=d&&d.trackId&&(h=[...h,d.trackId]),a=h=[...new Set(h)],!(c.length===a.length&&c.every(e=>a.includes(e))))try{await nJ(an,ay,ab).call(an,new chrome.cast.media.EditTracksInfoRequest(h))}catch(f){console.error(f)}},nQ(an,al),nQ(an,ad),nQ(an,ah),nQ(an,ap),nQ(an,av),nQ(an,ay),nQ(an,aE),nQ(an,a_),n$(an,"observedAttributes",["cast-src","cast-content-type","cast-stream-type"]),n$(an,"instances",new n9),nQ(an,aa,void 0),nQ(an,ao,!1),n$(an,"initCast",()=>{nX(an,al,au)?nX(an,ad,ac)?nX(an,as).call(an,chrome.cast.isAvailable):customElements.whenDefined("google-cast-button").then(()=>{return nX(an,as).call(an,chrome.cast.isAvailable)}):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(()=>{return nX(an,as).call(an,chrome.cast.isAvailable)})}}),nQ(an,as,e=>{if(e){nZ(an,ao,!0);let{CAST_STATE_CHANGED:t}=cast.framework.CastContextEventType;nX(an,ah,af).addEventListener(t,e=>{an.instances.forEach(t=>{return nJ(t,aM,ax).call(t,e)})});let{SESSION_STATE_CHANGED:r}=cast.framework.CastContextEventType;nX(an,ah,af).addEventListener(r,e=>{an.instances.forEach(t=>{return nJ(t,aN,aU).call(t,e)})}),an.instances.forEach(e=>{return nJ(e,aF,aB).call(e)})}}),an);globalThis.customElements.get("castable-video")||(globalThis.customElements.define("castable-video",ae,{extends:"video"}),globalThis.CastableVideoElement=ae),ae.initCast()}var at=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","castchange","entercast","leavecast"],ar=n6.createElement("template");ar.innerHTML=`
<style>
  :host {
    display: inline-block;
    line-height: 0;
    width: auto;
    height: auto;
  }

  video {
    max-width: 100%;
    max-height: 100%;
    min-width: 100%;
    min-height: 100%;
    object-fit: var(--media-object-fit, contain);
    object-position: var(--media-object-position, 50% 50%);
  }
</style>
<video is="castable-video" part="video" crossorigin></video>
<slot></slot>
`;var ai,an,aa,ao,as,al,au,ad,ac,ah,af,ap,am,av,ag,ay,ab,aE,aT,a_,aA,aS,ak,aw,aL,aI,aD,aR,aO,aP,aC,aM,ax,aN,aU,aF,aB,aj,aH,aV,aK,aG,aW,aq,aY,a$,az=class extends n8.HTMLElement{constructor(){super(),nQ(this,aW),nQ(this,aY),nQ(this,aG,void 0),this.attachShadow({mode:"open"}),this.isConnected&&nJ(this,aW,aq).call(this)}static get observedAttributes(){let e=[],t=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();Object.getOwnPropertyNames(this.prototype).forEach(r=>{let i=!1;try{"function"==typeof this.prototype[r]&&(i=!0)}catch{}i||r===r.toUpperCase()||e.push(r.toLowerCase(),t(r))});let r=Object.getPrototypeOf(this).observedAttributes;return r&&(e=e.concat(r)),e}attributeChangedCallback(e,t,r){nJ(this,aW,aq).call(this),nJ(this,aY,a$).call(this,e,t,r)}connectedCallback(){nJ(this,aW,aq).call(this)}};aG=new WeakMap,aW=new WeakSet,aq=function(){if(nX(this,aG))return;nZ(this,aG,!0),this.shadowRoot.append(ar.content.cloneNode(!0)),this.nativeEl=this.shadowRoot.querySelector("video"),at.forEach(e=>{this.nativeEl.addEventListener(e,e=>{this.dispatchEvent(new CustomEvent(e.type,{detail:e.detail}))})});let e=this.shadowRoot.querySelector("slot");e.addEventListener("slotchange",()=>{e.assignedElements().forEach(e=>{["track","source"].includes(e.localName)&&this.nativeEl.append(e)})}),Array.prototype.forEach.call(this.attributes,e=>{nJ(this,aY,a$).call(this,e.name,null,e.value)}),this.nativeEl.defaultMuted&&(this.nativeEl.muted=!0)},aY=new WeakSet,a$=function(e,t,r){var i;let n;let a=(i=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),n=null,i.forEach(t=>{t.toLowerCase()==e.toLowerCase()&&(n=t)}),n),o=0===Object.getPrototypeOf(this.constructor).toString().indexOf("function HTMLElement");a&&!o?"boolean"==typeof this[a]?null===r?this[a]=!1:this[a]=!0:this[a]=r:null===r?this.nativeEl.removeAttribute(e):-1===["id","class"].indexOf(e)&&this.nativeEl.setAttribute(e,r)};var aX=[],aQ=n6.createElement("video",{is:"castable-video"}),aZ=["webkitDisplayingFullscreen","webkitSupportsFullscreen"];for(let aJ=Object.getPrototypeOf(aQ);aJ&&aJ!==n8.HTMLElement.prototype;aJ=Object.getPrototypeOf(aJ))Object.getOwnPropertyNames(aJ).forEach(e=>{-1===aZ.indexOf(e)&&aX.push(e)});aX.forEach(e=>{if(!(e in az.prototype)){if("function"==typeof aQ[e])az.prototype[e]=function(){return this.nativeEl[e].apply(this.nativeEl,arguments)};else{let t={get(){return this.nativeEl[e]}};e!==e.toUpperCase()&&(t.set=function(t){this.nativeEl[e]=t}),Object.defineProperty(az.prototype,e,t)}}}),n8.customElements.get("custom-video")||(n8.customElements.define("custom-video",az),n8.CustomVideoElement=az);var a0,a1,a2,a5,a4,a3,a8,a6,a7,a9=az,oe={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_COOKIES:"disable-cookies",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TYPE:"type"},ot=Object.values(oe),or=class extends a9{constructor(){super(),nQ(this,a6),nQ(this,a0,void 0),nQ(this,a1,void 0),nQ(this,a2,void 0),nQ(this,a5,{}),nQ(this,a4,void 0),nQ(this,a3,void 0),nQ(this,a8,void 0),nZ(this,a2,nI())}static get observedAttributes(){var e;return[...ot,...null!=(e=a9.observedAttributes)?e:[]]}get preferCmcd(){var e;return null!=(e=this.getAttribute(oe.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?rK.includes(e)?this.setAttribute(oe.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${rK.join()}`):this.removeAttribute(oe.PREFER_CMCD))}get playerInitTime(){return nX(this,a2)}get playerSoftwareName(){var e;return null!=(e=nX(this,a3))?e:"mux-video"}set playerSoftwareName(e){nZ(this,a3,e)}get playerSoftwareVersion(){var e;return null!=(e=nX(this,a4))?e:n7}set playerSoftwareVersion(e){nZ(this,a4,e)}get _hls(){var e;return null==(e=nX(this,a0))?void 0:e.engine}get mux(){return this.nativeEl.mux}get error(){var e;return null!=(e=nM(this.nativeEl))?e:null}get errorTranslator(){return nX(this,a8)}set errorTranslator(e){nZ(this,a8,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(null==e?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return null!=(e=this.getAttribute(oe.TYPE))?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(oe.TYPE,e):this.removeAttribute(oe.TYPE))}get autoplay(){let e=this.getAttribute("autoplay");return null!==e&&(""===e||e)}set autoplay(e){e!==this.autoplay&&(e?this.setAttribute("autoplay","string"==typeof e?e:""):this.removeAttribute("autoplay"))}get preload(){let e=this.getAttribute("preload");return""===e?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return null!=this.getAttribute(oe.DEBUG)}set debug(e){e!==this.debug&&(e?this.setAttribute(oe.DEBUG,""):this.removeAttribute(oe.DEBUG))}get disableCookies(){return this.hasAttribute(oe.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(oe.DISABLE_COOKIES,""):this.removeAttribute(oe.DISABLE_COOKIES))}get startTime(){let e=this.getAttribute(oe.START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set startTime(e){e!==this.startTime&&(null==e?this.removeAttribute(oe.START_TIME):this.setAttribute(oe.START_TIME,`${e}`))}get playbackId(){var e;return null!=(e=this.getAttribute(oe.PLAYBACK_ID))?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(oe.PLAYBACK_ID,e):this.removeAttribute(oe.PLAYBACK_ID))}get maxResolution(){var e;return null!=(e=this.getAttribute(oe.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(oe.MAX_RESOLUTION,e):this.removeAttribute(oe.MAX_RESOLUTION))}get customDomain(){var e;return null!=(e=this.getAttribute(oe.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(oe.CUSTOM_DOMAIN,e):this.removeAttribute(oe.CUSTOM_DOMAIN))}get envKey(){var e;return null!=(e=this.getAttribute(oe.ENV_KEY))?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(oe.ENV_KEY,e):this.removeAttribute(oe.ENV_KEY))}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(oe.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(oe.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(oe.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return null!=(e=this.getAttribute(oe.STREAM_TYPE))?e:void 0}set streamType(e){e!==this.streamType&&(e?this.setAttribute(oe.STREAM_TYPE,e):this.removeAttribute(oe.STREAM_TYPE))}async addCuePoints(e){return r3(this.nativeEl,e)}get activeCuePoint(){return r6(this.nativeEl)}get cuePoints(){return function(e,t={label:r2}){let r=r4(e,t);return null!=r&&r.cues?Array.from(r.cues,e=>r8(e)):[]}(this.nativeEl)}get preferPlayback(){let e=this.getAttribute(oe.PREFER_PLAYBACK);if(e===rH.MSE||e===rH.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===rH.MSE||e===rH.NATIVE?this.setAttribute(oe.PREFER_PLAYBACK,e):this.removeAttribute(oe.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(e=>e.startsWith("metadata-")&&![oe.METADATA_URL].includes(e)).reduce((e,t)=>{let r=this.getAttribute(t);return null!=r&&(e[t.replace(/^metadata-/,"").replace(/-/g,"_")]=r),e},{}),...nX(this,a5)}}set metadata(e){nZ(this,a5,null!=e?e:{}),this.mux&&this.mux.emit("hb",nX(this,a5))}load(){nZ(this,a0,nx(this,this.nativeEl,nX(this,a0)))}unload(){nN(this.nativeEl,nX(this,a0)),nZ(this,a0,void 0)}attributeChangedCallback(e,t,r){var i,n;switch(super.attributeChangedCallback(e,t,r),e){case oe.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=null!=r?r:void 0;break;case oe.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=null!=r?r:void 0;break;case"src":{let a=!!t,o=!!r;!a&&o?nJ(this,a6,a7).call(this):a&&!o?this.unload():a&&o&&(this.unload(),nJ(this,a6,a7).call(this));break}case"autoplay":if(r===t)break;null==(i=nX(this,a0))||i.setAutoplay(this.autoplay);break;case"preload":if(r===t)break;null==(n=nX(this,a0))||n.setPreload(r);break;case oe.PLAYBACK_ID:this.src=nR(null!=r?r:void 0,{maxResolution:this.maxResolution,domain:this.customDomain});break;case oe.DEBUG:{let s=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=s);break}case oe.METADATA_URL:r&&fetch(r).then(e=>e.json()).then(e=>this.metadata=e).catch(()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${r}!`))}}disconnectedCallback(){this.unload()}};a0=new WeakMap,a1=new WeakMap,a2=new WeakMap,a5=new WeakMap,a4=new WeakMap,a3=new WeakMap,a8=new WeakMap,a6=new WeakSet,a7=async function(){nX(this,a1)||(await nZ(this,a1,Promise.resolve()),nZ(this,a1,null),this.load())},n8.customElements.get("mux-video")||(n8.customElements.define("mux-video",or),n8.MuxVideoElement=or);var oi=Object.defineProperty,on=(e,t,r)=>t in e?oi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oa=(e,t,r)=>{return on(e,"symbol"!=typeof t?t+"":t,r),r},oo=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},os=(e,t,r)=>{return oo(e,t,"read from private field"),r?r.call(e):t.get(e)},ol=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ou=(e,t,r,i)=>{return oo(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r};let od={processCallback(e,t,r){if(r){for(let[i,n]of t)if(i in r){let a=r[i];"boolean"==typeof a&&n instanceof oy&&"boolean"==typeof n.element[n.attributeName]?n.booleanValue=a:"function"==typeof a&&n instanceof oy?n.element[n.attributeName]=a:n.value=a}}}};class oc extends w.DocumentFragment{constructor(e,t,r=od){var i;super(),ol(this,o$,void 0),ol(this,oz,void 0),this.append(e.content.cloneNode(!0)),ou(this,o$,oh(this)),ou(this,oz,r),null==(i=r.createCallback)||i.call(r,this,os(this,o$),t),r.processCallback(this,os(this,o$),t)}update(e){os(this,oz).processCallback(this,os(this,o$),e)}}o$=new WeakMap,oz=new WeakMap;let oh=(e,t=[])=>{let r,i;for(let n of e.attributes||[])if(n.value.includes("{{")){let a=new og;for([r,i]of op(n.value))if(r){let o=new oy(e,n.name,n.namespaceURI);a.append(o),t.push([i,o])}else a.append(i);n.value=a.toString()}for(let s of e.childNodes)if(1!==s.nodeType||s instanceof HTMLTemplateElement){if(1===s.nodeType||s.data.includes("{{")){let l=[];if(s.data)for([r,i]of op(s.data))if(r){let u=new ob(e);l.push(u),t.push([i,u])}else l.push(new Text(i));else if(s instanceof HTMLTemplateElement){let d=new oE(e,s);l.push(d),t.push([d.expression,d])}s.replaceWith(...l.flatMap(e=>e.replacementNodes||[e]))}}else oh(s,t);return t},of={},op=e=>{let t="",r=0,i=of[e],n=0,a;if(i)return i;for(i=[];a=e[n];n++)"{"===a&&"{"===e[n+1]&&"\\"!==e[n-1]&&e[n+2]&&1==++r?(t&&i.push([0,t]),t="",n++):"}"!==a||"}"!==e[n+1]||"\\"===e[n-1]||--r?t+=a||"":(i.push([1,t.trim()]),t="",n++);return t&&i.push([0,(r>0?"{{":"")+t]),of[e]=i};class om{get value(){return""}set value(e){}toString(){return this.value}}let ov=new WeakMap;class og{constructor(){ol(this,oX,[])}[Symbol.iterator](){return os(this,oX).values()}get length(){return os(this,oX).length}item(e){return os(this,oX)[e]}append(...e){for(let t of e)t instanceof oy&&ov.set(t,this),os(this,oX).push(t)}toString(){return os(this,oX).join("")}}oX=new WeakMap;class oy extends om{constructor(e,t,r){super(),ol(this,o1),ol(this,oQ,""),ol(this,oZ,void 0),ol(this,oJ,void 0),ol(this,o0,void 0),ou(this,oZ,e),ou(this,oJ,t),ou(this,o0,r)}get attributeName(){return os(this,oJ)}get attributeNamespace(){return os(this,o0)}get element(){return os(this,oZ)}get value(){return os(this,oQ)}set value(e){os(this,oQ)!==e&&(ou(this,oQ,e),os(this,o1,o2)&&1!==os(this,o1,o2).length?os(this,oZ).setAttributeNS(os(this,o0),os(this,oJ),os(this,o1,o2)):null==e?os(this,oZ).removeAttributeNS(os(this,o0),os(this,oJ)):os(this,oZ).setAttributeNS(os(this,o0),os(this,oJ),e))}get booleanValue(){return os(this,oZ).hasAttributeNS(os(this,o0),os(this,oJ))}set booleanValue(e){if(os(this,o1,o2)&&1!==os(this,o1,o2).length)throw new DOMException("Value is not fully templatized");this.value=e?"":null}}oQ=new WeakMap,oZ=new WeakMap,oJ=new WeakMap,o0=new WeakMap,o1=new WeakSet,o2=function(){return ov.get(this)};class ob extends om{constructor(e,t){super(),ol(this,o5,void 0),ol(this,o4,void 0),ou(this,o5,e),ou(this,o4,t?[...t]:[new Text])}get replacementNodes(){return os(this,o4)}get parentNode(){return os(this,o5)}get nextSibling(){return os(this,o4)[os(this,o4).length-1].nextSibling}get previousSibling(){return os(this,o4)[0].previousSibling}get value(){return os(this,o4).map(e=>e.textContent).join("")}set value(e){this.replace(e)}replace(...e){let t=e.flat().flatMap(e=>null==e?[new Text]:e.forEach?[...e]:11===e.nodeType?[...e.childNodes]:e.nodeType?[e]:[new Text(e)]);t.length||t.push(new Text),ou(this,o4,function(e,t,r,i=null){let n=0,a,o,s,l=r.length,u=t.length;for(;n<l&&n<u&&t[n]==r[n];)n++;for(;n<l&&n<u&&r[l-1]==t[u-1];)i=r[--u,--l];if(n==u)for(;n<l;)e.insertBefore(r[n++],i);if(n==l)for(;n<u;)e.removeChild(t[n++]);else{for(a=t[n];n<l;)s=r[n++],o=a?a.nextSibling:i,a==s?a=o:n<l&&r[n]==o?(e.replaceChild(s,a),a=o):e.insertBefore(s,a);for(;a!=i;)o=a.nextSibling,e.removeChild(a),a=o}return r}(os(this,o4)[0].parentNode,os(this,o4),t,this.nextSibling))}}o5=new WeakMap,o4=new WeakMap;class oE extends ob{constructor(e,t){let r=t.getAttribute("directive")||t.getAttribute("type"),i=t.getAttribute("expression")||t.getAttribute(r)||"";i.startsWith("{{")&&(i=i.trim().slice(2,-2).trim()),super(e),oa(this,"directive"),this.expression=i,this.template=t,this.directive=r}}let oT=/([>&])?\s*(\w+)\s*(.*)/,o_=/^(\?\?|\|)?\s*(['"\w]*)/,oA={"|":{string:e=>String(e)},"??":(e,t)=>null!=e?e:t};class oS{constructor(e){this.template=e}}let ok=new WeakMap,ow=new WeakMap,oL={partial:(e,t)=>{t[e.expression]=new oS(e.template)},if:(e,t)=>{var r;if(function(e,t){var r;let i=function(e,t){let r,i,n,a=[];for(;e;){for(let o in n=null,r=e.length,t)(i=t[o].exec(e))&&i.index<r&&(n={token:i[0],type:o,matches:i.slice(1)},r=i.index);r&&a.push({token:e.substr(0,r),type:void 0}),n&&a.push(n),e=e.substr(r+(n?n.token.length:0))}return a}(e,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><]=|[><]/,ws:/\s+/,param:/[$a-z_][$\w]*/i});if(0===i.length||i.some(({type:e})=>!e))return console.warn(`Warning: invalid expression \`${e}\``),!1;if(1===i.length)return oO(i[0])?oP(i[0].token,t):(console.warn(`Warning: invalid expression \`${e}\``),!1);let n=i.filter(({type:e})=>"ws"!==e);if(3===n.length){let a=oR[null==(r=n[1])?void 0:r.token];return a&&oO(n[0])&&oO(n[2])?a(oP(n[0].token,t),oP(n[2].token,t)):(console.warn(`Warning: invalid expression \`${e}\``),!1)}}(e.expression,t)){if(ok.get(e)!==e.template){ok.set(e,e.template);let i=new oc(e.template,t,oD);e.replace(i),ow.set(e,i)}else null==(r=ow.get(e))||r.update(t)}else e.replace(""),ok.delete(e),ow.delete(e)}},oI=Object.keys(oL),oD={processCallback(e,t,r){var i,n,a,o;if(r)for(let[s,l]of t){if(l instanceof oE){if(!l.directive){let u=oI.find(e=>l.template.hasAttribute(e));u&&(l.directive=u,l.expression=l.template.getAttribute(u))}null==(i=oL[l.directive])||i.call(oL,l,r);continue}let[,d,c,h]=null!=(n=s.match(oT))?n:[],f=r[c],[,p,m]=null!=(a=h.match(o_))?a:[],v=oA[p];if("function"==typeof v)f=v(f,oP(m,r));else if(v&&null!=f){let g=v[m];g&&(f=g(f))}if(f){if(f instanceof oS){if(">"!==d)continue;let y={...r},b=s.matchAll(/(\w+)\s*=\s*(['"\w]*)/g);for(let[,E,T]of b)y[E]=oP(T,r);ok.get(l)!==f.template?(ok.set(l,f.template),f=new oc(f.template,y,oD),l.value=f,ow.set(l,f)):null==(o=ow.get(l))||o.update(y);continue}l instanceof oy&&l.attributeName.startsWith("aria-")&&(f=String(f)),l instanceof oy?"boolean"==typeof f?l.booleanValue=f:"function"==typeof f?l.element[l.attributeName]=f:l.value=f:(l.value=f,ok.delete(l),ow.delete(l))}else l instanceof oy?l.booleanValue=!1:(l.value=void 0,ok.delete(l),ow.delete(l))}}},oR={"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t};function oO({type:e}){return["number","boolean","string","param"].includes(e)}function oP(e,t){let r=e[0],i=e.slice(-1);return"true"===e||"false"===e?"true"===e:r===i&&["'",'"'].includes(r)?e.slice(1,-1):"string"!=typeof e||isNaN(e)||isNaN(parseFloat(e))?t[e]:parseFloat(e)}var oC=Object.defineProperty,oM=(e,t,r)=>t in e?oC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ox=(e,t,r)=>{return oM(e,"symbol"!=typeof t?t+"":t,r),r},oN=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},oU=(e,t,r)=>{return oN(e,t,"read from private field"),r?r.call(e):t.get(e)},oF=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},oB=(e,t,r,i)=>{return oN(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r};let oj={"media-target-live-window":"targetLiveWindow","media-stream-type":"streamType"};class oH extends w.HTMLElement{constructor(){super(),ox(this,"renderRoot"),ox(this,"renderer"),oF(this,o3,void 0),oF(this,o8,void 0),this.renderRoot=this.attachShadow({mode:"open"});let e=new MutationObserver(e=>{e.some(e=>{let t=e.target;return t===this||"media-controller"===t.localName&&!!(oj[e.attributeName]||e.attributeName.startsWith("breakpoint-"))})&&this.render()});e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.createRenderer()}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e,t;let r=this.getAttribute("template");if(r){let i=null==(e=this.getRootNode())?void 0:e.getElementById(r);if(i)return i}return null!=(t=oU(this,o3))?t:this.constructor.template}set template(e){oB(this,o3,e),this.createRenderer()}get props(){var e,t,r;let i=[...Array.from(null!=(t=null==(e=this.mediaController)?void 0:e.attributes)?t:[]).filter(({name:e})=>{return oj[e]||e.startsWith("breakpoint-")}),...Array.from(this.attributes)],n={};for(let a of i){let o=null!=(r=oj[a.name])?r:a.name.replace(/[-_]([a-z])/g,(e,t)=>t.toUpperCase());null!=a.value?n[o]=""===a.value||a.value:n[o]=!1}return n}attributeChangedCallback(e,t,r){"template"===e&&t!=r&&this.createRenderer()}createRenderer(){this.template&&this.template!==oU(this,o8)&&(oB(this,o8,this.template),this.renderer=new oc(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(this.renderer))}render(){var e;null==(e=this.renderer)||e.update(this.props)}}o3=new WeakMap,o8=new WeakMap,ox(oH,"template"),ox(oH,"observedAttributes",["template"]),ox(oH,"processor",oD),w.customElements.get("media-theme")||w.customElements.define("media-theme",oH);var oV=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},oK=(e,t,r)=>(oV(e,t,"read from private field"),r?r.call(e):t.get(e)),oG=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},oW=(e,t,r,i)=>(oV(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),oq=(e,t,r)=>(oV(e,t,"access private method"),r),oY=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};"undefined"==typeof DocumentFragment&&(globalThis.DocumentFragment=class extends oY{});var o$,oz,oX,oQ,oZ,oJ,o0,o1,o2,o5,o4,o3,o8,o6,o7=class extends oY{},o9=class{constructor(e,t={}){oG(this,o6,void 0),oW(this,o6,null==t?void 0:t.detail)}get detail(){return oK(this,o6)}initCustomEvent(){}};o6=new WeakMap;var se={document:{createElement:function(e,t){return new o7}},DocumentFragment,customElements:{get(e){},define(e,t,r){},upgrade(e){},whenDefined(e){return Promise.resolve(o7)}},CustomEvent:o9,EventTarget:oY,HTMLElement:o7,HTMLVideoElement:class extends oY{}},st="undefined"==typeof window||void 0===globalThis.customElements,sr=st?se:globalThis,si=st?se.document:globalThis.document,sn={code:"en"};function sa(e,t=!0){var r;let i=t&&null!=(r=null==sn?void 0:sn[e])?r:e,n=t?sn.code:"en";return new so(i,n)}var so=class{constructor(e,t=null!=(sd=sn.code)?sd:"en"){this.message=e,this.locale=t}format(e){return this.message.replace(/\{(\w+)\}/g,(t,r)=>{var i;return null!=(i=e[r])?i:""})}toString(){return this.message}};function ss(e){if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}function sl(e){let t=(function(e){let t={};for(let r in e)null!=e[r]&&(t[r]=e[r]);return new URLSearchParams(t)})(e).toString();return t?"?"+t:""}function su(e){let t=(null!=e?e:"").split(".")[1];return t?JSON.parse(decodeURIComponent(atob(t.replace(/-/g,"+").replace(/_/g,"/")).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))):{}}var sd,sc,sh,sf,sp=(e,t)=>!!e&&!!t&&(!!e.contains(t)||sp(e,t.getRootNode().host)),sm="mux.com",sv=(()=>{try{return"1.8.0"}catch{}return"UNKNOWN"})(),sg=(e,{maxResolution:t,token:r,domain:i=sm}={})=>{return`https://stream.${i}/${e}.m3u8${sl(r?{token:r}:{redundant_streams:!0,...t?{max_resolution:t}:{}})}`},sy=(e,{token:t,thumbnailTime:r,domain:i=sm}={})=>{let{aud:n}=su(t);if(!(t&&"t"!==n))return`https://image.${i}/${e}/thumbnail.webp${sl({token:t,time:null==t?r:void 0})}`},sb=(e,{token:t,domain:r=sm}={})=>{let{aud:i}=su(t);if(!(t&&"s"!==i))return`https://image.${r}/${e}/storyboard.vtt${sl({token:t,format:"webp"})}`},sE={crossorigin:"crossOrigin",playsinline:"playsInline"},sT=class{constructor(e,t){oG(this,sc,void 0),oG(this,sh,void 0),oG(this,sf,[]),oW(this,sc,e),oW(this,sh,t)}[Symbol.iterator](){return oK(this,sf).values()}get length(){return oK(this,sf).length}get value(){var e;return null!=(e=oK(this,sf).join(" "))?e:""}set value(e){var t;e!==this.value&&(oW(this,sf,[]),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return oK(this,sf)[e]}values(){return oK(this,sf).values()}keys(){return oK(this,sf).keys()}forEach(e){oK(this,sf).forEach(e)}add(...e){var t,r;e.forEach(e=>{this.contains(e)||oK(this,sf).push(e)}),(""!==this.value||null!=(t=oK(this,sc))&&t.hasAttribute(`${oK(this,sh)}`))&&null!=(r=oK(this,sc))&&r.setAttribute(`${oK(this,sh)}`,`${this.value}`)}remove(...e){var t;e.forEach(e=>{oK(this,sf).splice(oK(this,sf).indexOf(e),1)}),null==(t=oK(this,sc))||t.setAttribute(`${oK(this,sh)}`,`${this.value}`)}contains(e){return oK(this,sf).includes(e)}toggle(e,t){return void 0!==t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){this.remove(e),this.add(t)}};sc=new WeakMap,sh=new WeakMap,sf=new WeakMap;var s_=`[mux-player ${sv}]`;function sA(...e){console.warn(s_,...e)}function sS(...e){console.error(s_,...e)}function sk(e){var t;let r=null!=(t=e.message)?t:"";e.file&&(r+=` ${sa("Read more: ")}
https://github.com/muxinc/elements/blob/main/errors/${e.file}`),sA(r)}var sw={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},sL={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},sI=Object.freeze({length:0,start(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),sD=at.filter(e=>"error"!==e),sR=Object.values(sw).filter(e=>![sw.PLAYSINLINE].includes(e)),sO=Object.values(sL);function sP(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}var sC=class extends sr.HTMLElement{static get observedAttributes(){return[...sR,...sO]}constructor(){super(),this.querySelectorAll(":scope > track").forEach(e=>{var t;null==(t=this.media)||t.append(e.cloneNode())});let e=e=>{for(let t of e)"childList"===t.type&&(t.removedNodes.forEach(e=>{var t,r;let i=null==(t=this.media)?void 0:t.querySelector(`track[src="${e.src}"]`);i&&(null==(r=this.media)||r.removeChild(i))}),t.addedNodes.forEach(e=>{var t;null==(t=this.media)||t.append(e.cloneNode())}))};new MutationObserver(e).observe(this,{childList:!0,subtree:!0})}attributeChangedCallback(e,t,r){var i,n;switch(e){case sL.MUTED:this.media&&(this.media.muted=null!=r,this.media.defaultMuted=null!=r);return;case sL.VOLUME:{let a=null!=(i=ss(r))?i:1;this.media&&(this.media.volume=a);return}case sL.PLAYBACKRATE:{let o=null!=(n=ss(r))?n:1;this.media&&(this.media.playbackRate=o,this.media.defaultPlaybackRate=o);return}}}play(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.play())?t:Promise.reject()}pause(){var e;null==(e=this.media)||e.pause()}requestCast(e){var t;return null==(t=this.media)?void 0:t.requestCast(e)}get media(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video")}get paused(){var e,t;return null==(t=null==(e=this.media)?void 0:e.paused)||t}get duration(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.duration)?t:NaN}get ended(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.ended)&&t}get buffered(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.buffered)?t:sI}get seekable(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.seekable)?t:sI}get readyState(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.readyState)?t:0}get videoWidth(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoWidth)?t:0}get videoHeight(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoHeight)?t:0}get currentTime(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.currentTime)?t:0}set currentTime(e){this.media&&(this.media.currentTime=Number(e))}get volume(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.volume)?t:1}set volume(e){this.media&&(this.media.volume=Number(e))}get playbackRate(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.playbackRate)?t:1}set playbackRate(e){this.media&&(this.media.playbackRate=Number(e))}get defaultPlaybackRate(){var e;return null!=(e=ss(this.getAttribute(sL.PLAYBACKRATE)))?e:1}set defaultPlaybackRate(e){null!=e?this.setAttribute(sL.PLAYBACKRATE,`${e}`):this.removeAttribute(sL.PLAYBACKRATE)}get crossOrigin(){return sP(this,sw.CROSSORIGIN)}set crossOrigin(e){this.setAttribute(sw.CROSSORIGIN,`${e}`)}get autoplay(){return null!=sP(this,sw.AUTOPLAY)}set autoplay(e){e?this.setAttribute(sw.AUTOPLAY,"string"==typeof e?e:""):this.removeAttribute(sw.AUTOPLAY)}get loop(){return null!=sP(this,sw.LOOP)}set loop(e){e?this.setAttribute(sw.LOOP,""):this.removeAttribute(sw.LOOP)}get muted(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.muted)&&t}set muted(e){this.media&&(this.media.muted=Boolean(e))}get defaultMuted(){return null!=sP(this,sw.MUTED)}set defaultMuted(e){e?this.setAttribute(sw.MUTED,""):this.removeAttribute(sw.MUTED)}get playsInline(){return null!=sP(this,sw.PLAYSINLINE)}set playsInline(e){sS("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(e){["","none","metadata","auto"].includes(e)?this.setAttribute(sw.PRELOAD,e):this.removeAttribute(sw.PRELOAD)}},sM=`
  :host {
    cursor: pointer;
  }
  media-time-display {
    color: inherit;
  }
`,sx=si.createElement("template");sx.innerHTML=`
  <style>
    ${sM}
  </style>
  <media-time-display show-duration></media-time-display>
`;var sN,sU,sF,sB=["Enter"," "],sj=class extends sr.HTMLElement{constructor(){var e,t;super(),oG(this,sU),oG(this,sN,void 0),this.attachShadow({mode:"open"}),null==(e=this.shadowRoot)||e.appendChild(this.constructor.template.content.cloneNode(!0)),this.timeDisplayEl=null==(t=this.shadowRoot)?void 0:t.querySelector("media-time-display")}static get observedAttributes(){return["hide-duration","remaining","disabled","aria-disabled"]}toggleTimeDisplay(){var e,t,r;null!=(e=this.timeDisplayEl)&&e.hasAttribute("remaining")?null==(t=this.timeDisplayEl)||t.removeAttribute("remaining"):null==(r=this.timeDisplayEl)||r.setAttribute("remaining","")}connectedCallback(){let e=t=>{let{key:r}=t;if(!sB.includes(r)){this.removeEventListener("keyup",e);return}this.toggleTimeDisplay()};this.addEventListener("keydown",t=>{let{metaKey:r,altKey:i,key:n}=t;if(r||i||!sB.includes(n)){this.removeEventListener("keyup",e);return}this.addEventListener("keyup",e)}),this.addEventListener("click",this.toggleTimeDisplay),oW(this,sN,setInterval(oq(this,sU,sF).bind(this),200)),requestAnimationFrame(()=>oq(this,sU,sF).call(this))}disconnectedCallback(){clearInterval(oK(this,sN))}attributeChangedCallback(e,t,r){var i,n;"hide-duration"===e&&oq(this,sU,sF).call(this),["remaining","disabled","aria-disabled"].includes(e)&&t!==r&&(null==r?null==(i=this.timeDisplayEl)||i.removeAttribute(e):null==(n=this.timeDisplayEl)||n.setAttribute(e,r))}};sN=new WeakMap,sU=new WeakSet,sF=function(){var e,t,r,i;"none"===getComputedStyle(this).getPropertyValue("--media-duration-display").trim()||null!=this.getAttribute("hide-duration")?null!=(e=this.timeDisplayEl)&&e.hasAttribute("show-duration")&&(null==(t=this.timeDisplayEl)||t.removeAttribute("show-duration")):null!=(r=this.timeDisplayEl)&&r.hasAttribute("show-duration")||null==(i=this.timeDisplayEl)||i.setAttribute("show-duration","")},sj.styles=sM,sj.template=sx,sr.customElements.get("mxp-time-display")||(sr.customElements.define("mxp-time-display",sj),sr.MxpTimeDisplay=sj);var sH=`:host {
  display: inline-block;
  width: 100%;
}

/* Hide custom elements that are not defined yet */
:not(:defined) {
  display: none;
}

a {
  color: #fff;
  font-size: 0.9em;
  text-decoration: underline;
}

::part(top),
[part~='top'] {
  --media-controls: var(--controls, var(--top-controls));
  --media-play-button: var(--play-button, var(--top-play-button));
  --media-seek-live-button: var(--seek-live-button, var(--top-seek-live-button));
  --media-seek-backward-button: var(--seek-backward-button, var(--top-seek-backward-button));
  --media-seek-forward-button: var(--seek-forward-button, var(--top-seek-forward-button));
  --media-mute-button: var(--mute-button, var(--top-mute-button));
  --media-captions-button: var(--captions-button, var(--top-captions-button));
  --media-captions-menu-button: var(
    --captions-menu-button,
    var(--media-captions-button, var(--top-captions-menu-button))
  );
  --media-airplay-button: var(--airplay-button, var(--top-airplay-button));
  --media-pip-button: var(--pip-button, var(--top-pip-button));
  --media-fullscreen-button: var(--fullscreen-button, var(--top-fullscreen-button));
  --media-cast-button: var(--cast-button, var(--top-cast-button));
  --media-playback-rate-button: var(--playback-rate-button, var(--top-playback-rate-button));
  --media-volume-range: var(--volume-range, var(--top-volume-range));
  --media-time-range: var(--time-range, var(--top-time-range));
  --media-time-display: var(--time-display, var(--top-time-display));
  --media-duration-display: var(--duration-display, var(--top-duration-display));
  --media-title-display: var(--title-display, var(--top-title-display));
}

::part(center),
[part~='center'] {
  --media-controls: var(--controls, var(--center-controls));
  --media-play-button: var(--play-button, var(--center-play-button));
  --media-seek-live-button: var(--seek-live-button, var(--center-seek-live-button));
  --media-seek-backward-button: var(--seek-backward-button, var(--center-seek-backward-button));
  --media-seek-forward-button: var(--seek-forward-button, var(--center-seek-forward-button));
  --media-mute-button: var(--mute-button, var(--center-mute-button));
  --media-captions-button: var(--captions-button, var(--center-captions-button));
  --media-captions-menu-button: var(
    --captions-menu-button,
    var(--media-captions-button, var(--center-captions-menu-button))
  );
  --media-airplay-button: var(--airplay-button, var(--center-airplay-button));
  --media-pip-button: var(--pip-button, var(--center-pip-button));
  --media-fullscreen-button: var(--fullscreen-button, var(--center-fullscreen-button));
  --media-cast-button: var(--cast-button, var(--center-cast-button));
  --media-playback-rate-button: var(--playback-rate-button, var(--center-playback-rate-button));
  --media-volume-range: var(--volume-range, var(--center-volume-range));
  --media-time-range: var(--time-range, var(--center-time-range));
  --media-time-display: var(--time-display, var(--center-time-display));
  --media-duration-display: var(--duration-display, var(--center-duration-display));
}

::part(bottom),
[part~='bottom'] {
  --media-controls: var(--controls, var(--bottom-controls));
  --media-play-button: var(--play-button, var(--bottom-play-button));
  --media-seek-live-button: var(--seek-live-button, var(--bottom-seek-live-button));
  --media-seek-backward-button: var(--seek-backward-button, var(--bottom-seek-backward-button));
  --media-seek-forward-button: var(--seek-forward-button, var(--bottom-seek-forward-button));
  --media-mute-button: var(--mute-button, var(--bottom-mute-button));
  --media-captions-button: var(--captions-button, var(--bottom-captions-button));
  --media-captions-menu-button: var(
    --captions-menu-button,
    var(--media-captions-button, var(--bottom-captions-menu-button))
  );
  --media-airplay-button: var(--airplay-button, var(--bottom-airplay-button));
  --media-pip-button: var(--pip-button, var(--bottom-pip-button));
  --media-fullscreen-button: var(--fullscreen-button, var(--bottom-fullscreen-button));
  --media-cast-button: var(--cast-button, var(--bottom-cast-button));
  --media-playback-rate-button: var(--playback-rate-button, var(--bottom-playback-rate-button));
  --media-volume-range: var(--volume-range, var(--bottom-volume-range));
  --media-time-range: var(--time-range, var(--bottom-time-range));
  --media-time-display: var(--time-display, var(--bottom-time-display));
  --media-duration-display: var(--duration-display, var(--bottom-duration-display));
  --media-title-display: var(--title-display, var(--bottom-title-display));
}

[part*='seek-live button'] {
  display: var(--media-controls, var(--media-seek-live-button));
}

/** Once we implement these CSS vars in Media Chrome below selectors can be deleted! */

::part(play button) {
  display: var(--media-controls, var(--media-play-button));
}
::part(seek-backward button) {
  display: var(--media-controls, var(--media-seek-backward-button));
}
::part(seek-forward button) {
  display: var(--media-controls, var(--media-seek-forward-button));
}
::part(mute button) {
  display: var(--media-controls, var(--media-mute-button));
}
::part(captions menu-button) {
  display: var(--media-controls, var(--media-captions-menu-button, contents));
}
::part(airplay button) {
  display: var(--media-controls, var(--media-airplay-button));
}
::part(pip button) {
  display: var(--media-controls, var(--media-pip-button));
}
::part(fullscreen button) {
  display: var(--media-controls, var(--media-fullscreen-button));
}
::part(cast button) {
  display: var(--media-controls, var(--media-cast-button));
}
::part(playback-rate button) {
  display: var(--media-controls, var(--media-playback-rate-button));
}
::part(volume range) {
  display: var(--media-controls, var(--media-volume-range));
}
::part(time range) {
  display: var(--media-controls, var(--media-time-range));
}
::part(time display) {
  display: var(--media-controls, var(--media-time-display));
}
::part(title display) {
  display: var(--media-controls, var(--media-title-display));
}
`,sV=`<!-- prettier-ignore -->
<template id="media-theme-mux">
  <style>
    :host(:not([audio])) {
      --secondary-color: transparent;
    }

    :host {
      --_primary-color: var(--primary-color, #fff);

      --media-icon-color: var(--_primary-color);
      --media-range-thumb-background: var(--_primary-color);
      --media-range-bar-color: var(--_primary-color);
      --media-control-background: var(--secondary-color);
      --media-control-hover-background: var(--secondary-color);
      --media-time-buffered-color: rgba(255, 255, 255, 0.4);
      --media-range-track-background: rgba(255, 255, 255, 0.5);
      --media-range-track-border-radius: 3px;
      --media-preview-thumbnail-border: 1px solid #fff;
      --media-preview-thumbnail-border-radius: 2px;
      --media-preview-time-margin: 5px 0 2px;
      color: var(--_primary-color);
      display: inline-block;
      width: 100%;
      height: 100%;
    }

    :host(.two-tone:not([audio])) {
      --mux-time-range-padding: 0px; /* px is needed in calc() */
      --media-preview-thumbnail-border: 0;
      --media-preview-thumbnail-border-radius: 2px 2px 0 0;
      --media-preview-time-border-radius: 0 0 2px 2px;
      --media-preview-time-margin: 0 0 8px;
      --media-preview-time-text-shadow: none;
    }

    :host([audio]) {
      --media-preview-time-border-radius: 3px;
      --media-preview-time-margin: 0 0 5px;
      --media-preview-time-text-shadow: none;
    }

    :host(.two-tone:not([audio])) media-time-range {
      --media-range-track-border-radius: 0;
    }

    :host([audio]) ::slotted([slot='media']) {
      height: 0px;
    }

    :host([audio]) :is(media-poster-image, media-loading-indicator) {
      display: none;
    }

    :host([audio]) media-controller {
      background: transparent;
    }

    :host([audio]) media-controller::part(vertical-layer) {
      background: transparent;
    }

    :host([audio]) media-control-bar {
      width: 100%;
    }

    [disabled],
    [aria-disabled='true'] {
      opacity: 60%;
      cursor: not-allowed;
    }

    :host(:not([audio])) media-captions-menu-button::part(listbox) {
      bottom: 42px;
      z-index: 10;
    }

    media-controller:not(:is([media-captions-list], [media-subtitles-list])) media-captions-menu-button {
      --captions-menu-button: none;
    }

    media-captions-menu-button {
      --media-listbox-background: var(--secondary-color);
      --media-listbox-selected-background: rgba(255, 255, 255, 0.28);
      --media-listbox-hover-background: none;
      --media-listbox-hover-outline: white solid 1px;
      --media-text-color: white;
    }

    media-volume-range[media-volume-unavailable] {
      --volume-range: none;
    }

    media-airplay-button[media-airplay-unavailable] {
      --airplay-button: none;
    }

    media-fullscreen-button[media-fullscreen-unavailable] {
      --fullscreen-button: none;
    }

    media-cast-button[media-cast-unavailable] {
      --cast-button: none;
    }

    media-pip-button[media-pip-unavailable] {
      --pip-button: none;
    }

    media-controller {
      width: 100%;
      height: 100%;
    }

    :host media-time-range {
      color: var(--_primary-color);
      --media-range-thumb-opacity: 0;
    }

    :host(:not([audio])) media-time-range {
      --media-range-padding-left: var(--mux-time-range-padding, 10px);
      --media-range-padding-right: var(--mux-time-range-padding, 10px);
      --media-range-padding: 0;
      z-index: 10;
      height: 10px;
      bottom: -3px;
      background: linear-gradient(
        180deg,
        transparent,
        transparent 3px,
        var(--media-control-background, rgba(20, 20, 30, 0.7)) 3px,
        var(--media-control-background, rgba(20, 20, 30, 0.7)) 7px,
        transparent 7px,
        transparent
      );
      width: 100%;
    }

    media-control-bar {
      --media-control-padding: 4px 3px;
    }

    [breakpoint-sm] media-control-bar {
      --media-control-padding: 9px 5px;
    }

    [breakpoint-md] media-control-bar {
      --media-control-padding: 9px 7px;
    }

    media-control-bar :is([role='button'], [role='switch'], button) {
      line-height: 0;
    }

    media-control-bar :is(media-text-display, mxp-time-display):first-child {
      --media-control-padding: 9px 5px 9px 10px;
    }

    .spacer {
      flex-grow: 1;
      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));
    }

    /* Add a small space on the right to have the play button and
     * fullscreen button aligned in relation to the progress bar. */
    media-control-bar:not([slot])::after {
      content: '';
      width: 2px;
      height: 100%;
      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));
    }

    media-control-bar[slot='top-chrome'] {
      min-height: 42px;
      pointer-events: none;
    }

    :host([title]) media-control-bar[slot='top-chrome']::before {
      content: '';
      position: absolute;
      width: 100%;
      padding-bottom: min(160px, 25%);
      background: linear-gradient(rgb(0 0 0 / 0.4), transparent);
    }

    media-control-bar[slot='top-chrome'] > * {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      position: relative;
    }

    media-controller::part(vertical-layer) {
      transition: background-color 1s;
    }

    media-controller:is([media-paused], :not([user-inactive]))::part(vertical-layer) {
      background-color: var(--controls-backdrop-color, var(--controls, transparent));
      transition: background-color 0.25s;
    }

    .center-controls {
      --media-button-icon-width: 100%;
      --media-button-icon-height: auto;
      pointer-events: none;
      width: 100%;
      display: flex;
      flex-flow: row;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
      paint-order: stroke;
      stroke: rgba(102, 102, 102, 1);
      stroke-width: 0.3px;
      text-shadow: 0 0 2px rgb(0 0 0 / 0.25), 0 0 6px rgb(0 0 0 / 0.25);
    }

    .center-controls media-play-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      padding: 0;
      width: max(43px, min(10%, 55px));
    }

    .center-controls media-seek-backward-button,
    .center-controls media-seek-forward-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      padding: 0;
      margin: 0 2%;
      width: max(33px, min(8%, 40px));
    }

    media-control-bar:not([slot]) media-seek-backward-button {
      padding-right: 5px;
    }

    media-control-bar:not([slot]) media-seek-forward-button {
      padding-left: 5px;
    }

    media-loading-indicator {
      --media-loading-icon-width: 100%;
      --media-button-icon-height: auto;
      pointer-events: none;
      position: absolute;
      width: min(15%, 150px);
      display: flex;
      flex-flow: row;
      align-items: center;
      justify-content: center;
    }

    /* Intentionally don't target the div for transition but the children
     of the div. Prevents messing with media-chrome's autohide feature. */
    media-loading-indicator + div * {
      transition: opacity 0.15s;
      opacity: 1;
    }

    media-loading-indicator[media-loading]:not([media-paused]) ~ div > * {
      opacity: 0;
      transition-delay: 400ms;
    }

    media-volume-range {
      width: min(100%, 100px);
    }

    media-time-display {
      white-space: nowrap;
    }

    :is(media-time-display, media-text-display, media-playback-rate-button[role='button']) {
      color: inherit;
      line-height: 24px;
    }

    :is(.title-display, media-live-button) {
      color: inherit;
      font-size: 16px;
      text-shadow: 0 0 2px rgb(0 0 0 / 0.6);
    }

    :host([audio]) .title-display {
      flex-grow: 1;
      font-size: 21px;
    }
  </style>
  <media-controller
    breakpoints="sm:300 md:700"
    gestures-disabled="{{disabled}}"
    hotkeys="{{hotkeys}}"
    nohotkeys="{{nohotkeys}}"
    audio="{{audio}}"
    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"
  >
    <slot name="media" slot="media"></slot>
    <media-poster-image
      slot="poster"
      part="poster"
      src="{{poster}}"
      placeholder-src="{{placeholder}}"
    ></media-poster-image>
    <media-loading-indicator slot="centered-chrome" no-auto-hide></media-loading-indicator>

    <template partial="TitleDisplay">
      <template if="title">
        <media-text-display part="top title display" class="title-display">
          {{title}}
        </media-text-display>
      </template>
    </template>

    <template partial="PlayButton">
      <media-play-button
        part="{{section ?? 'bottom'}} play button"
        disabled="{{disabled}}"
        aria-disabled="{{disabled}}"
      >
        <svg aria-hidden="true" viewBox="0 0 24 24" slot="play">
          <path d="m6.73 20.93 14.05-8.54a.46.46 0 0 0 0-.78L6.73 3.07a.48.48 0 0 0-.73.39v17.07a.48.48 0 0 0 .73.4Z" />
        </svg>
        <svg aria-hidden="true" viewBox="0 0 24 24" slot="pause">
          <path
            d="M6 19.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-15a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v15ZM14.5 4a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-15a.5.5 0 0 0-.5-.5h-3Z"
          />
        </svg>
      </media-play-button>
    </template>

    <template partial="SeekBackwardButton">
      <media-seek-backward-button
        seek-offset="{{backwardSeekOffset}}"
        part="{{section ?? 'bottom'}} seek-backward button"
        disabled="{{disabled}}"
        aria-disabled="{{disabled}}"
      >
        <svg aria-hidden="true" viewBox="0 0 22 24" slot="backward">
          <path d="M11 6V3L5.37 7 11 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 11 6Z" />
          <text class="value" transform="translate(2.5 21)" style="font-size: 8px; font-family: 'ArialMT', 'Arial'">
            {{backwardSeekOffset}}
          </text>
        </svg>
      </media-seek-backward-button>
    </template>

    <template partial="SeekForwardButton">
      <media-seek-forward-button
        seek-offset="{{forwardSeekOffset}}"
        part="{{section ?? 'bottom'}} seek-forward button"
        disabled="{{disabled}}"
        aria-disabled="{{disabled}}"
      >
        <svg aria-hidden="true" viewBox="0 0 22 24" slot="forward">
          <path d="M11 6V3l5.61 4L11 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 11 6Z" />
          <text class="value" transform="translate(10 21)" style="font-size: 8px; font-family: 'ArialMT', 'Arial'">
            {{forwardSeekOffset}}
          </text>
        </svg>
      </media-seek-forward-button>
    </template>

    <template partial="MuteButton">
      <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
        <svg aria-hidden="true" viewBox="0 0 24 24" slot="high">
          <path
            d="m11.14 4.86-4 4a.49.49 0 0 1-.35.14H3.25a.25.25 0 0 0-.25.25v5.5a.25.25 0 0 0 .25.25h3.54a.49.49 0 0 1 .36.15l4 4a.5.5 0 0 0 .85-.36V5.21a.5.5 0 0 0-.86-.35Zm2.74-1.56v1.52A7.52 7.52 0 0 1 19.47 12a7.52 7.52 0 0 1-5.59 7.18v1.52A9 9 0 0 0 21 12a9 9 0 0 0-7.12-8.7Zm3.56 8.7a5.49 5.49 0 0 0-3.56-5.1v1.66a3.93 3.93 0 0 1 0 6.88v1.66a5.49 5.49 0 0 0 3.56-5.1Z"
          />
        </svg>
        <svg aria-hidden="true" viewBox="0 0 24 24" slot="low">
          <path
            d="m11.14 4.853-4 4a.49.49 0 0 1-.35.14H3.25a.25.25 0 0 0-.25.25v5.5a.25.25 0 0 0 .25.25h3.54a.49.49 0 0 1 .36.15l4 4a.5.5 0 0 0 .85-.36V5.203a.5.5 0 0 0-.86-.35Zm6.3 7.14a5.49 5.49 0 0 0-3.56-5.1v1.66a3.93 3.93 0 0 1 0 6.88v1.66a5.49 5.49 0 0 0 3.56-5.1Z"
          />
        </svg>
        <svg aria-hidden="true" viewBox="0 0 24 24" slot="medium">
          <path
            d="m11.14 4.853-4 4a.49.49 0 0 1-.35.14H3.25a.25.25 0 0 0-.25.25v5.5a.25.25 0 0 0 .25.25h3.54a.49.49 0 0 1 .36.15l4 4a.5.5 0 0 0 .85-.36V5.203a.5.5 0 0 0-.86-.35Zm6.3 7.14a5.49 5.49 0 0 0-3.56-5.1v1.66a3.93 3.93 0 0 1 0 6.88v1.66a5.49 5.49 0 0 0 3.56-5.1Z"
          />
        </svg>
        <svg aria-hidden="true" viewBox="0 0 24 24" slot="off">
          <path
            d="m3 4.05 4.48 4.47-.33.33a.49.49 0 0 1-.36.15H3.25a.25.25 0 0 0-.25.25v5.5a.25.25 0 0 0 .25.25h3.54a.49.49 0 0 1 .36.15l4 4a.48.48 0 0 0 .36.15.5.5 0 0 0 .5-.5v-5.75l4.67 4.66a7.71 7.71 0 0 1-2.79 1.47v1.52a9.32 9.32 0 0 0 3.87-1.91L20 21l1-1L4.06 3 3 4.05Zm5.36 5.36 2.39 2.39V17L8 14.26a1.74 1.74 0 0 0-1.24-.51H4.25v-3.5h2.54A1.74 1.74 0 0 0 8 9.74l.36-.33ZM19.47 12a7.19 7.19 0 0 1-.89 3.47l1.11 1.1A8.64 8.64 0 0 0 21 12a9 9 0 0 0-7.12-8.7v1.52A7.52 7.52 0 0 1 19.47 12ZM12 8.88V5.21a.5.5 0 0 0-.5-.5.48.48 0 0 0-.36.15L9.56 6.44 12 8.88ZM15.91 12a4.284 4.284 0 0 1-.07.72l1.22 1.22a5.2 5.2 0 0 0 .38-1.94 5.49 5.49 0 0 0-3.56-5.1v1.66A4 4 0 0 1 15.91 12Z"
          />
        </svg>
      </media-mute-button>
    </template>

    <template partial="PipButton">
      <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
        <svg aria-hidden="true" viewBox="0 0 26 24" slot="enter">
          <path
            d="M22 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h6.75v-1.25h-6.5V4.25h17.5v6.5H23V4a1 1 0 0 0-1-1Zm0 10h-8a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1Zm-.5 6.5h-7v-5h7v5Z"
          />
        </svg>
        <svg aria-hidden="true" viewBox="0 0 26 24" slot="exit">
          <path
            d="M22 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h6.75v-1.25h-6.5V4.25h17.5v6.5H23V4a1 1 0 0 0-1-1Zm0 10h-8a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1Zm-.5 6.5h-7v-5h7v5Z"
          />
        </svg>
      </media-pip-button>
    </template>

    <template partial="CaptionsMenuButton">
      <media-captions-menu-button
        default-showing="{{defaultShowingCaptions}}"
        part="bottom captions menu-button"
        disabled="{{disabled}}"
        aria-disabled="{{disabled}}"
      >
        <svg aria-hidden="true" viewBox="0 0 26 24" slot="on">
          <path
            d="M22.832 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.41 10.1a3.63 3.63 0 0 1-1.51.32 4.76 4.76 0 0 1-1.63-.27 4 4 0 0 1-1.28-.83 3.67 3.67 0 0 1-.84-1.26 4.23 4.23 0 0 1-.3-1.63 4.28 4.28 0 0 1 .3-1.64 3.53 3.53 0 0 1 .84-1.21 3.89 3.89 0 0 1 1.29-.8 4.76 4.76 0 0 1 1.63-.27 4.06 4.06 0 0 1 1.35.24c.225.091.44.205.64.34a2.7 2.7 0 0 1 .55.52l-1.27 1a1.79 1.79 0 0 0-.6-.46 2 2 0 0 0-.83-.16 2 2 0 0 0-1.56.69 2.35 2.35 0 0 0-.46.77 2.78 2.78 0 0 0-.16 1c-.009.34.046.68.16 1 .104.283.26.545.46.77.188.21.415.38.67.5a2 2 0 0 0 .84.18 1.87 1.87 0 0 0 .9-.21 1.78 1.78 0 0 0 .65-.6l1.38 1a2.88 2.88 0 0 1-1.22 1.01Zm7.52 0a3.63 3.63 0 0 1-1.51.32 4.76 4.76 0 0 1-1.63-.27 3.89 3.89 0 0 1-1.28-.83 3.55 3.55 0 0 1-.85-1.26 4.23 4.23 0 0 1-.3-1.63 4.28 4.28 0 0 1 .3-1.64 3.43 3.43 0 0 1 .85-1.25 3.75 3.75 0 0 1 1.28-.8 4.76 4.76 0 0 1 1.63-.27 4 4 0 0 1 1.35.24c.225.091.44.205.64.34.21.144.395.32.55.52l-1.27 1a1.79 1.79 0 0 0-.6-.46 2 2 0 0 0-.83-.16 2 2 0 0 0-1.56.69 2.352 2.352 0 0 0-.46.77 3.01 3.01 0 0 0-.16 1c-.003.34.05.678.16 1 .108.282.263.542.46.77.188.21.416.38.67.5a2 2 0 0 0 .84.18 1.87 1.87 0 0 0 .9-.21 1.78 1.78 0 0 0 .65-.6l1.38 1a2.82 2.82 0 0 1-1.21 1.05Z"
          />
        </svg>
        <svg aria-hidden="true" viewBox="0 0 26 24" slot="off">
          <path
            d="M22.832 5.68a2.58 2.58 0 0 0-2.3-2.5c-1.81-.12-4.67-.18-7.53-.18-2.86 0-5.72.06-7.53.18a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c1.81.12 4.67.18 7.53.18 2.86 0 5.72-.06 7.53-.18a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.137-.21-8.283 0-12.42a1.11 1.11 0 0 1 .91-1.11c1.67-.11 4.43-.18 7.43-.18s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.137.21 8.283 0 12.42ZM10.843 14a1.55 1.55 0 0 1-.76.18 1.57 1.57 0 0 1-.71-.18 1.69 1.69 0 0 1-.57-.42 2.099 2.099 0 0 1-.38-.58 2.47 2.47 0 0 1 0-1.64 2 2 0 0 1 .39-.66 1.73 1.73 0 0 1 .58-.42c.23-.103.479-.158.73-.16.241-.004.48.044.7.14.199.088.373.222.51.39l1.08-.89a2.179 2.179 0 0 0-.47-.44 2.81 2.81 0 0 0-.54-.32 2.91 2.91 0 0 0-.58-.15 2.71 2.71 0 0 0-.56 0 4.08 4.08 0 0 0-1.38.15 3.27 3.27 0 0 0-1.09.67 3.14 3.14 0 0 0-.71 1.06 3.62 3.62 0 0 0-.26 1.39 3.57 3.57 0 0 0 .26 1.38 3 3 0 0 0 .71 1.06c.316.293.687.52 1.09.67.443.16.91.238 1.38.23a3.2 3.2 0 0 0 1.28-.27c.401-.183.747-.47 1-.83l-1.17-.88a1.42 1.42 0 0 1-.53.52Zm6.62 0a1.58 1.58 0 0 1-.76.18 1.54 1.54 0 0 1-.7-.18 1.69 1.69 0 0 1-.57-.42 2.12 2.12 0 0 1-.43-.58 2.29 2.29 0 0 1 .39-2.3 1.84 1.84 0 0 1 1.32-.58c.241-.003.48.045.7.14.199.088.373.222.51.39l1.08-.92a2.43 2.43 0 0 0-.47-.44 3.22 3.22 0 0 0-.53-.29 2.999 2.999 0 0 0-.57-.15 2.87 2.87 0 0 0-.57 0 4.06 4.06 0 0 0-1.36.15 3.17 3.17 0 0 0-1.09.67 3 3 0 0 0-.72 1.06 3.62 3.62 0 0 0-.25 1.39 3.57 3.57 0 0 0 .25 1.38c.16.402.405.764.72 1.06a3.17 3.17 0 0 0 1.09.67c.44.16.904.237 1.37.23.441 0 .877-.092 1.28-.27a2.45 2.45 0 0 0 1-.83l-1.15-.85a1.49 1.49 0 0 1-.54.49Z"
          />
        </svg>
      </media-captions-menu-button>
    </template>

    <template partial="AirplayButton">
      <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
        <svg aria-hidden="true" viewBox="0 0 26 24" slot="airplay">
          <path
            d="M13.19 14.22a.25.25 0 0 0-.38 0l-5.46 6.37a.25.25 0 0 0 .19.41h10.92a.25.25 0 0 0 .19-.41l-5.46-6.37Z"
          />
          <path
            d="M22 3H4a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h2.94L8 16.75H4.25V4.25h17.5v12.5H18L19.06 18H22a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Z"
          />
        </svg>
      </media-airplay-button>
    </template>

    <template partial="FullscreenButton">
      <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
        <svg aria-hidden="true" viewBox="0 0 24 24" slot="enter">
          <path
            d="M20.25 14.5a.76.76 0 0 0-.75.75v4.25h-4.25a.75.75 0 1 0 0 1.5h5a.76.76 0 0 0 .75-.75v-5a.76.76 0 0 0-.75-.75Zm0-11.5h-5a.76.76 0 0 0-.75.75.76.76 0 0 0 .75.75h4.25v4.25a.75.75 0 1 0 1.5 0v-5a.76.76 0 0 0-.75-.75ZM8.75 19.5H4.5v-4.25a.76.76 0 0 0-.75-.75.76.76 0 0 0-.75.75v5a.76.76 0 0 0 .75.75h5a.75.75 0 1 0 0-1.5Zm0-16.5h-5a.76.76 0 0 0-.75.75v5a.76.76 0 0 0 .75.75.76.76 0 0 0 .75-.75V4.5h4.25a.76.76 0 0 0 .75-.75.76.76 0 0 0-.75-.75Z"
          />
        </svg>
        <svg aria-hidden="true" viewBox="0 0 24 24" slot="exit">
          <path
            d="M20.25 14.5h-5a.76.76 0 0 0-.75.75v5a.75.75 0 1 0 1.5 0V16h4.25a.75.75 0 1 0 0-1.5Zm-5-5h5a.75.75 0 1 0 0-1.5H16V3.75a.75.75 0 1 0-1.5 0v5a.76.76 0 0 0 .75.75Zm-6.5 5h-5a.75.75 0 1 0 0 1.5H8v4.25a.75.75 0 1 0 1.5 0v-5a.76.76 0 0 0-.75-.75Zm0-11.5a.76.76 0 0 0-.75.75V8H3.75a.75.75 0 0 0 0 1.5h5a.76.76 0 0 0 .75-.75v-5A.76.76 0 0 0 8.75 3Z"
          />
        </svg>
      </media-fullscreen-button>
    </template>

    <template partial="CastButton">
      <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
        <svg aria-hidden="true" viewBox="0 0 26 24" slot="enter">
          <path d="M3 15.5V17c2.206 0 4 1.794 4 4h1.5A5.5 5.5 0 0 0 3 15.5Zm0 3V21h2.5A2.5 2.5 0 0 0 3 18.5Z" />
          <path d="M3 12.5V14c3.86 0 7 3.14 7 7h1.5A8.5 8.5 0 0 0 3 12.5Z" />
          <path
            d="M22 3H4a1 1 0 0 0-1 1v6.984c.424 0 .84.035 1.25.086V4.25h17.5v15.5h-8.82c.051.41.086.826.086 1.25H22a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Z"
          />
        </svg>
        <svg aria-hidden="true" viewBox="0 0 26 24" slot="exit">
          <path d="M3 15.5V17c2.206 0 4 1.794 4 4h1.5A5.5 5.5 0 0 0 3 15.5Zm0 3V21h2.5A2.5 2.5 0 0 0 3 18.5Z" />
          <path d="M3 12.5V14c3.86 0 7 3.14 7 7h1.5A8.5 8.5 0 0 0 3 12.5Z" />
          <path
            d="M22 3H4a1 1 0 0 0-1 1v6.984c.424 0 .84.035 1.25.086V4.25h17.5v15.5h-8.82c.051.41.086.826.086 1.25H22a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Z"
          />
          <path d="M20.5 5.5h-15v5.811c3.52.906 6.283 3.67 7.189 7.19H20.5V5.5Z" />
        </svg>
      </media-cast-button>
    </template>

    <template partial="LiveButton">
      <!-- NOTE: Keeping "seek-live" part for backwards compatibility for now -->
      <media-live-button
        part="{{section ?? 'top'}} live seek-live button"
        disabled="{{disabled}}"
        aria-disabled="{{disabled}}"
      ></media-live-button>
    </template>

    <template partial="PlaybackRateButton">
      <media-playback-rate-button
        rates="{{playbackRates}}"
        part="bottom playback-rate button"
        disabled="{{disabled}}"
        aria-disabled="{{disabled}}"
      ></media-playback-rate-button>
    </template>

    <template partial="VolumeRange">
      <media-volume-range
        part="bottom volume range"
        disabled="{{disabled}}"
        aria-disabled="{{disabled}}"
      ></media-volume-range>
    </template>

    <template partial="TimeDisplay">
      <mxp-time-display
        remaining="{{defaultShowRemainingTime}}"
        part="bottom time display"
        disabled="{{disabled}}"
        aria-disabled="{{disabled}}"
      ></mxp-time-display>
    </template>

    <template partial="TimeRange">
      <media-time-range
        part="bottom time range"
        disabled="{{disabled}}"
        aria-disabled="{{disabled}}"
      ></media-time-range>
    </template>

    <template if="audio">

      <template if="streamType == 'on-demand'">
        <template if="title">
          <media-control-bar>{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar>
          {{>PlayButton}}
          {{>SeekBackwardButton}}
          {{>SeekForwardButton}}
          {{>TimeDisplay}}
          {{>TimeRange}}
          {{>MuteButton}}
          {{>VolumeRange}}
          {{>PlaybackRateButton}}
          {{>AirplayButton}}
          {{>CastButton}}
        </media-control-bar>
      </template>

      <template if="streamType == 'live'">

        <template if="targetLiveWindow > 0">
          <template if="title">
            <media-control-bar>{{>TitleDisplay}}</media-control-bar>
          </template>
          <media-control-bar>
            {{>PlayButton}}
            {{>LiveButton section="bottom"}}
            {{>SeekBackwardButton}}
            {{>SeekForwardButton}}
            {{>TimeDisplay}}
            {{>TimeRange}}
            {{>MuteButton}}
            {{>VolumeRange}}
            {{>PlaybackRateButton}}
            {{>AirplayButton}}
            {{>CastButton}}
          </media-control-bar>
        </template>

        <template if="targetLiveWindow == null">
          <template if="title">
            <media-control-bar>{{>TitleDisplay}}</media-control-bar>
          </template>
          <media-control-bar>
            {{>PlayButton}}
            {{>LiveButton section="bottom"}}
            {{>MuteButton}}
            {{>VolumeRange}}
            <div class="spacer"></div>
            {{>AirplayButton}}
            {{>CastButton}}
          </media-control-bar>
        </template>

      </template>
    </template>

    <template if="audio == null">

      <template if="streamType == 'on-demand'">

        <template if="breakpointSm == null">
          {{>TimeRange}}
          <media-control-bar>
            {{>PlayButton}}
            {{>MuteButton}}
            <div class="spacer"></div>
            {{>CaptionsMenuButton}}
            {{>FullscreenButton}}
          </media-control-bar>
        </template>

        <template if="breakpointSm">
          <template if="breakpointMd == null">
            <media-control-bar slot="top-chrome">
              {{>TitleDisplay}}
            </media-control-bar>
            <div slot="centered-chrome" class="center-controls">
              {{>SeekBackwardButton section="center"}}
              {{>PlayButton section="center"}}
              {{>SeekForwardButton section="center"}}
            </div>
            {{>TimeRange}}
            <media-control-bar>
              {{>PlayButton}}
              {{>TimeDisplay}}
              {{>MuteButton}}
              {{>VolumeRange}}
              <div class="spacer"></div>
              {{>PlaybackRateButton}}
              {{>CaptionsMenuButton}}
              {{>AirplayButton}}
              {{>CastButton}}
              {{>PipButton}}
              {{>FullscreenButton}}
            </media-control-bar>
          </template>
        </template>

        <template if="breakpointMd">
          <media-control-bar slot="top-chrome">
            {{>TitleDisplay}}
          </media-control-bar>
          <div slot="centered-chrome" class="center-controls">
            {{>PlayButton section="center"}}
          </div>
          {{>TimeRange}}
          <media-control-bar>
            {{>PlayButton}}
            {{>SeekBackwardButton}}
            {{>SeekForwardButton}}
            {{>TimeDisplay}}
            {{>MuteButton}}
            {{>VolumeRange}}
            <div class="spacer"></div>
            {{>PlaybackRateButton}}
            {{>CaptionsMenuButton}}
            {{>AirplayButton}}
            {{>CastButton}}
            {{>PipButton}}
            {{>FullscreenButton}}
          </media-control-bar>
        </template>

      </template>

      <template if="streamType == 'live'">

        <template if="targetLiveWindow == null">

          <template if="breakpointSm == null">
            <media-control-bar slot="top-chrome">
              {{>LiveButton}}
            </media-control-bar>
            <media-control-bar>
              {{>PlayButton}}
              {{>MuteButton}}
              <div class="spacer"></div>
              {{>CaptionsMenuButton}}
              {{>FullscreenButton}}
            </media-control-bar>
          </template>

          <template if="breakpointSm">
            <template if="breakpointMd == null">
              <media-control-bar slot="top-chrome">
                {{>LiveButton}}
                {{>TitleDisplay}}
              </media-control-bar>
              <div slot="centered-chrome" class="center-controls">
                {{>PlayButton section="center"}}
              </div>
              <media-control-bar>
                {{>PlayButton}}
                {{>MuteButton}}
                {{>VolumeRange}}
                <div class="spacer"></div>
                {{>CaptionsMenuButton}}
                {{>AirplayButton}}
                {{>CastButton}}
                {{>PipButton}}
                {{>FullscreenButton}}
              </media-control-bar>
            </template>
          </template>

          <template if="breakpointMd">
            <media-control-bar slot="top-chrome">
              {{>LiveButton}}
              {{>TitleDisplay}}
            </media-control-bar>
            <div slot="centered-chrome" class="center-controls">
              {{>PlayButton section="center"}}
            </div>
            <media-control-bar>
              {{>PlayButton}}
              {{>MuteButton}}
              {{>VolumeRange}}
              <div class="spacer"></div>
              {{>CaptionsMenuButton}}
              {{>AirplayButton}}
              {{>CastButton}}
              {{>PipButton}}
              {{>FullscreenButton}}
            </media-control-bar>
          </template>
        </template>

        <template if="targetLiveWindow > 0">

          <template if="breakpointSm == null">
            <media-control-bar slot="top-chrome">
              {{>LiveButton}}
            </media-control-bar>
            {{>TimeRange}}
            <media-control-bar>
              {{>PlayButton}}
              {{>MuteButton}}
              <div class="spacer"></div>
              {{>CaptionsMenuButton}}
              {{>FullscreenButton}}
            </media-control-bar>
          </template>

          <template if="breakpointSm">
            <template if="breakpointMd == null">
              <media-control-bar slot="top-chrome">
                {{>LiveButton}}
                {{>TitleDisplay}}
              </media-control-bar>
              <div slot="centered-chrome" class="center-controls">
                {{>SeekBackwardButton section="center"}}
                {{>PlayButton section="center"}}
                {{>SeekForwardButton section="center"}}
              </div>
              {{>TimeRange}}
              <media-control-bar>
                {{>PlayButton}}
                {{>MuteButton}}
                {{>VolumeRange}}
                <div class="spacer"></div>
                {{>CaptionsMenuButton}}
                {{>AirplayButton}}
                {{>CastButton}}
                {{>PipButton}}
                {{>FullscreenButton}}
              </media-control-bar>
            </template>
          </template>

          <template if="breakpointMd">
            <media-control-bar slot="top-chrome">
              {{>LiveButton}}
              {{>TitleDisplay}}
            </media-control-bar>
            <div slot="centered-chrome" class="center-controls">
              {{>PlayButton section="center"}}
            </div>
            {{>TimeRange}}
            <media-control-bar>
              {{>PlayButton}}
              {{>SeekBackwardButton}}
              {{>SeekForwardButton}}
              {{>MuteButton}}
              {{>VolumeRange}}
              <div class="spacer"></div>
              {{>CaptionsMenuButton}}
              {{>AirplayButton}}
              {{>CastButton}}
              {{>PipButton}}
              {{>FullscreenButton}}
            </media-control-bar>
          </template>

        </template>

      </template>

    </template>

    <slot></slot>

  </media-controller>
</template>
`,sK=`
  :host {
    z-index: 100;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    box-sizing: border-box;
    color: #fff;
    line-height: 18px;
    font-family: Arial, sans-serif;
    padding: var(--media-dialog-backdrop-padding, 0);
    background: var(--media-dialog-backdrop-background,
      linear-gradient(to bottom, rgba(20, 20, 30, 0.7) 50%, rgba(20, 20, 30, 0.9))
    );
    /* Needs to use !important to prevent overwrite of media-chrome */
    transition: var(--media-dialog-transition-open, visibility .2s, opacity .2s) !important;
    transform: var(--media-dialog-transform-open, none) !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;
  }

  :host(:not([open])) {
    /* Needs to use !important to prevent overwrite of media-chrome */
    transition: var(--media-dialog-transition-close, visibility .1s, opacity .1s) !important;
    transform: var(--media-dialog-transform-close, none) !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }

  :focus-visible {
    box-shadow: 0 0 0 2px rgba(27, 127, 204, 0.9);
  }

  .dialog {
    position: relative;
    box-sizing: border-box;
    background: var(--media-dialog-background, none);
    padding: var(--media-dialog-padding, 10px);
    width: min(320px, 100%);
    word-wrap: break-word;
    max-height: 100%;
    overflow: auto;
    text-align: center;
    line-height: 1.4;
  }
`,sG=si.createElement("template");sG.innerHTML=`
  <style>
    ${sK}
  </style>

  <div class="dialog">
    <slot></slot>
  </div>
`;var sW=class extends sr.HTMLElement{constructor(){var e;super(),this.attachShadow({mode:"open"}),null==(e=this.shadowRoot)||e.appendChild(this.constructor.template.content.cloneNode(!0))}show(){this.setAttribute("open",""),this.dispatchEvent(new CustomEvent("open",{composed:!0,bubbles:!0})),sq(this)}close(){this.hasAttribute("open")&&(this.removeAttribute("open"),this.dispatchEvent(new CustomEvent("close",{composed:!0,bubbles:!0})),this._previouslyFocusedElement instanceof HTMLElement&&this._previouslyFocusedElement.focus())}attributeChangedCallback(e,t,r){"open"===e&&t!==r&&(null!=r?this.show():this.close())}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","dialog"),this.hasAttribute("open")&&sq(this)}};function sq(e){let t=new CustomEvent("initfocus",{composed:!0,bubbles:!0,cancelable:!0});if(e.dispatchEvent(t),t.defaultPrevented)return;let r=e.querySelector("[autofocus]:not([disabled])");!r&&e.tabIndex>=0&&(r=e),r||(r=function e(t){let r=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"});r.push('[tabindex]:not([disabled]):not([tabindex=""])');let i=null==t?void 0:t.querySelector(r.join(", "));if(!i&&"attachShadow"in Element.prototype){let n=(null==t?void 0:t.querySelectorAll("*"))||[];for(let a=0;a<n.length&&!(n[a].tagName&&n[a].shadowRoot&&(i=e(n[a].shadowRoot)));a++);}return i}(e.shadowRoot)),e._previouslyFocusedElement=si.activeElement,si.activeElement instanceof HTMLElement&&si.activeElement.blur(),e.addEventListener("transitionend",()=>{r instanceof HTMLElement&&r.focus({preventScroll:!0})},{once:!0})}sW.styles=sK,sW.template=sG,sW.observedAttributes=["open"],sr.customElements.get("media-dialog")||(sr.customElements.define("media-dialog",sW),sr.MediaDialog=sW);var sY=sW,s$=si.createElement("template");s$.innerHTML=`
  <style>
    ${sY.styles}

    .close {
      background: none;
      color: inherit;
      border: none;
      padding: 0;
      font: inherit;
      cursor: pointer;
      outline: inherit;
      width: 28px;
      height: 28px;
      position: absolute;
      top: 1rem;
      right: 1rem;
    }
  </style>

  <div class="dialog">
    <slot></slot>
  </div>

  <slot name="close">
    <button class="close" tabindex="0">
      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </slot>
`;var sz=class extends sY{constructor(){var e,t;super(),null==(t=null==(e=this.shadowRoot)?void 0:e.querySelector(".close"))||t.addEventListener("click",()=>{this.close()})}};sz.template=s$,sr.customElements.get("mxp-dialog")||(sr.customElements.define("mxp-dialog",sz),sr.MxpDialog=sz);var sX=new WeakMap,sQ=class{constructor(e,t){this.element=e,this.type=t,this.element.addEventListener(this.type,this);let r=sX.get(this.element);r&&r.set(this.type,this)}set(e){if("function"==typeof e)this.handleEvent=e.bind(this.element);else if("object"==typeof e&&"function"==typeof e.handleEvent)this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let t=sX.get(this.element);t&&t.delete(this.type)}}static for(e){sX.has(e.element)||sX.set(e.element,new Map);let t=e.attributeName.slice(2),r=sX.get(e.element);return r&&r.has(t)?r.get(t):new sQ(e.element,t)}},sZ=new Map,sJ=new WeakMap,s0=new WeakMap,s1=class{constructor(e,t,r){this.strings=e,this.values=t,this.processor=r,this.stringsKey=this.strings.join("\x01")}get template(){if(sZ.has(this.stringsKey))return sZ.get(this.stringsKey);{let e=si.createElement("template"),t=this.strings.length-1;return e.innerHTML=this.strings.reduce((e,r,i)=>e+r+(i<t?`{{ ${i} }}`:""),""),sZ.set(this.stringsKey,e),e}}renderInto(e){let t=this.template;if(sJ.get(e)!==t){sJ.set(e,t);let r=new oc(t,this.values,this.processor);s0.set(e,r),e instanceof ob?e.replace(...r.children):e.appendChild(r);return}let i=s0.get(e);i&&i.update(this.values)}},s2={processCallback(e,t,r){var i,n,a;if(r)for(let[o,s]of t){o in r&&(function(e,t){if(e instanceof oy&&t instanceof Element){let r=e.element;return r[e.attributeName]!==t&&(e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),r[e.attributeName]=t),!0}return!1}(n=s,a=null!=(i=r[o])?i:"")||function(e,t){if("boolean"==typeof t&&e instanceof oy){let r=e.attributeNamespace,i=e.element.hasAttributeNS(r,e.attributeName);return t!==i&&(e.booleanValue=t),!0}return!1}(n,a)||n instanceof oy&&n.attributeName.startsWith("on")&&(sQ.for(n).set(a),n.element.removeAttributeNS(n.attributeNamespace,n.attributeName),1)||!1===a&&n instanceof ob&&(n.replace(""),1)||a instanceof s1&&n instanceof ob&&(a.renderInto(n),1)||a instanceof DocumentFragment&&n instanceof ob&&(a.childNodes.length&&n.replace(...a.childNodes),1)||function(e,t){if(e instanceof oy){let r=e.attributeNamespace,i=e.element.getAttributeNS(r,e.attributeName);return String(t)!==i&&(e.value=String(t))}e.value=String(t)}(n,a))}}};function s5(e,...t){return new s1(e,t,s2)}var s4=si.createElement("template");"innerHTML"in s4&&(s4.innerHTML=sV);var s3=e=>s5`
  <style>
    ${sH}
  </style>
  ${le(e)}
`,s8=e=>[rj.LIVE,rj.LL_LIVE].includes(e.streamType),s6=e=>[rj.DVR,rj.LL_DVR].includes(e.streamType),s7=e=>s8(e)||s6(e),s9=e=>{let t=e.hotKeys?`${e.hotKeys}`:"";return s7(e)&&(t+=" noarrowleft noarrowright"),t},le=e=>{var t,r,i,n,a,o,s,l,u,d,c,h,f,p,m,v,g,y,b,E,T,_,A,S,k,w,L,I,D,R,O,P;let C;return s5`
  <media-theme
    template="${null!=(t=e.theme)?t:s4.content.children[0]}"
    class="${!!e.secondaryColor&&"two-tone"}"
    stream-type="${s7(e)?"live":"on-demand"}"
    target-live-window="${!!s6(e)&&1}"
    hotkeys="${s9(e)||!1}"
    nohotkeys="${e.noHotKeys||!e.hasSrc||e.isDialogOpen||!1}"
    disabled="${!e.hasSrc||e.isDialogOpen}"
    audio="${null!=(r=e.audio)&&r}"
    style="${null!=(P={"--primary-color":e.primaryColor,"--secondary-color":e.secondaryColor},C="",Object.entries(P).forEach(([e,t])=>{null!=t&&(C+=`${e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}: ${t}; `)}),i=C?C.trim():void 0)&&i}"
    default-showing-captions="${!e.defaultHiddenCaptions}"
    forward-seek-offset="${null!=(n=e.forwardSeekOffset)&&n}"
    backward-seek-offset="${null!=(a=e.backwardSeekOffset)&&a}"
    playback-rates="${null!=(o=e.playbackRates)&&o}"
    default-show-remaining-time="${null!=(s=e.defaultShowRemainingTime)&&s}"
    title="${null!=(l=e.title)&&l}"
    poster="${""!==e.poster&&null!=(u=e.poster)&&u}"
    placeholder="${null!=(d=e.placeholder)&&d}"
    exportparts="top, center, bottom, layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer, poster, seek-live, play, button, seek-backward, seek-forward, mute, captions, airplay, pip, fullscreen, cast, playback-rate, volume, range, time, display"
  >
    <mux-video
      slot="media"
      crossorigin="${null!=(c=e.crossOrigin)?c:""}"
      playsinline
      autoplay="${null!=(h=e.autoplay)&&h}"
      muted="${null!=(f=e.muted)&&f}"
      loop="${null!=(p=e.loop)&&p}"
      preload="${null!=(m=e.preload)&&m}"
      debug="${null!=(v=e.debug)&&v}"
      prefer-cmcd="${null!=(g=e.preferCmcd)&&g}"
      disable-cookies="${null!=(y=e.disableCookies)&&y}"
      prefer-playback="${null!=(b=e.preferPlayback)&&b}"
      start-time="${null!=e.startTime&&e.startTime}"
      beacon-collection-domain="${null!=(E=e.beaconCollectionDomain)&&E}"
      player-software-name="${null!=(T=e.playerSoftwareName)&&T}"
      player-software-version="${null!=(_=e.playerSoftwareVersion)&&_}"
      env-key="${null!=(A=e.envKey)&&A}"
      stream-type="${null!=(S=e.streamType)&&S}"
      custom-domain="${null!=(k=e.customDomain)&&k}"
      src="${e.src?e.src:!!e.playbackId&&sg(e.playbackId,{maxResolution:e.maxResolution,domain:e.customDomain,token:e.tokens.playback})}"
      cast-src="${e.src?e.src:!!e.playbackId&&sg(e.playbackId,{maxResolution:e.maxResolution,domain:e.customDomain,token:e.tokens.playback})}"
      cast-stream-type="${!!s8(e)&&"live"}"
      exportparts="video"
    >
      ${e.storyboard?s5`<track label="thumbnails" default kind="metadata" src="${e.storyboard}" />`:s5``}
    </mux-video>
    <mxp-dialog
      no-auto-hide
      open="${null!=(w=e.isDialogOpen)&&w}"
      onclose="${e.onCloseErrorDialog}"
      oninitfocus="${e.onInitFocusDialog}"
    >
      ${null!=(L=e.dialog)&&L.title?s5`<h3>${e.dialog.title}</h3>`:s5``}
      <p>
        ${null==(I=e.dialog)?void 0:I.message}
        ${null!=(D=e.dialog)&&D.linkUrl?s5`<a
              href="${e.dialog.linkUrl}"
              target="_blank"
              rel="external noopener"
              aria-label="${null!=(R=e.dialog.linkText)?R:""} ${sa("(opens in a new window)")}"
              >${null!=(O=e.dialog.linkText)?O:e.dialog.linkUrl}</a
            >`:s5``}
      </p>
    </mxp-dialog>
  </media-theme>
`};function lt(e,t,r,i,n){var a,o,s;let l={},u={};switch(e.code){case rN.MEDIA_ERR_NETWORK:switch(l.title=sa("Network Error",n),l.message=e.message,null==(a=e.data)?void 0:a.response.code){case 412:l.title=sa("Video is not currently available",n),l.message=sa("The live stream or video file are not yet ready.",n),u.message=sa("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",n),u.file="412-not-playable.md";break;case 404:l.title=sa("Video does not exist",n),l.message="",u.message=sa("This playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",n),u.file="404-not-found.md";break;case 403:{if(l.title=sa("Invalid playback URL",n),l.message=sa("The video URL or playback-token are formatted with incorrect or incomplete information.",n),u.message=sa("403 error trying to access this playback URL. If this is a signed URL, you might need to provide a playback-token.",n),u.file="missing-signed-tokens.md",!i)break;let{exp:d,aud:c,sub:h}=su(i),f=Date.now()>1e3*d,p={timeStyle:"medium",dateStyle:"medium"};if(f){l.title=sa("Video URL has expired",n),l.message=sa("The videos secured playback-token has expired.",n),u.message=sa("This playback is using signed URLs and the playback-token has expired. Expired at: {expiredDate}. Current time: {currentDate}.",n).format({expiredDate:new Intl.DateTimeFormat(sn.code,p).format(1e3*d),currentDate:new Intl.DateTimeFormat(sn.code,p).format(Date.now())}),u.file="403-expired-token.md";break}if(h!==r){l.title=sa("Video URL is formatted incorrectly",n),l.message=sa("The videos playback ID does not match the one encoded in the playback-token.",n),u.message=sa("The specified playback ID {playbackId} and the playback ID encoded in the playback-token {tokenPlaybackId} do not match.",n).format({playbackId:r,tokenPlaybackId:h}),u.file="403-playback-id-mismatch.md";break}if("v"!==c){l.title=sa("Video URL is formatted incorrectly",n),l.message=sa("The playback-token is formatted with incorrect information.",n),u.message=sa("The playback-token has an incorrect aud value: {tokenType}. aud value should be v.",n).format({tokenType:c}),u.file="403-incorrect-aud-value.md";break}u.message=sa("403 error trying to access this playback URL. If this is a signed playback ID, the token might not have been generated correctly.",n),u.file="403-malformatted-token.md"}}break;case rN.MEDIA_ERR_DECODE:{let{message:m}=e;l={title:sa("Media Error",n),message:m},u.file="media-decode-error.md";break}case rN.MEDIA_ERR_SRC_NOT_SUPPORTED:{let v=null==(s=null==(o=e.data)?void 0:o.response)?void 0:s.code;if(v>=400&&v<500){e.code=rN.MEDIA_ERR_NETWORK,e.data={response:{code:v}},{dialog:l,devlog:u}=lt(e,t,r,i);break}l={title:sa("Source Not Supported",n),message:e.message},u.file="media-src-not-supported.md";break}default:l={title:sa("Error",n),message:e.message}}return t&&(l={title:sa("Your device appears to be offline",n),message:sa("Check your internet connection and try reloading this video.",n)}),{dialog:l,devlog:u}}var lr,li,ln,la,lo,ls,ll,lu,ld,lc,lh,lf,lp,lm,lv,lg,ly,lb,lE,lT=Object.values(rj),l_={SRC:"src",POSTER:"poster"},lA={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",TITLE:"title",PLACEHOLDER:"placeholder"},lS=Object.values(oe),lk=Object.values(l_),lw=Object.values(lA),lL={dialog:void 0,isDialogOpen:!1},lI=class extends sC{constructor(){super(),oG(this,ls),oG(this,lu),oG(this,lc),oG(this,lf),oG(this,lm),oG(this,lg),oG(this,lb),oG(this,lr,!1),oG(this,li,{}),oG(this,ln,!0),oG(this,la,new sT(this,"hotkeys")),oG(this,lo,{...lL,onCloseErrorDialog:()=>oq(this,lc,lh).call(this,{dialog:void 0,isDialogOpen:!1}),onInitFocusDialog:e=>{sp(this,si.activeElement)||e.preventDefault()}}),this.attachShadow({mode:"open"}),oq(this,lu,ld).call(this),this.isConnected&&oq(this,ls,ll).call(this)}static get observedAttributes(){var e;return[...null!=(e=sC.observedAttributes)?e:[],...lk,...lS,...lw]}get theme(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("media-theme")}get mediaController(){var e,t;return null==(t=null==(e=this.theme)?void 0:e.shadowRoot)?void 0:t.querySelector("media-controller")}get metadataFromAttrs(){return this.getAttributeNames().filter(e=>e.startsWith("metadata-")).reduce((e,t)=>{let r=this.getAttribute(t);return null!==r&&(e[t.replace(/^metadata-/,"").replace(/-/g,"_")]=r),e},{})}connectedCallback(){var e;let t=null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video");t&&(t.metadata=this.metadataFromAttrs)}attributeChangedCallback(e,t,r){var i;switch(oK(this,lr)||oq(this,ls,ll).call(this),super.attributeChangedCallback(e,t,r),e){case lA.HOTKEYS:oK(this,la).value=r;break;case lA.THUMBNAIL_TIME:null!=r&&this.tokens.thumbnail&&sA(sa("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time.").format({}));break;case lA.THUMBNAIL_TOKEN:{let{aud:n}=su(r);r&&"t"!==n&&sA(sa("The provided thumbnail-token should have audience value 't' instead of '{aud}'.").format({aud:n}));break}case lA.STORYBOARD_TOKEN:{let{aud:a}=su(r);r&&"s"!==a&&sA(sa("The provided storyboard-token should have audience value 's' instead of '{aud}'.").format({aud:a}));break}case oe.PLAYBACK_ID:null!=r&&r.includes("?token")&&sS(sa("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:r})),this.streamType?null==this.streamType||lT.includes(this.streamType)||sk({file:"invalid-stream-type.md",message:sa("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand`, `live`, `ll-live`, `live:dvr`, or `ll-live:dvr`").format({streamType:this.streamType})}):sk({file:"invalid-stream-type.md",message:String(sa("No stream-type value supplied. Defaulting to `on-demand`. Please provide stream-type as either: `on-demand`, `live`, `ll-live`, `live:dvr`, or `ll-live:dvr`"))})}[oe.PLAYBACK_ID,l_.SRC,lA.PLAYBACK_TOKEN].includes(e)&&t!==r&&oW(this,lo,{...oK(this,lo),...lL}),oq(this,lf,lp).call(this,{[null!=(i=sE[e])?i:e.replace(/[-_]([a-z])/g,(e,t)=>t.toUpperCase())]:r})}get preferCmcd(){var e;return null!=(e=this.getAttribute(oe.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?rK.includes(e)?this.setAttribute(oe.PREFER_CMCD,e):sA(`Invalid value for preferCmcd. Must be one of ${rK.join()}`):this.removeAttribute(oe.PREFER_CMCD))}get hasPlayed(){var e,t;return null!=(t=null==(e=this.mediaController)?void 0:e.hasAttribute("media-has-played"))&&t}get inLiveWindow(){var e;return null==(e=this.mediaController)?void 0:e.hasAttribute("media-time-is-live")}get _hls(){var e;return null==(e=this.media)?void 0:e._hls}get mux(){var e;return null==(e=this.media)?void 0:e.mux}get playbackId(){var e;return null!=(e=this.getAttribute(oe.PLAYBACK_ID))?e:void 0}set playbackId(e){e?this.setAttribute(oe.PLAYBACK_ID,e):this.removeAttribute(oe.PLAYBACK_ID)}get src(){var e,t;return this.playbackId?null!=(e=lD(this,l_.SRC))?e:void 0:null!=(t=this.getAttribute(l_.SRC))?t:void 0}set src(e){e?this.setAttribute(l_.SRC,e):this.removeAttribute(l_.SRC)}get poster(){var e;let t=this.getAttribute(l_.POSTER);return null!=t?t:this.playbackId&&!this.audio?sy(this.playbackId,{domain:this.customDomain,thumbnailTime:null!=(e=this.thumbnailTime)?e:this.startTime,token:this.tokens.thumbnail}):void 0}set poster(e){e||""===e?this.setAttribute(l_.POSTER,e):this.removeAttribute(l_.POSTER)}get storyboardSrc(){var e;return null!=(e=this.getAttribute(lA.STORYBOARD_SRC))?e:void 0}set storyboardSrc(e){e?this.setAttribute(lA.STORYBOARD_SRC,e):this.removeAttribute(lA.STORYBOARD_SRC)}get storyboard(){if(!this.audio&&(!this.streamType||![rj.LIVE,rj.LL_LIVE,rj.DVR,rj.LL_DVR].includes(this.streamType))){if(this.storyboardSrc&&!this.tokens.storyboard)return this.storyboardSrc;if(this.playbackId)return sb(this.playbackId,{domain:this.customDomain,token:this.tokens.storyboard})}}get audio(){return this.hasAttribute(lA.AUDIO)}set audio(e){if(!e){this.removeAttribute(lA.AUDIO);return}this.setAttribute(lA.AUDIO,"")}get hotkeys(){return oK(this,la)}get nohotkeys(){return this.hasAttribute(lA.NOHOTKEYS)}set nohotkeys(e){if(!e){this.removeAttribute(lA.NOHOTKEYS);return}this.setAttribute(lA.NOHOTKEYS,"")}get thumbnailTime(){return ss(this.getAttribute(lA.THUMBNAIL_TIME))}set thumbnailTime(e){this.setAttribute(lA.THUMBNAIL_TIME,`${e}`)}get title(){var e;return null!=(e=this.getAttribute(lA.TITLE))?e:""}set title(e){e!==this.title&&(e?this.setAttribute(lA.TITLE,e):this.removeAttribute("title"),super.title=e)}get placeholder(){var e;return null!=(e=lD(this,lA.PLACEHOLDER))?e:""}set placeholder(e){this.setAttribute(lA.PLACEHOLDER,`${e}`)}get primaryColor(){var e;return null!=(e=this.getAttribute(lA.PRIMARY_COLOR))?e:void 0}set primaryColor(e){this.setAttribute(lA.PRIMARY_COLOR,`${e}`)}get secondaryColor(){var e;return null!=(e=this.getAttribute(lA.SECONDARY_COLOR))?e:"rgb(0 0 0 / .75)"}set secondaryColor(e){this.setAttribute(lA.SECONDARY_COLOR,`${e}`)}get defaultShowRemainingTime(){return this.hasAttribute(lA.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(e){e?this.setAttribute(lA.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(lA.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(lA.PLAYBACK_RATES))return this.getAttribute(lA.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map(e=>Number(e)).filter(e=>!Number.isNaN(e)).sort((e,t)=>e-t)}set playbackRates(e){if(!e){this.removeAttribute(lA.PLAYBACK_RATES);return}this.setAttribute(lA.PLAYBACK_RATES,e.join(" "))}get forwardSeekOffset(){var e;return null!=(e=ss(this.getAttribute(lA.FORWARD_SEEK_OFFSET)))?e:10}set forwardSeekOffset(e){this.setAttribute(lA.FORWARD_SEEK_OFFSET,`${e}`)}get backwardSeekOffset(){var e;return null!=(e=ss(this.getAttribute(lA.BACKWARD_SEEK_OFFSET)))?e:10}set backwardSeekOffset(e){this.setAttribute(lA.BACKWARD_SEEK_OFFSET,`${e}`)}get defaultHiddenCaptions(){return this.hasAttribute(lA.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(e){e?this.setAttribute(lA.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(lA.DEFAULT_HIDDEN_CAPTIONS)}get playerSoftwareName(){var e;return null!=(e=this.getAttribute(oe.PLAYER_SOFTWARE_NAME))?e:"mux-player"}get playerSoftwareVersion(){var e;return null!=(e=this.getAttribute(oe.PLAYER_SOFTWARE_VERSION))?e:sv}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(oe.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(oe.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(oe.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var e;return null!=(e=this.getAttribute(oe.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(oe.MAX_RESOLUTION,e):this.removeAttribute(oe.MAX_RESOLUTION))}get customDomain(){var e;return null!=(e=this.getAttribute(oe.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(oe.CUSTOM_DOMAIN,e):this.removeAttribute(oe.CUSTOM_DOMAIN))}get envKey(){var e;return null!=(e=lD(this,oe.ENV_KEY))?e:void 0}set envKey(e){this.setAttribute(oe.ENV_KEY,`${e}`)}get debug(){return null!=lD(this,oe.DEBUG)}set debug(e){e?this.setAttribute(oe.DEBUG,""):this.removeAttribute(oe.DEBUG)}get disableCookies(){return null!=lD(this,oe.DISABLE_COOKIES)}set disableCookies(e){e?this.setAttribute(oe.DISABLE_COOKIES,""):this.removeAttribute(oe.DISABLE_COOKIES)}get streamType(){return lD(this,oe.STREAM_TYPE)}set streamType(e){this.setAttribute(oe.STREAM_TYPE,`${e}`)}get startTime(){return ss(lD(this,oe.START_TIME))}set startTime(e){this.setAttribute(oe.START_TIME,`${e}`)}get preferPlayback(){let e=this.getAttribute(oe.PREFER_PLAYBACK);if(e===rH.MSE||e===rH.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===rH.MSE||e===rH.NATIVE?this.setAttribute(oe.PREFER_PLAYBACK,e):this.removeAttribute(oe.PREFER_PLAYBACK))}get metadata(){var e;return null==(e=this.media)?void 0:e.metadata}set metadata(e){if(oK(this,lr)||oq(this,ls,ll).call(this),!this.media){sS("underlying media element missing when trying to set metadata. metadata will not be set.");return}this.media.metadata={...this.metadataFromAttrs,...e}}async addCuePoints(e){var t;if(oK(this,lr)||oq(this,ls,ll).call(this),!this.media){sS("underlying media element missing when trying to addCuePoints. cuePoints will not be added.");return}return null==(t=this.media)?void 0:t.addCuePoints(e)}get activeCuePoint(){var e;return null==(e=this.media)?void 0:e.activeCuePoint}get cuePoints(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.cuePoints)?t:[]}get tokens(){let e=this.getAttribute(lA.PLAYBACK_TOKEN),t=this.getAttribute(lA.THUMBNAIL_TOKEN),r=this.getAttribute(lA.STORYBOARD_TOKEN);return{...oK(this,li),...null!=e?{playback:e}:{},...null!=t?{thumbnail:t}:{},...null!=r?{storyboard:r}:{}}}set tokens(e){oW(this,li,null!=e?e:{})}get playbackToken(){var e;return null!=(e=this.getAttribute(lA.PLAYBACK_TOKEN))?e:void 0}set playbackToken(e){this.setAttribute(lA.PLAYBACK_TOKEN,`${e}`)}get thumbnailToken(){var e;return null!=(e=this.getAttribute(lA.THUMBNAIL_TOKEN))?e:void 0}set thumbnailToken(e){this.setAttribute(lA.THUMBNAIL_TOKEN,`${e}`)}get storyboardToken(){var e;return null!=(e=this.getAttribute(lA.STORYBOARD_TOKEN))?e:void 0}set storyboardToken(e){this.setAttribute(lA.STORYBOARD_TOKEN,`${e}`)}addTextTrack(e,t,r,i){var n;let a=null==(n=this.media)?void 0:n.nativeEl;if(a)return r1(a,e,t,r,i)}removeTextTrack(e){var t;let r=null==(t=this.media)?void 0:t.nativeEl;if(r){let i;return void(null==(i=Array.prototype.find.call(r.querySelectorAll("track"),t=>t.track===e))||i.remove())}}get textTracks(){var e;return null==(e=this.media)?void 0:e.textTracks}};function lD(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}lr=new WeakMap,li=new WeakMap,ln=new WeakMap,la=new WeakMap,lo=new WeakMap,ls=new WeakSet,ll=function(){var e,t,r;if(!oK(this,lr)){oW(this,lr,!0),oq(this,lf,lp).call(this);try{if(customElements.upgrade(this.theme),!(this.theme instanceof sr.HTMLElement))throw""}catch{sS("<media-theme> failed to upgrade!")}try{if(customElements.upgrade(this.media),!(this.media instanceof or))throw""}catch{sS("<mux-video> failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof e0))throw""}catch{sS("<media-controller> failed to upgrade!")}r=this,r.querySelectorAll(":scope > track").forEach(e=>{var t;null==(t=r.media)||t.append(e.cloneNode())}),sD.forEach(e=>{var t;null==(t=r.media)||t.addEventListener(e,e=>{r.dispatchEvent(new Event(e.type))})}),oq(this,lm,lv).call(this),oq(this,lg,ly).call(this),oW(this,ln,null==(t=null==(e=this.mediaController)?void 0:e.hasAttribute("user-inactive"))||t),oq(this,lb,lE).call(this)}},lu=new WeakSet,ld=function(){var e,t;try{null==(e=null==window?void 0:window.CSS)||e.registerProperty({name:"--primary-color",syntax:"<color>",inherits:!0,initialValue:"white"}),null==(t=null==window?void 0:window.CSS)||t.registerProperty({name:"--secondary-color",syntax:"<color>",inherits:!0,initialValue:"transparent"})}catch{}},lc=new WeakSet,lh=function(e){Object.assign(oK(this,lo),e),oq(this,lf,lp).call(this)},lf=new WeakSet,lp=function(e={}){var t,r;(function(e,t){e.renderInto(t)})(s3((t={...oK(this,lo),...e},{src:!this.playbackId&&this.src,playbackId:this.playbackId,hasSrc:!!this.playbackId||!!this.src,poster:this.poster,storyboard:this.storyboard,storyboardSrc:this.getAttribute(lA.STORYBOARD_SRC),placeholder:this.getAttribute("placeholder"),theme:this.getAttribute("theme"),thumbnailTime:!this.tokens.thumbnail&&this.thumbnailTime,autoplay:this.autoplay,crossOrigin:this.crossOrigin,loop:this.loop,noHotKeys:this.hasAttribute(lA.NOHOTKEYS),hotKeys:this.getAttribute(lA.HOTKEYS),muted:this.muted,paused:this.paused,preload:this.preload,envKey:this.envKey,preferCmcd:this.preferCmcd,debug:this.debug,disableCookies:this.disableCookies,tokens:this.tokens,beaconCollectionDomain:this.beaconCollectionDomain,maxResolution:this.maxResolution,metadata:this.metadata,playerSoftwareName:this.playerSoftwareName,playerSoftwareVersion:this.playerSoftwareVersion,startTime:this.startTime,preferPlayback:this.preferPlayback,audio:this.audio,streamType:this.streamType,primaryColor:this.primaryColor,secondaryColor:this.secondaryColor,forwardSeekOffset:this.forwardSeekOffset,backwardSeekOffset:this.backwardSeekOffset,defaultHiddenCaptions:this.defaultHiddenCaptions,defaultShowRemainingTime:this.defaultShowRemainingTime,playbackRates:this.getAttribute(lA.PLAYBACK_RATES),customDomain:null!=(r=this.getAttribute(oe.CUSTOM_DOMAIN))?r:void 0,title:this.getAttribute(lA.TITLE),...t})),this.shadowRoot)},lm=new WeakSet,lv=function(){var e;let t=e=>{let{detail:t}=e;if(t instanceof rN||(t=new rN(t.message,t.code,t.fatal)),!(null!=t&&t.fatal)){sA(t),t.data&&sA(`${t.name} data:`,t.data);return}let{dialog:r,devlog:i}=lt(t,!window.navigator.onLine,this.playbackId,this.playbackToken);i.message&&sk(i),sS(t),t.data&&sS(`${t.name} data:`,t.data),oq(this,lc,lh).call(this,{isDialogOpen:!0,dialog:r})};this.addEventListener("error",t),this.media&&(this.media.errorTranslator=(e={})=>{var t,r,i;if(!(null!=(t=this.media)&&t.error))return e;let{devlog:n}=lt(null==(r=this.media)?void 0:r.error,!window.navigator.onLine,this.playbackId,this.playbackToken,!1);return{player_error_code:null==(i=this.media)?void 0:i.error.code,player_error_message:n.message?String(n.message):e.player_error_message}}),null==(e=this.media)||e.addEventListener("error",e=>{var t,r;let{detail:i}=e;if(!i){let{message:n,code:a}=null!=(r=null==(t=this.media)?void 0:t.error)?r:{};i=new rN(n,a)}null!=i&&i.fatal&&this.dispatchEvent(new CustomEvent("error",{detail:i}))})},lg=new WeakSet,ly=function(){var e,t,r,i;let n=()=>oq(this,lf,lp).call(this);null==(t=null==(e=this.media)?void 0:e.textTracks)||t.addEventListener("addtrack",n),null==(i=null==(r=this.media)?void 0:r.textTracks)||i.addEventListener("removetrack",n)},lb=new WeakSet,lE=function(){var e,t,r;let i=this.mediaController,n=/.*Version\/.*Safari\/.*/.test(navigator.userAgent);if(n)return;let a,o=new WeakMap,s=()=>this.streamType&&[rj.LIVE,rj.LL_LIVE].includes(this.streamType)&&!this.secondaryColor&&this.offsetWidth>=800,l=(e,t,r=!1)=>{s()||Array.from(e&&e.activeCues||[]).forEach(e=>{if(!(!e.snapToLines||e.line<-5||e.line>=0&&e.line<10)){if(!t||this.paused){let i=e.text.split(`
`).length,a=n?-2:-3;this.streamType&&[rj.LIVE,rj.LL_LIVE].includes(this.streamType)&&(a=n?-1:-2);let s=a-i;(e.line!==s||r)&&(o.has(e)||o.set(e,e.line),e.line=s-1,e.line=s)}else setTimeout(()=>{e.line=o.get(e)||"auto"},500)}})},u=()=>{var e;l(a,null!=(e=null==i?void 0:i.hasAttribute("user-inactive"))&&e)},d=()=>{var e;let t=Array.from((null==(e=null==i?void 0:i.media)?void 0:e.textTracks)||[]).filter(e=>["subtitles","captions"].includes(e.kind)&&"showing"===e.mode)[0];t!==a&&(null==a||a.removeEventListener("cuechange",u)),null==(a=t)||a.addEventListener("cuechange",u),l(a,oK(this,ln))};if(d(),null==(e=null==i?void 0:i.media)||e.textTracks.addEventListener("change",d),null==(t=null==i?void 0:i.media)||t.textTracks.addEventListener("addtrack",d),navigator.userAgent.includes("Chrome/")){let c=()=>{l(a,oK(this,ln),!0),this.paused||window.requestAnimationFrame(c)};null==(r=null==i?void 0:i.media)||r.addEventListener("playing",()=>{c()})}null==i||i.addEventListener("userinactivechange",()=>{let e=null==i?void 0:i.hasAttribute("user-inactive");oK(this,ln)!==e&&(oW(this,ln,e),l(a,oK(this,ln)))})},sr.customElements.get("mux-player")||(sr.customElements.define("mux-player",lI),sr.MuxPlayerElement=lI);var lR={className:"class",classname:"class",htmlFor:"for",crossOrigin:"crossorigin",viewBox:"viewBox",playsInline:"playsinline",autoPlay:"autoplay",playbackRate:"playbackrate"},lO=e=>null==e,lP=(e,t)=>!lO(t)&&e in t,lC=e=>e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),lM=(e,t)=>{if(!("boolean"==typeof t&&!t))return lP(e,lR)?lR[e]:/[A-Z]/.test(e)?lC(e):e},lx=(e,t)=>"boolean"==typeof e?"":e,lN=(e={})=>Object.entries(e).reduce((e,[t,r])=>{let i=lM(t,r);if(!i)return e;let n=lx(r,t);return e[i]=n,e},{}),lU=(...e)=>{let t=(0,a.useRef)(null);return(0,a.useEffect)(()=>{e.forEach(e=>{e&&("function"==typeof e?e(t.current):e.current=t.current)})},[e]),t},lF=Object.prototype.hasOwnProperty,lB=(e,t)=>{if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(Array.isArray(e))return!!Array.isArray(t)&&e.length===t.length&&e.some((e,r)=>t[r]===e);let r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(let n=0;n<r.length;n++)if(!lF.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0},lj=(e,t,r)=>!lB(t,e[r]),lH=(e,t,r)=>{e[r]=t},lV=(e,t,r,i=lH,n=lj)=>(0,a.useEffect)(()=>{let a=null==r?void 0:r.current;a&&n(a,t,e)&&i(a,t,e)},[null==r?void 0:r.current,t]),lK=(()=>{try{return"1.8.0"}catch{}return"UNKNOWN"})(),lG=a.forwardRef(({children:e,...t},r)=>a.createElement("mux-player",lN({...t,ref:r}),e)),lW=(e,t,r)=>(0,a.useEffect)(()=>{let i=null==t?void 0:t.current;if(!(!i||!r))return i.addEventListener(e,r),()=>{i.removeEventListener(e,r)}},[null==t?void 0:t.current,r]),lq=(e,t)=>{let{onAbort:r,onCanPlay:i,onCanPlayThrough:n,onEmptied:a,onLoadStart:o,onLoadedData:s,onLoadedMetadata:l,onProgress:u,onDurationChange:d,onVolumeChange:c,onRateChange:h,onResize:f,onWaiting:p,onPlay:m,onPlaying:v,onTimeUpdate:g,onPause:y,onSeeking:b,onSeeked:E,onStalled:T,onSuspend:_,onEnded:A,onError:S,metadata:k,tokens:w,paused:L,playbackId:I,playbackRates:D,currentTime:R,...O}=t;return lV("playbackRates",D,e),lV("metadata",k,e),lV("tokens",w,e),lV("playbackId",I,e),lV("paused",L,e,(e,t)=>{null!=t&&(t?e.pause():e.play())},(e,t,r)=>(!e.hasAttribute("autoplay")||!!e.hasPlayed)&&lj(e,t,r)),lV("currentTime",null!=R?R:0,e),lW("abort",e,r),lW("canplay",e,i),lW("canplaythrough",e,n),lW("emptied",e,a),lW("loadstart",e,o),lW("loadeddata",e,s),lW("loadedmetadata",e,l),lW("progress",e,u),lW("durationchange",e,d),lW("volumechange",e,c),lW("ratechange",e,h),lW("resize",e,f),lW("waiting",e,p),lW("play",e,m),lW("playing",e,v),lW("timeupdate",e,g),lW("pause",e,y),lW("seeking",e,b),lW("seeked",e,E),lW("stalled",e,T),lW("suspend",e,_),lW("ended",e,A),lW("error",e,S),[O]},lY=a.forwardRef((e,t)=>{let r=(0,a.useRef)(null),i=lU(r,t),[n]=lq(r,e);return a.createElement(lG,{ref:i,playerSoftwareName:"mux-player-react",playerSoftwareVersion:lK,...n})})}}]);