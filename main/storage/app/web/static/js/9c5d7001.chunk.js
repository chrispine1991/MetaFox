"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-poll-components-PollItem-EmbedCard-index"],{18037:function(e,t,a){a.d(t,{Z:function(){return y}});var r=a(63366),l=a(87462),n=a(67294),o=a(86010),i=a(94780),s=a(59711),c=a(91647),d=a(36622),m=a(81719),u=a(78884),p=a(1588),g=a(34867);function v(e){return(0,g.Z)("MuiFormControlLabel",e)}let f=(0,p.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]);var b=a(56594),h=a(85893);let w=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],Z=e=>{let{classes:t,disabled:a,labelPlacement:r,error:l}=e,n={root:["root",a&&"disabled",`labelPlacement${(0,d.Z)(r)}`,l&&"error"],label:["label",a&&"disabled"]};return(0,i.Z)(n,v,t)},x=(0,m.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[{[`& .${f.label}`]:t.label},t.root,t[`labelPlacement${(0,d.Z)(a.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>(0,l.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${f.disabled}`]:{cursor:"default"}},"start"===t.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===t.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===t.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${f.label}`]:{[`&.${f.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),E=n.forwardRef(function(e,t){let a=(0,u.Z)({props:e,name:"MuiFormControlLabel"}),{className:i,componentsProps:d={},control:m,disabled:p,disableTypography:g,label:v,labelPlacement:f="end"}=a,E=(0,r.Z)(a,w),y=(0,s.Z)(),S=p;void 0===S&&void 0!==m.props.disabled&&(S=m.props.disabled),void 0===S&&y&&(S=y.disabled);let _={disabled:S};["checked","name","onChange","value","inputRef"].forEach(e=>{void 0===m.props[e]&&void 0!==a[e]&&(_[e]=a[e])});let A=(0,b.Z)({props:a,muiFormControl:y,states:["error"]}),N=(0,l.Z)({},a,{disabled:S,labelPlacement:f,error:A.error}),R=Z(N),C=v;return null==C||C.type===c.Z||g||(C=(0,h.jsx)(c.Z,(0,l.Z)({component:"span",className:R.label},d.typography,{children:C}))),(0,h.jsxs)(x,(0,l.Z)({className:(0,o.default)(R.root,i),ownerState:N,ref:t},E,{children:[n.cloneElement(m,_),C]}))});var y=E},52922:function(e,t,a){a.d(t,{Z:function(){return Z}});var r=a(63366),l=a(87462),n=a(67294),o=a(86010),i=a(94780),s=a(81719),c=a(78884),d=a(1588),m=a(34867);function u(e){return(0,m.Z)("MuiFormGroup",e)}(0,d.Z)("MuiFormGroup",["root","row","error"]);var p=a(59711),g=a(56594),v=a(85893);let f=["className","row"],b=e=>{let{classes:t,row:a,error:r}=e;return(0,i.Z)({root:["root",a&&"row",r&&"error"]},u,t)},h=(0,s.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.row&&t.row]}})(({ownerState:e})=>(0,l.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),w=n.forwardRef(function(e,t){let a=(0,c.Z)({props:e,name:"MuiFormGroup"}),{className:n,row:i=!1}=a,s=(0,r.Z)(a,f),d=(0,p.Z)(),m=(0,g.Z)({props:a,muiFormControl:d,states:["error"]}),u=(0,l.Z)({},a,{row:i,error:m.error}),w=b(u);return(0,v.jsx)(h,(0,l.Z)({className:(0,o.default)(w.root,n),ownerState:u,ref:t},s))});var Z=w},42853:function(e,t,a){a.d(t,{Z:function(){return y}});var r,l=a(63366),n=a(87462),o=a(67294),i=a(86010),s=a(94780),c=a(56594),d=a(59711),m=a(81719),u=a(36622),p=a(1588),g=a(34867);function v(e){return(0,g.Z)("MuiFormHelperText",e)}let f=(0,p.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var b=a(78884),h=a(85893);let w=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Z=e=>{let{classes:t,contained:a,size:r,disabled:l,error:n,filled:o,focused:i,required:c}=e,d={root:["root",l&&"disabled",n&&"error",r&&`size${(0,u.Z)(r)}`,a&&"contained",i&&"focused",o&&"filled",c&&"required"]};return(0,s.Z)(d,v,t)},x=(0,m.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.size&&t[`size${(0,u.Z)(a.size)}`],a.contained&&t.contained,a.filled&&t.filled]}})(({theme:e,ownerState:t})=>(0,n.Z)({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${f.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${f.error}`]:{color:(e.vars||e).palette.error.main}},"small"===t.size&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),E=o.forwardRef(function(e,t){let a=(0,b.Z)({props:e,name:"MuiFormHelperText"}),{children:o,className:s,component:m="p"}=a,u=(0,l.Z)(a,w),p=(0,d.Z)(),g=(0,c.Z)({props:a,muiFormControl:p,states:["variant","size","disabled","error","filled","focused","required"]}),v=(0,n.Z)({},a,{component:m,contained:"filled"===g.variant||"outlined"===g.variant,variant:g.variant,size:g.size,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required}),f=Z(v);return(0,h.jsx)(x,(0,n.Z)({as:m,ownerState:v,className:(0,i.default)(f.root,s),ref:t},u,{children:" "===o?r||(r=(0,h.jsx)("span",{className:"notranslate",children:"â€‹"})):o}))});var y=E},41470:function(e,t,a){var r=a(87462),l=a(63366),n=a(67294),o=a(52922),i=a(84771),s=a(42293),c=a(17361),d=a(49669),m=a(85893);let u=["actions","children","defaultValue","name","onChange","value"],p=n.forwardRef(function(e,t){let{actions:a,children:p,defaultValue:g,name:v,onChange:f,value:b}=e,h=(0,l.Z)(e,u),w=n.useRef(null),[Z,x]=(0,s.Z)({controlled:b,default:g,name:"RadioGroup"});n.useImperativeHandle(a,()=>({focus:()=>{let e=w.current.querySelector("input:not(:disabled):checked");e||(e=w.current.querySelector("input:not(:disabled)")),e&&e.focus()}}),[]);let E=(0,i.Z)(t,w),y=(0,d.Z)(v),S=n.useMemo(()=>({name:y,onChange(e){x(e.target.value),f&&f(e,e.target.value)},value:Z}),[y,f,x,Z]);return(0,m.jsx)(c.Z.Provider,{value:S,children:(0,m.jsx)(o.Z,(0,r.Z)({role:"radiogroup",ref:E},h,{children:p}))})});t.Z=p},22870:function(e,t,a){a.d(t,{Z:function(){return M}});var r=a(85597),l=a(77029),n=a(30120),o=a(21822),i=a(81719),s=a(67294),c=a(19382),d=a(91647),m=a(86010),u=a(22410),p=a(73327);let g=(0,u.Z)(e=>(0,p.Z)({root:{border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,padding:e.spacing(2)},answerWrapper:{},answerItem:{marginLeft:0,marginBottom:e.spacing(1),"&:last-child":{marginBottom:e.spacing(0)}},answerItemChecked:{color:e.palette.text.primary},radioAnswer:{padding:e.spacing(0,1)},radioAnswerChecked:{color:`${e.palette.primary.main} !important`},votedAnswer:{fontWeight:"bold",color:e.palette.text.primary},btnToggle:{color:e.palette.text.primary,fontWeight:"bold","&:hover":{textDecoration:"underline"}},formControl:{},button:{fontWeight:"bold",textTransform:"capitalize"},cancelButton:{fontWeight:"bold",marginLeft:e.spacing(1)},progressAnswerWrapper:{paddingRight:e.spacing(1),"&:last-child":{marginBottom:e.spacing(0)}},progressAnswer:{color:e.palette.text.hint,marginBottom:e.spacing(1),"&:last-child":{marginBottom:e.spacing(0)}},answerLabel:{},yourAnswer:{fontWeight:"bold"},progressItem:{height:e.spacing(2.5),display:"flex",alignItems:"center"},progress:{flex:1,minWidth:0,margin:0,marginRight:e.spacing(1),height:`${e.spacing(1)} !important`,borderRadius:e.spacing(.5),backgroundColor:e.palette.action.selected,"& > div":{borderRadius:e.spacing(.5)}},progressPercent:{width:20,marginLeft:e.spacing(1),color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13)},voteStatistic:{marginTop:e.spacing(2),color:e.palette.text.hint,fontSize:e.mixins.pxToRem(13),display:"flex"},buttonWrapper:{display:"flex",marginTop:e.spacing(2)},totalVote:{"&:hover":{textDecoration:"underline"}},activeTotalVote:{fontSize:e.mixins.pxToRem(13),color:e.palette.primary.main,cursor:"pointer","&:hover":{textDecoration:"underline"}},timeLeft:{marginLeft:e.spacing(2)},buttonWrapperVoteCancel:{display:"flex"},noShowAnswer:{display:"flex",alignItems:"center",paddingBottom:e.spacing(2),"&:last-child":{paddingBottom:0}},iconNoShowAnswer:{padding:e.spacing(1,1,1,0),fontSize:e.mixins.pxToRem(16)}}),{name:"PollVoteForm"}),v=({item:e,classes:t,settings:a})=>{return s.createElement("div",{className:t.progressAnswer},s.createElement(d.Z,{variant:e.voted?"h5":"body1",className:(0,m.default)(e.voted?t.votedAnswer:t.answerLabel)},e.answer),s.createElement("div",{className:t.progressItem},s.createElement(c.Z,{variant:"determinate",value:e.vote_percentage||0,className:t.progress}),(null==a?void 0:a.publicVote)&&s.createElement(d.Z,{component:"span",className:t.progressPercent},`${e.vote_percentage}%`)))},f=({item:e,classes:t,settings:a})=>{let{user:n}=(0,r.kPO)(),o=()=>{if(null==e?void 0:e.some_votes){var t;return!!(null==e?void 0:null===(t=e.some_votes)||void 0===t?void 0:t.map(e=>e.id===n.id))}return!1},i=(null==a?void 0:a.isMultiple)?"ico-square-o":" ico-circle-o";return(null==a?void 0:a.isMultiple)&&e.voted&&o()&&(i="ico-check-square"),!(null==a?void 0:a.isMultiple)&&e.voted&&o()&&(i="ico-check-circle"),s.createElement("div",{className:t.noShowAnswer},s.createElement(l.zb,{className:t.iconNoShowAnswer,icon:i}),s.createElement(d.Z,{variant:e.voted?"h5":"body1",className:(0,m.default)(e.voted?t.votedAnswer:t.answerLabel)},e.answer))};var b=(0,s.memo)(function({displayAnswers:e,answers:t,publicVote:a,LIMIT_ANSWER_DISPLAY:l,hideAnswers:n,isMultiple:o,isCanViewVoteAnswer:i,isCanViewResult:c}){let d=g(),{i18n:m}=(0,r.OgA)(),[u,p]=s.useState(!1);return s.createElement("div",{className:d.progressAnswerWrapper},(null==e?void 0:e.length)>0&&e.map((e,t)=>{return i&&c?s.createElement(v,{key:t,item:e,classes:d,settings:{publicVote:a}}):s.createElement(f,{key:t,item:e,classes:d,settings:{publicVote:a,isMultiple:o}})}),u&&(null==n?void 0:n.length)>0?n.map((e,t)=>{return i&&c?s.createElement(v,{key:t,item:e,classes:d,settings:{publicVote:a}}):s.createElement(f,{key:t,item:e,classes:d,settings:{publicVote:a,isMultiple:o}})}):null,t.length>l?s.createElement("span",{className:d.btnToggle,onClick:()=>p(!u),role:"button"},m.formatMessage({id:u?"view_less":"view_more"})):null)}),h=a(49960),w=a(18037),Z=a(52922),x=a(42853),E=a(20399),y=a(41470),S=a(12902);let _=({displayAnswers:e,classes:t,isClosed:a,handleCheckboxChange:r,viewMore:l,hideAnswers:n})=>{return s.createElement(Z.Z,null,(null==e?void 0:e.length)>0?e.map(e=>s.createElement(w.Z,{key:e.id.toString(),className:t.answerItem,control:s.createElement(h.Z,{disabled:a,color:"primary",size:"small",name:e.id.toString(),onChange:r,className:t.radioAnswer}),label:e.answer})):null,l&&(null==n?void 0:n.length)>0?n.map(e=>s.createElement(w.Z,{key:e.id.toString(),className:t.answerItem,control:s.createElement(h.Z,{disabled:a,color:"primary",size:"small",name:e.id.toString(),onChange:r,className:t.radioAnswer}),label:e.answer})):null)},A=({classes:e,value:t,handleRadioChange:a,displayAnswers:r,isClosed:l,viewMore:n,hideAnswers:o})=>{return s.createElement(y.Z,{className:e.answerWrapper,value:t,onChange:a},(null==r?void 0:r.length)>0&&r.map(t=>s.createElement(w.Z,{className:e.answerItem,key:t.id.toString(),value:t.id.toString(),control:s.createElement(E.Z,{className:e.radioAnswer,color:"primary",size:"small",disabled:l}),label:t.answer})),n&&(null==o?void 0:o.length)>0?o.map(t=>s.createElement(w.Z,{className:e.answerItem,key:t.id.toString(),value:t.id.toString(),control:s.createElement(E.Z,{className:e.radioAnswer,color:"primary",size:"small",disabled:l}),label:t.answer})):null)};var N=(0,s.memo)(function({voteAgain:e,pollId:t,identity:a,displayAnswers:l,isClosed:n,hideAnswers:i,isMultiple:c,answers:d,LIMIT_ANSWER_DISPLAY:m,isPending:u,canVote:p,canVoteAgain:v,isEmbedInFeed:f,setVoteAgain:b,setShowPoll:h,setIsCanViewVoteAnswer:w,canViewResultAfter:Z,setIsCanViewResult:E}){let y=g(),{i18n:N,dispatch:R,useSession:C}=(0,r.OgA)(),{loggedIn:M}=C(),[T,P]=s.useState(!1),[k,I]=s.useState(""),[V,L]=s.useState(""),[W,z]=s.useState([]),F=e=>{let{value:t}=e.target,a=parseInt(t);L(t),z([a]),I("")},B=e=>{let{checked:t,name:a}=e.target,r=parseInt(a);t?(I(""),z(e=>(0,S.ZP)(e,e=>{let t=e.findIndex(e=>e===r);t<0&&e.push(r)}))):z(e=>(0,S.ZP)(e,e=>{let t=e.findIndex(e=>e===r);t>-1&&e.splice(t,1)}))},$=()=>{b(!1),h(!1)},D=r=>{if(r.preventDefault(),!W.length)return I(N.formatMessage({id:"please_select_an_option"})),null;R({type:"submitPoll",payload:{voteAgain:e,pollId:t,answers:W,identity:a},meta:{onSuccess:e=>{h(!1),w(null==e?void 0:e.can_view_result_after_vote),E(null==e?void 0:e.can_view_result)}}})};return s.createElement("form",{onSubmit:D},c?s.createElement(_,{displayAnswers:l,classes:y,isClosed:n,handleCheckboxChange:B,viewMore:T,hideAnswers:i}):s.createElement(A,{classes:y,value:V,handleRadioChange:F,displayAnswers:l,isClosed:n,viewMore:T,hideAnswers:i}),d.length>m?s.createElement("span",{className:y.btnToggle,onClick:()=>P(!T),role:"button"},N.formatMessage({id:T?"view_less":"view_more"})):null,k?s.createElement(x.Z,null,k):null,(p||v)&&s.createElement("div",{className:y.buttonWrapper},!u&&M&&s.createElement("div",{className:y.button},s.createElement(o.Z,{type:"submit",variant:"outlined",disabled:n,size:f?"smaller":"medium",color:"primary",sx:{fontWeight:"bold"}},N.formatMessage({id:"vote"}))),e&&s.createElement("div",{className:y.cancelButton},s.createElement(o.Z,{variant:"outlined",disabled:n,size:f?"smaller":"medium",color:"primary",sx:{fontWeight:"bold"},onClick:$},N.formatMessage({id:"cancel"})))))});let R=(0,i.ZP)("span",{name:"PollVoteFormRoot",slot:"flagWrapper"})(({theme:e})=>({marginLeft:"auto","& > .MuiFlag-root":{marginLeft:e.spacing(.5)}})),C=(0,i.ZP)(n.Z,{name:"ClosedStyled"})(({theme:e})=>({"&:before":{color:e.palette.text.secondary,content:'"\xb7"',paddingLeft:"0.25em",paddingRight:"0.25em"}}));function M(e){let{answers:t,statistic:a,closeTime:n,pollId:i,isVoted:c,isMultiple:d,publicVote:m,identity:u,isPending:p,canVoteAgain:v,canVote:f,canViewResult:h,canViewResultAfter:w,canViewResultBefore:Z,isEmbedInFeed:x,isFeatured:E,isSponsor:y,isClosed:S}=e,_=t.sort((e,t)=>{return(null==e?void 0:e.ordering)-(null==t?void 0:t.ordering)}),A=g(),{i18n:M,dialogBackend:T}=(0,r.OgA)(),[P,k]=s.useState(!0),[I,V]=s.useState(!1),[L,W]=s.useState(!1),[z,F]=s.useState(h),B=x?3:_.length,$=_.slice(0,B),D=_.slice(B,_.length);s.useEffect(()=>{z&&(c?W(w):W(Z))},[z,h,c,w,Z]),s.useEffect(()=>{0===a.total_vote&&W(!1)},[a]),s.useEffect(()=>{k(Boolean(!c))},[c]);let q=()=>{V(!0),k(!0)};return s.createElement("div",{className:A.root},P?s.createElement(N,{voteAgain:I,pollId:i,identity:u,displayAnswers:$,isClosed:S,hideAnswers:D,isMultiple:d,answers:_,LIMIT_ANSWER_DISPLAY:B,isPending:p,canVote:f,canVoteAgain:v,isEmbedInFeed:x,setShowPoll:k,setVoteAgain:V,setIsCanViewVoteAnswer:W,setIsCanViewResult:F,canViewResultAfter:w}):s.createElement(b,{displayAnswers:$,answers:_,publicVote:m,LIMIT_ANSWER_DISPLAY:B,hideAnswers:D,isMultiple:d,isCanViewVoteAnswer:L,isCanViewResult:z}),!P&&v&&s.createElement("div",{className:A.buttonWrapper},s.createElement(o.Z,{variant:"outlined",size:x?"smaller":"medium",color:"primary",className:A.button,onClick:q,sx:{fontWeight:"bold"}},M.formatMessage({id:"vote_again"}))),s.createElement("div",{className:A.voteStatistic},L&&z?s.createElement("div",{className:A.activeTotalVote,onClick:()=>T.present({component:"poll.dialog.PeopleWhoVotedAnswer",props:{listAnswers:_}})},M.formatMessage({id:"total_vote"},{value:a.total_vote})):s.createElement(l.$k,{className:A.totalVote,color:"textHint",values:a,display:"total_vote",skipZero:!1}),"0"===n||S?null:s.createElement(l.Lt,{value:n,className:A.timeLeft,shorten:!1}),S?s.createElement(C,{color:"text.hint"},M.formatMessage({id:"closed"})):null,x?s.createElement(R,null,s.createElement(l.K6,{variant:"text",value:E,color:"primary"}),s.createElement(l.k5,{variant:"text",value:y,color:"yellow"})):null))}},97170:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var r=a(61019),l=a(85597),n=a(22870),o=a(77029),i=a(67294),s=a(22410),c=a(73327),d=(0,s.Z)(e=>(0,c.Z)({root:{position:"relative",padding:e.spacing(2),width:"100%"},title:{marginBottom:e.spacing(1)},description:{marginBottom:e.spacing(1)},answerWrapper:{marginTop:e.spacing(1)},actions:{marginTop:e.spacing(2)},actionButton:{marginRight:e.spacing(1)},voteStatistic:{marginTop:e.spacing(2),color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:600,display:"flex"},totalVote:{marginRight:e.spacing(2)},activeTotalVote:{marginRight:e.spacing(2),fontSize:e.mixins.pxToRem(13),color:e.palette.primary.main,fontWeight:600,cursor:"pointer"},formContainer:{marginTop:e.spacing(1)}}),{name:"MuiFeedPollTemplate"}),m=(0,r.Y)(function({item:e,identity:t,answers:a}){let r=d();if(!e)return null;let{question:s,description:c,public_vote:m,close_time:u,statistic:p,id:g,is_multiple:v,extra:f,is_user_voted:b,is_featured:h,is_sponsor:w,is_closed:Z}=e;return i.createElement(o.gu,{variant:"list",bottomSpacing:"normal"},i.createElement("div",{className:r.root},i.createElement(o.Ys,{variant:"h4",lines:2,className:r.title},i.createElement(l.rUS,{to:`/poll/${null==e?void 0:e.id}`,children:s})),c?i.createElement(o.Ys,{variant:"body1",lines:3,color:"textSecondary",className:r.description},i.createElement("div",{dangerouslySetInnerHTML:{__html:c}})):null,i.createElement(n.Z,{isVoted:b,pollId:g,isMultiple:v,answers:a,statistic:p,closeTime:u,publicVote:m,identity:t,canVoteAgain:f.can_change_vote,canVote:f.can_vote,canViewResult:f.can_view_result,isEmbedInFeed:!0,isFeatured:h,isSponsor:w,isClosed:Z,canViewResultAfter:f.can_view_result_after_vote,canViewResultBefore:f.can_view_result_before_vote})))},r.c,{poll_answer:!0})}}]);