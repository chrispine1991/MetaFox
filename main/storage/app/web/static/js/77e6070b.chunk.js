"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-music-blocks-PlaylistDetail-Mobile-Block"],{59765:function(){},8668:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var a=n(85597),o=n(10316),i=n(21241),l=n(77029),r=n(86010),c=n(30120),s=n(71682),m=n(91647),d=n(81719),p=n(67294),u=n(8886);n(59765);let g=(0,d.ZP)(c.Z,{name:"nameSong",shouldForwardProp:e=>"isSelect"!==e})(({theme:e,isSelect:t})=>({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:t?e.palette.primary.main:"light"===e.palette.mode?"#121212":"#fff"})),f=(0,d.ZP)(c.Z,{name:"itemSongStyled"})(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${e.palette.border.secondary}`,padding:e.spacing(1.5,0)})),h=(0,d.ZP)(c.Z,{name:"listStyled"})(({theme:e})=>({"& div:last-child":{borderBottom:0}})),v=(0,a.YUM)(function({song:e,identity:t,handleAction:n,selectedSong:o,setSelectedSong:i,state:l,item:r,isAlbum:c}){let{ItemActionMenu:s}=(0,a.OgA)();if(!r)return;let m=()=>{o.id!==e.id&&i(e)};return p.createElement(f,null,p.createElement(g,{isSelect:(null==o?void 0:o.id)===(null==e?void 0:e.id),onClick:m},e.name),p.createElement(s,{menuName:c?"itemActionMenu":"itemActionMenuOnPlaylist",sx:{ml:2},identity:t,icon:"ico-dottedmore-vertical-o",state:l,handleAction:n}))},()=>{}),y=({songs:e,selectedSong:t,setSelectedSong:n,identity:a,handleAction:o,state:i,isPlaying:l,isAlbum:r})=>{return p.useEffect(()=>{n(e[0])},[]),p.createElement(h,null,e&&e.map((e,a)=>p.createElement(v,{isAlbum:r,song:e,selectedSong:t,setSelectedSong:n,key:a,index:a,identity:`music.entities.music_song.${e.id}`})))};var b=n(22410),x=n(73327);let E=(0,b.Z)(e=>(0,x.Z)({root:{},bgCoverWrapper:{minHeight:"388px",overflow:"hidden",position:"relative"},bgCover:{height:"100%",backgroundImage:"linear-gradient(to top, #aeacac, #121212)",position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:-2},hasBgCover:{},header:{width:"100%",marginLeft:"auto",marginRight:"auto",color:"#fff",paddingTop:e.spacing(3),"& .rhap_container":{backgroundColor:"unset",boxShadow:"none"}},headerInner:{},playlistLabel:{color:"#aeacac"},playlistName:{color:"#fff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginLeft:e.spacing(.5)},imgSong:{width:160,height:160,margin:e.spacing(3,"auto")},audioPlayer:{margin:e.spacing(0,"auto",3),display:"block",backgroundColor:"transparent",boxShadow:"none",outline:"none","& .rhap_progress-section":{flexWrap:"wrap"},"& .rhap_progress-container":{width:"100%",flex:"none",margin:e.spacing(0,0,2),outline:"none",order:1,"& .rhap_progress-bar-show-download":{backgroundColor:e.mixins.backgroundColor("paper"),height:2,"& .rhap_progress-filled":{backgroundColor:e.palette.primary.main},"& .rhap_progress-indicator":{display:"none"}}},"& .rhap_current-time":{order:2,color:"#fff"},"& .rhap_total-time":{marginLeft:"auto",color:"#fff",order:3},"& .rhap_controls-section":{padding:e.spacing(0,2),alignItems:"baseline",flex:"none","& .rhap_main-controls":{flex:"none","& button":{fontSize:32,width:32,height:32,color:"#fff",outline:"none",overflow:"inherit","&.rhap_play-pause-button":{margin:e.spacing(1,5,0)}}},"& .rhap_additional-controls":{flex:"none","& button":{margin:e.spacing(0,0,0,"auto"),fontSize:18,width:18,height:18,color:"#fff",outline:"none"}}}},btnRepeatOn:{color:e.palette.primary.main},btnControlAudio:{fontSize:18,"&.ico-shuffle":{display:"flex",alignItems:"center",cursor:"pointer"}},btnDisable:{color:e.palette.text.secondary,cursor:"not-allowed !important"},viewContainer:{width:"100%",maxWidth:720,marginLeft:"auto",marginRight:"auto",backgroundColor:e.mixins.backgroundColor("paper"),border:e.mixins.border("secondary"),padding:e.spacing(2),position:"relative"},actionMenu:{width:32,height:32,position:"absolute!important",top:e.spacing(1),right:e.spacing(1),"& .ico":{color:e.palette.text.secondary,fontSize:13}},titleWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},pageTitle:{fontWeight:e.typography.fontWeightBold,flex:1,minWidth:0,fontSize:18,lineHeight:1.2,maxHeight:72,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word",wordWrap:"break-word",whiteSpace:"normal",WebkitLineClamp:1,display:"-webkit-box",WebkitBoxOrient:"vertical",textAlign:"center",padding:e.spacing(0,2)},itemFlag:{marginBottom:e.spacing(2)},minorInfo:{marginTop:e.spacing(2),color:"#aeacac",fontSize:13,fontWeight:e.typography.fontWeightBold,textAlign:"center"},author:{display:"flex",marginTop:e.spacing(2)},authorInfo:{margin:e.spacing(0,2.5,0,1.5)},userName:{fontSize:15,fontWeight:"bold",color:e.palette.text.primary,paddingRight:e.spacing(.5)},date:{fontSize:13,color:e.palette.text.secondary,marginTop:e.spacing(.5)},itemContent:{fontSize:15,lineHeight:1.33,marginTop:e.spacing(3),"& p + p":{marginBottom:e.spacing(2.5)}},disabledIcon:{"& .ico":{color:`${e.palette.grey[500]}!important`}}}),{name:"MuiSongViewDetail"});var w=n(27274),S=n(84116),_=n(7390),C=n(1469),k=n.n(C),N=n(96026),Z=n.n(N),z=n(43847);let I=(0,d.ZP)("span",{name:"HeadlineSpan"})(({theme:e})=>({paddingRight:e.spacing(.5),color:e.palette.text.secondary})),A=(0,d.ZP)(z.Z,{name:"OwnerStyled"})(({theme:e})=>({fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary,fontSize:e.mixins.pxToRem(15),"&:hover":{textDecoration:"underline"}})),W=(0,a.Uh$)((0,o.ZP)(function({item:e,user:t,blockProps:n,identity:o,handleAction:d,state:g,isAlbum:f}){var h;let{ItemActionMenu:v,ItemDetailInteraction:b,i18n:x,assetUrl:C,jsxBackend:N,usePageParams:z,dispatch:W}=(0,a.OgA)(),P=E(),[M,O]=p.useState(),T=z(),[B,R]=p.useState([]),[L,D]=p.useState(!1),[H,$]=p.useState(!1),U=(0,a.mbX)(null==e?void 0:e.songs),j=(0,a.z88)(null==e?void 0:e.owner);if(p.useEffect(()=>{$(!0),(null==e?void 0:e.songs)?$(!1):W({type:"music/getListSong",meta:{onSuccess:({data:e})=>{$(!e)}},payload:{identity:o}})},[T]),p.useEffect(()=>{if(k()(null==e?void 0:e.songs)){var t;R(Array.from(Array(null==e?void 0:null===(t=e.songs)||void 0===t?void 0:t.length).keys()))}},[null==e?void 0:e.songs]),!e)return null;let F=(0,w.Q4)(null==e?void 0:e.image,"240",C("music.playlist_no_image")),V=e=>{let t=U.findIndex(e=>{return(null==e?void 0:e.id)===(null==M?void 0:M.id)}),n=B.findIndex(e=>t===e);L?n+e===B.length?O(U[B[0]]):O(U[B[n+e]]):t+e===B.length?O(U[0]):O(U[t+e])},X=e=>{V(1)},G=()=>{(null==M?void 0:M.destination)&&(D(!L),R(e=>{return e.sort((e,t)=>.5-Math.random())}))},Y=N.get("core.block.no_content_with_icon");return p.createElement(i.gO,{blockProps:n,testid:`detailview ${e.resource_name}`},p.createElement(i.sU,null,p.createElement("div",{className:P.root},p.createElement("div",{className:P.bgCoverWrapper},p.createElement("div",{className:P.bgCover}),p.createElement("div",{className:P.header},p.createElement("div",{className:P.headerInner},p.createElement("div",{className:P.titleWrapper},(null==e?void 0:e.is_featured)||(null==e?void 0:e.is_sponsor)?p.createElement("div",{className:P.itemFlag},p.createElement(l.K6,{variant:"itemView",value:null==e?void 0:e.is_featured}),p.createElement(l.k5,{variant:"itemView",value:null==e?void 0:e.is_sponsor})):null,p.createElement(m.Z,{component:"h2",className:P.pageTitle},null==M?void 0:M.name)),p.createElement("div",{className:P.minorInfo},x.formatMessage({id:"value_plays"},{value:e.statistic.total_play})),p.createElement(c.Z,{sx:{display:"flex",justifyContent:"center",mx:2},component:"div",mt:1,fontWeight:600},p.createElement("span",{className:P.playlistLabel},`${x.formatMessage({id:f?"album":"playlist"})}: `),p.createElement("span",{className:P.playlistName},e.name))),p.createElement(l.Gy,{src:F,className:P.imgSong,aspectRatio:"11"}),p.createElement(u.default,{className:(0,r.default)(P.audioPlayer,!(null==M?void 0:M.destination)&&P.disabledIcon),src:null==M?void 0:M.destination,showJumpControls:!1,onEnded:X,showSkipControls:!0,customVolumeControls:[],customControlsSection:[p.createElement(l.zb,{onClick:G,sx:L&&{color:"primary.main"},key:"icon",icon:"ico-shuffle",className:P.btnControlAudio}),u.RHAP_UI.MAIN_CONTROLS,u.RHAP_UI.ADDITIONAL_CONTROLS],onClickNext:e=>V(1),onClickPrevious:e=>V(-1),customIcons:{play:p.createElement(l.zb,{icon:"ico-play"}),pause:p.createElement(l.zb,{icon:"ico-pause"}),previous:p.createElement(l.zb,{icon:"ico-play-prev",className:P.btnControlAudio}),next:p.createElement(l.zb,{icon:"ico-play-next",className:P.btnControlAudio}),loop:p.createElement(l.zb,{icon:"ico-play-repeat",className:P.btnRepeatOn}),loopOff:p.createElement(l.zb,{icon:"ico-play-repeat"})}}))),p.createElement("div",{className:P.viewContainer},p.createElement(v,{identity:o,icon:"ico-dottedmore-vertical-o",state:g,handleAction:d,className:P.actionMenu}),p.createElement("div",{className:P.author},p.createElement(c.Z,{component:"div"},p.createElement(l.Yt,{user:t,size:48})),p.createElement("div",{className:P.authorInfo},p.createElement(a.rUS,{color:"inherit",to:`/user/${null==t?void 0:t.id}`,children:t.full_name,className:P.userName}),(null==j?void 0:j.resource_name)!==(null==t?void 0:t.resource_name)&&p.createElement(I,null,x.formatMessage({id:"to_parent_user"},{icon:()=>p.createElement(l.zb,{icon:"ico-caret-right"}),parent_user:()=>p.createElement(A,{user:j})})),p.createElement(l.Ee,{sx:{color:"text.secondary",mt:.5}},p.createElement(l.r2,{value:null==e?void 0:e.creation_date,format:"MMMM DD, yyyy"}),p.createElement(l.Cd,{value:null==e?void 0:e.privacy,item:null==e?void 0:e.privacy_detail})))),(null==e?void 0:e.description)&&p.createElement(c.Z,{component:"div",mt:2,ml:1},p.createElement(S.ZP,{html:null==e?void 0:e.description})),p.createElement(_.Z,{attachments:null==e?void 0:e.attachments,size:"mini"}),H?p.createElement(c.Z,{component:"div",mt:3,className:P.itemContent},Z()(1,4).map(e=>p.createElement(c.Z,{key:e.toString(),sx:{display:"flex",mt:1,justifyContent:"space-between"}},p.createElement(s.Z,{sx:{flex:1}}),p.createElement(s.Z,{width:"30px",sx:{ml:2}})))):p.createElement(c.Z,{component:"div",mt:3,className:P.itemContent},(null==e?void 0:null===(h=e.songs)||void 0===h?void 0:h.length)?p.createElement(y,{isAlbum:f,songs:U,selectedSong:M,setSelectedSong:O}):p.createElement(Y,{image:"ico-music-list",title:"there_are_no_songs_to_be_played"})),p.createElement(b,{identity:o,handleAction:d})))))}));var P=(0,a.j4Z)({extendBlock:W,defaults:{placeholder:"Search",blockProps:{variant:"plained",titleComponent:"h2",titleVariant:"subtitle1",titleColor:"textPrimary",noFooter:!0,noHeader:!0,blockStyle:{},contentStyle:{borderRadius:"base"},headerStyle:{},footerStyle:{}}}})},7390:function(e,t,n){var a=n(85597),o=n(77029),i=n(81719),l=n(67294);let r=(0,i.ZP)("div",{name:"attachmentTitle"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18),marginTop:e.spacing(2),color:e.palette.text.secondary,fontWeight:e.typography.fontWeightBold})),c=(0,i.ZP)("div",{name:"attachment"})(({theme:e})=>({width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-between"})),s=(0,i.ZP)("div",{name:"attachmentItemWrapper"})(({theme:e})=>({marginTop:e.spacing(2),flexGrow:0,flexShrink:0,flexBasis:"calc(50% - 8px)",minWidth:300})),m=({attachments:e,size:t})=>{let{i18n:n}=(0,a.OgA)(),i=(0,a.mbX)(e);return i.length?l.createElement(l.Fragment,null,l.createElement(r,null,n.formatMessage({id:"attachments"})),l.createElement(c,null,i.map(e=>{return l.createElement(s,{key:e.id.toString()},l.createElement(o.M$,{fileName:e.file_name,downloadUrl:e.download_url,isImage:e.is_image,fileSizeText:e.file_size_text,size:t,image:null==e?void 0:e.image}))}))):null};t.Z=m},10316:function(e,t,n){n.d(t,{ZP:function(){return c}});var a=n(85597),o=n(27361),i=n.n(o);let l=(0,a.rMH)({},()=>({})),r=(0,a.$jX)(function(e,t){let n=i()(e,t.identity);if(!n)return{};let a=n.songs?n.songs.map(t=>i()(e,t)).filter(Boolean):[];return{item:n,songs:a,user:i()(e,n.user)}});function c(e){return r(l(e))}}}]);