"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-photo-components-StatusComposerAddPhotoButton"],{90995:function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var a=o(85597),n=o(27361),s=o.n(n),i=o(18721),r=o.n(i),l=o(67294),c=o(79924);let p=({setting:e,acl:t,forceAcceptVideo:o,profileSettings:a})=>{return!o&&s()(t,"photo.photo.create")&&s()(e,"feed.types.photo_set.can_create_feed")&&(!(a&&r()(a,"photo_share_photos"))||a.photo_share_photos)},d=({setting:e,acl:t,profileSettings:o})=>{return s()(t,"video.video.create")&&s()(e,"feed.types.photo_set.can_create_feed")&&(!(o&&r()(o,"video_share_videos"))||o.video_share_videos)},h=({setting:e,acl:t,forceAcceptVideo:o,profileSettings:a})=>{let n=[],s={};return p({setting:e,acl:t,forceAcceptVideo:o,profileSettings:a})&&(n.push("image/*"),s.photo=!0),d({setting:e,acl:t,profileSettings:a})&&(n.push("video/*"),s.video=!0),{acceptTypes:n.join(", "),canUploadTypes:s}};function u(e){let{i18n:t,getSetting:o,getAcl:n}=(0,a.OgA)(),s=o(),i=n(),{control:r,disabled:p,label:d,forceAcceptVideo:u=!1,subject:_,parentIdentity:f}=e,m=(0,a.z88)(f),v=l.useRef(),g=e=>{e.currentTarget.value=null},{acceptTypes:b,canUploadTypes:k}=h({setting:s,acl:i,forceAcceptVideo:u,profileSettings:(null==_?void 0:_.profile_settings)||(null==m?void 0:m.profile_settings)}),[y,C]=(0,c.Z)(e.composerRef,v,k);if(b.length)return l.createElement(l.Fragment,null,l.createElement(r,{disabled:p,testid:"attachPhoto",onClick:C,icon:"ico-photos-alt-o",label:d,title:t.formatMessage({id:p?"this_cant_be_combined":"upload_media"}),canUploadTypes:k}),l.createElement("input",{onChange:y,multiple:!0,onClick:g,"data-testid":"inputAttachPhoto",ref:v,className:"srOnly",type:"file",accept:b}))}}}]);